define("common:widget/lib/juicer/juicer.origin.js",function(e,t,n){var i=function(){var e=[].slice.call(arguments);return e.push(i.options),e[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&e[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(t,n){var i=document,r=i&&i.getElementById(n);e[0]=r?r.value||r.innerHTML:t}),1==arguments.length?i.compile.apply(i,e):arguments.length>=2?i.to_html.apply(i,e):void 0},r={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return r.escapehash[e]},escaping:function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,this.escapereplace)},detection:function(e){return"undefined"==typeof e?"":e}},o=function(e){if("undefined"!=typeof console){if(console.warn)return void console.warn(e);if(console.log)return void console.log(e)}throw e},s=function(e,t){if(e=e!==Object(e)?{}:e,e.__proto__)return e.__proto__=t,e;var n=function(){},i=Object.create?Object.create(t):new(n.prototype=t,n);for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i};i.__cache={},i.version="0.6.5-stable",i.settings={},i.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},i.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:s({__escapehtml:r,__throw:o,__juicer:i},{})},i.tagInit=function(){var e=i.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+i.tags.operationClose,t=i.tags.operationOpen+"\\/each"+i.tags.operationClose,n=i.tags.operationOpen+"if\\s*([^}]*?)"+i.tags.operationClose,r=i.tags.operationOpen+"\\/if"+i.tags.operationClose,o=i.tags.operationOpen+"else"+i.tags.operationClose,s=i.tags.operationOpen+"else if\\s*([^}]*?)"+i.tags.operationClose,a=i.tags.interpolateOpen+"([\\s\\S]+?)"+i.tags.interpolateClose,c=i.tags.noneencodeOpen+"([\\s\\S]+?)"+i.tags.noneencodeClose,p=i.tags.commentOpen+"[^}]*?"+i.tags.commentClose,l=i.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+i.tags.operationClose,u=i.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+i.tags.operationClose;i.settings.forstart=new RegExp(e,"igm"),i.settings.forend=new RegExp(t,"igm"),i.settings.ifstart=new RegExp(n,"igm"),i.settings.ifend=new RegExp(r,"igm"),i.settings.elsestart=new RegExp(o,"igm"),i.settings.elseifstart=new RegExp(s,"igm"),i.settings.interpolate=new RegExp(a,"igm"),i.settings.noneencode=new RegExp(c,"igm"),i.settings.inlinecomment=new RegExp(p,"igm"),i.settings.rangestart=new RegExp(l,"igm"),i.settings.include=new RegExp(u,"igm")},i.tagInit(),i.set=function(e,t){var n=this,i=function(e){return e.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(e){return"\\"+e})},r=function(e,t){var r=e.match(/^tag::(.*)$/i);return r?(n.tags[r[1]]=i(t),void n.tagInit()):void(n.options[e]=t)};if(2===arguments.length)return void r(e,t);if(e===Object(e))for(var o in e)e.hasOwnProperty(o)&&r(o,e[o])},i.register=function(e,t){var n=this.options._method;return n.hasOwnProperty(e)?!1:n[e]=t},i.unregister=function(e){var t=this.options._method;return t.hasOwnProperty(e)?delete t[e]:void 0},i.template=function(e){var t=this;this.options=e,this.__interpolate=function(e,t,n){var i,r=e.split("|"),o=r[0]||"";return r.length>1&&(e=r.shift(),i=r.shift().split(","),o="_method."+i.shift()+".call({}, "+[e].concat(i)+")"),"<%= "+(t?"_method.__escapehtml.escaping":"")+"("+(n&&n.detection===!1?"":"_method.__escapehtml.detection")+"("+o+")) %>"},this.__removeShell=function(e,n){var r=0;return e=e.replace(i.settings.forstart,function(e,t,n,i){var n=n||"value",i=i&&i.substr(1),o="i"+r++;return"<% ~function() {for(var "+o+" in "+t+") {if("+t+".hasOwnProperty("+o+")) {var "+n+"="+t+"["+o+"];"+(i?"var "+i+"="+o+";":"")+" %>"}).replace(i.settings.forend,"<% }}}(); %>").replace(i.settings.ifstart,function(e,t){return"<% if("+t+") { %>"}).replace(i.settings.ifend,"<% } %>").replace(i.settings.elsestart,function(){return"<% } else { %>"}).replace(i.settings.elseifstart,function(e,t){return"<% } else if("+t+") { %>"}).replace(i.settings.noneencode,function(e,i){return t.__interpolate(i,!1,n)}).replace(i.settings.interpolate,function(e,i){return t.__interpolate(i,!0,n)}).replace(i.settings.inlinecomment,"").replace(i.settings.rangestart,function(e,t,n,i){var o="j"+r++;return"<% ~function() {for(var "+o+"="+n+";"+o+"<"+i+";"+o+"++) {{var "+t+"="+o+"; %>"}).replace(i.settings.include,function(e,t,n){return"<%= _method.__juicer("+t+", "+n+"); %>"}),n&&n.errorhandling===!1||(e="<% try { %>"+e,e+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),e},this.__toNative=function(e,t){return this.__convert(e,!t||t.strip)},this.__lexicalAnalyze=function(e){var t=[],n=[],r="",o=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],s=function(e,t){if(Array.prototype.indexOf&&e.indexOf===Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},a=function(e,r){if(r=r.match(/\w+/gim)[0],-1===s(t,r)&&-1===s(o,r)&&-1===s(n,r)){if("undefined"!=typeof window&&"function"==typeof window[r]&&window[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("undefined"!=typeof global&&"function"==typeof global[r]&&global[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("function"==typeof i.options._method[r]||i.options._method.hasOwnProperty(r))return n.push(r),e;t.push(r)}return e};e.replace(i.settings.forstart,a).replace(i.settings.interpolate,a).replace(i.settings.ifstart,a).replace(i.settings.elseifstart,a).replace(i.settings.include,a).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,a);for(var c=0;c<t.length;c++)r+="var "+t[c]+"=_."+t[c]+";";for(var c=0;c<n.length;c++)r+="var "+n[c]+"=_method."+n[c]+";";return"<% "+r+" %>"},this.__convert=function(e,t){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=t!==!1?e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(e,n){var i=this;return n&&n.loose===!1||(e=this.__lexicalAnalyze(e)+e),e=this.__removeShell(e,n),e=this.__toNative(e,n),this._render=new Function("_, _method",e),this.render=function(e,n){return n&&n===t.options._method||(n=s(n,t.options._method)),i._render.call(this,e,n)},this}},i.compile=function(e,t){t&&t===this.options||(t=s(t,this.options));try{var n=this.__cache[e]?this.__cache[e]:new this.template(this.options).parse(e,t);return t&&t.cache===!1||(this.__cache[e]=n),n}catch(i){return o("Juicer Compile Exception: "+i.message),{render:function(){}}}},i.to_html=function(e,t,n){return n&&n===this.options||(n=s(n,this.options)),this.compile(e,n).render(t,n._method)},"undefined"!=typeof n&&n.exports?n.exports=i:this.juicer=i});
;define("common:widget/lib/juicer/juicer.js",function(i,e,t){var s=t.exports=i("common:widget/lib/juicer/juicer.origin.js"),o=i("common:widget/js/util/https/https.js");s.register("__2ssl__",o.autoTrans)});
;define("common:widget/js/ui/pager/pager.js",function(e,t,a){var r=e("common:widget/js/util/tangram/tangram.js"),i=e("common:widget/js/ui/base/base.js");a.exports=new i(function(){var e=this;e.currentPage=1,e.totalPage=1,e.viewSize=10,e.currentPagePos=4,e.labelFirst="\u9996\u9875",e.labelPrev="\u4e0a\u4e00\u9875",e.labelNext="\u4e0b\u4e00\u9875",e.labelLast="\u5c3e\u9875",e.ellipsis=!1,e.tplURL="##{pageNum}",e.tplLabelNormal="#{pageNum}",e.tplLabelCurrent="#{pageNum}",e.tplEllipsis='<span class="pager-more">...</span>',e.currentPage=Math.max(e.currentPage,1)}).extend({_init:function(e){try{var t=this;r.each(e,function(e,a){r.isFunction(a)?t.on(e,a):t[e]=a})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/ui/pager/pager.js",method:"",ln:30})}},_toHTMLString:function(){function e(e,a,i){return i?r.string.format('<a href="'+t.tplURL+'" data-index="#{pageNum}" class="pager-'+a+'">'+i+"</a>",{pageNum:e}):""}if(this.totalPage<2)return"";var t=this,a=['<div class="pager'+(t.ellipsis?" pager-ellipsis":"")+'">'],i=t.totalPage<t.viewSize||t.currentPage<=t.currentPagePos?1:Math.min(t.currentPage-t.currentPagePos,t.totalPage-t.viewSize+1);t.ellipsis&&1==i&&t.currentPage>1&&(i=2);var n=Math.min(t.totalPage,i+t.viewSize-1),s=t.currentPage>1?"":" disabled";t.ellipsis&&n==t.totalPage&&t.currentPage<t.totalPage&&(n=t.totalPage-1,i=Math.max(1,n-t.viewSize+1));var l=[e(1,"first"+(t.ellipsis&&1==i&&t.currentPage>1?" disabled":s),t.labelFirst),e(t.currentPage-1,"pre"+s,t.labelPrev)];t.ellipsis&&(l=[l[1],l[0]],i>2&&l.push(t.tplEllipsis)),a=a.concat(l);for(var g=i;n>=g;g++)a.push(g==t.currentPage?'<b class="pager-current">'+r.string.format(t.tplLabelCurrent,{pageNum:g})+"</b>":e(g,"normal",t.tplLabelNormal));return s=t.currentPage<t.totalPage?"":" disabled",l=[e(parseInt(t.currentPage)+1,"next"+s,t.labelNext),e(t.totalPage,"last"+s,t.labelLast)],t.ellipsis&&(l=[l[1],l[0]],n<t.totalPage-1&&l.unshift(t.tplEllipsis)),a=a.concat(l),a.push("</div>"),a.join("")},init:function(){try{this.render().fire("load");var e=this,t=r(e.target);t.size()&&"render"!=e.status&&(e.status="render",t.delegate("a[data-index]","click",function(t){try{e.currentPage=r(this).data("index"),e.fire("pagechange",{event:t,target:this})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/pager/pager.js",method:"",ln:94})}}))}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/ui/pager/pager.js",method:"",ln:96})}},render:function(e){e&&this._init(e);{var t=this;r(t.target).html(t._toHTMLString())}return t}})});
;define("common:widget/js/ui/combobox/combobox.js",function(t,e,i){var o=t("common:widget/lib/jquery/jquery.js"),n=t("common:widget/js/ui/base/base.js");t("common:widget/lib/jquery.ui/jquery.ui.autocomplete.js");var a=n().extend({init:function(t){try{this.target=o(t.target),this.width=parseInt(t.width)||120,this.wrapper=o("<span/>").addClass("ik-combobox").insertAfter(this.target),t.skin&&this.wrapper.addClass(t.skin),this.target.hide(),this.render()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/combobox/combobox.js",method:"",ln:25})}},render:function(){{var t=this,e=this.target.children(":selected");e.val()?e.text():""}this.input=o("<input/>").css("width","1px").appendTo(this.wrapper).val(e.text()).attr("title","").prop("readonly",!0).addClass("ik-combobox-input").autocomplete({delay:0,minLength:0,source:o.proxy(this,"_source")}).on("autocompleteopen",function(e,i){t.fire("open",{event:e,ui:i})}).on("autocompleteclose",function(e,i){t.fire("close",{event:e,ui:i})}).on("autocompleteselect",function(e,i){i.item.option.selected=!0,t.target.trigger("change"),t.fire("select",e,{item:i.item.option})}).on("click",function(){try{o(this).next().trigger("click")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/combobox/combobox.js",method:"",ln:59})}});var i=!1;this.toggle=o("<a/>").attr("tabIndex",-1).addClass("ik-combobox-toggle").appendTo(this.wrapper).mousedown(function(){i=t.input.autocomplete("widget").is(":visible")}).click(function(){try{t.input.focus(),i||t.input.autocomplete("search","")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/combobox/combobox.js",method:"",ln:75})}}),this.instance=this.input.data("ui-autocomplete"),this.input.width(this.width-this.wrapper.outerWidth());var n=this.instance.menu.element.addClass("ik-combobox-menu");n.css("min-width",this.wrapper.outerWidth()-1-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right"))-parseInt(n.css("border-left-width"))-parseInt(n.css("border-right-width"))+"px"),t.target.on("change",function(){t.input.val(t.getText())})},getText:function(){return this.target.children(":selected").text()},getValue:function(){return this.target.children(":selected").val()},setByValue:function(t){var e=this,i=e.target.find('[value="'+t+'"]').text();e.input.data("ui-autocomplete")._value(i),e.input.data("ui-autocomplete")._change()},_source:function(t,e){e(this.target.children("option").map(function(){var t=o(this).text();return{label:t,value:t,option:this}}))}});i.exports=a});
;define("common:widget/js/ui/address/address.js",function(e,t,i){var n=e("common:widget/js/util/tangram/tangram.js"),a=e("common:widget/js/ui/base/base.js");i.exports=a(function(e){var t=this;if(n.extend(t,{optionTpl:'<option value="#{name}">#{name}</option>',optionDefaultTpl:'<option value="">#{name}</option>',value:{},defaultValue:{},defaultWord:"",filterMap:{},dataCache:null},e),t.filterValue)for(var i=0,a=t.filterValue.length;a>i;i++)t.filterMap[t.filterValue[i]]=!0}).extend({init:function(e){try{var t=this;"object"==typeof e&&t._init(e),window.arrCity?(t.dataCache=window.arrCity,t.render()):n.sio("https://passport.baidu.com/js/sitedata_bas.js?v=1.1").callByBrowser(function(){window.arrCity&&(t.dataCache=window.arrCity,t.render())},{charset:"gbk"})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/ui/address/address.js",method:"",ln:74})}},buildOptions:function(e,t){var i=this;return e&&t&&t.length?(e.empty(),n.each(t,function(t,a){if(!i.filterMap[a.name])if(a.name==i.defaultWord){var o="";o=n.isFunction(i.optionDefaultTpl)?i.optionDefaultTpl(a):n.string(i.optionDefaultTpl).format(a),n(o).appendTo(e)}else n(n.string(i.optionTpl).format(a)).appendTo(e)}),void e.show()):void e.empty()},render:function(){var e,t=this,i=n(t.container[0]),a=n(t.container[1]).hide(),o=n(t.container[2]).hide();i.change(function(){-1==this.selectedIndex&&(this.selectedIndex=0),e=t.dataCache[this.selectedIndex].sub,a.add(o).hide(),t.buildOptions(a,e),a.trigger("change")}),a.change(function(){-1==this.selectedIndex&&(this.selectedIndex=0);var i=e[this.selectedIndex].sub;t.buildOptions(o.hide(),i),o.trigger("change")}),t.buildOptions(i,t.dataCache),i.add(a).add(o).change(function(){t.value[this.id]=n(this).val(),this.id==t.container[0]?(t.value[t.container[1]]="",t.value[t.container[2]]=""):this.id==t.container[1]&&(t.value[t.container[2]]=""),t.fire("change")}).each(function(e,i){t.defaultValue[e]&&n(i).val(t.defaultValue[e]).change()}),t.fire("change")}}),n.fn.address=function(e){return this.size()==this.filter("select").size()==3?(e.container=this,(new t).init(e),this):this.each(function(){var i=this,a=i.id||"ik_address"+ ++n.guid,o=["_province","_city","_county"];e.container=[],n.each(o,function(t,o){e.container.push(n("<select>",{id:a+o}).appendTo(i))}),(new t).init(e)})}});
;define("common:widget/js/logic/phone-bind/phone-bind.js",function(t,e,n){var i=t("common:widget/js/util/tangram/tangram.js"),s=(t("common:widget/js/ui/dialog/dialog.js"),t("common:widget/js/util/event/event.js"),t("common:widget/js/ui/base/base.js")),o=t("common:widget/js/logic/submit/submit.js"),a=s(function(t){if(t&&t.container){var e=this;e.error={oldPhoneErr:"\u539f\u624b\u673a\u8f93\u5165\u9519\u8bef",phoneEmpty:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",phoneErr:"\u8c8c\u4f3c\u624b\u673a\u53f7\u7801\u8f93\u9519\u4e86\uff0c\u786e\u8ba4\u4e00\u4e0b\u5427",authEmpty:"\u5c1a\u672a\u8f93\u5165\u9a8c\u8bc1\u7801",authOver:"\u83b7\u53d6\u9a8c\u8bc1\u7801\u6b21\u6570\u8fc7\u591a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",authErr:"\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",authInvalid:"\u9a8c\u8bc1\u7801\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u83b7\u53d6",authFail:"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u70b9\u51fb\u518d\u6b21\u53d1\u9001",authOnce:"\u8be5\u624b\u673a\u53f7\u5df2\u7ed1\u5b9a\u8fc7\u5176\u4ed6\u8d26\u53f7",authEqual:"\u8bf7\u4fee\u6539\u4e3a\u4e0d\u540c\u624b\u673a\u53f7",netErr:"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u7ed1\u5b9a",verifyErr:"\u9a8c\u8bc1\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",verifyMore:"\u9a8c\u8bc1\u9519\u8bef\uff0c\u6bcf\u5929\u6700\u591a\u9a8c\u8bc1\u4e00\u6b21"};var n=i.extend({type:"verify"},t),s=function(){this.container=n.container,this.phone_tip="",this.auth_input="",this.auth_send="",this.auth_resend="",this.auth_tip="",this.submit_btn="",this.succss_btn="",this.successObj=n.successObj,this.panelObj=i(['<div class="phone-bind-panel">','<div class="bind-info"><label>\u624b\u673a\u53f7</label>','<label class="phone-verify">'+n.phoneToShow+"</label>",'<span id="phone-bind-input-success" style="display:none;"></span><span class="span-error"></span></div>','<div class="bind-info"><label>\u9a8c\u8bc1\u7801\uff1a</label>','<input id="phone-bind-auth" type="text" />','<a id="phone-bind-auth-send" class="btn-24-white1">\u70b9\u51fb\u83b7\u53d6</a>','<span id="phone-bind-auth-resend" style="display:none;"><em>60</em>\u79d2\u540e\u53ef\u91cd\u65b0\u83b7\u53d6</span>','<span></span></div><span class="bind-tip ml-48">\u6ce8\uff1a\u540c\u4e00\u624b\u673a\u53f724\u5c0f\u65f6\u5185\u6700\u591a\u53ef\u83b7\u53d65\u6b21\u9a8c\u8bc1\u7801</span>','<div class="ml-48 mt-10"><a id="phone-bind-submit" class="btn-24-green">\u786e\u8ba4\u9a8c\u8bc1</a>',"</div>","</div>"].join("")).get(0),this.oldPhoneError="",this.phoneError="",this.authError="",this._init(),this._bindEvent()};s.prototype={_init:function(){try{i("#"+this.container).append(this.panelObj),this.auth_input=i("#phone-bind-auth",this.panelObj),this.auth_send=i("#phone-bind-auth-send",this.panelObj),this.auth_resend=i("#phone-bind-auth-resend",this.panelObj),this.auth_tip=this.auth_resend.next(),this.submit_btn=i("#phone-bind-submit",this.panelObj)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/phone-bind/phone-bind.js",method:"",ln:104})}},_bindEvent:function(){var t=this;t.auth_input.on("focus",function(){t.auth_tip.html(""),i(this).removeClass("input-error")}),t.auth_send.on("click",function(e){try{e.preventDefault(),t._sendAuth()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/phone-bind/phone-bind.js",method:"",ln:119})}}),t.submit_btn.on("click",function(e){try{e.preventDefault(),t._bindPhone()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/phone-bind/phone-bind.js",method:"",ln:125})}})},_checkAuth:function(){""==i.trim(this.auth_input.val())?(this.authError="authEmpty",this.auth_tip.html(e.error[this.authError]).addClass("span-error"),this.auth_input.addClass("input-error")):this.authError=""},_sendAuth:function(){var t=this;if(!t.phoneError||n.phoneToSubmit){var s={authOver:function(){t.auth_tip.html(e.error.authOver).addClass("span-error")},authSucc:function(){t.auth_send.hide(),t.auth_resend.show();var e=i(t.auth_resend).children("em"),n=setInterval(function(){e.html()>1?e.html(e.html()-1):1==e.html()&&(t.auth_resend.hide(),t.auth_send.show(),e.html(60),t.auth_tip.html(""),clearInterval(n))},1e3);t.auth_tip.removeClass("span-error").html("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\uff0c\u8bf7\u67e5\u6536\u77ed\u4fe1")},authErr:function(){t.auth_tip.html(e.error.authFail).addClass("span-error")}};e.phoneAuth(n.phoneToSubmit,"verify"==n.type?1:0,function(t){var e=i.json.parse(t);if(e)switch(e.errno){case 0:s.authSucc();break;case 3:s.authOver();break;case 5:s.authOnce();break;default:s.authErr()}else s.authErr()},function(){s.authErr()})}},_bindPhone:function(){function t(t){e.phoneVerify(t,s.auth_input.val(),function(){i("#"+s.container).empty().append(s.successObj)},function(t,n){if(t){var i=parseInt(n);17001==i?s.phone_tip.html(e.error.authOnce).addClass("span-error"):10064==i?s.auth_tip.html(e.error.verifyMore).addClass("span-error"):17002==i?(s.auth_input.addClass("input-error"),s.auth_tip.html(e.error.authInvalid).addClass("span-error")):s.auth_tip.html(e.error.verifyErr).addClass("span-error")}else s.auth_tip.html(e.error.netErr).addClass("span-error")})}var s=this;s._checkAuth(),s.oldPhoneError||s.phoneError&&!n.phoneToSubmit||s.authError||"verify"==n.type&&n.phoneToSubmit&&t(n.phoneToSubmit)}};{new s(t.container)}}}).extend({phoneAuth:function(t,e,n,s){i.ajax({url:"/api/sendphonevcode",type:"GET",data:{phone:t,fr:"normal",mtype:e,t:(new Date).getTime()},success:function(t){n(t)},error:function(){s()}})},phoneVerify:function(t,e,n,i){new o({url:"/submit/user",params:{cm:100501,phone:t,vcode:e,flag:"uhome",reason:16},beforeJump:function(t){n(t)},errorDeal:function(t,e,n){i(e,n)}})},bindPassMobile:function(t){var e="//passport.baidu.com/passApi/js/uni_armorwidget_wrapper.js";i.sio.callByBrowser(e+"?_="+(new Date).getTime(),function(){var e=passport.pop.ArmorWidget(t.action,{token:t.token,title:t.title,msg:t.msg,auth_title:t.auth_title,auth_msg:t.auth_msg,color:t.color,submitText:t.submitText,footerText:t.footerText,onRender:function(){t.onRender=t.onRender||function(){},t.onRender(this)},onBeforeSuccess:function(){t.onBeforeSuccess=t.onBeforeSuccess||function(){},t.onBeforeSuccess(this)},onSubmitSuccess:function(){t.onSubmitSuccess=t.onSubmitSuccess||function(){},t.onSubmitSuccess(this)}});e.show()})}});n.exports=a});
;define("common:widget/js/ui/countword/countword.js",function(r,t,a){var s=r("common:widget/js/util/tangram/tangram.js"),n=r("common:widget/js/ui/base/base.js"),o=n(function(r){var t={min:0,max:50};s.object.extend(t,r);var a=this;if(this.id=t.id||this.guid,this.target=t.target||s(s.isString(t.id)?"#"+t.id:t.id),this.error=this.target.next("span.count"),t.show&&(a.show=t.show),0==s(this.error).size()){var n=null;n="pgc"==t.mold?s.string("<span class='count'>\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165<b>#{max}</b>\u5b57</span>").format({max:t.max}):s.string("<span class='count'><b>0</b>/#{max}</span>").format({max:t.max}),this.target.after(n),this.error=this.target.next("span.count")}this._change=function(){var r=s.string(a.target.val()).trim(),n=Math.ceil(s.string(r).getByteLength()/2);n>=t.max?(a.target.val(s.string(r).subByte(2*t.max)),a.error.show(),a.show({isError:!0,num:t.max,max:t.max})):"pgc"==t.mold?t.max-n<=300?(a.error.show(),a.show({isError:!1,num:n,max:t.max})):(a.error.hide(),a.show({isError:!1,num:n,max:t.max})):a.show({isError:!1,num:n,max:t.max})},this.target.on("keydown",a._change).on("keyup",a._change).on("focus",a._change).on("change",a._change)}).extend({show:function(r){var t=this,a=t.error.find("b");r.isError?a.addClass("error"):a.removeClass("error"),a.html(r.num)}});a.exports=o});
;define("common:widget/js/logic/set-carefield/set-carefield.js",function(require,exports,module){var $=require("common:widget/js/util/tangram/tangram.js"),dialog=require("common:widget/js/ui/dialog/dialog.js"),ec=require("common:widget/js/util/event/event.js"),login=require("common:widget/js/logic/login/login.js"),uiBase=require("common:widget/js/ui/base/base.js"),category=require("common:widget/js/logic/category/category.js"),setCareField=uiBase(function(opts){function _resize(){_dialog.setSize({width:520,height:$("#setCareField-wrap").height()+60})}function _initHtml(e,i){function t(){var e="";me._cids=[];for(var t=0;t<i.length;t++)me._cids.push(i[t]),e+=me._careSpan.format({cid:i[t][0],text:i[t][1].split(",").reverse().join('<span class="split">></span>')});$("#careList").html(e)}function d(){var i="";me._keywords=[];for(var t=0;t<e.length;t++)e[t]=e[t].replace(/&lt;/g,"<").replace(/&gt;/g,">"),me._keywords.push(e[t]),i+=me._wordSpan.format({word:$.string.encodeHTML(e[t])});$("#wordList").html(i+'<div style="clear:both"></div>')}d(),t(),_checkKeyword(),_checkCid(),_resize(),_dialog.center(),$("#addCareBtnAdd").css("top",options.selectSize/2*17-4+"px"),$("#addCareBtnDel").css("top",options.selectSize/2*17-4+"px")}function _Submit(keywords,cids,success,error){error||(error=function(){}),success||(success=function(){});for(var temp=[],i=0;i<cids.length;i++)temp.push(cids[i][0]);for(var idStr=temp.join("_"),kwStr="",i=0;i<keywords.length;i++){var decode=T.string.decodeHTML(keywords[i]);kwStr+="&kw"+i+"="+encodeURIComponent(decode)}0!=keywords.length&&(kwStr+="&kwn="+keywords.length);var url="cm=100522&word="+idStr+kwStr+"&stoken="+F.context("user").stoken;T.ajax({url:"/submit/user",data:url,type:"POST",dataType:"text",success:function(data){if(data){var backData=eval("("+data+")");if("0"==backData.errorNo){me._keywords=[];for(var i=0;i<keywords.length;i++)me._keywords.push(keywords[i]);me._cids=[];for(var i=0;i<cids.length;i++)me._cids.push(cids[i]);_checkKeyword(),_checkCid(),me.tag=!0,success()}else error()}else error();_resize()},error:error})}function dialogBind(){$(window).on("resize",function(){_dialog.center()}),$("#setCareField-wrap").click(function(e){try{e.preventDefault()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:205})}}),$("#setCareField-wrap").mouseover(function(e){var i=$(e.target);i.is("i")&&i.addClass("ihover")}),$("#setCareField-wrap").mouseout(function(e){var i=$(e.target);i.is("i")&&i.removeClass("ihover")}),$("#care-wrap-addBtn").mouseenter(function(){$(this).addClass("hover")}),$("#care-wrap-addBtn").mouseleave(function(){$(this).removeClass("hover")}),$("#keyWord-header").click(function(e){try{$(this).attr("ishide")?$(this).attr("ishide","").removeClass("headerClose").next().show():$(this).attr("ishide","true").addClass("headerClose").next().hide(),_resize()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:230})}}),$("#category-header").click(function(e){try{$(this).attr("ishide")?$(this).attr("ishide","").removeClass("headerClose").next().show():$(this).attr("ishide","true").addClass("headerClose").next().hide(),_resize()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:239})}}),$("#wordList").on("click",function(e){try{var i=$(e.target);i.is("i")&&i.parent().hasClass("wordSpan")&&_delKeyword(i.parent())}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:246})}}),$("#careList").on("click",function(e){try{var i=$(e.target);i.is("i")&&i.parent().hasClass("careSpan")&&_delCid(i.parent())}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:252})}}),$("#addWordBtn").on("click",function(){try{_addKeyword($("#wordInput").val())}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:255})}}),$("#wordInput").on("focus",function(){"\u8f93\u5165\u60a8\u64c5\u957f\u7684\u5173\u952e\u8bcd"==$("#wordInput").val()&&$("#wordInput").val("").css("color","#333333")}),$("#wordInput").on("blur",function(){""==$("#wordInput").val()&&$("#wordInput").val("\u8f93\u5165\u60a8\u64c5\u957f\u7684\u5173\u952e\u8bcd").css("color","#b3b3b3")}),$("#addCareBtn").on("click",function(){try{$("#care-wrap-addBtn").show(),$(this).hide(),_resize()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:278})}}),$("#addCareBtnAdd").on("click",function(){try{var e=[],i=_dialog.cat.getValue();i&&(e.push(i.cid),e.push(i.arrName.reverse().join(","))),i.cid?_addCid(e):($("#care-wrap-addBtn").hide(),$("#addCareBtn").show(),_resize())}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:294})}}),$("#addCareBtnDel").on("click",function(){try{$("#care-wrap-addBtn").hide(),$("#addCareBtn").show(),_resize()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/set-carefield/set-carefield.js",method:"",ln:300})}})}function _delKeyword(e){for(tempKeywords=[],i=0;i<me._keywords.length;i++)e.attr("word")!=me._keywords[i]&&tempKeywords.push(me._keywords[i]);_Submit(tempKeywords,me._cids,function(){e.remove(),_resize()},function(){$("#addWordTip").html(remindMsg.key.error).show(),_resize()})}function _addCid(e){for(tempCids=[],i=0;i<me._cids.length;i++)tempCids.push(me._cids[i]);e&&_checkCid(e[0])&&(tempCids.push(e),_Submit(me._keywords,tempCids,function(){var i=e[1].split(",").reverse().join('<span class="split">></span>');T(me._careSpan.format({cid:e[0],text:i})).appendTo("#careList"),T("#care-wrap-addBtn").hide(),T("#addCareBtn").show(),_resize()},function(){T("#addCareTip").html(remindMsg.cat.error).show(),_resize()}))}function _delCid(e){for(tempCids=[],i=0;i<me._cids.length;i++)e.attr("cid")!=me._cids[i][0]&&tempCids.push(me._cids[i]);_Submit(me._keywords,tempCids,function(){e.remove(),_resize()},function(){T("#addCareTip").html(remindMsg.cat.error).show(),_resize()})}function _addKeyword(e){if(!(e=$.string(e||"").trim()))return $("#addWordTip").html(remindMsg.key.noWord).show(),void _resize();for(tempKeywords=[],i=0;i<me._keywords.length;i++)tempKeywords.push(me._keywords[i]);e&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),_checkKeyword(e)&&(tempKeywords.push(e),_Submit(tempKeywords,me._cids,function(){$(me._wordSpan.format({word:$.string.encodeHTML(e)})).insertBefore($("#wordList div")[0]),$("#wordInput").val(""),$("#wordInput").trigger("focus"),_resize()},function(){$("#addWordTip").html(remindMsg.key.error).show(),_resize()})))}function _checkCid(e){if(tag=!0,e&&0!=e){if(0==e.length)$("#addCareTip").html(remindMsg.cat.noCid).show(),tag=!1;else for(var i=0;i<me._cids.length;i++)me._cids[i][0]==e&&($("#addCareTip").html(remindMsg.cat.exist).show(),tag=!1);0==me._cids.length&&$("#careList").html("")}else me._cids.length>=defaultOptions._maxCidNum?($("#care-wrap-btn").hide(),$("#careTip").html(remindMsg.cat.enough).show(),tag=!1):($("#care-wrap-btn").show(),$("#careTip").html("").hide()),0==me._cids.length?($("#careList-title").html(""),$("#careList").html(remindMsg.cat.wordTip)):$("#careList-title").html("\u5df2\u6dfb\u52a0\u7684\u5206\u7c7b"),$("#addCareTip").html("").hide();return tag&&$("#addCareTip").html("").hide(),_resize(),tag}function _checkKeyword(e){if(tag=!0,e&&""!=e){if(e=$.string(e).trim(),0==e.length||"\u8f93\u5165\u60a8\u64c5\u957f\u7684\u5173\u952e\u8bcd"==e)$("#addWordTip").html(remindMsg.key.noWord).show(),tag=!1;else if($.string.getByteLength(e)>20)$("#addWordTip").html(remindMsg.key.tooLong).show(),tag=!1;else for(var i=0;i<me._keywords.length;i++)me._keywords[i]==e&&($("#addWordTip").html(remindMsg.key.exist).show(),tag=!1);0==me._keywords.length&&$("#wordList").html('<div style="clear:both"></div>')}else me._keywords.length>=defaultOptions._maxKeywordNum?($("#word-wrap-btn").hide(),$("#wordTip").html(remindMsg.key.enough).show(),tag=!1):($("#word-wrap-btn").show(),$("#wordTip").html("").hide()),0==me._keywords.length?($("#wordList-title").html(""),$("#wordList").html(remindMsg.key.wordTip)):$("#wordList-title").html("\u5df2\u6dfb\u52a0\u7684\u5173\u952e\u8bcd"),$("#addWordTip").html("").hide();return tag&&$("#addWordTip").html("").hide(),_resize(),tag}function _init(e){options=$.object.extend(defaultOptions,e),options.onopen&&options.onopen.apply(me),$.forEach(options,function(e,i){$.isFunction(e)?me.on(i,e):me[i]=e});var i='<div id="setCareField-wrap"><div id="keyWord-wrap" class="wrap"><div id="keyWord-header" class="header"><span>\u6211\u5173\u6ce8\u7684\u5173\u952e\u8bcd</span></div><div id="keyWord-body" class="body"><div id="wordList-title">\u5df2\u6dfb\u52a0\u7684\u5173\u952e\u8bcd</div><div id="wordList"></div><div style="clear:both"></div><span class="alert" id="addWordTip">\u6dfb\u52a0\u5173\u952e\u8bcd\u5931\u8d25</span><div id="word-wrap-btn"><div id="word-wrap-addBtn"><input type="text" id="wordInput" value="\u8f93\u5165\u60a8\u64c5\u957f\u7684\u5173\u952e\u8bcd" /><a type="button" id="addWordBtn" href="#"></a></div><div id="recWordsList"></div></div><div style="clear:both"></div><div id="wordTip" class="tip">\u4f60\u5173\u6ce8\u7684\u5173\u952e\u8bcd\u4e2a\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u5220\u9664\u540e\u518d\u505a\u6dfb\u52a0</div></div></div><div id="category-wrap" class="wrap"><div id="category-header" class="header"><span>\u6211\u5173\u6ce8\u7684\u5206\u7c7b</span></div><div id="category-body" class="body"><div id="careList-title">\u5df2\u6dfb\u52a0\u7684\u5206\u7c7b</div><div id="careList"></div><div id="care-wrap-btn"><div id="care-wrap-addBtn"><div id="addCareBtnAdd"><a href="#"></a></div><div id="addCareBtnDel"><a href="#"></a></div></div><div id="addCareBtn"><a href="#"></a></div></div><div style="clear:both"></div><span class="alert" id="addCareTip">\u6dfb\u52a0\u5173\u952e\u8bcd\u5931\u8d25</span><div id="careTip" class="tip">\u4f60\u5173\u6ce8\u7684\u5173\u952e\u8bcd\u4e2a\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u5220\u9664\u540e\u518d\u505a\u6dfb\u52a0</div></div></div></div>';_dialog=new dialog({title:"\u8bbe\u7f6e\u5173\u6ce8\u9886\u57df",content:i,contentType:"html",autoDispose:!0,width:520,close:function(){var e={keywords:me._keywords,cids:me._cids};options.onclose(e)}}),_dialog.cat=new category({target:"#care-wrap-addBtn",selectSize:options.selectSize,splitor:"<span>&gt</span>"}),dialogBind(),$.sio("/ucenter/api/uccarefieldpop?t="+(new Date).getTime()).callByServer(function(e){return e?void _initHtml(e.keyword,e.category):void _initHtml([],[])}),_checkKeyword(),_checkCid(),_resize(),_dialog.center();var t="\u8bbe\u7f6e\u5173\u6ce8\u9886\u57df";options.expand&&"all"!=options.expand?($("#careList-title").show(),$("#wordList-title").show(),"onlyCid"==options.expand?(t="\u8bbe\u7f6e\u5206\u7c7b",$("#category-wrap").show(),$("#keyWord-header").show(),$("#keyWord-wrap").hide(),$("#category-header").hide()):"onlyKey"==options.expand&&(t="\u8bbe\u7f6e\u5173\u952e\u8bcd",$("#keyWord-wrap").show(),$("#category-header").show(),$("#category-wrap").hide(),$("#keyWord-header").hide(),T("#wordInput").focus())):($("#keyWord-wrap").show(),$("#category-header").show(),$("#category-wrap").show(),$("#keyWord-header").show(),$("#careList-title").hide(),$("#wordList-title").hide()),_dialog.setTitle(t)}var defaultOptions={_maxKeywordNum:20,_maxKeywordLength:20,_maxCidNum:5,selectSize:7,expand:"all",onopen:function(){},onclose:function(){me.tag&&window.location.reload(!0)}},me=this,options={},_dialog;me.tag=!1;var remindMsg={key:{noWord:"\u8bf7\u8f93\u5165\u60a8\u7684\u5173\u952e\u8bcd\uff01",tooLong:"\u60a8\u8f93\u5165\u7684\u5173\u952e\u8bcd\u592a\u957f\u62c9\uff0c\u91cd\u65b0\u68c0\u67e5\u4e00\u4e0b\u5427\uff01",exist:"\u60a8\u8f93\u5165\u7684\u5173\u952e\u8bcd\u5df2\u7ecf\u6dfb\u52a0\u8fc7\u4e86\uff0c\u4e0d\u8981\u91cd\u590d\u6dfb\u52a0\u54e6\uff01",wordTip:"\u60a8\u53ef\u4ee5\u8bbe\u5b9a <b>"+defaultOptions._maxKeywordNum+'</b> \u7ec4\u5173\u952e\u8bcd\uff0c\u82e5\u4e00\u7ec4\u4e2d\u5305\u542b\u591a\u4e2a\u5173\u952e\u8bcd\uff0c\u8bf7\u7528\u7a7a\u683c\u5206\u9694\uff0c\u4f8b\u5982"\u7231\u597d \u8db3\u7403"',enough:"\u4f60\u5173\u6ce8\u7684\u5173\u952e\u8bcd\u4e2a\u6570\u5df2\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u5220\u9664\u540e\u518d\u505a\u6dfb\u52a0\uff01",error:"\u5f88\u62b1\u6b49\u6ca1\u64cd\u4f5c\u6210\u529f\uff0c\u518d\u8bd5\u8bd5\u770b\u5427\uff01"},cat:{noCid:"\u8bf7\u70b9\u51fb\u9009\u62e9\u6846\uff0c\u9009\u62e9\u5206\u7c7b\uff01",exist:"\u4f60\u9009\u62e9\u7684\u5206\u7c7b\u5df2\u7ecf\u6dfb\u52a0\u8fc7\u4e86\uff0c\u4e0d\u8981\u91cd\u590d\u6dfb\u52a0\u54e6\uff01",addTip:"\u60a8\u53ef\u4ee5\u8bbe\u5b9a<b>"+defaultOptions._maxCidNum+"</b>\u4e2a\u5206\u7c7b\uff01",enough:"\u5173\u6ce8\u5206\u7c7b\u5df2\u6ee1\uff0c\u5220\u51cf\u540e\u53ef\u4ee5\u7ee7\u7eed\u6dfb\u52a0\uff5e",wordTip:"\u4f60\u8fd8\u6ca1\u6709\u6dfb\u52a0\u5206\u7c7b\uff0c\u70b9\u51fb\u6dfb\u52a0\u6309\u94ae\u6dfb\u52a0\u5427\uff01",error:"\u5f88\u62b1\u6b49\u6ca1\u64cd\u4f5c\u6210\u529f\uff0c\u518d\u8bd5\u8bd5\u770b\u5427\uff01"}};me._keywords=[],me._cids=[],me._wordSpan=new $.string('<a href="#" class="wordSpan" word="#{word}"><span>#{word}</span><i></i></a>'),me._careSpan=new $.string('<a href="#" class="careSpan" cid="#{cid}"><span>#{text}</span><i></i></a>'),ec.fire("login.check",{isLogin:function(){_init(opts)},noLogin:function(){ec.fire("login.log",{onLoginSuccess:function(){_init(opts)}})}})});module.exports=setCareField});
;define("common:widget/js/ui/prof-star/prof-star.js",function(t,r,a){var e=t("common:widget/lib/jquery/jquery.js"),o=function(t){if(t.target){var r=t.starW||25,a=t.starG||15,o=parseInt(t.rate||0),s=o/100*5*r,i=s/r;e(t.target).css("width",s+Math.floor(i)*a+"px")}};a.exports=o});
;define("common:widget/js/ui/uploader/uploader.js",function(e,t,i){var a=e("common:widget/lib/jquery/jquery.js"),r=e("common:widget/js/ui/base/base.js"),o=e("common:widget/js/ui/dialog/dialog.js"),s=e("common:widget/js/util/uri/uri.js"),n=0,l=r().extend({init:function(t){try{var i=this;this.target=a(this.target),this.url=t.url||"/submit/ajax/",this.maxSize=this.maxSize||5,this.params=a.extend({cm:100672},t.params),this.paramName=t.paramName||"image",this.imageOnly=t.imageOnly===!1?!1:!0,"static"==this.target.css("position")&&this.target.css("position","relative"),window.FileReader&&window.FormData?this.render():e.async("common:widget/lib/swfupload/swfupload.js",function(e){i.renderFlash(e)})}catch(r){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:r.message,path:"common:widget/js/ui/uploader/uploader.js",method:"",ln:47})}},render:function(){var e=this;this.fileEle&&this.fileEle.remove(),this.fileEle=a('<input type="file" tabindex="-1" />').addClass("ipt-uploader").appendTo(this.target),this.imageOnly&&this.fileEle.attr("accept","image/*"),this.fileEle.on("change",function(){if(this.files[0]){var t=this.files[0];if(t.size>1048576*e.maxSize)return void o.alert("\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7"+e.maxSize+"M\u7684\u9650\u5236\u3002");e.upload(t),setTimeout(function(){e.render()},0)}})},upload:function(e){var t=this,i=new FormData;i.append(this.paramName,e,e.name),a.each(this.params,function(e,t){i.append(e,t)});var r=new XMLHttpRequest;r.open("POST",this.url,!0),r.withCredentials=!0,r.upload.addEventListener("progress",function(e){t.fire("progress",e.lengthComputable&&{loaded:e.loaded,total:e.total})}),r.addEventListener("error",function(){t.fire("error")}),r.addEventListener("load",function(){var e=JSON.parse(r.responseText);t.fire("complete",e)}),r.send(i),t.fire("upload",{file:e})},renderFlash:function(e){if(!this.swfu){var t=this,i=n++,r=a("<span/>").attr("id","ik-uploader-"+i).appendTo(this.target),o=new e({flash_url:s.swfupload,upload_url:t.url,file_size_limit:t.maxSize+" MB",file_types:t.imageOnly?"*.jpg;*.png;*.gif;*.bmp":"*.*",file_types_description:t.imageOnly?"\u56fe\u7247\u6587\u4ef6":"\u6240\u6709\u6587\u4ef6",file_upload_limit:1,file_queue_limit:1,debug:!1,button_placeholder_id:r.attr("id"),button_width:this.target.width(),button_height:this.target.height(),button_window_mode:e.WINDOW_MODE.TRANSPARENT,button_cursor:e.CURSOR.HAND,file_post_name:t.paramName,post_params:t.params,swfupload_pre_load_handler:function(){},swfupload_load_failed_handler:function(){t.fire("error")},swfupload_loaded_handler:function(){},file_queued_handler:function(){},file_queue_error_handler:function(){t.fire("error")},file_dialog_complete_handler:function(){try{this.startUpload()}catch(e){}},upload_start_handler:function(e){t.fire("upload",{file:e})},upload_progress_handler:function(e,i,a){t.fire("progress",{loaded:i,total:a})},upload_error_handler:function(){t.fire("error")},upload_success_handler:function(e,i){t.fire("complete",a.parseJSON(i))},upload_complete_handler:function(){try{var e=o.getStats();e.successful_uploads=e.successful_uploads-1,o.setStats(e)}catch(t){}},queue_complete_handler:function(){}});a(o.getMovieElement()).addClass("swf-uploader"),this.swfu=o}}});i.exports=l});
;define("common:widget/js/ui/scrollbar/scrollbar.js",function(t,e,s){function o(t){"undefined"!=typeof t.style.WebkitUserSelect?t.style.WebkitUserSelect="none":"undefined"!=typeof t.style.MozUserSelect?t.style.MozUserSelect="none":"undefined"!=typeof t.onselectstart?t.onselectstart=function(){return!1}:t.onmousedown=function(){return!1}}function n(t){"undefined"!=typeof t.style.WebkitUserSelect?t.style.WebkitUserSelect="":"undefined"!=typeof t.style.MozUserSelect?t.style.MozUserSelect="":"undefined"!=typeof t.onselectstart?t.onselectstart=function(){return!0}:t.onmousedown=function(){return!0}}var r=t("common:widget/js/util/tangram/tangram.js"),i=t("common:widget/js/ui/base/base.js");t("common:widget/lib/jquery.ui/jquery.ui.mousewheel.js");var c=i().extend({init:function(t){try{this.options=r.extend({scrollWrapper:"",scrollContent:"",maxHeight:600,autoHide:1},t),this.rate=0,this.scrollbarHeight=0,this.contentHeight=0}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/scrollbar/scrollbar.js",method:"",ln:30})}},render:function(){var t=this,e='<div class="scrollbar-wp" '+(t.options.autoHide?'style="display:none;"':"")+'><div class="scrollbar"></div></div>',s=t.options.scrollWrapper,i=t.options.scrollContent,c=t.options.maxHeight;if(t.contentHeight=i.height(),t.rate=c/t.contentHeight,t.contentHeight>c){s.css({position:"relative",top:0,left:0,height:c,overflow:"hidden"}),i.css({position:"relative",top:0,left:0}),s.append(r(e));var p=r(".scrollbar",s);p.height(t.rate*c),p.hover(function(){r(this).addClass("hover")},function(){r(this).removeClass("hover")});var a=0,l=0,h=0,u=0;t.scrollbarHeight=p.height(),p.mousedown(function(t){a=1,l=t.pageY,h=parseInt(p.css("top"),10),u=parseInt(i.css("top"),10),o(document.body)}),r(document).mousemove(function(e){if(a){var s=e.pageY-l;if(0>s&&parseInt(p.css("top"),10)<=0)return p.css("top","0"),void i.css("top","0");if(s>0&&parseInt(p.css("top"),10)>=c-t.scrollbarHeight)return p.css("top",c-t.scrollbarHeight+"px"),void i.css("top","-"+(t.contentHeight-c)+"px");p.css("top",parseInt(h+s,10)+"px"),i.css({top:parseInt(u-s/c*t.contentHeight,10)+"px"})}}),r(document).mouseup(function(){a=0,n(document.body)});var d=5,f=0;t.options.autoHide?(s.click(function(){try{f=1,h=parseInt(p.css("top"),10),u=parseInt(i.css("top"),10)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/scrollbar/scrollbar.js",method:"",ln:107})}}),s.blur(function(){f=0})):(f=1,h=parseInt(p.css("top"),10),u=parseInt(i.css("top"),10)),s.mousewheel(function(e,s){if(f&&p.is(":visible"))if(e.preventDefault(),h=parseInt(p.css("top"),10),u=parseInt(i.css("top"),10),0>s){if(parseInt(p.css("top"),10)/(c-t.scrollbarHeight)>.8&&t.options.onScrollEnd&&t.options.onScrollEnd.call(t),parseInt(p.css("top"),10)>=c-t.scrollbarHeight)return p.css("top",c-t.scrollbarHeight+"px"),void i.css("top","-"+(t.contentHeight-c)+"px");p.css("top",parseInt(h+d,10)+"px"),i.css("top",parseInt(u-d/t.rate,10)+"px")}else{if(parseInt(p.css("top"),10)<=0)return p.css("top","0"),void i.css("top","0");p.css("top",parseInt(h-d,10)+"px"),i.css("top",parseInt(u+d/t.rate,10)+"px")}}),t.options.autoHide&&s.hover(function(){r(".scrollbar-wp",s).show()},function(){r(".scrollbar-wp",s).hide(),a=0,n(document.body)})}},update:function(){var t=this,e=t.options.scrollWrapper,s=t.options.scrollContent,o=t.options.maxHeight;t.contentHeight=s.height();var n=r(".scrollbar",e);if(t.rate=o/t.contentHeight,t.contentHeight>o)if(n.length){var i=parseInt(n.css("top"),10),c=parseInt(s.css("top"),10);n.height(parseInt(t.rate*o,10)),t.scrollbarHeight=parseInt(t.rate*o,10),i>=o-t.scrollbarHeight?(n.css("top",o-t.scrollbarHeight+"px"),s.css("top","-"+(t.contentHeight-o)+"px")):(n.css("top",parseInt(t.rate*i,10)+"px"),s.css("top",parseInt(t.rate*c,10)+"px")),n.parent().show(),s.css("position","relative")}else t.render();else n.length&&n.parent().hide(),s.css("position","static")}});s.exports=c});
;define("common:widget/js/logic/set-tag-dialog/sortable.js",function(t){var e=t("common:widget/lib/jquery/jquery.js");t("common:widget/lib/jquery.ui/jquery.ui.core.js"),t("common:widget/lib/jquery.ui/jquery.ui.widget.js"),t("common:widget/lib/jquery.ui/jquery.ui.position.js"),t("common:widget/lib/jquery.ui/jquery.ui.mouse.js"),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(s=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(s=e(t.target)),s&&(!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,s){var o,r,n=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&"auto"!==n.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",n.cursor),this.storedStylesheet=e("<style>*{ cursor: "+n.cursor+" !important; }</style>").appendTo(r)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,o,r,n=this.options,h=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?h=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(h=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?h=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(h=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),h!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],o=s.item[0],r=this._intersectsWithPointer(s),r&&s.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,o=this.placeholder.offset(),r=this.options.axis,n={};r&&"x"!==r||(n.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(n.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(n,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,r=t.left,n=r+t.width,h=t.top,a=h+t.height,l=this.offset.click.top,c=this.offset.click.left,p="x"===this.options.axis||s+l>h&&a>s+l,f="y"===this.options.axis||e+c>r&&n>e+c,u=p&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<n&&h<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return s?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function i(){h.push(this)}var s,o,r,n,h=[],a=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(r=e(l[s]),o=r.length-1;o>=0;o--)n=e.data(r[o],this.widgetFullName),n&&n!==this&&!n.options.disabled&&a.push([e.isFunction(n.options.items)?n.options.items.call(n.element):e(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=a.length-1;s>=0;s--)a[s][0].each(i);return e(h)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,o,r,n,h,a,l,c=this.items,p=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(i=f.length-1;i>=0;i--)for(o=e(f[i]),s=o.length-1;s>=0;s--)r=e.data(o[s],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(p.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=p.length-1;i>=0;i--)for(n=p[i][1],h=p[i][0],s=0,l=h.length;l>s;s++)a=e(h[s]),a.data(this.widgetName+"-item",n),c.push({item:a,instance:n,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,o,r;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=o.outerWidth(),s.height=o.outerHeight()),r=o.offset(),s.left=r.left,s.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(o)}):"img"===s&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||s.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,o,r,n,h,a,l,c,p,f=null,u=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(f&&e.contains(this.containers[i].element[0],f.element[0]))continue;f=this.containers[i],u=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[u].containerCache.over||(this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1);else{for(o=1e4,r=null,c=f.floating||this._isFloating(this.currentItem),n=c?"left":"top",h=c?"width":"height",p=c?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[u].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(a=this.items[s].item.offset()[n],l=!1,t[p]-a>this.items[s][h]/2&&(l=!0),Math.abs(t[p]-a)<o&&(o=Math.abs(t[p]-a),r=this.items[s],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[u])return;r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[u].element,!0),this._trigger("change",t,this._uiHash()),this.containers[u]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[u],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*s}},_generatePosition:function(t){var i,s,o=this.options,r=t.pageX,n=t.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((n-this.originalPageY)/o.grid[1])*o.grid[1],n=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,s=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:h.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:h.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||o.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(o.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),s=0;s<o.length;s++)o[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(s=0;s<o.length;s++)o[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})});
;define("common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",function(t,a,e){var s=t("common:widget/js/util/tangram/tangram.js"),i=(t("common:widget/js/util/event/event.js"),t("common:widget/js/ui/base/base.js")),n=t("common:widget/js/util/template/template.js"),o=t("common:widget/js/ui/dialog/dialog.js"),c=t("common:widget/js/ui/scrollbar/scrollbar.js");t("common:widget/js/logic/set-tag-dialog/sortable.js");var g,l=t("common:widget/js/util/tangram/string.js"),d=i(function(t){var a=this;a.options=s.extend({title:"\u6211\u7684\u5174\u8da3",width:"582px",height:"471px",type:"add",askTitle:"",dialogClassName:"",success:function(){},error:function(){}},t),a.delTags=[]}).extend({init:function(t){try{this.render(t)}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:43})}},render:function(t){var a=this,t=s.extend(a.options,t);a.instance=new o({title:t.title,dialogClass:t.dialogClassName||"common-dialog-set-tag",content:a.html(t.type),autoDispose:!0,width:t.width,height:t.height,open:function(){s(".common-dialog-set-tag").delegate(".tag-search-input","focus",function(){s(this).hasClass("error")&&s(this).val("").removeClass("error")}),s(document).bind("keydown",function(t){var t=t||window.event,a=t.keyCode||t.which||t.charCode;13==a&&s(".common-dialog-set-tag .search-btn").click()})},close:function(){g=!1,s(document).unbind("keydown")},buttons:[{text:g?"\u4fdd\u5b58":"\u5b8c\u6210",click:function(){try{"set"==t.type&&(s(a.delTags).each(function(){for(var t=a.tags.length-1;t>=0;t--)a.tags[t].name==this&&a.tags.splice(t,1)}),a.delTags.length=0),("set"==t.type||"add"==t.type)&&a.submit(g?function(){s(".wgt-ihome-filter .tag-setting").click()}:null)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:95})}}},{text:g?"\u8fd4\u56de":"\u53d6\u6d88",click:function(){try{g&&(g=!1,s(".wgt-ihome-filter .tag-setting").click()),s(this).dialog("close")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:104})}}}]}),a.instance.setSize({width:parseInt(t.width),height:parseInt(t.height)});var e=a.container=a.instance.getDialogContainer();if("add"==t.type)e.on("click",".search-btn",function(){try{a.search(s(this).prev())}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:117})}}),e.on("click",".tag-item",function(t){try{var a=s(this);a.hasClass("active")?a.removeClass("active"):a.addClass("active")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:126})}});else if("set"==t.type){e.on("click",".i-del",function(t){try{var e=s(this).parent();a.delTags.push(e.text()),e.remove(),t.stopPropagation()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:134})}}),e.on("click",".addtag-btn",function(){try{a.close(),g=!0,s(".carousel-inner .tag-item:last").click()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:139})}});e.find(".dialog-tags").sortable(),e.find(".dialog-tags").disableSelection().find(".tag-item").css("cursor","move")}else"uadmin"==t.type&&(e.delegate(".i-del","click",function(t){try{var e=s(this).parent();a.delTags.push(e.text()),e.remove(),t.stopPropagation()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:161})}}),e.find(".item-checked").delegate(".tag-item, .third-tags .tags","click",function(t){try{var a=s(this),e=s(".currentTag").find(".tag-item").length;if(e>=3)return s(this).hasClass("tags")?s(".more-labels").append(s(".red-tips")):s(this).parent().parent().prev().append(s(".red-tips")),s(".red-tips").show(),void setTimeout(function(){s(".red-tips").hide()},3e3);var i=!0;s(".currentTag .tag-item").each(function(t,e){s.trim(s(e).text())==s.trim(a.text())&&(i=!1)}),i&&s('<a class="tag-item"><i class="i-del"></i><span>'+a.text()+"</span></a>").insertAfter(".currentTag .currentTitle"),s(this).hasClass("tags")?a.parent().addClass("checked"):a.addClass("active")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/set-tag-dialog/set-tag-dialog.js",method:"",ln:199})}}))},submit:function(t){var a=this,e=a._getTag(),i={cm:100522,tags:e.name.join("	")},n=F.context("user")&&F.context("user").stoken;n&&(i.stoken=n),s.post("/submit/user",i,function(i){if(i&&0==i.errorNo)F.context("user").tags=a.tags=e.obj,a.close(),a.options.success.call(a,e.obj),s.isFunction(t)&&t();else{var n="\u62b1\u6b49\uff0c\u672a\u80fd\u627e\u5230\u60a8\u60f3\u6dfb\u52a0\u7684\u5174\u8da3\u6807\u7b7e\uff0c\u8bf7\u91cd\u65b0\u5c1d\u8bd5";s("#tag-search-input").val(n).addClass("error")}},"json")},html:function(t){var a=[];return"add"==t?a.push('<div class="line mb-15">','<input name="tag-search" type="text" value="" placeholder="\u5728\u6b64\u8f93\u5165\u5174\u8da3\u5173\u952e\u5b57" class="tag-search-input" id="tag-search-input" />','<a class="btn-32-green search-btn ml-10">\u641c\u7d22\u5174\u8da3</a>',"</div>",'<h1 class="mt-10 mb-15">\u70ed\u95e8\u6807\u7b7e</h1>','<div class="dialog-tags-wp mt-15">','<div class="dialog-tags line">','<#if( "object" == typeof hot ){#>',"<#for(var i = 0;i < hot.length;i++){#>",'<a class="tag-item" data-type="<#=hot[i].legal#>">',"<span><#:=hot[i].name#></span>","</a>","<#}#>","<#}#>","</div>","</div>"):"uadmin"==t?a.push('<div class="tags-wrap">','<span class="red-tips">\u95ee\u9898\u6807\u7b7e\u4e0d\u80fd\u8d85\u8fc7\u4e09\u4e2a</span>','<div class="line question">','<span>\u95ee\u9898\u63cf\u8ff0\uff1a</span><span class="uadmin-question">',"<#=tags.title#>","</span>","</div>",'<div class="currentTag dialog-tags">','<h1 class="currentTitle">\u5f53\u524d\u6807\u7b7e\uff1a</h1>','<#if( "object" == typeof tags.current ){#>',"<#for(var i = 0;i < tags.current.length;i++){#>",'<a class="tag-item" data-type="<#=tags.current[i].legal#>">','<i class="i-del"></i>',"<span><#:=tags.current[i].name#></span>","</a>","<#}#>","<#}#>",'<span class="tag-tips">\u81f3\u591a3\u9879</span>',"</div>",'<div class="commonused-tag">','<#if( "object" == typeof tags.commonused && tags.commonused.length > 0 ){#>','<h1 class="mt-15 mb-10">\u5e38\u7528\u6807\u7b7e\uff1a</h1>','<div class="dialog-tags-wp mt-15 item-checked">','<div class="dialog-tags line">',"<#for(var i = 0;i < tags.commonused.length;i++){#>",'<a class="tag-item" data-type="<#=tags.commonused[i]#>">',"<span><#:=tags.commonused[i]#></span>","</a>","<#}#>","</div>","</div>","<#}#>","</div>",'<div class="recommend-tag">','<#if( "object" == typeof tags.recommend && tags.recommend.length > 0){#>','<h1 class="">\u63a8\u8350\u6807\u7b7e\uff1a</h1>','<div class="dialog-tags-wp mt-15 item-checked">','<div class="dialog-tags line">',"<#for(var i = 0;i < tags.recommend.length;i++){#>",'<a class="tag-item" data-type="<#=tags.recommend[i]#>">',"<span><#:=tags.recommend[i].tagname#></span>","</a>","<#}#>","</div>","</div>","<#}#>","</div>","</div>",'<h1 class="more-labels mt-10">\u66f4\u591a\u6807\u7b7e\uff1a</h1>','<div class="line more-tags">','<div class="tag-input line">','<input type="text" placeholder="\u5728\u6b64\u8f93\u5165\u5174\u8da3\u5173\u952e\u8bcd" />',"</div>",'<a class="btn-32-green search-interest ml-10">\u641c\u7d22\u6807\u7b7e</a>','<a class="btn-32-green search-all ml-10">\u67e5\u770b\u5168\u90e8\u6807\u7b7e</a>',"</div>",'<div class="dialog-tags-wp mt-15 item-checked">','<div class="dialog-tags line more-tags-container">',"</div>","</div>",'<div class="dialog-tags-wp mt-15 ui-dialog-buttonset">','<a href="javascript:void(0)" class="btn-32-white cancel">\u53d6\u6d88</a>','<a href="javascript:void(0)" class="btn-32-green save">\u4fdd\u5b58</a>',"</div>"):(s(this.options.tags).each(function(){this.dbLine=s.string(this.name).getByteLength()>8?"tag-db-line":""}),a.push('<p class="dialog-intro line">','<a class="addtag-btn grid"><i></i><span>\u6dfb\u52a0\u5174\u8da3</span></a>','<span class="grid-r mr-40">','<i class="i-tip"></i>',"\u76f4\u63a5\u62d6\u52a8\u53ef\u6539\u53d8\u6807\u7b7e\u987a\u5e8f\u54e6~","</span>","</p>",'<div class="dialog-tags-wp mt-15">','<div class="dialog-tags line">','<#if( "object" == typeof tags ){#>',"<#for(var i = 0;i < tags.length;i++){#>",'<a class="tag-item <#=tags[i].dbLine#>" data-type="<#=tags[i].legal#>">','<i class="i-del"></i>',"<span><#:=tags[i].name#></span>","</a>","<#}#>","<#}#>","</div>","</div>")),n(a.join(""),this.options)},show:function(){this.instance.show()},close:function(){this.instance.close()},search:function(t){var a=this;s(t).hasClass("error")||(""==s(t).val()&&s(t).addClass("error"),s.post("/api/gettag",{type:1,wd:t.val()},function(e){if(e&&0==e.errno){s("h1",a.container).empty();var i=s(".dialog-tags",a.container).empty(),n=t.val();s(e.data).each(function(){a.addTag({name:this.tagname,legal:1},i),n.toLocaleUpperCase()==this.tagname.toLocaleUpperCase()&&(n="")}),n&&a.addTag({name:n,legal:1},i),s(".dialog-tags-wp .scrollbar-wp").remove();var o=new c({scrollWrapper:s(".dialog-tags-wp"),scrollContent:s(".dialog-tags"),maxHeight:225});o.render()}},"json"))},getTags:function(){var t=[];return s(".tag-item.active",this.container).each(function(){t.push({name:s(this).text(),legal:s(this).data("type")})}),t},_getTag:function(){var t={name:[],type:[],obj:[]};if("set"==this.options.type)s(".tag-item",this.container).each(function(){t.name.push(s(this).text()),t.type.push(s(this).data("type")),t.obj.push({name:s(this).text(),legal:s(this).data("type")})});else{s(".carousel-inner .tag-item").each(function(){s(this).data("type")>=0&&(t.name.push(s(this).text()),t.type.push(s(this).data("type")),t.obj.push({name:s(this).text(),legal:s(this).data("type")}))});var a="|"+t.name.join("|")+"|";s(".tag-item.active",this.container).each(function(){var e=s(this).text();-1==a.indexOf("|"+e+"|")&&(t.name.push(e),t.type.push(s(this).data("type")),t.obj.push({name:s(this).text(),legal:s(this).data("type")}))})}return t},addTag:function(t,a){var e=t.name||t.tagname,i=s.string(e).getByteLength()>8;s("<a />").addClass("tag-item"+(i?" tag-db-line":"")).data("type",t.legal||0).html("<span>"+l.encodeHTML(e)+"</span>").appendTo(a)}});e.exports=d});
;define("common:widget/js/logic/ie-prompt/ie-prompt.js",function(o){var e=o("common:widget/lib/jquery/jquery.js"),t=!!window.ActiveXObject,i=t&&!window.XMLHttpRequest,p=t&&!!document.documentMode,n=t&&!i&&!p,c=['<div class="prompt-body">','<a href="javascript:void(0);" class="prompt-close"></a>',"<ul>",'<li class="prompt-message">\u60a8\u7684\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u4e3a\u4e86\u66f4\u4f73\u7684\u6d4f\u89c8\u6548\u679c\uff0c</li>','<li class="prompt-suggest">\u5efa\u8bae\u60a8\u5347\u7ea7\u6d4f\u89c8\u5668\uff01</li>',"</ul>","</div>"].join("");"undefined"==typeof dontTriggerPrompt&&(i||n)&&(e("body").append(c),e(".prompt-body").on("del",function(){e(this).animate({opacity:0},500,function(){e(this).remove()})}).on("location",function(){if(1!=e.cookie.get("IK_PROMPT_FLAG")){var o=e.cookie.get("IK_PROMPT_COUNT");null==o||3>=o?e(this).animate({opacity:1},500,function(){setTimeout(e.proxy(function(){e(this).trigger("del"),o=null==o?1:++o,e.cookie.set("IK_PROMPT_COUNT",o,{path:"/",expires:864e5})},this),3e3)}):e.cookie.set("IK_PROMPT_FLAG","1",{path:"/",expires:864e5})}}),e(".prompt-body").trigger("location"),e(".prompt-close").on("click",function(){try{e(".prompt-body").trigger("del"),e.cookie.set("IK_PROMPT_FLAG","1",{path:"/",expires:864e5})}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"common:widget/js/logic/ie-prompt/ie-prompt.js",method:"",ln:48})}}))});
;define("common:widget/js/logic/qrcode/qrcode.js",function(t){var e=t("common:widget/js/util/tangram/tangram.js");!function(t){function r(t){this.mode=s.MODE_8BIT_BYTE,this.data=t}function o(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}function n(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function i(t,e){this.totalCount=t,this.dataCount=e}function a(){this.buffer=new Array,this.length=0}r.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},o.prototype={addData:function(t){var e=new r(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var t=1;for(t=1;40>t;t++){for(var e=i.getRSBlocks(t,this.errorCorrectLevel),r=new a,o=0,n=0;n<e.length;n++)o+=e[n].dataCount;for(var n=0;n<this.dataList.length;n++){var s=this.dataList[n];r.put(s.mode,4),r.put(s.getLength(),l.getLengthInBits(s.mode,t)),s.write(r)}if(r.getLengthInBits()<=8*o)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+r][e+o]=r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=l.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var a=i*n,s=0;s<this.modules[i].length;s++){var u=s*n,h=this.modules[i][s];h&&(o.beginFill(0,100),o.moveTo(u,a),o.lineTo(u+n,a),o.lineTo(u+n,a+n),o.lineTo(u,a+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],n=t[r];if(null==this.modules[o][n])for(var i=-2;2>=i;i++)for(var a=-2;2>=a;a++)this.modules[o+i][n+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a?!0:!1}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(var r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=l.getBCHTypeInfo(r),n=0;15>n;n++){var i=!t&&1==(o>>n&1);6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;15>n;n++){var i=!t&&1==(o>>n&1);8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,n=7,i=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var u=!1;i<t.length&&(u=1==(t[i]>>>n&1));var h=l.getMask(e,o,a-s);h&&(u=!u),this.modules[o][a-s]=u,n--,-1==n&&(i++,n=7)}if(o+=r,0>o||this.moduleCount<=o){o-=r,r=-r;break}}}},o.PAD0=236,o.PAD1=17,o.createData=function(t,e,r){for(var n=i.getRSBlocks(t,e),s=new a,u=0;u<r.length;u++){var h=r[u];s.put(h.mode,4),s.put(h.getLength(),l.getLengthInBits(h.mode,t)),h.write(s)}for(var g=0,u=0;u<n.length;u++)g+=n[u].dataCount;if(s.getLengthInBits()>8*g)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*g+")");for(s.getLengthInBits()+4<=8*g&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*g)break;if(s.put(o.PAD0,8),s.getLengthInBits()>=8*g)break;s.put(o.PAD1,8)}return o.createBytes(s,n)},o.createBytes=function(t,e){for(var r=0,o=0,i=0,a=new Array(e.length),s=new Array(e.length),u=0;u<e.length;u++){var h=e[u].dataCount,g=e[u].totalCount-h;o=Math.max(o,h),i=Math.max(i,g),a[u]=new Array(h);for(var f=0;f<a[u].length;f++)a[u][f]=255&t.buffer[f+r];r+=h;var d=l.getErrorCorrectPolynomial(g),c=new n(a[u],d.getLength()-1),m=c.mod(d);s[u]=new Array(d.getLength()-1);for(var f=0;f<s[u].length;f++){var v=f+m.getLength()-s[u].length;s[u][f]=v>=0?m.get(v):0}}for(var E=0,f=0;f<e.length;f++)E+=e[f].totalCount;for(var T=new Array(E),p=0,f=0;o>f;f++)for(var u=0;u<e.length;u++)f<a[u].length&&(T[p++]=a[u][f]);for(var f=0;i>f;f++)for(var u=0;u<e.length;u++)f<s[u].length&&(T[p++]=s[u][f]);return T};for(var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},u={L:1,M:0,Q:3,H:2},h={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;l.getBCHDigit(e)-l.getBCHDigit(l.G15)>=0;)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;l.getBCHDigit(e)-l.getBCHDigit(l.G18)>=0;)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case h.PATTERN000:return(e+r)%2==0;case h.PATTERN001:return e%2==0;case h.PATTERN010:return r%3==0;case h.PATTERN011:return(e+r)%3==0;case h.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case h.PATTERN101:return e*r%2+e*r%3==0;case h.PATTERN110:return(e*r%2+e*r%3)%2==0;case h.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new n([1],0),r=0;t>r;r++)e=e.multiply(new n([1,g.gexp(r)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var i=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var u=-1;1>=u;u++)0>n+u||n+u>=e||(0!=s||0!=u)&&a==t.isDark(o+s,n+u)&&i++;i>5&&(r+=3+i-5)}for(var o=0;e-1>o;o++)for(var n=0;e-1>n;n++){var h=0;t.isDark(o,n)&&h++,t.isDark(o+1,n)&&h++,t.isDark(o,n+1)&&h++,t.isDark(o+1,n+1)&&h++,(0==h||4==h)&&(r+=3)}for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(r+=40);for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(r+=40);for(var l=0,n=0;e>n;n++)for(var o=0;e>o;o++)t.isDark(o,n)&&l++;var g=Math.abs(100*l/e/e-50)/5;return r+=10*g}},g={glog:function(t){if(1>t)throw new Error("glog("+t+")");return g.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return g.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;8>f;f++)g.EXP_TABLE[f]=1<<f;for(var f=8;256>f;f++)g.EXP_TABLE[f]=g.EXP_TABLE[f-4]^g.EXP_TABLE[f-5]^g.EXP_TABLE[f-6]^g.EXP_TABLE[f-8];for(var f=0;255>f;f++)g.LOG_TABLE[g.EXP_TABLE[f]]=f;n.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var o=0;o<t.getLength();o++)e[r+o]^=g.gexp(g.glog(this.get(r))+g.glog(t.get(o)));return new n(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=g.glog(this.get(0))-g.glog(t.get(0)),r=new Array(this.getLength()),o=0;o<this.getLength();o++)r[o]=this.get(o);for(var o=0;o<t.getLength();o++)r[o]^=g.gexp(g.glog(t.get(o))+e);return new n(r,0).mod(t)}},i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(t,e){var r=i.getRsBlockTable(t,e);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=r.length/3,n=new Array,a=0;o>a;a++)for(var s=r[3*a+0],u=r[3*a+1],h=r[3*a+2],l=0;s>l;l++)n.push(new i(u,h));return n},i.getRsBlockTable=function(t,e){switch(e){case u.L:return i.RS_BLOCK_TABLE[4*(t-1)+0];case u.M:return i.RS_BLOCK_TABLE[4*(t-1)+1];case u.Q:return i.RS_BLOCK_TABLE[4*(t-1)+2];case u.H:return i.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},a.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.fn.qrcode=function(r){"string"==typeof r&&(r={text:r}),r=t.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:u.H,background:"#ffffff",foreground:"#000000"},r);var n=function(){var t=new o(r.typeNumber,r.correctLevel);t.addData(r.text),t.make();var e=document.createElement("canvas");e.width=r.width,e.height=r.height;for(var n=e.getContext("2d"),i=r.width/t.getModuleCount(),a=r.height/t.getModuleCount(),s=0;s<t.getModuleCount();s++)for(var u=0;u<t.getModuleCount();u++){n.fillStyle=t.isDark(s,u)?r.foreground:r.background;var h=Math.ceil((u+1)*i)-Math.floor(u*i),l=Math.ceil((s+1)*i)-Math.floor(s*i);n.fillRect(Math.round(u*i),Math.round(s*a),h,l)}return e},i=function(){var e=new o(r.typeNumber,r.correctLevel);e.addData(r.text),e.make();for(var n=t("<table></table>").css("width",r.width+"px").css("height",r.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",r.background),i=r.width/e.getModuleCount(),a=r.height/e.getModuleCount(),s=0;s<e.getModuleCount();s++)for(var u=t("<tr></tr>").css("height",a+"px").appendTo(n),h=0;h<e.getModuleCount();h++)t("<td></td>").css("width",i+"px").css("background-color",e.isDark(s,h)?r.foreground:r.background).appendTo(u);return n};return this.each(function(){var t="canvas"==r.render?n():i();e(t).appendTo(this)})}}(e)});
;define("common:widget/js/logic/share/share.js",function(e,t){function i(e){var t=["toolbar=0,status=0,resizable=1,width=",e.width||440,",height=",e.height||430,",left=",(screen.width-(e.width||440))/2,",top=",(screen.height-(e.height||430))/2].join("");window.open(e.url,"shareWindow",t)||(location.href=e.url)}function o(e,t){var i={render:document.createElement("canvas").getContext?"canvas":"table",width:t.width,height:t.height,text:t.href};F.context("weixinShareTinyUrl")?(i.text=F.context("weixinShareTinyUrl"),e.qrcode(i)):n.ajax({url:"/api/gettinyurl",type:"POST",dataType:"json",data:{url:t.href}}).done(function(t){var o=t.data;0==t.errno?(F.context("weixinShareTinyUrl",o.tinyurl),i.text=o.tinyurl,e.qrcode(i)):e.qrcode(i)}).fail(function(){e.qrcode(i)})}var n=e("common:widget/js/util/tangram/tangram.js"),a=e("common:widget/js/ui/tip/tip.js"),r=e("common:widget/js/util/log/log.js");e("common:widget/js/logic/qrcode/qrcode.js"),t.init=function(e){try{if(!e.target||!e.pageUrl||!e.title)return;var t=n(e.target),s=e.pageUrl,c=-1==s.indexOf("?")?"?":"&";t.on("tooltipopen",function(t,a){n(this).addClass("tips-open"),o(a.tooltip.find(".weixin-qrcode-img"),{width:100,height:100,href:s+c+"sharesource=weixin"}),e.logOpt&&(e.logOpt.action="share-view",r.send(e.logOpt)),a.tooltip.on("click",".others-share-item",function(t){try{t.preventDefault();var o=n(this),a={url:o.attr("href")};o.hasClass("weibo")||(a.width=800,a.height=600),i(a),e.logOpt&&(e.logOpt.action="share-click-"+o.data("type"),r.send(e.logOpt))}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"common:widget/js/logic/share/share.js",method:"",ln:53})}})}),t.on("tooltipclose",function(){n(this).removeClass("tips-open")});var h={url:s+c+"sharesource=qq",title:e.title,pics:e.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"},l={url:s+c+"sharesource=qzone",title:e.title,pics:e.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"},d={url:s+c+"sharesource=weibo",title:e.weiboTitle||e.title,pic:e.pic||"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/zhidaologo.png"};e.summary&&(h.summary=e.summary,l.summary=e.summary,d.summary=e.summary);var m=[],p=[],g=[];for(var u in h)m.push(u+"="+encodeURIComponent(h[u]||""));for(var u in l)p.push(u+"="+encodeURIComponent(l[u]||""));for(var u in d)g.push(u+"="+encodeURIComponent(d[u]||""));var w,f,q="http://connect.qq.com/widget/shareqq/index.html?"+m.join("&"),v="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+p.join("&"),y="http://v.t.sina.com.cn/share/share.php?"+g.join("&"),x=['<div class="weixin-container">','<div class="weixin-qrcode">','<div class="weixin-qrcode-img"></div>','<p class="weixin-qrcode-title">\u626b\u4e00\u626b\u5206\u4eab\u5230\u5fae\u4fe1</p>',"</div>",'<div class="weixin-qrcode-lead"></div>',"</div>",'<div class="others-container">','<a href="'+q+'" target="_blank" class="others-share-item qq" data-type="qq-click">qq</a>','<a href="'+v+'" target="_blank" class="others-share-item qzone" data-type="qzone-click">qzone</a>','<a href="'+y+'" target="_blank" class="others-share-item weibo" data-type="weibo-click">weibo</a>',"</div>"].join(""),j={direction:"top",tooltipClass:"wgt-common-share-tip",content:x,target:t[0],position:{my:"left top",at:"left-80 bottom+5"}},b=n.extend(!0,j,e.tipsOpt);t.hover(function(){clearTimeout(f),(w||(w=new a(b))).show(),w.getTipContainer().hover(function(){clearTimeout(f)},function(){f=setTimeout(function(){w.hide()},100)})},function(){f=setTimeout(function(){w.hide()},100)})}catch(k){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:k.message,path:"common:widget/js/logic/share/share.js",method:"",ln:143})}}});