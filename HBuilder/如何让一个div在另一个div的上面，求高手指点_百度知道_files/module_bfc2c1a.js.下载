define("common:widget/userbar-new/userbar-new.js",function(e){function t(){n("#userbar-login").click(function(e){try{i.fire("login.check"),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/userbar-new/userbar-new.js",method:"",ln:43})}});var e=n("#userbar-reg");if(e.length){var t=e.attr("href")+encodeURIComponent(window.location.href);e.attr("href",t)}n("#userbar-logout").attr("href","//passport.baidu.com/?logout&aid=7&u="+escape(location.href)).mousedown(function(){r.send({url:location.href,type:"2046",action:"logout"})});var o=n("#no-username-set").click(function(e){try{i.fire("login.setUsername"),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/userbar-new/userbar-new.js",method:"",ln:71})}});o.length&&r.send({type:2030,pv_from:"usrbar"}),new a("user-name","username-sublist",{top:10})}function o(){F.context("user");n.ajax({url:"/ichat/api/chatlist",type:"GET",dataType:"json"}).done(function(e){if(!(e.errno>0||!e.data||0==(e.data.book&&e.data.book.unreadCount)&&0==(e.data.recent&&e.data.recent.unreadCount))){var t=0;e.data.book&&e.data.book.unreadCount>0&&(t+=e.data.book.unreadCount),e.data.recent&&e.data.recent.unreadCount>0&&(t+=e.data.recent.unreadCount);var o=0==t?'<i class="bd-msg"></i>':'<i class="bd-msg"></i><strong class="orange-num">('+t+")</strong>";n("#baidu-msg").html('<a title="\u79c1\u4fe1" href="/ichat/chatlist" target="_blank">'+o+"</a>"),i.fire("userbar.reposition",{waiting:!1});var a="";if(e.data.book&&e.data.book.unreadCount>0){for(var r,s=0;r=e.data.book.list[s];s++)if(r.unreadCount>0){a=r.uname+" \u7ed9\u4f60\u53d1\u4e86\u79c1\u4fe1";break}}else if(e.data.recent&&e.data.recent.unreadCount>0)for(var r,s=0;r=e.data.recent.list[s];s++)if(r.unreadCount>0){a=r.uname+" \u7ed9\u4f60\u53d1\u4e86\u4e00\u6761\u79c1\u4fe1";break}a.length>0&&(n("body").append('<div class="zhidao-new-message-tip">'+a+'<span class="close"></span><span class="trangle"></span></div>'),n(".zhidao-new-message-tip").css({right:n("body").width()-n("#baidu-msg").offset().left-45,top:n("#baidu-msg").offset().top+26}).on("click",".close",function(e){try{e.preventDefault(),n(".zhidao-new-message-tip").remove()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/userbar-new/userbar-new.js",method:"",ln:153})}}))}})}function a(e,t,o){var a=this,r=n("#"+e),s=n("#"+t);a.timeout=0,r.mouseover(function(){clearTimeout(a.timeout);n(window).width(),n("#userbar").outerWidth(),n(this).position();n.isNumber(o.right)&&(o.left=r.outerWidth()-s.width()-o.right),s.css({top:o.top}).show(),i.fire("userbar.show",{waiting:!0})}).mouseout(function(){a.timeout=setTimeout(function(){s.hide(),clearTimeout(a.timeoutId),i.fire("userbar.hide",{waiting:!1})},100)}),s.mouseover(function(){clearTimeout(a.timeout),s.show(),i.fire("userbar.show",{waiting:!0})}).mouseout(function(){r.mouseout()}),s.find("li a").mouseover(function(){n(this).addClass("userbar-li-mover").parent().addClass("userbar-li-mover")}).mouseout(function(){n(this).removeClass("userbar-li-mover").parent().removeClass("userbar-li-mover")})}var n=e("common:widget/js/util/tangram/tangram.js"),i=e("common:widget/js/util/event/event.js"),r=(e("common:widget/js/logic/login/login.js"),e("common:widget/js/util/log/log.js")),s=e("common:widget/js/util/store/store.js");i.on("common.userbarMsgNum",function(e,t){t>99&&(t="99+");var o=n("#userbar-msg"),a=o.find(".i-msg"),i=o.find(".orange-num");0==t?(i.html("<i></i>"),a.hide()):(i.html("(<i>"+t+"</i>)"),a.show())}),n(function(){"1"==F.context("user").isLogin?o():(s.remove("ikmsg_data"),s.remove("ikmsg_time"),n.cookie.remove("msgGuide",{path:"/"}),n.cookie.remove("msgGuideStep",{path:"/"}),n.cookie.get("IK_PASS")&&n.cookie.remove("IK_PASS",{path:"/"})),e.async("common:widget/js/logic/msg-new/msg-new.js",function(e){if(1==F.context("user").isLogin){var t=n("#userbar"),o=t.offset().left,a=n("#userbar #userbar-msg"),i=a.offset().left;e.init({position:{top:30,left:i-o-346+3*n("#userbar-msg").width()/4},commonUserbar:1})}else e.init()})}),t(),n("#baidu-msg").on("click",function(e){try{r.send({page:"all",type:2060,action:"click",area:"baidu-msg"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/userbar-new/userbar-new.js",method:"",ln:305})}})});
;define("common:widget/menu/menu.js",function(e,n){var o=e("common:widget/js/util/tangram/tangram.js"),t=e("common:widget/js/util/log/log.js"),i=o("#j-nav-menu-container"),m=i.find(".nav-show-control");n.init=function(){function e(){c=setTimeout(function(){m.css({overflow:"visible"}).addClass("nav-show-control-show")},100)}function n(){clearTimeout(c),m.css({overflow:"hidden"}).removeClass("nav-show-control-show")}try{var c=0;i.find(".menu-title").mouseenter(function(){o(this).parent().hasClass("menu-item-index")||e()}),i.find(".menu-item-box").mouseleave(n),i.find(".menu-sub-item-expert").click(function(){try{t.send({module:"fe-pc-common",page:"common-all",area:"top-menu",action:"click",addon:o(this).attr("href")})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/menu/menu.js",method:"",ln:47})}}),o(".menu-sub-item.column-sub-item").on("click",function(e){try{e.preventDefault(),e.stopPropagation(),o.cookie.set("isColumnClick","click",{path:"/",expires:31536e6}),window.open("/special/column?fr=daohang")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/menu/menu.js",method:"",ln:57})}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/menu/menu.js",method:"",ln:58})}}});
;define("common:widget/bottom-ask/bottom-ask.js",function(o){var t=o("common:widget/js/util/tangram/tangram.js"),a=o("common:widget/js/util/event/event.js"),n=o("common:widget/js/util/log/log.js"),e=cmsShowed=numShowed=!1;a.on("cmsMsg.show",function(){cmsShowed=!0,c()});var s=function(){var o=12797381,a=t(".wgt-bottom-ask .bottom-ask-num");i(o,a),setInterval(function(){var t=Math.ceil(10*Math.random());o+=Math.random()>.5?t:-t,isNaN(o)||i(o,a)},1e4)},i=function(o,a){var n=(o+"").split(""),e=[];t.each(n,function(o,t){e.push('<span class="bottom-ask-num-'+t+'"></span>')}),a.html(e.join(""))},m=function(){cmsShowed||"true"!=t.cookie.get("IS_HIDE_BOTTOM_ASK")&&(t(window).scrollTop()+t(window).height()>=t("body").height()?(t(".wgt-footer").css("padding-bottom","130px"),t(".wgt-bottom-ask").show(),numShowed||(s(),numShowed=!0),a.fire("bottomAsk.show"),e||n.send({type:2031,action:"show",area:"bottom_ask",page:location.pathname&&location.pathname.split("/")[1]}),e=!0):c(),6==t.browser.ie&&t(".wgt-bottom-ask").css({top:t(window).scrollTop()+t(window).height()-t(".wgt-bottom-ask").height()}))},c=function(){t(".wgt-bottom-ask").hide(),a.fire("bottomAsk.hide")};m(),t(window).scroll(function(){m()}),t(".wgt-bottom-ask .bottom-ask-close").click(function(o){try{c(),t.cookie.set("IS_HIDE_BOTTOM_ASK",!0)}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"common:widget/bottom-ask/bottom-ask.js",method:"",ln:107})}}),n.addKey({bottom_ask:1}),t(".wgt-bottom-ask .bottom-ask-btn").on("click submit",function(o){try{n.send({type:2031,action:"click",area:"bottom_ask",page:location.pathname&&location.pathname.split("/")[1]})}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"common:widget/bottom-ask/bottom-ask.js",method:"",ln:118})}})});
;define("common:widget/js/ui/base/base.js",function(e,t,n){function i(e){var t=o.isFunction(e)?e:function(){this.type="base"},n=function(e){s.create(this),this.guid=++o.guid,t.apply(this,arguments),"object"==typeof e&&this._init(e),this.init(e)};return n.extend=function(e){return o.extend(n.prototype,e),n},n.extend({_init:function(e){try{var t=this;o.each(e,function(e,n){o.isFunction(n)?t.on(e,n):t[e]=n})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message,path:"common:widget/js/ui/base/base.js",method:"",ln:29})}},init:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/base/base.js",method:"",ln:30})}},render:function(){},dispose:function(){},getElements:function(){}})}var o=e("common:widget/lib/jquery/jquery.js"),s=e("common:widget/js/util/event/event.js");n.exports=i});
;define("common:widget/js/util/event/event.js",function(n,e,r){function t(n){var e=i(n);return i.extend(n,{on:function(r,t){return e.on(o(r),t),n},once:function(r,t){return e.one(o(r),t),n},fire:function(r){var t=Array.prototype.slice.call(arguments,1);return t.unshift(o(r)),e.trigger.apply(e,t),n},off:function(r,t){return e.unbind(o(r),t),n}}),n.un=n.off,n.trigger=n.fire,n}function o(n){return"on"+n.replace(/^on/i,"").toLowerCase()}var i=n("common:widget/lib/jquery/jquery.js");r.exports=t({}),r.exports.create=t,window.F&&(window.F.ec=r.exports)});
;define("common:widget/js/util/tangram/browser.js",function(e,t){var i=/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0;t.chrome=i;var r=/firefox\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0;t.firefox=r;var a=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0;t.ie=a;var o=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);t.isGecko=o;var n="CSS1Compat"==document.compatMode;t.isStrict=n;var s=/webkit/i.test(navigator.userAgent);t.isWebkit=s;try{if(/(\d+\.\d+)/.test(external.max_version)){var d=+RegExp.$1;t.maxthon=d}}catch(g){}var v=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0;t.opera=v,function(){var e=navigator.userAgent,i=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)?+(RegExp.$1||RegExp.$2):void 0;t.safari=i}()});
;define("common:widget/js/util/tangram/platform.js",function(t,i){var a=/android/i.test(navigator.userAgent);i.isAndroid=a;var n=/ipad/i.test(navigator.userAgent);i.isIpad=n;var s=/iphone/i.test(navigator.userAgent);i.isIphone=s;var e=/macintosh/i.test(navigator.userAgent);i.isMacintosh=e;var r=/windows/i.test(navigator.userAgent);i.isWindows=r;var o=/x11/i.test(navigator.userAgent);i.isX11=o});
;define("common:widget/js/util/tangram/cookie.js",function(e,n){var t=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},o=function(e){if(t(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),o=n.exec(document.cookie);if(o)return o[2]||null}return null};n.getRaw=o;var i=function(e){var n=o(e);return"string"==typeof n?n=decodeURIComponent(n):null};n.get=i;var r=function(e,n,o){if(t(e)){o=o||{};var i=o.expires;"number"==typeof o.expires&&(i=new Date,i.setTime(i.getTime()+o.expires)),document.cookie=e+"="+n+(o.path?"; path="+o.path:"")+(i?"; expires="+i.toGMTString():"")+(o.domain?"; domain="+o.domain:"")+(o.secure?"; secure":"")}};n.setRaw=r;var u=function(e,n){n=n||{},n.expires=new Date(0),r(e,"",n)};n.remove=u;var a=function(e,n,t){r(e,encodeURIComponent(n),t)};n.set=a});
;define("common:widget/js/util/tangram/json.js",function(require,exports,module){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,f,u,i=gap,p=e[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof rep&&(p=rep.call(e,t,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,n=0;f>n;n+=1)u[n]=str(n,p)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(f=rep.length,n=0;f>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,p),o&&u.push(quote(r)+(gap?": ":":")+o));else for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(o=str(r,p),o&&u.push(quote(r)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),exports.parse=exports.decode=function(t){return new Function("return ("+t+")")()},exports.encode=exports.stringify=JSON.stringify});
;define("common:widget/js/util/tangram/chain.js",function(n,t,r){var e=n("common:widget/lib/jquery/jquery.js");r.exports=function(n){var t=function(r){var u=e.type(r),a="object"==u||"array"==u?r:n&&new n(r)||{};return a.context=r,e.each(t,function(n,t){e.isFunction(t)&&(a[n]=function(){var n=e.makeArray(arguments);return n.unshift(a.context),t.apply(null,n)})}),a};return t}});
;define("common:widget/js/util/tangram/number.js",function(n,t,r){var a=n("common:widget/js/util/tangram/chain.js"),e=r.exports=a(Number);e.comma=function(n,t){return(!t||1>t)&&(t=3),n=String(n).split("."),n[0]=n[0].replace(new RegExp("(\\d)(?=(\\d{"+t+"})+$)","ig"),"$1,"),n.join(".")},e.pad=function(n,t){var r="",a=0>n,e=String(Math.abs(n));return e.length<t&&(r=new Array(t-e.length+1).join("0")),(a?"-":"")+r+e},e.randomInt=function(n,t){return Math.floor(Math.random()*(t-n+1)+n)}});
;define("common:widget/js/util/tangram/string.js",function(r,e,t){var n=(r("common:widget/lib/jquery/jquery.js"),r("common:widget/js/util/tangram/chain.js")),a=t.exports=n(String),c=function(r){var e=String(r).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return e.replace(/&#([\d]+);/g,function(r,e){return String.fromCharCode(parseInt(e,10))})};a.decodeHTML=c;var o=function(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};a.encodeHTML=o;var i=function(r){return String(r).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")};a.escapeReg=i;var f=function(r,e){var t=Array.prototype.slice.call(arguments,1),n=Object.prototype.toString;return t.length?(t=1==t.length&&null!==e&&/\[object Array\]|\[object Object\]/.test(n.call(e))?e:t,r.replace(/#\{(.+?)\}/g,function(r,e){var a,c,o,i,f;if(!t)return"";for(a=e.split("|"),c=t[a[0]],"[object Function]"==n.call(c)&&(c=c(a[0])),o=1,i=a.length;i>o;++o)f=baidu.string.filterFormat[a[o]],"[object Function]"==n.call(f)&&(c=f(c));return"undefined"==typeof c||null===c?"":c})):r};a.filterFormat=f,f.escapeJs=function(r){if(!r||"string"!=typeof r)return r;var e,t,n,a=[];for(e=0,t=r.length;t>e;++e)n=r.charCodeAt(e),a.push(n>255?r.charAt(e):"\\x"+n.toString(16));return a.join("")},f.js=f.escapeJs,f.escapeString=function(r){return r&&"string"==typeof r?r.replace(/["'<>\\\/`]/g,function(r){return"&#"+r.charCodeAt(0)+";"}):r},f.e=f.escapeString,f.toInt=function(r){return parseInt(r,10)||0},f.i=f.toInt;var u=function(r,e){r=String(r);var t=Array.prototype.slice.call(arguments,1),n=Object.prototype.toString;return t.length?(t=1==t.length&&null!==e&&/\[object Array\]|\[object Object\]/.test(n.call(e))?e:t,r.replace(/#\{(.+?)\}/g,function(r,e){var a=t[e];return"[object Function]"==n.call(a)&&(a=a(e)),"undefined"==typeof a?"":a})):r};a.format=u,function(){var r=/^\#[\da-f]{6}$/i,t=/^rgb\((\d+), (\d+), (\d+)\)$/,n={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff0",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff"},a=function(e){if(r.test(e))return e;if(t.test(e)){for(var a,c=1,e="#";4>c;c++)a=parseInt(RegExp["$"+c]).toString(16),e+=("00"+a).substr(a.length);return e}if(/^\#[\da-f]{3}$/.test(e)){var o=e.charAt(1),i=e.charAt(2),f=e.charAt(3);return"#"+o+o+i+i+f+f}return n[e]?n[e]:""};e.formatColor=a}();var l=function(r){return String(r).replace(/[^\x00-\xff]/g,"ci").length};a.getByteLength=l;var g=function(r){return String(r||"").replace(/<[^>]+>/g,"")};a.stripTags=g;var p=function(r,e,t){return r=String(r),t=t||"",0>e||l(r)<=e?r+t:(r=r.substr(0,e).replace(/([^\x00-\xff])/g,"$1 ").substr(0,e).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1"),r+t)};a.subByte=p;var s=function(r){return r.indexOf("-")<0&&r.indexOf("_")<0?r:r.replace(/[-_][^-_]/g,function(r){return r.charAt(1).toUpperCase()})};a.toCamelCase=s;var d=function(r){return String(r).replace(/[\uFF01-\uFF5E]/g,function(r){return String.fromCharCode(r.charCodeAt(0)-65248)}).replace(/\u3000/g," ")};a.toHalfWidth=d;var h=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),v=function(r){return String(r).replace(h,"")};a.trim=v;var b=function(r){return String(r).replace(/(?:<[^>]+>)|(?:&#?[0-9a-z]{2,6};)|(.{1})/gi,"$&<wbr>").replace(/><wbr>/g,">")};a.wbr=b});
;define("common:widget/js/util/tangram/date.js",function(t,e){var n=t("common:widget/js/util/tangram/number.js"),g=function(t,e){function g(t,n){e=e.replace(t,n)}var r=n.pad;if("string"!=typeof e)return t.toString();var a=t.getFullYear(),i=t.getMonth()+1,s=t.getDate(),o=t.getHours(),u=t.getMinutes(),d=t.getSeconds();return g(/yyyy/g,r(a,4)),g(/yy/g,r(parseInt(a.toString().slice(2),10),2)),g(/MM/g,r(i,2)),g(/M/g,i),g(/dd/g,r(s,2)),g(/d/g,s),g(/HH/g,r(o,2)),g(/H/g,o),g(/hh/g,r(o%12,2)),g(/h/g,o%12),g(/mm/g,r(u,2)),g(/m/g,u),g(/ss/g,r(d,2)),g(/s/g,d),e};e.format=g;var r=function(t){var e=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof t){if(e.test(t)||isNaN(Date.parse(t))){var n=t.split(/ |T/),g=n.length>1?n[1].split(/[^\d]/):[0,0,0],r=n[0].split(/[^\d]/);return new Date(r[0]-0,r[1]-1,r[2]-0,g[0]-0,g[1]-0,g[2]-0)}return new Date(t)}return new Date};e.parse=r});
;define("common:widget/js/util/tangram/object.js",function(e,r){function t(e,r,t,o,a){r.hasOwnProperty(t)&&(a&&n.isPlainObject(e[t])?i(e[t],r[t],{overwrite:o,recursive:a}):!o&&t in e||(e[t]=r[t]))}var n=e("common:widget/lib/jquery/jquery.js");r.isPlain=n.isPlainObject,r.isArray=n.isArray,r.clone=function(e){return n.extend(!0,{},e)},r.each=function(e,r,t){if(e){var o=function(e,n){return r.apply(t||n,[n,e])};return n.each(e,o,t)}},r.extend=n.extend,r.isEmpty=n.isEmptyObject,Object.keys||!function(){var e=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=t.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on a non-object");var i=[];for(var a in o)e.call(o,a)&&i.push(a);if(r)for(var c=0;n>c;c++)e.call(o,t[c])&&i.push(t[c]);return i}}(),r.keys=Object.keys;var o=function(e){var r,t=[],n=0;for(r in e)e.hasOwnProperty(r)&&(t[n++]=e[r]);return t};r.values=o,r.map=n.map;var i=function(e,r,n){var o,i=0,a=n||{},c=a.overwrite,u=a.whiteList,s=a.recursive;if(u&&u.length)for(o=u.length;o>i;++i)t(e,r,u[i],c,s);else for(i in r)t(e,r,i,c,s);return e};r.merge=i});
;define("common:widget/js/util/tangram/array.js",function(r,t,e){var n=r("common:widget/lib/jquery/jquery.js"),o=r("common:widget/js/util/tangram/object.js"),i=r("common:widget/js/util/tangram/chain.js"),a=e.exports=i(Array);Array.prototype.indexOf||(Array.prototype.indexOf=function(r){"use strict";if(null==this)throw new TypeError;var t,e,n=Object(this),o=n.length>>>0;if(0===o)return-1;if(t=0,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&1/0!=t&&t!=-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=o)return-1;for(e=t>=0?t:Math.max(o-Math.abs(t),0);o>e;e++)if(e in n&&n[e]===r)return e;return-1}),a.indexOf=function(r,t,e){return Array.prototype.indexOf.apply(r,[t,e])},a.contains=function(r,t){return a.indexOf(r,t)>=0},a.each=n.each,a.forEach=o.forEach;var f=function(r){r.length=0};a.empty=f,Array.prototype.every||(Array.prototype.every=function(r){"use strict";var t,e,n,o;if(null==this)throw new TypeError;if(t=Object(this),e=t.length>>>0,"function"!=typeof r)throw new TypeError;for(o=arguments[1],n=0;e>n;n++)if(n in t&&!r.call(o,t[n],n,t))return!1;return!0}),a.every=function(r,t,e){return Array.prototype.every.apply(r,[t,e])},Array.prototype.filter||(Array.prototype.filter=function(r){"use strict";if(!this)throw new TypeError;{var t=Object(this);t.length>>>0}if("function"!=typeof r)throw new TypeError;var e=[],n=arguments[1];for(var o in t)t.hasOwnProperty(o)&&r.call(n,t[o],o,t)&&e.push(t[o]);return e}),a.filter=function(r,t,e){return Array.prototype.filter.apply(r,[t,e])};var u=function(r,t){var e,n,o=r.length;if("function"==typeof t)for(n=0;o>n;n++)if(e=r[n],!0===t.call(r,e,n))return e;return null};a.find=u;var p=function(r,t){for(var e={},n=t&&t.length,o=0,i=r.length;i>o;o++)e[r[o]]=n&&n>o?t[o]:!0;return e};a.hash=p,Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(r){"use strict";if(null==this)throw new TypeError;var t,e,n=Object(this),o=n.length>>>0;if(0===o)return-1;for(t=o,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),e=t>=0?Math.min(t,o-1):o-Math.abs(t);e>=0;e--)if(e in n&&n[e]===r)return e;return-1}),a.lastIndexOf=function(r,t,e){return Array.prototype.lastIndexOf.apply(r,[t,e])},a.map=n.map,"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(r,t){try{if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof r)throw new TypeError(r+" is not a function");var e,n,o=this.length>>>0,i=!1;for(1<arguments.length&&(n=t,i=!0),e=0;o>e;++e)this.hasOwnProperty(e)&&(i?n=r(n,this[e],e,this):(n=this[e],i=!0));if(!i)throw new TypeError("Reduce of empty array with no initial value");return n}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/util/tangram/array.js",method:"",ln:262})}}),a.reduce=function(r,t,e){try{Array.prototype.reduce.apply(r,[t,e])}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message,path:"common:widget/js/util/tangram/array.js",method:"",ln:267})}};var y=function(r,t){for(var e=r.length;e--;)e in r&&r[e]===t&&r.splice(e,1);return r};a.remove=y;var c=function(r,t){return r.splice(t,1)[0]};a.removeAt=c,Array.prototype.some||(Array.prototype.some=function(r){"use strict";if(null==this)throw new TypeError;var t,e,n=Object(this),o=n.length>>>0;if("function"!=typeof r)throw new TypeError;for(t=arguments[1],e=0;o>e;e++)if(e in n&&r.call(t,n[e],e,n))return!0;return!1}),a.some=function(r,t,e){Array.prototype.some.apply(r,[t,e])};var s=function(r,t){var e,n,o=r.length,i=r.slice(0);for("function"!=typeof t&&(t=function(r,t){return r===t});--o>0;)for(n=i[o],e=o;e--;)if(t(n,i[e])){i.splice(o,1);break}return i};a.unique=s});
;define("common:widget/js/util/tangram/sio.js",function(a,r,o){var n=a("common:widget/lib/jquery/jquery.js"),t=a("common:widget/js/util/tangram/chain.js"),c=o.exports=t();c.callByBrowser=function(a,r,o){return o&&o.charset&&(o.scriptCharset=o.charset),n.ajax(n.extend({url:a,dataType:"script",crossDomain:!0,success:r},o))},c.callByServer=function(a,r,o){o&&o.charset&&(o.scriptCharset=o.charset);var t=/(\?|&)callback=([^&]*)/;return a=a.replace(t,"$1callback=?"),a.search(t)<0&&(a+=(a.indexOf("?")<0?"?":"&")+"callback=?"),n.ajax({dataType:"jsonp",crossDomain:!0,url:a,success:r})};var e=function(a){var r=new Image,o="tangram_sio_log_"+Math.floor(2147483648*Math.random()).toString(36);window[o]=r,r.onload=r.onerror=r.onabort=function(){r.onload=r.onerror=r.onabort=null,window[o]=null,r=null},r.src=a};c.log=e});
;define("common:widget/js/util/tangram/url.js",function(n,r){var e=n("common:widget/lib/jquery/jquery.js"),t=n("common:widget/js/util/tangram/string.js"),u=function(n){return String(n).replace(/[#%&+=\/\\\ \u3000\f\r\n\t]/g,function(n){return"%"+(256+n.charCodeAt()).toString(16).substring(1).toUpperCase()})};r.escapeSymbol=u;var i=function(n,r){var e=new RegExp("(^|&|\\?|#)"+t.escapeReg(r)+"=([^&#]*)(&|$|#)",""),u=n.match(e);return u?u[2]:null};r.getQueryValue=i;var o=function(n,r){var t,i=[],o=r||function(n){return u(n)};return e.each(n,function(n,r){if(e.isArray(r))for(t=r.length;t--;)i.push(n+"="+o(r[t],n));else i.push(n+"="+o(r,n))}),i.join("&")};r.jsonToQuery=o;var s=function(n){for(var r,t,u,i,o=n.substr(n.lastIndexOf("?")+1),s=o.split("&"),a=s.length,c={},f=0;a>f;f++)s[f]&&(i=s[f].split("="),r=i[0],t=i[1],u=c[r],"undefined"==typeof u?c[r]=t:e.isArray(u)?u.push(t):c[r]=[u,t]);return c};r.queryToJson=s});
;define("common:widget/js/util/tangram/form.js",function(n,e){var r=n("common:widget/lib/jquery/jquery.js");e.json=function(n){var e=r(n).serializeArray(),i={};return r.each(e,function(n,e){i[e.name]=e.value}),i}});
;define("common:widget/js/util/tangram/swf.js",function(e,a){var t=e("common:widget/lib/jquery/jquery.js"),r=e("common:widget/js/util/tangram/browser.js"),i=e("common:widget/js/util/tangram/array.js"),o=e("common:widget/js/util/tangram/string.js"),n=function(e){var a,o=document[e];return 9==r.ie?o&&o.length?1==(a=i.remove(t.makeArray(o),function(e){return"embed"!=e.tagName.toLowerCase()})).length?a[0]:a:o:o||window[e]};a.getMovie=n;var s=function(e,a,t){var r,i=this,o=this._flash=n(e);return a?void(r=setInterval(function(){try{o[a]&&(i._initialized=!0,clearInterval(r),t&&t())}catch(e){}},100)):this};a.Proxy=s,s.prototype.getFlash=function(){return this._flash},s.prototype.isReady=function(){return!!this._initialized},s.prototype.call=function(e){try{var a=this.getFlash(),t=Array.prototype.slice.call(arguments);t.shift(),a[e]&&a[e].apply(a,t)}catch(r){}};var l=function(){var e=navigator;if(e.plugins&&e.mimeTypes.length){var a=e.plugins["Shockwave Flash"];if(a&&a.description)return a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0"}else if(window.ActiveXObject&&!window.opera)for(var t=12;t>=2;t--)try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t);if(r){var i=r.GetVariable("$version");return i.replace(/WIN/g,"").replace(/,/g,".")}}catch(o){}}();a.version=l;var c=function(e){e=e||{};var a,t,r,i,n,s,c=l,d=e.ver||"6.0.0",p={},u=o.encodeHTML;for(i in e)p[i]=e[i];if(e=p,!c)return"";for(c=c.split("."),d=d.split("."),r=0;3>r&&(a=parseInt(c[r],10),t=parseInt(d[r],10),!(a>t));r++)if(t>a)return"";var v=e.vars,f=["classid","codebase","id","width","height","align"];if(e.align=e.align||"middle",e.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",e.codebase=location.protocol+"//fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0",e.movie=e.url||"",delete e.vars,delete e.url,"string"==typeof v)e.flashvars=v;else{var h=[];for(i in v)s=v[i],h.push(i+"="+encodeURIComponent(s));e.flashvars=h.join("&")}var m=["<object "];for(r=0,n=f.length;n>r;r++)s=f[r],m.push(" ",s,'="',u(e[s]),'"');m.push(">");var g={wmode:1,scale:1,quality:1,play:1,loop:1,menu:1,salign:1,bgcolor:1,base:1,allowscriptaccess:1,allownetworking:1,allowfullscreen:1,seamlesstabbing:1,devicefont:1,swliveconnect:1,flashvars:1,movie:1};for(i in e)s=e[i],i=i.toLowerCase(),g[i]&&(s||s===!1||0===s)&&m.push('<param name="'+i+'" value="'+u(s)+'" />');e.src=e.movie,e.name=e.id,delete e.id,delete e.movie,delete e.classid,delete e.codebase,e.type="application/x-shockwave-flash",e.pluginspage=location.protocol+"//www.macromedia.com/go/getflashplayer",m.push("<embed");var w;for(i in e)if(s=e[i],s||s===!1||0===s){if(new RegExp("^salign$","i").test(i)){w=s;continue}m.push(" ",i,'="',u(s),'"')}return w&&m.push(' salign="',u(w),'"'),m.push("></embed></object>"),m.join("")};a.createHTML=c;var d=function(e,a){e=e||{};var r=c(e)||e.errorMessage||"";a&&"string"==typeof a&&(a=document.getElementById(a)),t(a||"body").insertHTML("beforeEnd",r)};a.create=d});
;define("common:widget/js/util/tangram/tangram.js",function(t,e,n){var r=n.exports=t("common:widget/lib/jquery/jquery.js"),o=t("common:widget/js/util/event/event.js");r.browser=t("common:widget/js/util/tangram/browser.js"),r.platform=t("common:widget/js/util/tangram/platform.js"),r.cookie=t("common:widget/js/util/tangram/cookie.js"),r.json=t("common:widget/js/util/tangram/json.js"),r.number=t("common:widget/js/util/tangram/number.js"),r.string=t("common:widget/js/util/tangram/string.js"),r.date=t("common:widget/js/util/tangram/date.js"),r.object=t("common:widget/js/util/tangram/object.js"),r.array=t("common:widget/js/util/tangram/array.js"),r.sio=t("common:widget/js/util/tangram/sio.js"),r.url=t("common:widget/js/util/tangram/url.js"),r.form=t("common:widget/js/util/tangram/form.js"),r.swf=t("common:widget/js/util/tangram/swf.js"),r.createClass=function(t,e){t=r.isFunction(t)?t:function(){},e=e||{};var n=function(){this.guid=r.id(),t.apply(this,arguments),o.create(this)};if(n.extend=function(t){return r.extend(n.prototype,t),n},r.isFunction(e.superClass)){var s=function(){};s.prototype=(n.superClass=e.superClass).prototype;var i=n.prototype=new s;r.extend(n.prototype,t.prototype),i.constructor=t}return n},r.fn.insertHTML=function(t,e){return this.each(function(n,o){var s,i;return o.insertAdjacentHTML&&!r.browser.opera?o.insertAdjacentHTML(t,e):(s=o.ownerDocument.createRange(),t=t.toUpperCase(),"AFTERBEGIN"==t||"BEFOREEND"==t?(s.selectNodeContents(o),s.collapse("AFTERBEGIN"==t)):(i="BEFOREBEGIN"==t,s[i?"setStartBefore":"setEndAfter"](o),s.collapse(i)),s.insertNode(s.createContextualFragment(e))),o}),this},r.isNumber=function(t){return"number"==r.type(t)&&isFinite(t)},r.isString=function(t){return"string"==r.type(t)},r.forEach=r.object.each,r.fn.forEach=function(t){return r.forEach(this,t)};var s=1;r.id=function(){return s++}});
;define("common:widget/js/util/log/log.js",function(o,t){function e(o){var t=o.split(","),e={};return a.forEach(t,function(o){var t=o.split(":");e[t[0]]=t[1]}),e}function n(o){var t="IK_LOG_SESSION",e=a.cookie.get(t);if(e&&("pv"==o.action||"entrance"==o.action)){if(!document.referrer)return a.cookie.remove(t,{path:"/"}),a.cookie.remove(t+"_STEP",{path:"/"}),void a.cookie.remove(t+"_LAST_URL",{path:"/"});var n=a.cookie.get(t+"_STEP"),i=a.cookie.get(t+"_LAST_URL"),r=location.href;i!=r&&(n=parseInt(n,10)+1,o.step=n,o.sessionid=e,a.cookie.set(t+"_STEP",n,{path:"/"}),a.cookie.set(t+"_LAST_URL",r,{path:"/"}))}}var a=o("common:widget/js/util/tangram/tangram.js");_globalOptions={},t.log=function(o){var t=new Image,e="bd_iknow_log_"+Math.floor(2147483648*Math.random()).toString(36);window[e]=t,t.onload=t.onerror=t.onabort=function(){t.onload=t.onerror=t.onabort=null,window[e]=null,t=null},t.src=o},t.send=function(o){var e="//kstj.baidu.com/v.gif?",i={pid:102,url:location.href,isLogin:F.context("user")&&F.context("user").isLogin?1:0};a.extend(i,_globalOptions.global||{}),a.extend(i,_globalOptions[o.action]||{});var r=a.extend(i,o);return r.type=a.isNumeric(r.type)?r.type:r.key,n(r),e+=a.param(r),t.log(e),e},t.parse=e,t.addKey=function(o,t){var e=a.extend({append:!1,action:"global",separator:","},t||{});_globalOptions[e.action]=_globalOptions[e.action]||{},a.each(o,function(o,t){e.append&&_globalOptions[e.action][o]?_globalOptions[e.action][o]+=e.separator+t:_globalOptions[e.action][o]=t})},t.init=function(o){try{var e=a.extend({query:"",action:"click",target:"a"},o||{});if(!e.query)return;var n=e.query;delete e.query,a(n).delegate(e.target,e.action,function(){var o=a(this);if(o.data("log")||o.attr("log")){var n=t.parse(o.data("log")||o.attr("log"));o.is("a")&&!n.url&&(n.url=o.attr("href")),n=a.extend(a.extend({},e),n),t.send(n)}})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/util/log/log.js",method:"",ln:180})}},t.stat=function(o){a.sio("/stat?"+o).log()},t.startSession=function(o){var t="IK_LOG_SESSION";o=o||+new Date,a.cookie.set(t,o,{path:"/"}),a.cookie.set(t+"_STEP",0,{path:"/"})}});
;define("common:widget/js/util/form/form.js",function(n,t,i){var e=n("common:widget/lib/jquery/jquery.js"),o=function(n){var t=this,i=e({});e.extend(t,{guid:e.guid++,on:function(n,t){i.on(n,t)},fire:function(n,t){i.trigger(n,t)},un:function(n,t){i.unbind(n,t)}}),t.id=t.name="form-"+t.guid,t.instance=e("<form></form>").attr({name:t.name,id:t.id,method:"get",action:"/submit"}).appendTo(document.body),e.each(n,function(n,i){e.isFunction(i)?t.on(n,i):e.isPlainObject(i)&&"input"==n?e.each(i,function(n,i){e('<input type="hidden" name="'+n+'" />').val(i).appendTo(t.instance)}):t.instance.attr(n,i)})};e.extend(o.prototype,{get:function(){return this.instance},dispose:function(){this.instance.remove()},submit:function(){return this.instance.submit(),this}}),i.exports=o});
;define("common:widget/js/util/https/https.js",function(t,s,o){var c={"Xhttp://hiphotos.baidu.com":"https://gss0.baidu.com/7LsWdDW5_xN3otqbppnN2DJv","Xhttp://iknow01.bosstatic.bdimg.com":"https://gss0.baidu.com/7051cy89RMgCncy6lo7D0j9wexYrbOWh7c50","Xhttp://a.hiphotos.baidu.com":"https://gss0.baidu.com/94o3dSag_xI4khGko9WTAnF6hhy","Xhttp://b.hiphotos.baidu.com":"https://gss0.baidu.com/9vo3dSag_xI4khGko9WTAnF6hhy","Xhttp://c.hiphotos.baidu.com":"https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy","Xhttp://d.hiphotos.baidu.com":"https://gss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy","Xhttp://e.hiphotos.baidu.com":"https://gss0.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy","Xhttp://f.hiphotos.baidu.com":"https://gss0.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy","Xhttp://g.hiphotos.baidu.com":"https://gss0.baidu.com/-fo3dSag_xI4khGko9WTAnF6hhy","Xhttp://h.hiphotos.baidu.com":"https://gss0.baidu.com/7Po3dSag_xI4khGko9WTAnF6hhy","Xhttp://priv.hiphotos.baidu.com":"https://gss0.baidu.com/7Po3dSag_xI4khGko9WTAnF6hhy","Xhttp://himg.bdimg.com":"https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG","Xhttp://imgsrc.baidu.com":"https://gss0.baidu.com/70cFfyinKgQFm2e88IuM_a","Xhttp://iknowwap.bdimg.com":"https://gss0.bdstatic.com/7051cy7z2RZ3otebn9fN2DJv","Xhttp://iknow02.bosstatic.bdimg.com":"https://gss0.bdstatic.com/7051cy89RcgCncy6lo7D0j9wexYrbOWh7c50","Xhttp://iknow03.bosstatic.bdimg.com":"https://gss0.bdstatic.com/7051cy89RsgCncy6lo7D0j9wexYrbOWh7c50","Xhttp://iknow04.bosstatic.bdimg.com":"https://gss0.bdstatic.com/7051cy89Q1gCncy6lo7D0j9wexYrbOWh7c50","Xhttp://iknow05.bosstatic.bdimg.com":"https://gss0.bdstatic.com/7051cy89QMgCncy6lo7D0j9wexYrbOWh7c50","Xhttp://iknow-base.bj.bcebos.com":"https://gss0.bdstatic.com/7051cy89QMgCncy6lo7D0j9wexYrbOWh7c50","Xhttp://img.baidu.com":"https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq","Xhttp://img.iknow.bdimg.com":"https://gss0.bdstatic.com/70cFsj3f_gcX8t7mm9GUKT-xh_","Xhttp://mt1.baidu.com":"https://gss0.baidu.com/8_BXsjip0QIZ8tyhnq","Xhttp://mt2.baidu.com":"https://gss0.bdstatic.com/8_BYsjip0QIZ8tyhnq","Xhttp://mt3.baidu.com":"https://gss0.bdstatic.com/8_BZsjip0QIZ8tyhnq","Xhttp://mt4.baidu.com":"https://gss0.bdstatic.com/8_BSsjip0QIZ8tyhnq","Xhttp://msg.baidu.com":"https://gsp0.baidu.com/8_UFsjip0QIZ8tyhnq","Xhttp://nssug.baidu.com":"https://gsp0.baidu.com/8qUZeT8a2gU2pMbgoY3K","Xhttp://iknowpc.bdimg.com":"https://gss0.bdstatic.com/7051cy792sgCpNKfpU_Y_D3","Xhttp://captcha.baidu.com":"https://gsp0.baidu.com/9bMWeDmg2MgCo2Kml5_Y_D3"},h=null,i=function(t,s){return t&&"string"==typeof t?s?t.replace(/\W(?:src|img)="(http:\/\/[\.\w\-]+).+?"/gi,function(t,s){return c["X"+s]?t.replace(s,c["X"+s]):t}).replace(/background(?:\-image)?:\s*(?:#(?:[A-Za-z0-9]{3}|[A-Za-z0-9]{6})\s+)?url\(['"]?(http:\/\/[\.\w\-]+).+?['"]?\)/gi,function(t,s){return c["X"+s]?t.replace(s,c["X"+s]):t}):(t=t.replace(/^\s+/g,""),t.indexOf("http:")?t:t.replace(/^(http:\/\/[\w\d\.\-]+)/,function(t,s){return c["X"+s]?t.replace(s,c["X"+s]):t})):t},p=function(t){if(!t||"string"!=typeof t)return t;if(!h){h={};for(var s in c)h[c[s]]=s.substr(1)}return t.replace(/(?:src|img)="(https:\/\/gss0\.bdstatic\.com\/[\.\w\-]+|https:\/\/gsp0\.baidu\.com\/[\.\w\-]+|https:\/\/gss0\.baidu\.com\/[\.\w\-]+).+?"/gi,function(t,s){return h[s]?t.replace(s,h[s]):t})},a={autoTrans:location.href.indexOf("https:")?function(t){return t}:i,getOrigin:p,forceTrans:i};o.exports=a});
;define("common:widget/js/util/template/template.js",function(e,n,t){e("common:widget/js/util/https/https.js");window.baidu=window.baidu||{},baidu.template=function(e,n){var t=function(){if(!window.document)return a._compile(e);var n=document.getElementById(e);if(n){if(a.cache[e])return a.cache[e];var t=/^(textarea|input)$/i.test(n.nodeName)?n.value:n.innerHTML;return a._compile(t)}return a._compile(e)}();if(a._isObject(n))for(var r in a._method)"undefined"==typeof n[r]&&(n[r]=a._method[r]);var p=a._isObject(n)?t(n):t;return t=null,p};var a=baidu.template;a.versions=a.versions||[],a.versions.push("1.0.6"),a.cache={},a.LEFT_DELIMITER=a.LEFT_DELIMITER||"<%",a.RIGHT_DELIMITER=a.RIGHT_DELIMITER||"%>",a.ESCAPE=!0,a._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},a._encodeReg=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")},a._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")},a._compile=function(e){var n="var https = require('common:widget/js/util/https/https.js');\nvar __2ssl__=https.autoTrans;\nvar _template_fun_array=[];\nvar fn=(function(__data__){\nvar _template_varName='';\nfor(name in __data__){\n_template_varName+=('var '+name+'=__data__[\"'+name+'\"];');\n};\neval(_template_varName);\n_template_fun_array.push('"+a._analysisStr(e)+"');\n_template_varName=null;\n})(_template_object);\nfn = null;\nreturn _template_fun_array.join('');\n";return new Function("_template_object",n)},a._isObject=function(e){return"function"==typeof e||!(!e||"object"!=typeof e)},a._analysisStr=function(e){var n=a.LEFT_DELIMITER,t=a.RIGHT_DELIMITER,r=a._encodeReg(n),p=a._encodeReg(t);return e=String(e).replace(new RegExp("("+r+"[^"+p+"]*)//.*\n","g"),"$1").replace(new RegExp("<!--.*?-->","g"),"").replace(new RegExp(r+"\\*.*?\\*"+p,"g"),"").replace(new RegExp("[\\r\\t\\n]","g"),"").replace(new RegExp(r+"(?:(?!"+p+")[\\s\\S])*"+p+"|((?:(?!"+r+")[\\s\\S])+)","g"),function(e,n){var t="";if(n)for(t=n.replace(/\\/g,"&#92;").replace(/'/g,"&#39;");/<[^<]*?&#39;[^<]*?>/g.test(t);)t=t.replace(/(<[^<]*?)&#39;([^<]*?>)/g,"$1\r$2");else t=e;return t}),e=e.replace(new RegExp("("+r+"[\\s]*?var[\\s]*?.*?[\\s]*?[^;])[\\s]*?"+p,"g"),"$1;"+t).replace(new RegExp("("+r+":?[hvu]?[\\s]*?=[\\s]*?[^;|"+p+"]*?);[\\s]*?"+p,"g"),"$1"+t).split(n).join("	"),e=a.ESCAPE?e.replace(new RegExp("\\t=(.*?)"+p,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'"):e.replace(new RegExp("\\t=(.*?)"+p,"g"),"',typeof($1) === 'undefined'?'':$1,'"),e=e.replace(new RegExp("\\t:h=(.*?)"+p,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'").replace(new RegExp("\\t(?::=|-)(.*?)"+p,"g"),"',typeof($1)==='undefined'?'':$1,'").replace(new RegExp("\\t:u=(.*?)"+p,"g"),"',typeof($1)==='undefined'?'':encodeURIComponent($1),'").replace(new RegExp("\\t:v=(.*?)"+p,"g"),"',typeof($1)==='undefined'?'':baidu.template._encodeEventHTML($1),'").split("	").join("');").split(t).join("_template_fun_array.push('").split("\r").join("\\'")},window.baiduTemplate=a,a.LEFT_DELIMITER="<#",a.RIGHT_DELIMITER="#>",t.exports=a});
;define("common:widget/js/util/uri/uri.js",function(t,o,m){var a=(t("common:widget/lib/jquery/jquery.js"),{bindok:"/static/common/html/bindok_b31ece9.html",jump:"/static/common/html/jump_a132b4c.html",map:"/static/common/html/map_c381661.html",qbasktoteam:"/static/common/html/qbasktoteam_d726756.html",username:"/static/common/html/username_795a017.html",v2Jump:"/static/common/html/v2Jump_87877d8.html",v3Jump:"/static/common/html/v3Jump_13360c2.html",xd:"/static/common/html/xd_2e211f5.html",addmapBrowse:"/static/common/html/map_add_for_browse_23f1434.html",addmapAddress:"/static/common/html/map_add_address_c352765.html",userSetJump:"/static/common/html/user_set_jump_7280f8b.html",clipboardSwf:"/static/common/swf/zeroClipboard_d027837.swf",fileUploaderSwf:"/static/common/swf/fileUploader_3a1c6cc.swf",swfupload:"/static/common/swf/swfupload_3a1c6cc.swf",songofjoySwf:"/static/common/swf/songofjoy/songofjoy_734fd4e.swf",lotterySwf:"/static/common/swf/lottery/lottery_c6a72fa.swf",lotteryXml:"/static/common/swf/lottery/lottery_830d953.xml",uploadSwf:"/static/common/swf/upload_6c721a5.swf",uploadSwfDoc:"/static/swf/uploaderApi.swf",jsUploadSwf:"/static/common/swf/JSUpload_e219cf0.swf",expertAvatarSwf:"/static/common/swf/expertAvatar_bbb4201.swf",hangjiaAvatarSwf:"/static/common/swf/hangjiaAvatar_8c47fb0.swf",zhidaoSwf:"/static/common/swf/zhidao_0e76df1.swf",raffleSwf:"/static/common/swf/raffle_80d754e.swf",webuploaderSwf:"/static/common/swf/webuploader_8e6362e.swf"});"https:"===location.protocol&&(a={bindok:"/static/common/https-html/bindok_480287c.html",jump:"/static/common/https-html/jump_a132b4c.html",map:"/static/common/https-html/map_38fca0d.html",qbasktoteam:"/static/common/https-html/qbasktoteam_2225029.html",username:"/static/common/https-html/username_703137d.html",v2Jump:"/static/common/https-html/v2Jump_87877d8.html",v3Jump:"/static/common/https-html/v3Jump_13360c2.html",xd:"/static/common/https-html/xd_13043e9.html",addmapBrowse:"/static/common/https-html/map_add_for_browse_f7a53ea.html",addmapAddress:"/static/common/https-html/map_add_address_76aec22.html",userSetJump:"/static/common/https-html/user_set_jump_7280f8b.html",clipboardSwf:"/static/common/swf/zeroClipboard_d027837.swf",fileUploaderSwf:"/static/common/swf/fileUploader_3a1c6cc.swf",swfupload:"/static/common/swf/swfupload_3a1c6cc.swf",songofjoySwf:"/static/common/swf/songofjoy/songofjoy_734fd4e.swf",lotterySwf:"/static/common/swf/lottery/lottery_c6a72fa.swf",lotteryXml:"/static/common/swf/lottery/lottery_830d953.xml",uploadSwf:"/static/common/swf/upload_6c721a5.swf",uploadSwfDoc:"/static/swf/uploaderApi.swf",jsUploadSwf:"/static/common/swf/JSUpload_e219cf0.swf",expertAvatarSwf:"/static/common/swf/expertAvatar_bbb4201.swf",hangjiaAvatarSwf:"/static/common/swf/hangjiaAvatar_8c47fb0.swf",zhidaoSwf:"/static/common/swf/zhidao_0e76df1.swf",raffleSwf:"/static/common/swf/raffle_80d754e.swf",webuploaderSwf:"/static/common/swf/webuploader_8e6362e.swf"}),m.exports=a});
;define("common:widget/js/util/store/store.js",function(e,t,n){function r(){try{return f in s&&s[f]}catch(e){return!1}}function i(){try{return d in s&&s[d]&&s[d][s.location.hostname]}catch(e){return!1}}function o(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(a),l.body.appendChild(a),a.addBehavior("#default#userData"),a.load(f);var n=e.apply(c,t);return l.body.removeChild(a),n}}var a,u=e("common:widget/js/util/tangram/tangram.js"),c={},s=window,l=s.document,f="localStorage",d="globalStorage",m="__storejs__";if(c.disabled=!1,c.set=function(){},c.get=function(){},c.remove=function(){},c.clear=function(){},c.transact=function(e,t){var n=c.get(e);"undefined"==typeof n&&(n={}),t(n),c.set(e,n)},c.serialize=function(e){return u.json.stringify(e)},c.deserialize=function(e){return"string"!=typeof e?void 0:u.json.parse(e)},r())a=s[f],c.set=function(e,t){a.setItem(e,c.serialize(t))},c.get=function(e){return c.deserialize(a.getItem(e))},c.remove=function(e){a.removeItem(e)},c.clear=function(){a.clear()};else if(i())a=s[d][s.location.hostname],c.set=function(e,t){a[e]=c.serialize(t)},c.get=function(e){return c.deserialize(a[e]&&a[e].value)},c.remove=function(e){delete a[e]},c.clear=function(){for(var e in a)delete a[e]};else if(l.documentElement.addBehavior){var a=l.createElement("div");c.set=o(function(e,t,n){e.setAttribute(t,c.serialize(n)),e.save(f)}),c.get=o(function(e,t){return c.deserialize(e.getAttribute(t))}),c.remove=o(function(e,t){e.removeAttribute(t),e.save(f)}),c.clear=o(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(f);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(f)})}try{c.set(m,m),c.get(m)!=m&&(c.disabled=!0),c.remove(m)}catch(v){c.disabled=!0}n.exports=c});
;define("common:widget/js/util/webuploader/webuploader.js",function(e){var t=e("common:widget/lib/jquery/jquery.js");return function(e,n){var r={},i=function(e,t){var n,r,i;if("string"==typeof e)return s(e);for(n=[],r=e.length,i=0;r>i;i++)n.push(s(e[i]));return t.apply(null,n)},o=function(e,t,n){2===arguments.length&&(n=t,t=null),i(t||[],function(){a(e,n,arguments)})},a=function(e,t,n){var o,a={exports:t};"function"==typeof t&&(n.length||(n=[i,a.exports,a]),o=t.apply(null,n),void 0!==o&&(a.exports=o)),r[e]=a.exports},s=function(t){var n=r[t]||e[t];if(!n)throw new Error("`"+t+"` is undefined");return n},u=function(e){var t,n,i,o,a,s;s=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in r)if(n=e,r.hasOwnProperty(t)){for(i=t.split("/"),a=s(i.pop());o=s(i.shift());)n[o]=n[o]||{},n=n[o];n[a]=r[t]}return e},c=function(t){return e.__dollar=t,u(n(e,o,i))};return c(t)}(window,function(e,t,n){t("dollar-third",[],function(){var t=e.__dollar||e.jQuery||e.Zepto;if(!t)throw new Error("jQuery or Zepto not found!");return t}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function r(e){return function(){return s.apply(e,arguments)}}function i(e,t){return function(){return e.apply(t,arguments)}}function o(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var a=function(){},s=Function.call;return{version:"0.1.5",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),r=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),i=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),o=e.match(/Firefox\/([\d.]+)/),a=e.match(/Safari\/([\d.]+)/),s=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),r&&(t.chrome=parseFloat(r[1])),i&&(t.ie=parseFloat(i[1])),o&&(t.firefox=parseFloat(o[1])),a&&(t.safari=parseFloat(a[1])),s&&(t.opera=parseFloat(s[1])),t}(navigator.userAgent),os:function(e){var t={},n=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),r=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.android=parseFloat(n[1])),r&&(t.ios=parseFloat(r[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,r){var i;return"function"==typeof n?(i=n,n=null):i=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return e.apply(this,arguments)},t.extend(!0,i,e,r||{}),i.__super__=e.prototype,i.prototype=o(e.prototype),n&&t.extend(!0,i.prototype,n),i},noop:a,bindFn:i,log:function(){return e.console?i(console.log,console):a}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:r([].slice),guid:function(){var e=0;return function(t){for(var n=(+new Date).toString(32),r=0;5>r;r++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var r;for(n=n||["B","K","M","G","TB"];(r=n.shift())&&e>1024;)e/=1024;return("B"===r?e:e.toFixed(t||2))+r}}}),t("mediator",["base"],function(e){function t(e,t,n,r){return o.grep(e,function(e){return!(!e||t&&e.e!==t||n&&e.cb!==n&&e.cb._cb!==n||r&&e.ctx!==r)})}function n(e,t,n){o.each((e||"").split(s),function(e,r){n(r,t)})}function r(e,t){for(var n,r=!1,i=-1,o=e.length;++i<o;)if(n=e[i],n.cb.apply(n.ctx2,t)===!1){r=!0;break}return!r}var i,o=e.$,a=[].slice,s=/\s+/;return i={on:function(e,t,r){var i,o=this;return t?(i=this._events||(this._events=[]),n(e,t,function(e,t){var n={e:e};n.cb=t,n.ctx=r,n.ctx2=r||o,n.id=i.length,i.push(n)}),this):this},once:function(e,t,r){var i=this;return t?(n(e,t,function(e,t){var n=function(){return i.off(e,n),t.apply(r||i,arguments)};n._cb=t,i.on(e,n,r)}),i):i},off:function(e,r,i){var a=this._events;return a?e||r||i?(n(e,r,function(e,n){o.each(t(a,e,n,i),function(){delete a[this.id]})}),this):(this._events=[],this):this},trigger:function(e){var n,i,o;return this._events&&e?(n=a.call(arguments,1),i=t(this._events,e),o=t(this._events,"all"),r(i,n)&&r(o,arguments)):this}},o.extend({installTo:function(e){return o.extend(e,i)}},i)}),t("uploader",["base","mediator"],function(e,t){function n(e){this.options=r.extend(!0,{},n.options,e),this._init(this.options)}var r=e.$;return n.options={},t.installTo(n.prototype),r.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){n.prototype[e]=function(){return this.request(t,arguments)}}),r.extend(n.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var n=this.options;return arguments.length>1?void(r.isPlainObject(t)&&r.isPlainObject(n[e])?r.extend(n[e],t):n[e]=t):e?n[e]:n},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var n=[].slice.call(arguments,1),i=this.options,o="on"+e.substring(0,1).toUpperCase()+e.substring(1);return t.trigger.apply(this,arguments)===!1||r.isFunction(i[o])&&i[o].apply(this,n)===!1||r.isFunction(this[o])&&this[o].apply(this,n)===!1||t.trigger.apply(t,[this,e].concat(n))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=n.create=function(e){return new n(e)},e.Uploader=n,n}),t("runtime/runtime",["base","mediator"],function(e,t){function n(t){this.options=r.extend({container:document.body},t),this.uid=e.guid("rt_")}var r=e.$,i={},o=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return r.extend(n.prototype,{getContainer:function(){var e,t,n=this.options;return this._container?this._container:(e=r(n.container||document.body),t=r(document.createElement("div")),t.attr("id","rt_"+this.uid),t.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.append(t),e.addClass("webuploader-container"),this._container=t,this._parent=e,t)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),n.orders="html5,flash",n.addRuntime=function(e,t){i[e]=t},n.hasRuntime=function(e){return!!(e?i[e]:o(i))},n.create=function(e,t){var a,s;if(t=t||n.orders,r.each(t.split(/\s*,\s*/g),function(){return i[this]?(a=this,!1):void 0}),a=a||o(i),!a)throw new Error("Runtime Error");return s=new i[a](e)},t.installTo(n.prototype),n}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function r(t,r){var o,a=e.Deferred();this.uid=e.guid("client_"),this.runtimeReady=function(e){return a.done(e)},this.connectRuntime=function(t,s){if(o)throw new Error("already connected!");return a.done(s),"string"==typeof t&&i.get(t)&&(o=i.get(t)),o=o||i.get(null,r),o?(e.$.extend(o.options,t),o.__promise.then(a.resolve),o.__client++):(o=n.create(t,t.runtimeOrder),o.__promise=a.promise(),o.once("ready",a.resolve),o.init(),i.add(o),o.__client=1),r&&(o.__standalone=r),o},this.getRuntime=function(){return o},this.disconnectRuntime=function(){o&&(o.__client--,o.__client<=0&&(i.remove(o),delete o.__promise,o.destroy()),o=null)},this.exec=function(){if(o){var n=e.slice(arguments);return t&&n.unshift(t),o.exec.apply(this,n)}},this.getRuid=function(){return o&&o.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var i;return i=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var r;if(t)return e[t];for(r in e)if(!n||!e[r].__standalone)return e[r];return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(r.prototype),r}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},r.options,e),e.container=i(e.container),e.container.length&&n.call(this,"DragAndDrop")}var i=e.$;return r.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/widget",["base","uploader"],function(e,t){function n(e){if(!e)return!1;var t=e.length,n=i.type(e);return 1===e.nodeType&&t?!0:"array"===n||"function"!==n&&"string"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){this.owner=e,this.options=e.options}var i=e.$,o=t.prototype._init,a=t.prototype.destroy,s={},u=[];return i.extend(r.prototype,{init:e.noop,invoke:function(e,t){var n=this.responseMap;return n&&e in n&&n[e]in this&&i.isFunction(this[n[e]])?this[n[e]].apply(this,t):s},request:function(){return this.owner.request.apply(this.owner,arguments)}}),i.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[],n=e.options.disableWidgets||"";return i.each(u,function(r,i){(!n||!~n.indexOf(i._name))&&t.push(new i(e))}),o.apply(e,arguments)},request:function(t,r,i){var o,a,u,c,l=0,f=this._widgets,d=f&&f.length,h=[],p=[];for(r=n(r)?r:[r];d>l;l++)o=f[l],a=o.invoke(t,r),a!==s&&(e.isPromise(a)?p.push(a):h.push(a));return i||p.length?(u=e.when.apply(e,p),c=u.pipe?"pipe":"then",u[c](function(){var t=e.Deferred(),n=arguments;return 1===n.length&&(n=n[0]),setTimeout(function(){t.resolve(n)},1),t.promise()})[i?c:"done"](i||e.noop)):h[0]},destroy:function(){a.apply(this,arguments),this._widgets=null}}),t.register=r.register=function(t,n){var o,a={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(n=t,i.each(n,function(e){return"_"===e[0]||"name"===e?void("name"===e&&(a.name=n.name)):void(a[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e)})):a=i.extend(a,t),n.responseMap=a,o=e.inherits(r,n),o._name=a.name,u.push(o),o},t.unRegister=r.unRegister=function(e){if(e&&"anonymous"!==e)for(var t=u.length;t--;)u[t]._name===e&&u.splice(t,1)},r}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var r=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(t.dnd&&"html5"===this.request("predict-runtime-type")){var i,o=this,a=e.Deferred(),s=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept});return this.dnd=i=new n(s),i.once("ready",a.resolve),i.on("drop",function(e){o.request("add-file",[e])}),i.on("accept",function(e){return o.owner.trigger("dndAccept",e)}),i.init(),a.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},e),e.container=i(e.container||document.body),n.call(this,"FilePaste")}var i=e.$;return e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var r=e.$;return t.register({name:"paste",init:function(t){if(t.paste&&"html5"===this.request("predict-runtime-type")){var i,o=this,a=e.Deferred(),s=r.extend({},{container:t.paste,accept:t.accept});return this.paste=i=new n(s),i.once("ready",a.resolve),i.on("paste",function(e){o.owner.request("add-file",[e])}),i.init(),a.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var r=this;r.source=n,r.ruid=e,this.size=n.size||0,this.type=!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?"image/"+("jpg"===this.ext?"jpeg":this.ext):n.type||"application/octet-stream",t.call(r,"Blob"),this.uid=n.uid||this.uid,e&&r.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function n(e,n){var o;this.name=n.name||"untitled"+r++,o=i.exec(n.name)?RegExp.$1.toLowerCase():"",!o&&n.type&&(o=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(n.type)?RegExp.$1.toLowerCase():"",this.name+="."+o),this.ext=o,this.lastModifiedDate=n.lastModifiedDate||(new Date).toLocaleString(),t.apply(this,arguments)}var r=1,i=/\.([^.]+)$/;return e.inherits(t,n)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,r){function i(e){if(e=this.options=o.extend({},i.options,e),e.container=o(e.id),!e.container.length)throw new Error("\u6309\u94ae\u6307\u5b9a\u9519\u8bef");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=o(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var o=t.$;return i.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(n,{constructor:i,init:function(){var n=this,i=n.options,a=i.button;a.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":a.addClass("webuploader-pick-hover");break;case"mouseleave":a.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",o.map(t,function(e){return e=new r(n.getRuid(),e),e._refer=i.container,e}),i.container)}}),n.connectRuntime(i,function(){n.refresh(),n.exec("init",i),n.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),o(e).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),r=t.outerHeight?t.outerHeight():t.height(),i=t.offset();n&&r&&e.css({bottom:"auto",right:"auto",width:n+"px",height:r+"px"}).offset(i)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;o(e).off("resize",this._resizeHandler),t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),i}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var r=e.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var i=this,o=i.options,a=o.accept,s=[];if(t)return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var u,c,l;l=e.Deferred(),u=r.extend({},t,{accept:r.isPlainObject(a)?[a]:a,swf:o.swf,runtimeOrder:o.runtimeOrder,id:this}),c=new n(u),c.once("ready",l.resolve),c.on("select",function(e){i.owner.request("add-file",[e])}),c.init(),i.pickers.push(c),s.push(l.promise())}),e.when.apply(e,s)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function r(e){this.options=i.extend({},r.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var i=e.$;return r.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(t,{constructor:r,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=e.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),r}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var r,i=e.$;return r=function(e){var t=0,n=[],r=function(){for(var r;n.length&&e>t;)r=n.shift(),t+=r[0],r[1]()};return function(e,i,o){n.push([i,o]),e.once("destroy",function(){t-=i,setTimeout(r,1)}),setTimeout(r,1)}}(5242880),i.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(e,t,o,a){var s,u;return e=this.request("get-file",e),e.type.match(/^image/)?(s=i.extend({},this.options.thumb),i.isPlainObject(o)&&(s=i.extend(s,o),o=null),o=o||s.width,a=a||s.height,u=new n(s),u.once("load",function(){e._info=e._info||u.info(),e._meta=e._meta||u.meta(),1>=o&&o>0&&(o=e._info.width*o),1>=a&&a>0&&(a=e._info.height*a),u.resize(o,a)}),u.once("complete",function(){t(!1,u.getAsDataUrl(s.type)),u.destroy()}),u.once("error",function(e){t(e||!0),u.destroy()}),void r(u,e.source.size,function(){e._info&&u.info(e._info),e._meta&&u.meta(e._meta),u.loadFromBlob(e.source)})):void t(!0)},beforeSendFile:function(t){var r,o,a=this.options.compress||this.options.resize,s=a&&a.compressSize||0,u=a&&a.noCompressIfLarger||!1;return t=this.request("get-file",t),!a||!~"image/jpeg,image/jpg".indexOf(t.type)||t.size<s||t._compressed?void 0:(a=i.extend({},a),o=e.Deferred(),r=new n(a),o.always(function(){r.destroy(),r=null}),r.once("error",o.reject),r.once("load",function(){var e=a.width,n=a.height;t._info=t._info||r.info(),t._meta=t._meta||r.meta(),1>=e&&e>0&&(e=t._info.width*e),1>=n&&n>0&&(n=t._info.height*n),r.resize(e,n)}),r.once("complete",function(){var e,n;try{e=r.getAsBlob(a.type),n=t.size,(!u||e.size<n)&&(t.source=e,t.size=e.size,t.trigger("resize",e.size,n)),t._compressed=!0,o.resolve()}catch(i){o.resolve()}}),t._info&&r.info(t._info),t._meta&&r.meta(t._meta),r.loadFromBlob(t.source),o.promise())}})}),t("file",["base","mediator"],function(e,t){function n(){return o+a++}function r(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||1*new Date,this.id=n(),this.ext=s.exec(this.name)?RegExp.$1:"",this.statusText="",u[this.id]=r.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(r.Status.ERROR,e)})}var i=e.$,o="WU_FILE_",a=0,s=/\.([^.]+)$/,u={};return i.extend(r.prototype,{setStatus:function(e,t){var n=u[this.id];"undefined"!=typeof t&&(this.statusText=t),e!==n&&(u[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return u[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete u[this.id]}}),t.installTo(r.prototype),r.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},r}),t("queue",["base","mediator","file"],function(e,t,n){function r(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var i=e.$,o=n.Status;return i.extend(r.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return"string"!=typeof e?e:this._map[e]},fetch:function(e){var t,n,r=this._queue.length;for(e=e||o.QUEUED,t=0;r>t;t++)if(n=this._queue[t],e===n.getStatus())return n;return null},sort:function(e){"function"==typeof e&&this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),n=[],r=0,o=this._queue.length;o>r;r++)e=this._queue[r],(!t.length||~i.inArray(e.getStatus(),t))&&n.push(e);return n},removeFile:function(e){var t=this._map[e.id];t&&(delete this._map[e.id],e.destroy(),this.stats.numofDeleted++)},_fileAdded:function(e){var t=this,n=this._map[e.id];n||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)}))},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case o.PROGRESS:n.numOfProgress--;break;case o.QUEUED:n.numOfQueue--;break;case o.ERROR:n.numOfUploadFailed--;break;case o.INVALID:n.numOfInvalid--;break;case o.INTERRUPT:n.numofInterrupt--}switch(e){case o.QUEUED:n.numOfQueue++;break;case o.PROGRESS:n.numOfProgress++;break;case o.ERROR:n.numOfUploadFailed++;break;case o.COMPLETE:n.numOfSuccess++;break;case o.CANCELLED:n.numOfCancel++;break;case o.INVALID:n.numOfInvalid++;break;case o.INTERRUPT:n.numofInterrupt++}}}),t.installTo(r.prototype),r}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,r,i,o){var a=e.$,s=/\.\w+$/,u=r.Status;return t.register({name:"queue",init:function(t){var r,i,s,u,c,l,f,d=this;if(a.isPlainObject(t.accept)&&(t.accept=[t.accept]),t.accept){for(c=[],s=0,i=t.accept.length;i>s;s++)u=t.accept[s].extensions,u&&c.push(u);c.length&&(l="\\."+c.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),d.accept=new RegExp(l,"i")}return d.queue=new n,d.stats=d.queue.stats,"html5"===this.request("predict-runtime-type")?(r=e.Deferred(),this.placeholder=f=new o("Placeholder"),f.connectRuntime({runtimeOrder:"html5"},function(){d._ruid=f.getRuid(),r.resolve()}),r.promise()):void 0},_wrapFile:function(e){if(!(e instanceof r)){if(!(e instanceof i)){if(!this._ruid)throw new Error("Can't add external files.");e=new i(this._ruid,e)}e=new r(e)}return e},acceptFile:function(e){var t=!e||!e.size||this.accept&&s.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;return e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e)?t.acceptFile(e)?(t.queue.append(e),t.owner.trigger("fileQueued",e),e):void t.owner.trigger("error","Q_TYPE_DENIED",e):void 0},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),e=a.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(e,t){var n=this;e=e.id?e:n.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n,r,i,o=this;if(e)return e=e.id?e:o.queue.getFile(e),e.setStatus(u.QUEUED),void(t||o.request("start-upload"));for(n=o.queue.getFiles(u.ERROR),r=0,i=n.length;i>r;r++)e=n[r],e.setStatus(u.QUEUED);o.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e,n,r=this.options.runtimeOrder||t.orders,i=this.type;if(!i)for(r=r.split(/\s*,\s*/g),e=0,n=r.length;n>e;e++)if(t.hasRuntime(r[e])){this.type=i=r[e];break}return i}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function r(e){var n=this;e=n.options=i.extend(!0,{},r.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var i=e.$;return r.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},i.extend(r.prototype,{appendBlob:function(e,t,n){var r=this,i=r.options;r.getRuid()&&r.disconnectRuntime(),r.connectRuntime(t.ruid,function(){r.exec("init")}),r._blob=t,i.fileVal=e||i.fileVal,i.filename=n||i.filename},append:function(e,t){"object"==typeof e?i.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){"object"==typeof e?i.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;t&&(clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t))}}),n.installTo(r.prototype),r}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,t,n,r){function i(e,t){var n,r,i=[],o=e.source,a=o.size,s=t?Math.ceil(a/t):1,u=0,c=0;for(r={file:e,has:function(){return!!i.length},shift:function(){return i.shift()},unshift:function(e){i.unshift(e)}};s>c;)n=Math.min(t,a-u),i.push({file:e,start:u,end:t?u+n:a,total:a,chunks:s,chunk:c++,cuted:r}),u+=n;return e.blocks=i.concat(),e.remaning=i.length,r}var o=e.$,a=e.isPromise,s=n.Status;o.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),t.register({name:"upload",init:function(){var t=this.owner,n=this;this.runing=!1,this.progress=!1,t.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),t.on("uploadComplete",function(e){e.blocks&&o.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(t){var n=this;if(o.each(n.request("get-files",s.INVALID),function(){n.request("remove-file",this)}),t)if(t=t.id?t:n.request("get-file",t),t.getStatus()===s.INTERRUPT)o.each(n.pool,function(e,n){n.file===t&&n.transport&&n.transport.send()}),t.setStatus(s.QUEUED);else{if(t.getStatus()===s.PROGRESS)return;t.setStatus(s.QUEUED)}else o.each(n.request("get-files",[s.INITED]),function(){this.setStatus(s.QUEUED)});if(!n.runing){n.runing=!0;var r=[];o.each(n.pool,function(e,t){var i=t.file;i.getStatus()===s.INTERRUPT&&(r.push(i),n._trigged=!1,t.transport&&t.transport.send())});for(var t;t=r.shift();)t.setStatus(s.PROGRESS);t||o.each(n.request("get-files",s.INTERRUPT),function(){this.setStatus(s.PROGRESS)}),n._trigged=!1,e.nextTick(n.__tick),n.owner.trigger("startUpload")}},stopUpload:function(t,n){var r=this;if(t===!0&&(n=t,t=null),r.runing!==!1){if(t){if(t=t.id?t:r.request("get-file",t),t.getStatus()!==s.PROGRESS&&t.getStatus()!==s.QUEUED)return;return t.setStatus(s.INTERRUPT),o.each(r.pool,function(e,n){n.file===t&&(n.transport&&n.transport.abort(),r._putback(n),r._popBlock(n))}),e.nextTick(r.__tick)}r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(s.INTERRUPT),n&&o.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(s.INTERRUPT)}),r.owner.trigger("stopUpload")}},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&o.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(s.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||s.COMPLETE),e.skipped=!0,e.blocks&&o.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t,n,r=this,i=r.options;return r._promise?r._promise.always(r.__tick):void(r.pool.length<i.threads&&(n=r._nextBlock())?(r._trigged=!1,t=function(t){r._promise=null,t&&t.file&&r._startSend(t),e.nextTick(r.__tick)},r._promise=a(n)?n.always(t):t(n)):r.remaning||r._getStats().numOfQueue||r._getStats().numofInterrupt||(r.runing=!1,r._trigged||e.nextTick(function(){r.owner.trigger("uploadFinished")}),r._trigged=!0))},_putback:function(e){var t;e.cuted.unshift(e),t=this.stack.indexOf(e.cuted),~t||this.stack.unshift(e.cuted)},_getStack:function(){for(var e,t=0;e=this.stack[t++];){if(e.has()&&e.file.getStatus()===s.PROGRESS)return e;(!e.has()||e.file.getStatus()!==s.PROGRESS&&e.file.getStatus()!==s.INTERRUPT)&&this.stack.splice(--t,1)}return null},_nextBlock:function(){var e,t,n,r,o=this,s=o.options;return(e=this._getStack())?(s.prepareNextFile&&!o.pending.length&&o._prepareNextFile(),e.shift()):o.runing?(!o.pending.length&&o._getStats().numOfQueue&&o._prepareNextFile(),t=o.pending.shift(),n=function(t){return t?(e=i(t,s.chunked?s.chunkSize:0),o.stack.push(e),e.shift()):null},a(t)?(r=t.file,t=t[t.pipe?"pipe":"then"](n),t.file=r,t):n(t)):void 0},_prepareNextFile:function(){var e,t=this,n=t.request("fetch-file"),r=t.pending;n&&(e=t.request("before-send-file",n,function(){return n.getStatus()===s.PROGRESS||n.getStatus()===s.INTERRUPT?n:t._finishFile(n)}),t.owner.trigger("uploadStart",n),n.setStatus(s.PROGRESS),e.file=n,e.done(function(){var t=o.inArray(e,r);~t&&r.splice(t,1,n)}),e.fail(function(e){n.setStatus(s.ERROR,e),t.owner.trigger("uploadError",n,e),t.owner.trigger("uploadComplete",n)}),r.push(e))},_popBlock:function(e){var t=o.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n,r=this,i=t.file;return i.getStatus()!==s.PROGRESS?void(i.getStatus()===s.INTERRUPT&&r._putback(t)):(r.pool.push(t),r.remaning++,t.blob=1===t.chunks?i.source:i.source.slice(t.start,t.end),n=r.request("before-send",t,function(){i.getStatus()===s.PROGRESS?r._doSend(t):(r._popBlock(t),e.nextTick(r.__tick))}),void n.fail(function(){1===i.remaning?r._finishFile(i).always(function(){t.percentage=1,r._popBlock(t),r.owner.trigger("uploadComplete",i),e.nextTick(r.__tick)}):(t.percentage=1,r.updateFileProgress(i),r._popBlock(t),e.nextTick(r.__tick))}))},_doSend:function(t){var n,i,a=this,u=a.owner,c=a.options,l=t.file,f=new r(c),d=o.extend({},c.formData),h=o.extend({},c.headers);t.transport=f,f.on("destroy",function(){delete t.transport,a._popBlock(t),e.nextTick(a.__tick)}),f.on("progress",function(e){t.percentage=e,a.updateFileProgress(l)}),n=function(e){var n;return i=f.getResponseAsJson()||{},i._raw=f.getResponse(),n=function(t){e=t},u.trigger("uploadAccept",t,i,n)||(e=e||"server"),e},f.on("error",function(e,r){t.retried=t.retried||0,t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<c.chunkRetry?(t.retried++,f.send()):(r||"server"!==e||(e=n(e)),l.setStatus(s.ERROR,e),u.trigger("uploadError",l,e),u.trigger("uploadComplete",l))}),f.on("load",function(){var e;return(e=n())?void f.trigger("error",e,!0):void(1===l.remaning?a._finishFile(l,i):f.destroy())}),d=o.extend(d,{id:l.id,name:l.name,type:l.type,lastModifiedDate:l.lastModifiedDate,size:l.size}),t.chunks>1&&o.extend(d,{chunks:t.chunks,chunk:t.chunk}),u.trigger("uploadBeforeSend",t,d,h),f.appendBlob(c.fileVal,t.blob,l.name),f.append(d),f.setRequestHeader(h),f.send()},_finishFile:function(e,t,n){var r=this.owner;return r.request("after-send-file",arguments,function(){e.setStatus(s.COMPLETE),r.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===s.PROGRESS&&e.setStatus(s.ERROR,t),r.trigger("uploadError",e,t)}).always(function(){r.trigger("uploadComplete",e)
})},updateFileProgress:function(e){var t=0,n=0;e.blocks&&(o.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0))}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var r,i=e.$,o={};return r={addValidator:function(e,t){o[e]=t},removeValidator:function(e){delete o[e]}},t.register({name:"validator",init:function(){var t=this;e.nextTick(function(){i.each(o,function(){this.call(t.owner)})})}}),r.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileNumLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){return n>=r&&i&&(i=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",r,e),setTimeout(function(){i=!0},1)),n>=r?!1:!0}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0}))}),r.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileSizeLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){var t=n+e.size>r;return t&&i&&(i=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",r,e),setTimeout(function(){i=!0},1)),t?!1:!0}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0}))}),r.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,r=t.fileSingleSizeLimit;r&&e.on("beforeFileQueued",function(e){return e.size>r?(e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",r,e),!1):void 0})}),r.addValidator("duplicate",function(){function e(e){for(var t,n=0,r=0,i=e.length;i>r;r++)t=e.charCodeAt(r),n=t+(n<<6)+(n<<16)-n;return n}var t=this,n=t.options,r={};n.duplicate||(t.on("beforeFileQueued",function(t){var n=t.__hash||(t.__hash=e(t.name+t.size+t.lastModifiedDate));return r[n]?(this.trigger("error","F_DUPLICATE",t),!1):void 0}),t.on("fileQueued",function(e){var t=e.__hash;t&&(r[t]=!0)}),t.on("fileDequeued",function(e){var t=e.__hash;t&&delete r[t]}),t.on("reset",function(){r={}}))}),r}),t("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e){var t=this;t.getRuid()&&t.disconnectRuntime(),t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(e,t,n,r){return t.register({name:"md5",md5File:function(t,i,o){var a=new n,s=e.Deferred(),u=t instanceof r?t:this.request("get-file",t).source;return a.on("progress load",function(e){e=e||{},s.notify(e.total?e.loaded/e.total:1)}),a.on("complete",function(){s.resolve(a.getResult())}),a.on("error",function(e){s.reject(e)}),arguments.length>1&&(i=i||0,o=o||0,0>i&&(i=u.size+i),0>o&&(o=u.size+o),o=Math.min(o,u.size),u=u.slice(i,o)),a.loadFromBlob(u),s.promise()}})}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){var e={},r=this,i=this.destroy;n.apply(r,arguments),r.type=o,r.exec=function(n,i){var o,s=this,u=s.uid,c=t.slice(arguments,2);return a[n]&&(o=e[u]=e[u]||new a[n](s,r),o[i])?o[i].apply(o,c):void 0},r.destroy=function(){return i&&i.apply(this,arguments)}}var o="html5",a={};return t.inherits(n,{constructor:i,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),i.register=function(e,n){var i=a[e]=t.inherits(r,n);return i},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(o,i),i}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.owner.source,i=r.slice||r.webkitSlice||r.mozSlice;return r=i.call(r,e,n),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var r=e.$,i="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t,n=this,r=n._denied||!1;return e=e.originalEvent||e,n.dndOver||(n.dndOver=!0,t=e.dataTransfer.items,t&&t.length&&(n._denied=r=!n.trigger("accept",t)),n.elem.addClass(i+"over"),n.elem[r?"addClass":"removeClass"](i+"denied")),e.dataTransfer.dropEffect=r?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!r.contains(t,e.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e,t=this;return e=function(){t.dndOver=!1,t.elem.removeClass(i+"over "+i+"denied")},clearTimeout(t._leaveTimer),t._leaveTimer=setTimeout(e,100),!1},_dropHandler:function(e){var t,o,a=this,s=a.getRuid(),u=a.elem.parent().get(0);if(u&&!r.contains(u,e.currentTarget))return!1;e=e.originalEvent||e,t=e.dataTransfer;try{o=t.getData("text/html")}catch(c){}return o?void 0:(a._getTansferFiles(t,function(e){a.trigger("drop",r.map(e,function(e){return new n(s,e)}))}),a.dndOver=!1,a.elem.removeClass(i+"over"),!1)},_getTansferFiles:function(t,n){var r,i,o,a,s,u,c,l=[],f=[];for(r=t.items,i=t.files,c=!(!r||!r[0].webkitGetAsEntry),s=0,u=i.length;u>s;s++)o=i[s],a=r&&r[s],c&&a.webkitGetAsEntry().isDirectory?f.push(this._traverseDirectoryTree(a.webkitGetAsEntry(),l)):l.push(o);e.when.apply(e,f).done(function(){l.length&&n(l)})},_traverseDirectoryTree:function(t,n){var r=e.Deferred(),i=this;return t.isFile?t.file(function(e){n.push(e),r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){var o,a=t.length,s=[],u=[];for(o=0;a>o;o++)s.push(i._traverseDirectoryTree(t[o],u));e.when.apply(e,s).then(function(){n.push.apply(n,u),r.resolve()},r.reject)}),r.promise()},destroy:function(){var e=this.elem;e&&(e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler)))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t,n,r,i,o=this.options,a=this.elem=o.container,s=".*";if(o.accept){for(t=[],n=0,r=o.accept.length;r>n;n++)i=o.accept[n].mimeTypes,i&&t.push(i);t.length&&(s=t.join(","),s=s.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=s=new RegExp(s,"i"),this.hander=e.bindFn(this._pasteHander,this),a.on("paste",this.hander)},_pasteHander:function(e){var t,r,i,o,a,s=[],u=this.getRuid();for(e=e.originalEvent||e,t=e.clipboardData.items,o=0,a=t.length;a>o;o++)r=t[o],"file"===r.kind&&(i=r.getAsFile())&&s.push(new n(u,i));s.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",s))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e,t,r,i,o=this.getRuntime().getContainer(),a=this,s=a.owner,u=a.options,c=this.label=n(document.createElement("label")),l=this.input=n(document.createElement("input"));if(l.attr("type","file"),l.attr("name",u.name),l.addClass("webuploader-element-invisible"),c.on("click",function(){l.trigger("click")}),c.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),u.multiple&&l.attr("multiple","multiple"),u.accept&&u.accept.length>0){for(e=[],t=0,r=u.accept.length;r>t;t++)e.push(u.accept[t].mimeTypes);l.attr("accept",e.join(","))}o.append(l),o.append(c),i=function(e){s.trigger(e.type)},l.on("change",function(e){var t,r=arguments.callee;a.files=e.target.files,t=this.cloneNode(!0),t.value=null,this.parentNode.replaceChild(t,this),l.off(),l=n(t).on("change",r).on("mouseenter mouseleave",i),s.trigger("change")}),c.on("mouseenter mouseleave",i)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,r=t.noop,i=r;return n&&(r=function(){return n.createObjectURL.apply(n,arguments)},i=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:r,revokeObjectURL:i,dataURL2Blob:function(e){var t,n,r,i,o,a;for(a=e.split(","),t=~a[0].indexOf("base64")?atob(a[1]):decodeURIComponent(a[1]),r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return o=a[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(r,o)},dataURL2ArrayBuffer:function(e){var t,n,r,i;for(i=e.split(","),t=~i[0].indexOf("base64")?atob(i[1]):decodeURIComponent(i[1]),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer},arrayBufferToBlob:function(t,n){var r,i=e.BlobBuilder||e.WebKitBlobBuilder;return i?(r=new i,r.append(t),r.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,r=new FileReader;r.onload=function(){t(!1,n._parse(this.result)),r=r.onload=r.onerror=null},r.onerror=function(e){t(e.message),r=r.onload=r.onerror=null},e=e.slice(0,n.maxMetaDataSize),r.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(!(e.byteLength<6)){var r,i,o,a,s=new DataView(e),u=2,c=s.byteLength-4,l=u,f={};if(65496===s.getUint16(0)){for(;c>u&&(r=s.getUint16(u),r>=65504&&65519>=r||65534===r)&&(i=s.getUint16(u+2)+2,!(u+i>s.byteLength));){if(o=t.parsers[r],!n&&o)for(a=0;a<o.length;a+=1)o[a].call(t,s,u,i,f);u+=i,l=u}l>6&&(f.imageHead=e.slice?e.slice(2,l):new Uint8Array(e).subarray(2,l))}return f}},updateImageHead:function(e,t){var n,r,i,o=this._parse(e,!0);return i=2,o.imageHead&&(i=2+o.imageHead.byteLength),r=e.slice?e.slice(i):new Uint8Array(e).subarray(i),n=new Uint8Array(t.byteLength+2+r.byteLength),n[0]=255,n[1]=216,n.set(new Uint8Array(t),2),n.set(new Uint8Array(r),t.byteLength+2),n.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,r,i,o,a,s){var u,c,l,f,d,h,p=n.exifTagTypes[o];if(!p)return void e.log("Invalid Exif data: Invalid tag type.");if(u=p.size*a,c=u>4?r+t.getUint32(i+8,s):i+8,c+u>t.byteLength)return void e.log("Invalid Exif data: Invalid data offset.");if(1===a)return p.getValue(t,c,s);for(l=[],f=0;a>f;f+=1)l[f]=p.getValue(t,c+f*p.size,s);if(p.ascii){for(d="",f=0;f<l.length&&(h=l[f],"\x00"!==h);f+=1)d+=h;return d}return l},n.parseExifTag=function(e,t,r,i,o){var a=e.getUint16(r,i);o.exif[a]=n.getExifValue(e,t,r,e.getUint16(r+2,i),e.getUint32(r+4,i),i)},n.parseExifTags=function(t,n,r,i,o){var a,s,u;if(r+6>t.byteLength)return void e.log("Invalid Exif data: Invalid directory offset.");if(a=t.getUint16(r,i),s=r+2+12*a,s+4>t.byteLength)return void e.log("Invalid Exif data: Invalid directory size.");for(u=0;a>u;u+=1)this.parseExifTag(t,n,r+2+12*u,i,o);return t.getUint32(s,i)},n.parseExifData=function(t,r,i,o){var a,s,u=r+10;if(1165519206===t.getUint32(r+4)){if(u+8>t.byteLength)return void e.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(r+8))return void e.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(u)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void e.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(u+2,a))return void e.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(u+4,a),o.exif=new n.ExifMap,s=n.parseExifTags(t,u,u+s,a,o)}},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(){function e(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;64>n;n++){var r=E((t[n]*e+50)/100);1>r?r=1:r>255&&(r=255),k[M[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;64>o;o++){var a=E((i[o]*e+50)/100);1>a?a=1:a>255&&(a=255),S[M[o]]=a}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],u=0,c=0;8>c;c++)for(var l=0;8>l;l++)T[u]=1/(k[M[u]]*s[c]*s[l]*8),F[u]=1/(S[M[u]]*s[c]*s[l]*8),u++}function n(e,t){for(var n=0,r=0,i=new Array,o=1;16>=o;o++){for(var a=1;a<=e[o];a++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=o,r++,n++;n*=2}return i}function r(){_=n(j,N),y=n(V,G),w=n($,Q),x=n(J,W)}function i(){for(var e=1,t=2,n=1;15>=n;n++){for(var r=e;t>r;r++)U[32767+r]=n,A[32767+r]=[],A[32767+r][1]=n,A[32767+r][0]=r;for(var i=-(t-1);-e>=i;i++)U[32767+i]=n,A[32767+i]=[],A[32767+i][1]=n,A[32767+i][0]=t-1+i;e<<=1,t<<=1}}function o(){for(var e=0;256>e;e++)H[e]=19595*e,H[e+256>>0]=38470*e,H[e+512>>0]=7471*e+32768,H[e+768>>0]=-11059*e,H[e+1024>>0]=-21709*e,H[e+1280>>0]=32768*e+8421375,H[e+1536>>0]=-27439*e,H[e+1792>>0]=-5329*e}function a(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(C|=1<<q),n--,q--,0>q&&(255==C?(s(255),s(0)):s(C),q=7,C=0)}function s(e){O.push(z[e])}function u(e){s(e>>8&255),s(255&e)}function c(e,t){var n,r,i,o,a,s,u,c,l,f=0,d=8,h=64;for(l=0;d>l;++l){n=e[f],r=e[f+1],i=e[f+2],o=e[f+3],a=e[f+4],s=e[f+5],u=e[f+6],c=e[f+7];var p=n+c,g=n-c,m=r+u,v=r-u,b=i+s,_=i-s,y=o+a,w=o-a,x=p+y,R=p-y,E=m+b,k=m-b;e[f]=x+E,e[f+4]=x-E;var S=.707106781*(k+R);e[f+2]=R+S,e[f+6]=R-S,x=w+_,E=_+v,k=v+g;var T=.382683433*(x-k),F=.5411961*x+T,A=1.306562965*k+T,U=.707106781*E,I=g+U,O=g-U;e[f+5]=O+F,e[f+3]=O-F,e[f+1]=I+A,e[f+7]=I-A,f+=8}for(f=0,l=0;d>l;++l){n=e[f],r=e[f+8],i=e[f+16],o=e[f+24],a=e[f+32],s=e[f+40],u=e[f+48],c=e[f+56];var C=n+c,q=n-c,B=r+u,L=r-u,P=i+s,z=i-s,H=o+a,M=o-a,j=C+H,N=C-H,$=B+P,Q=B-P;e[f]=j+$,e[f+32]=j-$;var V=.707106781*(Q+N);e[f+16]=N+V,e[f+48]=N-V,j=M+z,$=z+L,Q=L+q;var G=.382683433*(j-Q),J=.5411961*j+G,W=1.306562965*Q+G,X=.707106781*$,K=q+X,Z=q-X;e[f+40]=Z+J,e[f+24]=Z-J,e[f+8]=K+W,e[f+56]=K-W,f++}var Y;for(l=0;h>l;++l)Y=e[l]*t[l],D[l]=Y>0?Y+.5|0:Y-.5|0;return D}function l(){u(65504),u(16),s(74),s(70),s(73),s(70),s(0),s(1),s(1),s(0),u(1),u(1),s(0),s(0)}function f(e,t){u(65472),u(17),s(8),u(t),u(e),s(3),s(1),s(17),s(0),s(2),s(17),s(1),s(3),s(17),s(1)}function d(){u(65499),u(132),s(0);for(var e=0;64>e;e++)s(k[e]);s(1);for(var t=0;64>t;t++)s(S[t])}function h(){u(65476),u(418),s(0);for(var e=0;16>e;e++)s(j[e+1]);for(var t=0;11>=t;t++)s(N[t]);s(16);for(var n=0;16>n;n++)s($[n+1]);for(var r=0;161>=r;r++)s(Q[r]);s(1);for(var i=0;16>i;i++)s(V[i+1]);for(var o=0;11>=o;o++)s(G[o]);s(17);for(var a=0;16>a;a++)s(J[a+1]);for(var c=0;161>=c;c++)s(W[c])}function p(){u(65498),u(12),s(3),s(1),s(0),s(2),s(17),s(3),s(17),s(0),s(63),s(0)}function g(e,t,n,r,i){for(var o,s=i[0],u=i[240],l=16,f=63,d=64,h=c(e,t),p=0;d>p;++p)I[M[p]]=h[p];var g=I[0]-n;n=I[0],0==g?a(r[0]):(o=32767+g,a(r[U[o]]),a(A[o]));for(var m=63;m>0&&0==I[m];m--);if(0==m)return a(s),n;for(var v,b=1;m>=b;){for(var _=b;0==I[b]&&m>=b;++b);var y=b-_;if(y>=l){v=y>>4;for(var w=1;v>=w;++w)a(u);y=15&y}o=32767+I[b],a(i[(y<<4)+U[o]]),a(A[o]),b++}return m!=f&&a(s),n}function m(){for(var e=String.fromCharCode,t=0;256>t;t++)z[t]=e(t)}function v(e){if(0>=e&&(e=1),e>100&&(e=100),R!=e){var n=0;n=Math.floor(50>e?5e3/e:200-2*e),t(n),R=e}}function b(){e||(e=50),m(),r(),i(),o(),v(e)}var _,y,w,x,R,E=(Math.round,Math.floor),k=new Array(64),S=new Array(64),T=new Array(64),F=new Array(64),A=new Array(65535),U=new Array(65535),D=new Array(64),I=new Array(64),O=[],C=0,q=7,B=new Array(64),L=new Array(64),P=new Array(64),z=new Array(256),H=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&v(t),O=new Array,C=0,q=7,u(65496),l(),d(),f(e.width,e.height),h(),p();var n=0,r=0,i=0;C=0,q=7,this.encode.displayName="_encode_";for(var o,s,c,m,b,R,E,k,S,A=e.data,U=e.width,D=e.height,I=4*U,z=0;D>z;){for(o=0;I>o;){for(b=I*z+o,R=b,E=-1,k=0,S=0;64>S;S++)k=S>>3,E=4*(7&S),R=b+k*I+E,z+k>=D&&(R-=I*(z+1+k-D)),o+E>=I&&(R-=o+E-I+4),s=A[R++],c=A[R++],m=A[R++],B[S]=(H[s]+H[c+256>>0]+H[m+512>>0]>>16)-128,L[S]=(H[s+768>>0]+H[c+1024>>0]+H[m+1280>>0]>>16)-128,P[S]=(H[s+1280>>0]+H[c+1536>>0]+H[m+1792>>0]>>16)-128;n=g(B,T,n,_,w),r=g(L,F,r,y,x),i=g(P,F,i,y,x),o+=32}z+=8}if(q>=0){var M=[];M[1]=q+1,M[0]=(1<<q+1)-1,a(M)}u(65497);var j="data:image/jpeg;base64,"+btoa(O.join(""));return O=[],j},b()}return e.encode=function(t,n){var r=new e(n);return r.encode(t)},e}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var r,i=e.canvasToDataUrl;e.canvasToDataUrl=function(e,o,a){var s,u,c,l,f;return n.os.android?("image/jpeg"===o&&"undefined"==typeof r&&(l=i.apply(null,arguments),f=l.split(","),l=~f[0].indexOf("base64")?atob(f[1]):decodeURIComponent(f[1]),l=l.substring(0,2),r=255===l.charCodeAt(0)&&216===l.charCodeAt(1)),"image/jpeg"!==o||r?i.apply(null,arguments):(u=e.width,c=e.height,s=e.getContext("2d"),t.encode(s.getImageData(0,0,u,c),a))):i.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){var r="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},e._metas||"image/jpeg"!==e.type?e.owner.trigger("load"):n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")})},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,r=t._img;t._blob=e,t.type=e.type,r.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(r.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,r,i){var o=this._canvas||(this._canvas=document.createElement("canvas")),a=this.options,s=this._img,u=s.naturalWidth,c=s.naturalHeight,l=this.getOrientation();i=i||1,o.width=n,o.height=r,a.preserveHeaders||this._rotate2Orientaion(o,l),this._renderImageToCanvas(o,s,-e,-t,u*i,c*i),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t,r=this._blob,i=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(r=n.canvasToDataUrl(t,e,i.quality),i.preserveHeaders&&this._metas&&this._metas.imageHead)return r=n.dataURL2ArrayBuffer(r),r=n.updateImageHead(r,this._metas.imageHead),r=n.arrayBufferToBlob(r,e)}else r=n.canvasToDataUrl(t,e);r=n.dataURL2Blob(r)}return r},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,"image/jpeg"===e?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src=r,this._img=this._blob=null},_resize:function(e,t,n,r){var i,o,a,s,u,c=this.options,l=e.width,f=e.height,d=this.getOrientation();~[5,6,7,8].indexOf(d)&&(n^=r,r^=n,n^=r),i=Math[c.crop?"max":"min"](n/l,r/f),c.allowMagnify||(i=Math.min(1,i)),o=l*i,a=f*i,c.crop?(t.width=n,t.height=r):(t.width=o,t.height=a),s=(t.width-o)/2,u=(t.height-a)/2,c.preserveHeaders||this._rotate2Orientaion(t,d),this._renderImageToCanvas(t,e,s,u,o,a)},_rotate2Orientaion:function(e,t){var n=e.width,r=e.height,i=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=r,e.height=n}switch(t){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,r),i.rotate(Math.PI);break;case 4:i.translate(0,r),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-r),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var r,i,o,a=document.createElement("canvas"),s=a.getContext("2d"),u=0,c=n,l=n;for(a.width=1,a.height=n,s.drawImage(e,0,0),r=s.getImageData(0,0,1,n).data;l>u;)i=r[4*(l-1)+3],0===i?c=l:u=l,l=c+u>>1;return o=l/n,0===o?1:o}function n(e){var t,n,r=e.naturalWidth,i=e.naturalHeight;return r*i>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-r+1,0),0===n.getImageData(0,0,1,1).data[3]):!1}return e.os.ios?e.os.ios>=7?function(e,n,r,i,o,a){var s=n.naturalWidth,u=n.naturalHeight,c=t(n,s,u);return e.getContext("2d").drawImage(n,0,0,s*c,u*c,r,i,o,a)}:function(e,r,i,o,a,s){var u,c,l,f,d,h,p,g=r.naturalWidth,m=r.naturalHeight,v=e.getContext("2d"),b=n(r),_="image/jpeg"===this.type,y=1024,w=0,x=0;for(b&&(g/=2,m/=2),v.save(),u=document.createElement("canvas"),u.width=u.height=y,c=u.getContext("2d"),l=_?t(r,g,m):1,f=Math.ceil(y*a/g),d=Math.ceil(y*s/m/l);m>w;){for(h=0,p=0;g>h;)c.clearRect(0,0,y,y),c.drawImage(r,-h,-w),v.drawImage(u,0,0,y,y,i+p,o+x,f,d),h+=y,p+=f;w+=y,x+=d}v.restore(),u=c=null}:function(t){var n=e.slice(arguments,1),r=t.getContext("2d");r.drawImage.apply(r,n)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,r=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t,n,i,o=this.owner,a=this.options,s=this._initAjax(),u=o._blob,c=a.server;a.sendAsBinary?(c+=(/\?/.test(c)?"&":"?")+r.param(o._formData),n=u.getSource()):(t=new FormData,r.each(o._formData,function(e,n){t.append(e,n)}),t.append(a.fileVal,u.getSource(),a.filename||o._formData.name||"")),a.withCredentials&&"withCredentials"in s?(s.open(a.method,c,!0),s.withCredentials=!0):s.open(a.method,c),this._setRequestHeader(s,a.headers),n?(s.overrideMimeType&&s.overrideMimeType("application/octet-stream"),e.os.android?(i=new FileReader,i.onload=function(){s.send(this.result),i=i.onload=null},i.readAsArrayBuffer(n)):s.send(n)):s.send(t)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,r=this.options;return!r.withCredentials||"withCredentials"in t||"undefined"==typeof XDomainRequest||(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){return 4===t.readyState?(t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server")):e.trigger("error",e._status?"http":"abort")):void 0},e._xhr=t,t},_setRequestHeader:function(e,t){r.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(n){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,o,a){return n=t(t(n,e),t(i,a)),t(n<<o|n>>>32-o,r)},r=function(e,t,r,i,o,a,s){return n(t&r|~t&i,e,t,o,a,s)},i=function(e,t,r,i,o,a,s){return n(t&i|r&~i,e,t,o,a,s)},o=function(e,t,r,i,o,a,s){return n(t^r^i,e,t,o,a,s)},a=function(e,t,r,i,o,a,s){return n(r^(t|~i),e,t,o,a,s)},s=function(e,n){var s=e[0],u=e[1],c=e[2],l=e[3];s=r(s,u,c,l,n[0],7,-680876936),l=r(l,s,u,c,n[1],12,-389564586),c=r(c,l,s,u,n[2],17,606105819),u=r(u,c,l,s,n[3],22,-1044525330),s=r(s,u,c,l,n[4],7,-176418897),l=r(l,s,u,c,n[5],12,1200080426),c=r(c,l,s,u,n[6],17,-1473231341),u=r(u,c,l,s,n[7],22,-45705983),s=r(s,u,c,l,n[8],7,1770035416),l=r(l,s,u,c,n[9],12,-1958414417),c=r(c,l,s,u,n[10],17,-42063),u=r(u,c,l,s,n[11],22,-1990404162),s=r(s,u,c,l,n[12],7,1804603682),l=r(l,s,u,c,n[13],12,-40341101),c=r(c,l,s,u,n[14],17,-1502002290),u=r(u,c,l,s,n[15],22,1236535329),s=i(s,u,c,l,n[1],5,-165796510),l=i(l,s,u,c,n[6],9,-1069501632),c=i(c,l,s,u,n[11],14,643717713),u=i(u,c,l,s,n[0],20,-373897302),s=i(s,u,c,l,n[5],5,-701558691),l=i(l,s,u,c,n[10],9,38016083),c=i(c,l,s,u,n[15],14,-660478335),u=i(u,c,l,s,n[4],20,-405537848),s=i(s,u,c,l,n[9],5,568446438),l=i(l,s,u,c,n[14],9,-1019803690),c=i(c,l,s,u,n[3],14,-187363961),u=i(u,c,l,s,n[8],20,1163531501),s=i(s,u,c,l,n[13],5,-1444681467),l=i(l,s,u,c,n[2],9,-51403784),c=i(c,l,s,u,n[7],14,1735328473),u=i(u,c,l,s,n[12],20,-1926607734),s=o(s,u,c,l,n[5],4,-378558),l=o(l,s,u,c,n[8],11,-2022574463),c=o(c,l,s,u,n[11],16,1839030562),u=o(u,c,l,s,n[14],23,-35309556),s=o(s,u,c,l,n[1],4,-1530992060),l=o(l,s,u,c,n[4],11,1272893353),c=o(c,l,s,u,n[7],16,-155497632),u=o(u,c,l,s,n[10],23,-1094730640),s=o(s,u,c,l,n[13],4,681279174),l=o(l,s,u,c,n[0],11,-358537222),c=o(c,l,s,u,n[3],16,-722521979),u=o(u,c,l,s,n[6],23,76029189),s=o(s,u,c,l,n[9],4,-640364487),l=o(l,s,u,c,n[12],11,-421815835),c=o(c,l,s,u,n[15],16,530742520),u=o(u,c,l,s,n[2],23,-995338651),s=a(s,u,c,l,n[0],6,-198630844),l=a(l,s,u,c,n[7],10,1126891415),c=a(c,l,s,u,n[14],15,-1416354905),u=a(u,c,l,s,n[5],21,-57434055),s=a(s,u,c,l,n[12],6,1700485571),l=a(l,s,u,c,n[3],10,-1894986606),c=a(c,l,s,u,n[10],15,-1051523),u=a(u,c,l,s,n[1],21,-2054922799),s=a(s,u,c,l,n[8],6,1873313359),l=a(l,s,u,c,n[15],10,-30611744),c=a(c,l,s,u,n[6],15,-1560198380),u=a(u,c,l,s,n[13],21,1309151649),s=a(s,u,c,l,n[4],6,-145523070),l=a(l,s,u,c,n[11],10,-1120210379),c=a(c,l,s,u,n[2],15,718787259),u=a(u,c,l,s,n[9],21,-343485551),e[0]=t(s,e[0]),e[1]=t(u,e[1]),e[2]=t(c,e[2]),e[3]=t(l,e[3])},u=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},c=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},l=function(e){var t,n,r,i,o,a,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)s(l,u(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(l,r),t=0;16>t;t+=1)r[t]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,s(l,r),l},f=function(e){var t,n,r,i,o,a,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;u>=t;t+=64)s(l,c(e.subarray(t-64,t)));for(e=u>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(l,r),t=0;16>t;t+=1)r[t]=0;return i=8*u,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,s(l,r),l},d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=function(e){var t,n="";for(t=0;4>t;t+=1)n+=d[e>>8*t+4&15]+d[e>>8*t&15];return n},p=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=h(e[t]);return e.join("")},g=function(e){return p(l(e))},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==g("hello")&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)s(this._state,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},m.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;i>t;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=e?this._state:p(this._state),this.reset(),n},m.prototype._finish=function(e,t){var n,r,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(s(this._state,e),o=0;16>o;o+=1)e[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,s(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:p(n)},m.hashBinary=function(e,t){var n=l(e);return t?n:p(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)s(this._state,c(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
for(t=0;i>t;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=e?this._state:p(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=f(new Uint8Array(e));return t?n:p(n)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t,n,r=e.getSource(),i=2097152,o=Math.ceil(r.size/i),a=0,s=this.owner,u=new m.ArrayBuffer,c=this,l=r.mozSlice||r.webkitSlice||r.slice;n=new FileReader,(t=function(){var f,d;f=a*i,d=Math.min(f+i,r.size),n.onload=function(t){u.append(t.target.result),s.trigger("progress",{total:e.size,loaded:d})},n.onloadend=function(){n.onloadend=n.onload=null,++a<o?setTimeout(t,1):setTimeout(function(){s.trigger("load"),c.result=u.end(),t=e=r=u=null,s.trigger("complete")},50)},n.readAsArrayBuffer(l.call(r,f,d))})()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function o(){function r(e,t){var n,r,i=e.type||e;n=i.split("::"),r=n[0],i=n[1],"Ready"===i&&r===c.uid?c.trigger("ready"):o[r]&&o[r].trigger(i.toLowerCase(),e,t)}var i={},o={},a=this.destroy,c=this,l=t.guid("webuploader_");n.apply(c,arguments),c.type=s,c.exec=function(e,n){var r,a=this,s=a.uid,l=t.slice(arguments,2);return o[s]=a,u[e]&&(i[s]||(i[s]=new u[e](a,c)),r=i[s],r[n])?r[n].apply(r,l):c.flashExec.apply(a,arguments)},e[l]=function(){var e=arguments;setTimeout(function(){r.apply(null,e)},1)},this.jsreciver=l,this.destroy=function(){return a&&a.apply(this,arguments)},this.flashExec=function(e,n){var r=c.getFlash(),i=t.slice(arguments,2);return r.exec(this.uid,e,n,i)}}var a=t.$,s="flash",u={};return t.inherits(n,{constructor:o,init:function(){var e,n=this.getContainer(),r=this.options;n.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),e='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+r.swf+'" ',t.browser.ie&&(e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+r.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.html(e)},getFlash:function(){return this._flash?this._flash:(this._flash=a("#"+this.uid).get(0),this._flash)}}),o.register=function(e,n){return n=u[e]=t.inherits(r,a.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},n))},i()>=11.4&&n.addRuntime(s,o),o}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t,r,i=n.extend({},e);for(t=i.accept&&i.accept.length,r=0;t>r;r++)i.accept[r].title||(i.accept[r].title="Files");delete i.button,delete i.id,delete i.container,this.flashExec("FilePicker","init",i)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,n,r){var i=t.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e,t=this.owner,n=this.options,r=this._initAjax(),o=t._blob,a=n.server;r.connectRuntime(o.ruid),n.sendAsBinary?(a+=(/\?/.test(a)?"&":"?")+i.param(t._formData),e=o.uid):(i.each(t._formData,function(e,t){r.exec("append",e,t)}),r.exec("appendBlob",n.fileVal,o.uid,n.filename||t._formData.name||"")),this._setRequestHeader(r,n.headers),r.exec("send",{method:n.method,url:a,forceURLStream:n.forceURLStream,mimeType:"application/octet-stream"},e)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new r("XMLHttpRequest");return n.on("uploadprogress progress",function(e){var n=e.loaded/e.total;return n=Math.min(1,Math.max(0,n)),t.trigger("progress",n)}),n.on("load",function(){var r,i=n.exec("getStatus"),o=!1,a="";return n.off(),t._xhr=null,i>=200&&300>i?o=!0:i>=500&&600>i?(o=!0,a="server"):a="http",o&&(t._response=n.exec("getResponse"),t._response=decodeURIComponent(t._response),r=e.JSON&&e.JSON.parse||function(e){try{return new Function("return "+e).call()}catch(t){return{}}},t._responseJson=t._response?r(t._response):{}),n.destroy(),n=null,a?t.trigger("error",a):t.trigger("load")}),n.on("error",function(){n.off(),t._xhr=null,t.trigger("error","http")}),t._xhr=n,n},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.flashExec("Blob","slice",e,n);return new t(r.uid,r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),t("widgets/log",["base","uploader","widgets/widget"],function(e,t){function n(e){var t=i.extend({},r,e),n=o.replace(/^(.*)\?/,"$1"+i.param(t)),a=new Image;a.src=n}var r,i=e.$,o="https:"===location.protocol?"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/pms/img/st.gif??":"http://static.tieba.baidu.com/tb/pms/img/st.gif??",a=(location.hostname||location.host||"protected").toLowerCase(),s=a&&/baidu/i.exec(a);if(s)return r={dv:3,master:"webuploader",online:/test/.exec(a)?0:1,module:"",product:a,type:0},t.register({name:"log",init:function(){var e=this.owner,t=0,r=0;e.on("error",function(e){n({type:2,c_error_code:e})}).on("uploadError",function(e,t){n({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(e){t++,r+=e.size}).on("uploadFinished",function(){n({c_count:t,c_size:r}),t=r=0}),n({c_usage:1})}})}),t("webuploader",["preset/all","widgets/log"],function(e){return e});var r=n;return r("webuploader")})});
;define("common:widget/js/util/visibility/visibility.js",function(i,e,n){var t=i("common:widget/lib/jquery/jquery.js"),o=i("common:widget/js/util/event/event.js"),d={};o.create(d);var c="hidden",m=function(){return"undefined"!=typeof this[c]?void d.trigger(this[c]?"hide":"show"):void 0};c in document?t(document).on("visibilitychange",m):(c="mozHidden")in document?t(document).on("mozvisibilitychange",m):(c="webkitHidden")in document?t(document).on("webkitvisibilitychange",m):(c="msHidden")in document&&t(document).on("msvisibilitychange",m),n.exports=d});
;define("common:widget/js/util/add-stylesheets/add-stylesheets.js",function(e,t,s){var n=e("common:widget/lib/jquery/jquery.js");s.exports=function(e){if("object"==n.type(e)&&!n.isEmptyObject(e)){var t=["\n"];for(var s in e)t.push(s,"{",e[s],"}\n");if(document.createStyleSheet)document.createStyleSheet().cssText=t.join("");else{var o=n('<style type="text/css"></style>');o.append(t.join("")).appendTo(n("head")[0])}}}});
;define("common:widget/js/util/countdown/countdown.js",function(t,n,i){function s(t,n){var i=n-(""+Math.abs(t)).length+1;return Array(i>0?i:0).join(0)+t}var r=t("common:widget/js/util/tangram/tangram.js"),a=t("common:widget/js/ui/base/base.js"),e=a(function(t){var n=this;this.dataArr=[],T.each(t||[],function(){this.seconds>0&&n.dataArr.push(this)}),this._inter=null}).extend({callback:function(t){var n=this.dateFormat||"#{HH}:#{mm}:#{ss}";this.elem.html(r.string(n).format(t))},execution:function(){var t=this,n=0;r(this.dataArr).each(function(i){var s=t._timer(--this.seconds);null==s?(this.complete&&this.complete.call(this),t.dataArr.splice(i,1)):(n++,this.callback&&this.callback.call(this,s))}),0===n&&t.stop()},add:function(t){return t.seconds>0&&this.dataArr.push(t),this},remove:function(t){var n=this.dataArr;return r(n).each(function(i){this.name==t&&n.splice(i,1)}),this},start:function(){if(null===this._inter){var t=this;this.execution(),this._inter=setInterval(function(){t.execution()},1e3)}return this},stop:function(){clearInterval(this._inter),this._inter=null},_timer:function(t){var n={dd:Math.floor(t/86400),HH:s(Math.floor(t/3600)%24,2),mm:s(Math.floor(t/60)%60,2),ss:s(Math.floor(t/1)%60,2)};return n.dd<=0&&n.HH<=0&&n.mm<=0&&n.ss<=0&&(n=null),n}});i.exports=e});
;define("common:widget/js/util/img-resize/img-resize.js",function(i,t,r){function e(i,t,r,e,a){return o(i).each(function(){if(o(this).is("img")){var i=o(this).hide(),c=t||i.attr("width"),u=r||i.attr("height"),g=a||i.attr("align")||"center",d=i.attr("res")||i.attr("src"),f="img_"+ ++o.guid;if(e=o.isFunction(e)?e:function(){this.remove()},h[d])return i.css(s(h[d],c,u,g)).attr({src:h[d].src}).show();var m=new Image;window[f]=m,m.onload=function(){h[d]={width:this.width,height:this.height,src:this.src};var t=i.attr("id")||f;i.after(m).remove(),o(m).css(s(h[d],c,u,g)).show(),m.id=t,n(this,f)},m.onerror=function(t){e.call(i,t),n(this,f)},m.src=d+"?k="+f}})}function n(i,t){i.onload=i.onerror=null,window[t]=null,i=null}function s(i,t,r,e){var n=i.height,s=i.width;if(s>0&&n>0){var h=Math.min(t/s,r/n);h=h>1?1:h;var a={width:s*h,height:n*h};return"center"==e&&o.extend(a,{marginLeft:(t-s*h)/2,marginTop:(r-n*h)/2}),a}return{}}var o=i("common:widget/lib/jquery/jquery.js"),h={};o.fn.imgResize=function(i,t,r,n){return e(this,i,t,r,n)},r.exports={resize:e,getSize:s}});
;define("common:widget/js/util/num2chinese/num2chinese.js",function(n,e,t){t.exports=function(n){for(var e=n.toString(),t=parseInt(e.split("").reverse().join(""),10),i=["","\u5341","\u767e","\u5343","\u4e07"],o=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"],r=e.length,s="",u=t.toString().length,c=0;u>c;c++)s+=0==c&&2==r&&t%10==1?"":o[t%10],s+=t%10==0?"":i[r-c-1],t=Math.floor(t/10);return s}});
;define("common:widget/js/util/suffix-str/suffix-str.js",function(t,e,n){var i=t("common:widget/js/util/tangram/string.js");n.exports=function(t,e,n){var r=t||"";if("string"==typeof t&&Math.max(Math.floor(e),0)){n="undefined"==typeof n?"...":n.toString();var s=i.getByteLength(n);s>e&&(n=i.subByte(n,e),s=i.getByteLength(n)),i.getByteLength(t)>e&&(r=i.subByte(t,e-s)+n)}return r}});
;define("common:widget/js/util/tangram/timeFormater.js",function(e,t){function r(e,t,r){switch(r){case"zh":return i(e+1)+"\u6708";case"en":return["January","February","March","April","May","June","July","August","September","October","November","December"][e].substr(0,t?3:void 0);default:return""}}function n(e,t,r){switch(r){case"zh":return(t?"\u5468":"\u661f\u671f")+(e?i(e):"\u65e5");case"en":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e].substr(0,t?3:void 0);default:return""}}function a(e,t){switch(t){case"zh":return i(e)+"\u65e5";case"en":return e+(4>e%10&&1!=Math.floor(e/10)?["th","st","nd","rd"][e%10]:"th");default:return""}}var u=e("common:widget/js/util/tangram/number.js").pad,i=e("common:widget/js/util/num2chinese/num2chinese.js");t.build=function(e){var t;switch(typeof e){case"number":t=new Date(parseInt(e));break;case"string":if(Number(e))t=arguments.callee(parseInt(e));else{e=e.replace(/-/g,"/").replace("/+d+/","");var r=e.match(/^(.+?)\.(\d+)$/);t=new Date(r&&r[2]?+new Date(r[1])+parseInt(r[2]):e)}break;default:t=e instanceof Date?e:new Date}if("Invalid Date"==t)throw new Error("[TimeFormater Exception]: Invalid Date!");return t},t.format=function(e,t,i){e=this.build(e),t=t||"yyyy/MM/dd HH:mm:ss",i=/^(zh|en)$/i.test(i||(navigator.browserLanguage||navigator.language).substr(0,2))?RegExp.$1.toLowerCase():"en";var s={"h+":e.getHours()>12?e.getHours()-12:e.getHours(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var o in s)t=t.replace(new RegExp(o,"g"),function(e){return u(s[o],Math.min(2,e.length))});return t=t.replace(/f+/g,function(t){return u(e.getMilliseconds(),3).substr(0,Math.min(t.length,3))}),t=t.replace(/y+/g,function(t){return t.length<3?u(e.getFullYear()%1e3,Math.min(t.length,2)):u(e.getFullYear(),t.length)}),t=t.replace(/M+/g,function(t){return t.length<3?u(e.getMonth()+1,t.length):r(e.getMonth(),3==t.length,i)}),t=t.replace(/d+/g,function(t){return t.length<3?u(e.getDate(),t.length):a(e.getDate(),i)}),t=t.replace(/w+/g,function(t){return n(e.getDay(),t.length<2,i)})},t.timeSpan=function(e,t,r){var n=r;e=this.build(e),t=this.build(t),r=r||"d\u5929h\u5c0f\u65f6m\u5206s\u79d2f\u6beb\u79d2";for(var a=Math.abs(t.getTime()-e.getTime()),i=[{pattern:/d+/g,rate:864e5},{pattern:/h+/g,rate:36e5},{pattern:/m+/g,rate:6e4},{pattern:/s+/g,rate:1e3},{pattern:/f+/g,rate:1}],s=0;s<i.length;++s){i[s].value=a;for(var o=0;s>o;++o)r.match(i[o].pattern)&&(i[s].value-=i[o].value*i[o].rate);i[s].value=Math.floor(i[s].value/i[s].rate)}for(var s=0;s<i.length;++s)r=r.replace(i[s].pattern,function(e){var t=Math.min(e.length,0==s?1/0:4==s?3:2);return u(i[s].value,t)});return r=n?r:r.replace(/(\d+)(?:\u5929|\u5c0f\u65f6|\u5206|\u79d2|\u6beb\u79d2)/g,function(e,t){return Number(t)?e:""}),(t>=e?"":"-")+r},t.timeDiff=function(e,t){if(null==e||"undefined"==typeof e)throw new Error("[TimeFormater Exception]: Invalid arguments!");return this.timeSpan(0,e,t)},t.startEnd=function(e,t,r,n,a,u){return e=this.build(e),t=this.build(t),a=(null==a||"undefined"==typeof a?"-":a).toString(),r=r||"yyyy/MM/dd HH:mm:ss",n=n||r,this.format(e,r,u)+a+this.format(t,n,u)}});
;define("common:widget/js/ui/dialog/dialog.js",function(t,e,i){var n=t("common:widget/lib/jquery/jquery.js"),o=t("common:widget/js/util/event/event.js"),s=t("common:widget/js/ui/base/base.js"),a=t("common:widget/js/util/tangram/browser.js");t("common:widget/lib/jquery.ui/jquery.ui.dialog.js");var c={},l=s().extend({init:function(t){try{var e=this;t=n.extend({modal:!0,closeText:"\u5173\u95ed",resizable:!1,draggable:!0,dialogClass:t.className,btnAlign:"center"},t||{}),a.ie&&a.ie<7&&(t.open=function(){n(".ui-widget-overlay").height(n(document).height())}),e.instance=t.target?n(t.target).dialog(t):n("<div>",{id:"ik-dlg-"+e.guid}).html(t.content).dialog(t),n.isArray(t.buttons)&&e.customBttons(t.buttons),e.instance.next().css("text-align",t.btnAlign),t.autoDispose&&e.instance.on("dialogclose",function(){n(this).dialog("destroy").remove(),delete c[e.guid],e.isDestroy=!0}),c[e.guid]=e.instance,n(window).on("resize",function(){e&&e.center()})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/ui/dialog/dialog.js",method:"",ln:65})}},customBttons:function(t){var e=this,i=this.instance.next().children("div"),o=i.find("button");n(t).each(function(t){var o=this;!this.className&&2>t&&(this.className=["btn-32-green dialog-btn dialog-btn-1","btn-32-white dialog-btn dialog-btn-2"][t]),n('<a href="#" />').text(this.text||"").appendTo(i).addClass(this.className||"").click(function(t){try{t.preventDefault(),o.click.apply(e.instance,arguments)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/dialog/dialog.js",method:"",ln:80})}})}),o.remove()},open:function(){!this.isDestroy&&this.instance.dialog("open")},close:function(){!this.isDestroy&&this.instance.dialog("close")},center:function(){!this.isDestroy&&this.instance.dialog("option","position",{my:"center",at:"center",of:window})},getDialogContainer:function(){return this.isDestroy?null:this.instance.dialog("widget")},setSize:function(t){!this.isDestroy&&this.instance.dialog("option",t)},setTitle:function(t){!this.isDestroy&&t&&this.instance.dialog("option","title",t)}});o.on("dialog.close",function(){l.close()}),i.exports=n.extend(l,{alert:function(t,e){return e=n.extend({title:"\u77e5\u9053\u63d0\u793a",content:t,buttons:[{text:"\u786e\u5b9a",click:function(){try{n.isFunction(e.onaccept)&&e.onaccept.apply(this,arguments),n(this).dialog("close")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/dialog/dialog.js",method:"",ln:124})}}}]},e||{}),new l(e)},confirm:function(t,e){var i=[{text:"\u786e\u5b9a",click:function(){try{n.isFunction(e.onaccept)&&e.onaccept.apply(this,arguments)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/dialog/dialog.js",method:"",ln:134})}}},{text:"\u53d6\u6d88",click:function(){try{n.isFunction(e.oncancel)&&e.oncancel.apply(this,arguments),n(this).dialog("close")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/dialog/dialog.js",method:"",ln:140})}}}];return e.rightIsRight&&(i=i.reverse()),e.buttons=e.buttons||i,l.alert(t,e)},iframe:function(t){var e='<iframe frameborder="no" class="ui-dialog-content-iframe" src="'+t.content+'"></iframe>';return t.content=e,t.buttons||(t.buttons=[]),t.dialogClass="dialog-iframe",l.alert(e,t)},close:function(){n.each(c,function(t,e){try{e&&e.dialog("close")}catch(i){}})}})});
;define("common:widget/js/ui/suggestion/suggestion.js",function(e,t,i){var o=e("common:widget/js/util/tangram/tangram.js"),n=(e("common:widget/lib/jquery.ui/jquery.ui.autocomplete.js"),e("common:widget/js/ui/base/base.js")),a={};baidu="undefined"==typeof baidu?{}:baidu,i.exports=n(function(){this.target=""}).extend({init:function(){try{var e=this;e.fire("beforeinit"),e.target&&!e.checkDisabled()&&o(e.target).keyup(function(t){t.keyCode>=37&&t.keyCode<=40||e.getData()}).on("paste",function(){setTimeout(function(){e.getData()},20)})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/suggestion/suggestion.js",method:"",ln:37})}},checkDisabled:function(){return!1},getData:function(){var e=this,t=e.checkDisabled(),i=o.trim(o(e.target).val()),n=e.url||"https://gsp0.baidu.com/8qUZeT8a2gU2pMbgoY3K/su?wd=#word#&prod=zhidao";t||""==i||(a[e.guid]=a[e.guid]||{},a[e.guid][escape(i)]?o(e.target).autocomplete({source:a[e.guid][escape(i)],minLength:0,create:function(t){e.fire("create",t)},open:function(t){e.fire("open",t)},select:function(t,i){e.fire("select",i)}}).autocomplete("search",""):(baidu.sug=function(t){e.fire("dataloaded",t),a[e.guid][escape(i)]=t.s,e.getData()},o.getScript(n.replace("#word#",encodeURIComponent(i)))))}})});
;define("common:widget/js/ui/lazyload/lazyload.js",function(a){var o=a("common:widget/lib/jquery/jquery.js");o.fn.lazyload=function(a){function t(){i.each(function(){o(window).scrollTop()+o(window).height()>o(this).offset().top-e.threshold&&o(this).trigger("appear")})}var e=o.extend({threshold:100,effect:"show",appear:null,load:null},a),i=this;return this.each(function(){var t=o(this);t.one("appear",function(){if(this.loaded=!0,!e.appear||e.appear.call(this,a)!==!1){if(t.data("img")){var n="IMG"==this.tagName.toUpperCase()?t:o("<img />");n.on("load",function(){"IMG"!=t.prop("tagName").toUpperCase()&&n.appendTo(t),n.hide()[e.effect](),e.load&&e.load.call(this,a)}),n.attr("src",t.data("img"))}i=o(o.grep(i,function(a){return!a.loaded}))}})}),o(function(){t()}),o(window).on("resize scroll",function(){t()}),this}});
;define("common:widget/js/ui/tip/tip.js",function(t,i,e){var o=t("common:widget/lib/jquery/jquery.js"),s=t("common:widget/js/ui/base/base.js");t("common:widget/lib/jquery.ui/jquery.ui.tooltip.js"),e.exports=s(function(t){var i=this;i.position=o.extend({my:"left top",at:"left bottom+10",collision:"none",using:function(e,s){"popcms"!=t.rightbottom&&o(this).css(e),i.arrow&&o("<div>").addClass("tip-arrow").addClass("tip-arrow-"+(i.direction||s[s.important])).html("<em></em><span></span>").appendTo(this),i.closebox&&(o('<a href="#" class="tip-close" title="\u5173\u95ed">\xd7</a>').addClass(s.vertical).addClass(s.horizontal).click(function(t){try{t.preventDefault(),i.autoDispose?i.close():i.hide(),i.fire("closeall")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/ui/tip/tip.js",method:"",ln:44})}}).appendTo(this),o(this).addClass("tip-has-close")),i.shadow&&o(this).addClass("tip-shadow"),i.radius&&o(this).addClass("tip-radius")}},t.position),delete t.position,i.content="",i.target="",i.tooltipClass="",i.arrow=!0,i.closebox=!1,i.shadow=!0,i.radius=!0,i.autoDispose=!0,i.effect=!0}).extend({init:function(t){try{var i=this;if(i.target=o(i.target),0==i.target.size())return;i.target.attr("title")||i.target.attr("title",""),i.target.tooltip({content:i.content,position:i.position,tooltipClass:i.tooltipClass,open:function(t){i.fire("onopen",t)},close:function(t){i.fire("onclose",t)}}),i.instance=i.target.data("ui-tooltip"),i.target.tooltip("open",{target:i.instance.element}),i._status="show",t.autoDisplay===!1&&this.close()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/tip/tip.js",method:"",ln:99})}},getTipContainer:function(){return this.instance._find(o(this.target))},getTipBody:function(){return this.getTipContainer().find(".ui-tooltip-content")},getStatus:function(){return this._status},open:function(){var t=this.target;t.attr("title")||t.attr("title",""),t.tooltip("open",{target:this.instance.element}),this._status="show",this.fire("show")},show:function(){this.autoDispose?this.open():(this.getTipContainer()[this.effect?"fadeIn":"show"](),this._status="show")},close:function(){this.target.tooltip("close"),this._status="hide"},hide:function(){this.autoDispose?this.close():(this.getTipContainer()[this.effect?"fadeOut":"hide"](),this._status="hide")}})});
;define("common:widget/js/ui/carousel/carousel.js",function(i,e,t){var s=i("common:widget/lib/jquery/jquery.js"),n=i("common:widget/js/ui/base/base.js"),a=n().extend({init:function(i){try{this.options=s.extend({interval:3e3,duration:1e3,items:[],viewSize:1,direction:"horizontal",serviceItem:""},i),this.paused=null,this.sliding=null,this.interval=null,this.activeIndex=0,this.lastActiveIndex=i.items.length}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/carousel/carousel.js",method:"",ln:44})}},render:function(i){var e=this;if(e.$inner=s("<div/>").addClass("carousel-inner"),s(e.options.items).each(function(i){s("<div/>").addClass("item").html(this).appendTo(e.$inner).attr("index",i)}),e.$items=e.$inner.children(),e.$active=e.$items.slice(0,e.options.viewSize).addClass("active"),e.$misc=s("<div/>").addClass("carousel-misc"),e.options.indicators){for(var t=s("<ol/>").addClass("carousel-indicators").appendTo(e.$misc),n=0;n<e.$items.size();n++)s("<li/>").attr("data-slide-to",n).appendTo(t);t.children().slice(0,e.options.viewSize).addClass("active").first().addClass("first")}e.$indicators=e.$misc.find(".carousel-indicators li"),e.options.controls&&(s("<a/>").addClass("carousel-control carousel-control-left").prependTo(e.$misc),s("<a/>").addClass("carousel-control carousel-control-right").appendTo(e.$misc)),e.target=s(i).append(e.$inner).append(e.$misc).addClass("carousel"),e.initStyle(),e.bindEvents(),e.cycle()},setup:function(i){this.target=s(i),this.target.size()||(this.target=s("#"+i)),this.target.addClass("carousel"),this.$inner=this.target.find(".carousel-inner"),this.$items=this.$inner.children(),this.$active=this.target.find(".item.active"),this.$active.size()||(this.$active=this.$items.slice(0,this.options.viewSize).addClass("active")),this.$misc=this.target.find(".carousel-misc"),this.$indicators=this.target.find(".carousel-indicators li"),this.initStyle(),this.bindEvents(),this.cycle()},initStyle:function(){try{var i=this,e="horizontal"==i.options.direction?"width":"height",t="horizontal"==i.options.direction?"left":"top",n="horizontal"==i.options.direction?"top":"left";i.$items.css(e,100/i.options.viewSize+"%").css(n,"0").slice(0,i.options.viewSize).each(function(e,n){s(n).css(t,100*e/i.options.viewSize+"%")})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/ui/carousel/carousel.js",method:"",ln:118})}},bindEvents:function(){var i=this;i.target.on("mouseenter",s.proxy(i.pause,i)).on("mouseleave",s.proxy(i.cycle,i)).on("click",".carousel-control-left",function(e){try{e.preventDefault(),i.prev()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/carousel/carousel.js",method:"",ln:127})}}).on("click",".carousel-control-right",function(e){try{e.preventDefault(),i.next()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/carousel/carousel.js",method:"",ln:131})}}).on("click",".carousel-indicators li",function(e){try{e.preventDefault(),i.to(s(e.currentTarget).data("slide-to"))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/ui/carousel/carousel.js",method:"",ln:135})}})},cycle:function(i){return i&&(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(s.proxy(this.next,this),this.options.interval)),this},pause:function(i){return i&&(this.paused=!0),this.interval=clearInterval(this.interval),this},setActiveItems:function(){var i=this.activeIndex;this.$items.removeClass("active"),this.$active=[],this.$indicators.removeClass("active");for(var e=0;e<this.options.viewSize;e++){var t=(i+e)%this.$items.size();this.$active.push(this.$items.get(t)),this.$indicators.eq(t).addClass("active")}return s(this.$active).addClass("active"),this.$active},to:function(i){var e=this,t=e.activeIndex;return i>e.$items.length-1||0>i?void 0:e.sliding?e.once("slid",function(){e.to(i)}):t==i?e.pause().cycle():e.slide(i>t?"next":"prev",i)},prev:function(){return this.sliding?void 0:this.slide("prev")},next:function(){return this.sliding?void 0:this.slide("next")},getActiveIndex:function(){return this.activeIndex},isSliding:function(){return this.sliding},getLastActiveIndex:function(){return this.lastActiveIndex},slide:function(i,e){var t=this,n=t.setActiveItems(),a="horizontal"==t.options.direction?"left":"top",o=t.activeIndex+("next"==i?t.options.viewSize:-1);o=(t.$items.size()+o)%t.$items.size();var c=s(n["next"==i?0:t.options.viewSize-1]),r=t.$items.eq(o);if("experts"==t.options.serviceItem){var o=r.attr("index"),l=t.$items.size();if("next"==i&&0==o)return!1;if("prev"==i&&o==l-1)return!1}if(t.sliding=!0,t.interval&&t.pause(),!r.hasClass("active")){t.fire("slide",{relatedTarget:r[0],direction:i,index:o}),r.css(a,"next"==i?"100%":-100/t.options.viewSize+"%").addClass("active"),t.lastActiveIndex=t.activeIndex;var d=[];s.each(n,function(e){var n="next"==i?-1:1,o={};o[a]=100*(e+n)/t.options.viewSize+"%",d.push(s(this).animate(o,t.duration))});var h={};return h[a]="prev"==i?0:100-100/t.options.viewSize+"%",d.push(r.animate(h,t.duration)),s.when.apply(s,d).done(function(){c.removeClass("active"),t.activeIndex=(t.$items.size()+t.activeIndex+("next"==i?1:-1))%t.$items.size(),t.setActiveItems(),t.sliding=!1,"undefined"!=typeof e&&e!=t.activeIndex?t.slide(i,e):setTimeout(function(){t.fire("slid")},0)}),!t.paused&&t.cycle(),t}}});t.exports=a});
;define("common:widget/js/ui/pie/pie.js",function(t,e,a){function s(t){this.args=i.extend({pieR:100,slices:[{percent:1}]},t),i.each(this.args.slices,function(t,e){e.angle=360*(e.percent||0)}),i.extend(this.args,{pieR:parseInt(this.args.pieR),donutR:parseInt(Math.min(this.args.pieR,this.args.donutR||0)),rotation:this.args.rotation||0,flip:"boolean"==i.type(this.args.flip)?this.args.flip:!1,strokeWidth:this.args.strokeWidth||0,animation:i.browser.chrome?this.args.animation:!1}),i.extend(this.args,{outerR:this.args.pieR+this.args.strokeWidth,innerR:Math.max(this.args.donutR-this.args.strokeWidth,0)}),this.args.boxWidth=this.args.boxHeight=2*this.args.outerR}function r(t){var e=["E32322","EA621F","F18E1C","FDC60B","F4E500","8CBB26","008E5B","0696BB","2A71B0","444E99","6D398B","C4037D"];return"#"+e[t%e.length]}function o(t){s.call(this,t),this.graphEngine=i.browser.ie<9?"vml":"svg";var e=this;this.getPie={svg:function(){var t=g.svg.createElement("svg").attr({width:e.args.boxWidth,height:e.args.boxHeight,"class":"pie"});e.args.animation&&(t.on("load",function(){o.animate.call(e)}),e.clipPath=g.svg.createElement("path").attr("d",g.svg.getSectorPath(0,0,e.args.outerR,0)),t.append(g.svg.createElement("defs").append(g.svg.createElement("clipPath").attr("id","pieAnimateClip").append(e.clipPath))));var a=g.svg.createElement("g").attr({transform:"translate("+e.args.boxWidth/2+","+e.args.boxHeight/2+")scale("+(e.args.flip?"-1":"1")+",1)rotate("+e.args.rotation+")","clip-path":e.args.animation?"url(#pieAnimateClip)":""}).appendTo(t),s=0;return i.each(e.args.slices,function(t,o){g.svg.createElement("path").attr({d:g.svg.getSectorPath(s,o.angle,e.args.pieR,e.args.donutR)}).css({fill:o.color||r(t),stroke:e.args.strokeColor||o.color||r(t),strokeWidth:e.args.strokeColor?e.args.strokeWidth||1:0}).appendTo(a),s+=o.angle}),e.args.totalAngle=s,t},vml:function(){var t=g.vml.createElement("group").attr({coordsize:e.args.boxWidth+","+e.args.boxHeight,coordorigin:-e.args.boxWidth/2+","+-e.args.boxHeight/2,"class":"pie"}).css({width:e.args.boxWidth,height:e.args.boxHeight,position:"relative",rotation:e.args.rotation+"deg",flip:e.args.flip?"x":""}),a=0;return i.each(e.args.slices,function(s,o){g.vml.createElement("shape").attr({path:g.vml.getSectorPath(a,o.angle,e.args.pieR,e.args.donutR),coordsize:e.args.boxWidth+","+e.args.boxHeight,coordorigin:"0,0",fillcolor:o.color||r(s),stroked:e.args.strokeColor?!0:!1,strokecolor:e.args.strokeColor||o.color||r(s),strokeweight:e.args.strokeColor?e.args.strokeWidth||1:0}).css({width:e.args.boxWidth,height:e.args.boxHeight,position:"absolute"}).appendTo(t),a+=o.angle}),t}}}var i=t("common:widget/js/util/tangram/tangram.js"),n=t("common:widget/js/util/add-stylesheets/add-stylesheets.js");i.browser.ie<9&&!document.namespaces.v&&(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),n({"v\\:shape,v\\:group":"behavior:url(#default#VML);display:inline-block"}));var g={svg:{createElement:function(t){return i(document.createElementNS("http://www.w3.org/2000/svg",t))},getSectorPath:function(t,e,a,s){t=t*Math.PI/180,e=e*Math.PI/180;var r={cos:Math.cos(t),sin:Math.sin(t)},o={cos:Math.cos(t+e),sin:Math.sin(t+e)};return["M",s*r.cos,s*r.sin,"L",a*r.cos,a*r.sin,"A",a,a,0,Math.abs(e)>Math.PI?1:0,1,a*o.cos,a*o.sin,"L",s*o.cos,s*o.sin,"A",s,s,0,Math.abs(e)>Math.PI?1:0,0,s*r.cos,s*r.sin].join(" ")}},vml:{createElement:function(t){return i(document.createElement("<v:"+t+"/>"))},getSectorPath:function(t,e,a,s){var r=t*Math.PI/180,o={cos:Math.cos(r),sin:Math.sin(r)};return t=Math.round(t*Math.pow(2,16)),e=Math.round(e*Math.pow(2,16)),["m",Math.round(s*o.cos),Math.round(s*o.sin),"l",Math.round(a*o.cos),Math.round(a*o.sin),"ae",0,0,a,a,-t,-e,"ae",0,0,s,s,-t-e,e,"xe"].join(" ")}}};o.animate=function(){var t=this,e=t.args.animation;i({aniStep:0}).animate({aniStep:1},i.extend(!0,{},e,{step:function(a){t.clipPath.attr("d",g.svg.getSectorPath(0,a*t.args.totalAngle,t.args.outerR,0)),"function"==i.type(e.step)&&e.step(a)},complete:function(){t.clipPath.parent().remove(),"function"==i.type(e.complete)&&e.complete()}}))},o.prototype={constructor:o,getHTML:function(){var t=this.getNode();return"vml"==this.graphEngine?t.html():(new XMLSerializer).serializeToString(t[0])},getNode:function(){return this.getPie[this.graphEngine]()}},a.exports=o});
;define("common:widget/js/logic/search-box/search-box.js",function(e,t,o){function a(){var e=location.pathname,t="/"==e?"home":e.match(/\w+/)[0];return new RegExp("\\|"+t+"\\|").test("|search|question|home|browse|")?t:"other"}function n(e){var t={"http://news.baidu.com/":{query:"ns?cl=2&rn=20&tn=news&t=1&word=#{0}"},"http://www.baidu.com/":{query:"s?cl=3&wd=#{0}"},"http://tieba.baidu.com/":{query:"f?kw=#{0}&t=4"},"http://music.baidu.com/":{query:"search?fr=zhidao&key=#{0}"},"http://image.baidu.com/":{query:"search/index?tn=baiduimage&ct=201326592&lm=-1&cl=2&word=#{0}&t=3&ie=gbk"},"http://v.baidu.com/":{query:"v?ct=301989888&rn=20&pn=0&db=0&s=22&word=#{0}"},"http://map.baidu.com/":{query:"m?word=#{0}&fr=map007",encode:!0},"http://baike.baidu.com/":{query:"searchword/?word=#{0}&pic=1"},"http://wenku.baidu.com/":{query:"search?word=#{0}&lm=0&od=0"},"http://jingyan.baidu.com/":{query:"search?word=#{0}&fr=zhidao",encode:!0}},o=i.trim(e);i(".search-box .channel a").each(function(){var e="http://"+this.hostname+"/";if(""!=o){if(t[e]){var a=t[e],n=a.encode?encodeURIComponent(o):o;this.href=e+i.string(a.query).format([n])}}else this.href=e})}var i=e("common:widget/js/util/tangram/tangram.js"),c=e("common:widget/js/ui/suggestion/suggestion.js"),r=e("common:widget/js/util/event/event.js"),s=e("common:widget/js/util/form/form.js"),m=e("common:widget/js/util/log/log.js"),u=e("common:widget/js/ui/dialog/dialog.js");e("common:widget/lib/jquery.placeholder/jquery.placeholder.js");var h=(new c({target:"#kw",beforeinit:function(){try{this.checkDisabled=function(){return"1"==i.cookie.get("IK_SUG")}}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/search-box/search-box.js",method:"",ln:22})}},open:function(){var e=i(this.target).autocomplete("widget"),t=i.trim(i(this.target).val());0==e.find(".ui-menu-item-close").size()&&(i("<li>").addClass("ui-menu-item-close").html('<a href="#">\u5173\u95ed</a>').appendTo(e),e.find(".ui-menu-item a").each(function(){i(this).html(this.innerHTML.replace(new RegExp(t,"i"),function(e){return"<em>"+e+"</em>"}))}))},create:function(){var e=this,t=i(e.target).autocomplete("widget");t.delegate(".ui-menu-item-close a","click",function(t){try{t.preventDefault(),i(e.target).autocomplete("close").autocomplete("destroy"),i.cookie.set("IK_SUG","1")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/search-box/search-box.js",method:"",ln:44})}})},select:function(e,t){d.val(t.item.value),r.fire("searchBox.addLog",{f:"sug"}),o.exports.search(d)}}),{lm:0,rn:10,pn:0,fr:"search",ie:"gbk"}),d=i("#kw"),l=i.json.parse(F.context("defaultQuery"));m.init({type:8888,action:"click",query:".channel"}),i("#search-form").submit(function(e){m.send({type:2014,pms:"newqb",action:"searchbtn"}),e.preventDefault(),o.exports.search(d)}),i("#ask-btn").click(function(e){try{m.send({type:2014,pms:"newqb",action:"askbtn"}),e.preventDefault(),o.exports.ask(d)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/search-box/search-box.js",method:"",ln:81})}}),d.blur(function(){n(i(this).val())}),o.exports.search=function(e){e=i(e);var t=i.string(e.val()).trim();l&&(t=t==l.title?l.value:t),""==t?r.fire("searchBox.buttonAction",{text:"\u8bf7\u8f93\u5165\u60a8\u8981\u641c\u7d22\u7684\u95ee\u9898",evtName:"searchAction",log:"btn=search",fr:"search_0"}):r.fire("searchBox.searchAction",{params:{word:t},extParams:i.url.queryToJson(e.attr("extAttr")||"")})},o.exports.ask=function(e){e=i(e);var t=!l||e.val()!=l.title&&e.val()!=l.value?e.val():"",o=new s({method:"get",action:"/new",input:{word:t,ie:"GBK"}});setTimeout(function(){o.submit()},60)};var p={};r.on("searchBox.addLog",function(e,t){i.extend(p,t)}),r.on("searchBox.searchAction",function(e,t){var o={};i.extend(o,h),i.extend(o,t.params),i.extend(o,t.extParams||i.url.queryToJson(d.attr("extAttr")||"")),m.send(i.extend({type:2057,fr:a(),word:t&&t.params&&t.params.word?t.params.word:""},p)),p={};var n=new s({method:"get",action:"/search",input:o});setTimeout(function(){n.submit()},60)}),r.on("searchBox.buttonAction",function(e,t){var o=['<div class="mb-10 mt-10"><i class="i-set-noname mr-5"></i>',t.text,"\uff1a</div>",'<input style="width: 300px; padding: 3px;" id="search-empty-input" type="text"/>'].join("");u.alert(o,{width:370,height:180,dialogClass:"dialog-search-empty",btnAlign:"left",autoDispose:!0,buttons:[{text:"\u7ee7\u7eed\u641c\u7d22",click:function(){try{var e=i.string(i("#search-empty-input").val()).trim();""!=e&&r.fire("searchBox.searchAction",{params:{word:e,fr:t.fr,lm:t.lm||0}})}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"common:widget/js/logic/search-box/search-box.js",method:"",ln:238})}}}],open:function(){var e=i(".dialog-search-empty .ui-dialog-buttonpane");i("#search-empty-input").get(0).focus(),i("#search-empty-input").keypress(function(t){13==t.keyCode&&i(e).find(".btn-32-green").click()}),i(".ui-dialog-content").css("min-height","95px"),i(".ui-dialog-buttonset").css("text-align","center")}})})});
;define("common:widget/js/logic/authcode/authcode.js",function(t,e,a){var i=t("common:widget/lib/jquery/jquery.js"),o=t("common:widget/js/ui/base/base.js"),n=t("common:widget/js/ui/dialog/dialog.js"),u=t("common:widget/js/ui/tip/tip.js"),c=t("common:widget/js/util/https/https.js"),s=o().extend({init:function(){try{var t=this;t._authData={},t._authUrl=t.url||"/api/vcode",t._authId="IK_AUTHCODE_"+t.guid,t._tip=new u({content:"\u8bf7\u70b9\u51fb\u540e\u8f93\u5165\u9a8c\u8bc1\u7801",direction:"bottom"}),t.container=i(t.container),(!t._authData[t._authId]||t.force)&&(t._authData[t._authId]={display:!1,show:!1},t._initAuthCode({callback:function(){t._show(),t._display(),i.isFunction(t.callback)&&t.callback.call(t)}}))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/authcode/authcode.js",method:"",ln:74})}},_show:function(){var t=this,e=i('<div class="ik-authcode-wrapper"></div>');e.append('<label class="ik-authcode-label">\u9a8c\u8bc1\u7801\uff1a</label>').append('<input class="ik-authcode-input" type="text" maxlength="4">').append('<img class="ik-authcode-img" src="about:blank" style="display: none; ">').append('<a class="ik-authcode-change" href="#" style="display: none; ">\u770b\u4e0d\u6e05\uff1f</a>').append('<div class="ik-authcode-error" style="display: none; ">\u9a8c\u8bc1\u7801\u9519\u8bef</div>'),t.className&&e.addClass(t.className),t.container.append(e).show();var a=(t.getAuthElement("me._tip"),t.getAuthElement("error")),o=t.getAuthElement("input"),n=t.getAuthElement("img");authCodeChange=t.getAuthElement("change"),i.isFunction(t.initCallback)&&t.initCallback(),t.container.mouseover(function(){t._authData[t._authId].display||(clearTimeout(t._mouseTimeOut),t._tip.show(o))}).mouseout(function(){t._mouseTimeOut=setTimeout(function(){t._tip.hide()},200)}),authCodeChange.click(function(e){try{t.change(function(){o.focus().val(""),a.hide()}),e.preventDefault()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/authcode/authcode.js",method:"",ln:122})}}),n.click(function(t){try{authCodeChange.trigger("click")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/authcode/authcode.js",method:"",ln:126})}}).css("cursor","pointer"),t.isDisplay&&t._display()},_initAuthCode:function(t){try{var e=this,a=e._authUrl+"?from="+e.from;e.urlParams&&(a+="&"+i.url.jsonToQuery(e.urlParams)),i.get(a+"&t="+(new Date).getTime(),function(a){0==a.status&&a.data.need_verify&&(i.extend(e._authData[e._authId],{vcodeStr:a.data.vcode_str,imgUrl:c.autoTrans(a.data.imgurl),display:!1,show:!0,from:e.from||""}),i.isFunction(t.callback)&&t.callback.call(a.data))},"json")}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"common:widget/js/logic/authcode/authcode.js",method:"",ln:164})}},_display:function(){var t=this;t._authData[t._authId].display||(t.getAuthElement("img").attr("src",t._authData[t._authId].imgUrl).show(),t.getAuthElement("me._tip").hide(),t.getAuthElement("change").show(),t._authData[t._authId].display=!0)},_error:function(){this.getAuthElement("error").show(),this.getAuthElement("input").focus()},getAuthElement:function(t){return i(".ik-authcode-"+t,this.container[0])},getCode:function(){var t=this;return t._authData[t._authId]&&t._authData[t._authId].show?{vcode_str:t._authData[t._authId].vcodeStr,vcode:t.getAuthElement("input").val()}:null},getFrom:function(){return this.from},submitParam:function(t){return i.extend(t||{},this.getCode())},change:function(t){var e=this;e._initAuthCode({callback:function(){e._display(),i.isFunction(t)&&t(arguments)}})},dispose:function(){this.getAuthElement("wrapper").remove()},error:function(){var t=this;t._authData[t._authId]&&t._authData[t._authId].show?(t._error(),t._initAuthCode({callback:function(){t._display();var e=t.getAuthElement("input");e.value="",e.focus()}})):n.alert("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4")}});a.exports=s});
;define("common:widget/js/logic/captcha/captcha.js",function(t,a,e){var c=t("common:widget/lib/jquery/jquery.js"),i=t("common:widget/js/ui/base/base.js"),n=t("common:widget/js/ui/dialog/dialog.js"),s=t("common:widget/js/util/event/event.js"),d=t("common:widget/js/util/https/https.js"),o=i(function(){var t=this;t.type="pcbefore",t.from="",t.url="/api/vcode",t.tip="\u70b9\u51fb\u4ee5\u4e0b\u6587\u5b57\u8f93\u5165\u9a8c\u8bc1\u7801",t.errorTip="\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e",t._codeArr=[],t._currIndex=0,t._styleSheetTpl=".captcha-buttons a div, .captcha-content-img, .captcha-input dd{background:url(#{imgUrl}&t=#{t}) no-repeat;}",t._positionArr=["-6px -36px","-53px -39px","-96px -38px","0px -83px","-53px -85px","-96px -86px","-2px -135px","-53px -135px","-96px -135px"],t._templateTpl=['<div class="captcha-box">','<div class="captcha-input">','<div class="captcha-input-title">\u9a8c\u8bc1\u7801</div>','<dl class="ml-5"><dt class="grid-r"></dt><dd></dd><dd></dd><dd></dd><dd></dd></dl>',"</div>",'<div class="captcha-content">','<div><a href="#" class="captcha-content-img mt-5"></a><a href="#" class="captcha-content-change f-12 ml-5">\u770b\u4e0d\u6e05?</a></div>','<p class="captcha-content-tip f-12">#{tip}</p>','<div class="captcha-buttons">','<a href="#"><div class="captcha-btn-1"></div></a>','<a href="#"><div class="captcha-btn-2"></div></a>','<a href="#"><div class="captcha-btn-3"></div></a>','<a href="#"><div class="captcha-btn-4"></div></a>','<a href="#"><div class="captcha-btn-5"></div></a>','<a href="#"><div class="captcha-btn-6"></div></a>','<a href="#"><div class="captcha-btn-7"></div></a>','<a href="#"><div class="captcha-btn-8"></div></a>','<a href="#"><div class="captcha-btn-9"></div></a>',"</div>","</div>","</div>"].join("")}).extend({init:function(){try{var t=this;t._initCaptcha({url:t.url,from:t.from||"",type:t.type,callback:function(){t.grid(),c.isFunction(t.callback)&&t.callback.call(res.data)}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/captcha/captcha.js",method:"",ln:77})}},_initCaptcha:function(t){try{var a=this,e=c.string("#{url}?from=#{from}&style=#{type}&t=").format(t)+(new Date).getTime();c.get(e,function(e){if(0==e.status&&e.data.need_verify){var i=d.autoTrans(e.data.imgurl);c.extend(a.vcode={},{vcodeStr:e.data.vcode_str,imgUrl:i,from:t.from||""}),c.isFunction(t.callback)&&t.callback.call(e.data),a.styleSheet(a.vcode)}},"json")}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/captcha/captcha.js",method:"",ln:98})}},getCode:function(){return{vcode_str:this.vcode.vcodeStr,vcode:this._codeArr.join("")}},change:function(){var t=this;t._initCaptcha({url:t.url,from:t.from||"",type:t.type,callback:function(){t.captchaInputs.each(function(){c(this).removeAttr("style")}),t._currIndex=0,t._codeArr.length=0}})},styleSheet:function(t){var a=this;a.styleSheetEle=c("#captcha-sheet")[0],a.styleSheetEle||(a.styleSheetEle=c('<style id="captcha-sheet" type="text/css"></style>').appendTo("head")[0]);var e=c.string(a._styleSheetTpl).format({imgUrl:t.imgUrl,t:(new Date).getTime()});a.styleSheetEle.styleSheet?a.styleSheetEle.styleSheet.cssText=e:a.styleSheetEle.innerHTML=e},error:function(){var t=this;t.change(),t.captchaErrTip.text(t.errorTip).addClass("f-red")},submit:function(t){var a=this;t&&(c.extend(t.params,a.getCode()),s.fire("catcha.submit",t))},grid:function(){var t=this,a=new n({title:"\u77e5\u9053\u63d0\u793a",width:345,height:340,autoDispose:!0,content:c.string(t._templateTpl).format({tip:t.tip})});this.dialog=a;var e=a.instance,i=e.find(".captcha-input dt"),s=e.find(".captcha-content-img"),d=e.find(".captcha-content-change"),o=e.find(".captcha-input dd");c.extend(t,{captchaInputs:o,captchaErrTip:e.find(".captcha-content-tip")}),i.click(function(){try{if(0==t._currIndex)return;t._codeArr.pop(),c(this).nextAll("dd").eq(--t._currIndex).removeAttr("style")}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/captcha/captcha.js",method:"",ln:190})}}),s.add(d).click(function(a){try{t.change(),a.preventDefault()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/captcha/captcha.js",method:"",ln:194})}}),e.find(".captcha-buttons a").each(function(a){c(this).click(function(e){try{if(e.preventDefault(),0==t._currIndex)t.captchaErrTip.text(t.tip).removeClass("f-red");else if(4==t._currIndex)return;t._codeArr.push(a+1),o.eq(t._currIndex++).css("background-position",t._positionArr[a]),4==t._currIndex&&t.submit(t.submitParams)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/captcha/captcha.js",method:"",ln:208})}})})}});e.exports=o});
;define("common:widget/js/logic/complain/complain.js",function(e,t,o){function i(){a.fire("dialog.close");var e="\u60a8\u7684\u7533\u8bc9\u5df2\u7ecf\u63d0\u4ea4\uff0c\u5de5\u4f5c\u4eba\u5458\u6b63\u5728\u5904\u7406\uff0c\u6211\u4eec\u4f1a\u572848\u5c0f\u65f6\u5185\u7ed9\u60a8\u7b54\u590d\uff0c\u5e26\u6765\u4e0d\u4fbf\uff0c\u8bf7\u8c05\u89e3\u3002";c.alert(e,{onaccept:function(){window.location.reload(!0)}}),setTimeout(function(){a.fire("dialog.close"),window.location.reload(!0)},3e3)}var n=e("common:widget/js/util/tangram/tangram.js"),a=e("common:widget/js/util/event/event.js"),c=e("common:widget/js/ui/dialog/dialog.js"),l=e("common:widget/js/logic/submit/submit.js"),d=e("common:widget/js/logic/authcode/authcode.js");o.exports=function(e,t,o,a){function s(){m.getAuthElement("input").css("border","1px solid red")}var m,r='<span style="width:78px;font-weight: bold;vertical-align: top;">\u7533\u8bc9\u7406\u7531\uff1a</span><textarea id="complain-dialog" cols="37" rows="5" maxlength="1000" style="width:290px;height:90px;border:1px solid #000;"></textarea>',g={cm:100043,qid:e,type:100001},p={title:"\u77e5\u9053\u63d0\u793a",height:290,width:400,autoDispose:!0};!!t&&n.extend(g,{aid:t,type:100009}),"object"==n.type(a)&&n.extend(g,a);var u=c.confirm(r,n.extend({type:"confirm",onaccept:function(){return 3==o?void i():(g.appeal_reason=n.trim(n("#complain-dialog").val()),2==o&&n.extend(g,{mode_type:"realtime"}),n.extend(g,m.getCode()),4!=n.trim(g.vcode).length?void s():void new l({params:g,syncId:e,beforeJump:i,errorDeal:function(e,t){var o=(t.data,t.errorNo);12302==o&&(m.getAuthElement("input").css("border","1px solid red"),m.change(function(){m.getAuthElement("input").val("")}))}}))}},p));m=new d({container:u.instance,from:"new_complain",isDisplay:!0,className:"ik-authcode-s1",initCallback:function(){try{m.getAuthElement("input").focus(function(){n(this).css("border","1px solid #d5d5d5")}),m.getAuthElement("change").click(function(){try{m.getAuthElement("input")[0].focus()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/complain/complain.js",method:"",ln:83})}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/complain/complain.js",method:"",ln:84})}}})}});
;define("common:widget/js/logic/category/category.js",function(e,t,a){var i=e("common:widget/lib/jquery/jquery.js"),n=e("common:widget/js/ui/base/base.js"),l=n(function(){var e=this;e.selectSize=16,e.sourceUrl="/classleveljs",e.splitor=""}).extend({data:{},init:function(){try{var e=this;if(!e.target)return;e.target=i(e.target),e.data.level1?e._render():i.ajax({url:e.sourceUrl,dataType:"script",scriptCharset:"gbk",crossDomain:!0,success:function(){e.data={level1:class_level_1,level2:class_level_2,level3:class_level_3},e.isPGC&&(e.data.level2.splice(7,1),e.data.level2.splice(21,1),e.data.level2.splice(42,1),e.data.level2.splice(42,1)),e._render()}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/category/category.js",method:"",ln:74})}},_render:function(){var e=this;e.container=i("<div/>").addClass("category-box "+(e.className||"")).attr("id","category-"+e.guid).appendTo(e.target),i.each([1,2,3],function(t,a){i("<select/>").attr("size",e.selectSize).addClass("category-select-"+a).hide().appendTo(e.container).change(function(){e._changeHandler(a,i(this)),e.fire("change")}).after(i("<span/>").html(e.splitor).hide())}),e.selector=e.container.find("select"),e._buildOptions(e.selector.eq(0),e.data.level1),e.fire("init"),e.defaultValue&&e.setValue(e.defaultValue)},_changeHandler:function(e,t){var a=this,i=t.val();3>e&&(a.selector.eq(2).hide().empty().prev().hide(),i&&a._buildOptions(a.selector.eq(e),a._getSubLevelData(i,e+1),e,a.isPGC))},_getSubLevelData:function(e,t){var a=this,n=[];return i.each(a.data["level"+t],function(t,a){var i=[];i[0]=a[1],i[1]=a[2],e==a[0]&&n.push(i)}),n},_buildOptions:function(e,t,a,n){e&&t&&t.length&&(e.empty().show().prev().show(),n||a&&i(new Option("\u4e0d\u9009",0)).appendTo(e).prop("selected",!0),i.each(t,function(t,a){e.get(0)&&e.get(0).options.add(new Option(a[1],a[0]))}))},setValue:function(e){function t(e,i){if(!e||0==i)return void 0;i=i||3;for(var n=a.data["level"+i],l=0,r=n.length;r>l;l++){var s=n[l];if(1==i){if(e==s[0])return[e,"0","0"]}else if(e==s[1]){var c=2==i?s:t(s[0],2);return[c[0],c[1],3==i?e:"0"]}}return t(e,--i)}var a=this;"undefined"!=typeof e&&(i.isArray(e)?i.each(e,function(e,t){a.selector.eq(e).val(t||"0").change()}):a.setValue(t(e)))},getValue:function(){var e=this,t={cid:0,name:"",arrCid:[],arrName:[]};return e.selector.each(function(e){this.value&&"0"!=this.value&&(t.cid=t.arrCid[e]=this.value,t.name=t.arrName[e]=i(this.options[this.selectedIndex]).text())}),t.cid?t:!1}});a.exports=l});
;define("common:widget/js/logic/login/login.js",function(o,n){function e(){window.location.reload(!0)}function i(){c.fire("login.log")}function t(){}var s=T=o("common:widget/js/util/tangram/tangram.js"),c=o("common:widget/js/util/event/event.js"),a=o("common:widget/js/util/uri/uri.js"),u=o("common:widget/js/ui/dialog/dialog.js"),g=null,r=null,l=!1,p=!1,f="//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+ +new Date,m="/api/loginInfo",h=location.href.indexOf("http:")?"https:":"http:",d={registerLink:"https://passport.baidu.com/v2/?reg&tpl=ik&color=green&u="+escape(top.location.href),onLoginSuccess:e,onLoginFailure:i,onSubmitedErr:t,cache:!0,tangram:!0,color:"green",apiOpt:{product:"ik",charset:F.context("PageCharset")||"GBK",u:window.top.location.href,qrcode:3,staticPage:h+"//"+location.hostname+a.v3Jump},onshow:function(){}},S={type:"accRealName",apiOpt:{product:"ik",staticPage:h+"//passport.baidu.com/passApi/html/jump.html"},tangram:!0,color:"green",onHide:function(){},onSubmitSuccess:function(){}};d.authsite=["qzone","tsina","renren"],d.authsiteCfg={tpl:"ik",display:"popup",u:window.top.location.href,jumpUrl:"http://zhidao.baidu.com"+a.xd,onBindSuccess:d.onLoginSuccess,onBindFailure:d.onSubmitedErr},c.on("login.log",function(o,e){var i=e&&s.isFunction(e.onLoginSuccess)?e.onLoginSuccess:d.onLoginSuccess;if(e&&e.sms){var t="\u65e0\u9700\u767e\u5ea6\u5e10\u53f7\uff0c\u8f93\u5165\u624b\u673a\u53f7\u5373\u53ef\u514d\u8d39\u63d0\u95ee";e.psFlag&&(t="\u9a8c\u8bc1\u5373\u767b\u5f55\uff0c\u6ca1\u6709\u767e\u5ea6\u5e10\u53f7\u4e5f\u53ef\u4ee5\u4f7f\u7528",d.img="https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/ui/sms-login-bg.jpg"),s.extend(d.apiOpt,{sms:e.sms,smsText:t}),d.authsite=[]}d.onLoginSuccess=function(o){c.fire("dialog.close"),c.fire("login.check",{sync:e&&e.sync,isLogin:function(o){o.isFilter&&c.fire("login.filter",{type:"set",filterInfo:o.isFilter}),i(o)},noLogin:function(){}}),o.returnValue=!1},l?g&&g.show():(s.getScript(f,function(){g=passport.pop.init(d),g.show(),s.extend(n,g)}),l=!0)}),c.on("login.realName",function(o,i){i=i||{},S.onHide=i.onHide||t,S.onSubmitSuccess=i.onSubmitSuccess||e,i&&i.onHide&&(S.onHide=function(){i.onHide()}),i&&i.onSubmitSuccess&&(S.onSubmitSuccess=function(){i.onSubmitSuccess()}),p?r&&r.show():(s.getScript(f,function(){r=passport.pop.init(S),r.show(),s.extend(n,r)}),p=!0)}),c.on("login.check",function(o,n){n=n||{},d.onLoginSuccess=n.isLogin||e,d.onLoginFailure=n.noLogin||i,s.ajax({url:m+"?t="+(new Date).getTime(),async:n&&n.sync?!1:!0,dataType:"html",success:function(o,n,e){var i=s.json.parse(e.responseText),t=F.context("user")||{};return 1==i.isLogin?(t.isLogin=!0,t.id=i.userId,t.wealth=i.userWealth,t.stoken=i.stoken,d.onLoginSuccess(i)):(t.isLogin=!1,d.onLoginFailure()),!0}})}),c.on("login._success",function(){d.onLoginSuccess()}),c.on("login.setUsername",function(o,n){function e(){var o=u.iframe({content:a.username+i,title:n.titleText||"\u4f60\u8fd8\u6ca1\u6709\u7528\u6237\u540d\uff0c\u8d77\u4e00\u4e2a\u597d\u542c\u7684\u7528\u6237\u540d\u5427\uff01",width:430,height:170,autoDispose:!0});c.on("setusername.update",function(n,e){o&&o.setSize({width:e.width,height:e.height})})}n=n||{},n.onSetSuccess||(n.onSetSuccess=function(){window.location.reload(!0)}),d.onLoginSuccess=n.onSetSuccess;var i="?"+(n.patch?n.patch+"&":"")+"t="+(new Date).getTime();c.fire("login.check",{isLogin:function(){var o=F.context("user")||{};o.isNoUserName?e():n.onSetSuccess()},noLogin:function(){c.fire("login.log",{onLoginSuccess:e})}})}),c.on("login.filter",function(o,n){if("set"==n.type)T.cookie.set("IK_USER_FILTER",n.filterInfo.reason,{path:"/",expires:6e4}),T.cookie.set("IK_USER_FILTERI",n.filterInfo.lastLoginIp,{path:"/",expires:6e4}),T.cookie.set("IK_USER_FILTERT",n.filterInfo.lastLoginTime,{path:"/",expires:6e4});else if("check"==n.type&&16==parseInt(T.cookie.get("IK_USER_FILTER"))){var e=new u({width:350,height:200,title:"\u77e5\u9053\u63d0\u793a",content:"\u7531\u4e8e\u60a8\u7684\u5e10\u53f7\u5b58\u5728\u5f02\u5e38\u98ce\u9669\uff0c\u6211\u4eec\u6682\u65f6\u51bb\u7ed3\u4e86\u60a8\u7684\u5e10\u53f7\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8d26\u53f7\u7533\u8bc9\u6765\u89e3\u9664\u51bb\u7ed3\u72b6\u6001",buttons:[{text:"\u8fdb\u884c\u8d26\u53f7\u7533\u8bc9",click:function(){try{window.open("/feedback/account.html"),e.close()}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"common:widget/js/logic/login/login.js",method:"",ln:352})}}},{text:"\u53d6\u6d88",click:function(){try{e.close()}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message,path:"common:widget/js/logic/login/login.js",method:"",ln:358})}}}],autoDispose:!0});T.cookie.remove("IK_USER_FILTER",{path:"/"}),T.cookie.remove("IK_USER_FILTERI",{path:"/"}),T.cookie.remove("IK_USER_FILTERT",{path:"/"})}}),c.on("dialog.close",function(){g&&g.hide&&g.hide()}),c.on("login.success",function(){e()}),function(){c.fire("login.filter",{type:"check"})}()});
;define("common:widget/js/logic/iask/iask.js",function(e,i,n){var o=e("common:widget/js/util/tangram/tangram.js"),t=e("common:widget/js/ui/dialog/dialog.js"),a=e("common:widget/js/util/event/event.js");n.exports=function(e){a.fire("login.check",{isLogin:function(){o.get("/iask/api/ikhelplimit?un="+encodeURIComponent(e)+"&t="+(new Date).getTime(),function(i){var n=o.json.parse(i);if(n&&0==n.status){var s=n.data,c=s.replyLimit,m=s.replyMaxNum,r=s.ifLogin,l=s.ifUsernameOK;return 0==l?(t.alert("\u5bf9\u4e0d\u8d77\uff01\u6b64\u7528\u6237\u4e0d\u5b58\u5728\u3002"),!1):0==m||0>=c?(t.alert("\u5bf9\u4e0d\u8d77\uff01\u6b64\u7528\u6237\u6682\u65f6\u65e0\u6cd5\u63a5\u6536\u63d0\u95ee\u6c42\u52a9\uff0c\u60a8\u53ef\u4ee5\u6362\u4e00\u4f4d\u7528\u6237\u8bd5\u8bd5\u3002",{close:function(){a.fire("dialog.close")}}),!1):0==r?(location.href="/new?fix="+encodeURIComponent(e),!1):void(location.href="/new?fix="+encodeURIComponent(e))}})}})}});
;define("common:widget/https/https-replace.js",function(t,e,i){var n=t("common:widget/js/util/tangram/tangram.js"),a=["culture","list","uteam","ihome","share","hangjia","shop","opendev","specialworld","bigdata","struct","uadmin","user","liuyan","question","/","daily","pai","new","search","misc","feed"],h={init:function(){try{var t=this;this.url=location.href,this.host=location.host,this.url.indexOf("https:")||n(function(){t.invoke()})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/https/https-replace.js",method:"",ln:50})}},invoke:function(){var t=this;n("a").each(function(){var e=n(this).attr("href");e&&!/^(?:#|javascript:|\/\/)/.test(e)&&(e=t.filter(e),n(this).attr("href",e))})},filter:function(t){return!this.url.indexOf("https:")&&t.indexOf("http:")?this.https2http(t):this.http2https(t)},getName:function(t){t=t.replace(/^https?:\/\/zhidao\.baidu\.com/,"");var e=t.replace(/^\//,"").split(/[\/\?]/)[0],i=t.charAt(0),n=t.charAt(1);return i&&"?"!==i&&n&&"?"!==n||(e="/"),e},http2https:function(t){var e=this.getName(t);return~a.indexOf(e)?"https://"+this.host+t.replace(/^https?:\/\/zhidao\.baidu\.com/,""):this.addRefer(t)},https2http:function(t){var e=this.getName(t);if(/^https:/.test(e)||~a.indexOf(e))return t;var i=t.replace(/^https:\/\/zhidao\.baidu\.com/,"");return t="http://"+this.host+i,this.addRefer(t)},addRefer:function(t){var e=(!!window.ActiveXObject||"ActiveXObject"in window)&&!!~navigator.userAgent.indexOf("MSIE");if(e){var i=~this.url.indexOf("?")?"&":"?",a=n.cookie.get("BAIDUID");t=this.url.replace(/^https:/,"http:")+i+"gossl="+encodeURIComponent(t)+"&_="+encodeURIComponent(a)}return t}};h.init(),i.exports=h});
;define("common:widget/js/logic/dom-ready/dom-ready.js",function(t,o){function i(t){e.ajax({url:"/s/toutu/questionnaire.js",dataType:"json",success:function(o){if(!o)return void(t&&t({url:""}));if(o.qn){var i=o.qn,e=i.at,n=i.url;if(!e||"http://"===e||!n||"http://"===n)return void(t&&t({url:"",pr:o.pr}));for(var s=window.location.pathname,a=e.split(" "),r=!1,c=0,m=a.length;m>c;c++)if("/"===a[c]&&s===a[c]||"/"!==a[c]&&-1!==s.indexOf(a[c])){r=!0;break}window.location.href===e||r?t&&t({url:n,pr:o.pr}):t&&t({url:"",pr:o.pr})}},error:function(){t&&t({url:""})}})}var e=t("common:widget/js/util/tangram/tangram.js"),n=t("common:widget/js/logic/jump-top/jump-top.js"),s=t("common:widget/js/logic/task/task.js"),a=(t("common:widget/https/https-replace.js"),t("common:widget/js/util/log/log.js"));o.init=function(t){try{var o=location.pathname,r=t.img;try{F.context("sysTaskAutoInit")?i(function(i){n({isFeedback:/^\/($|\?|uteam|shop|business|browse|authentic\/homepage|user\/admin|comment|uhome|uadmin|ichat)/i.test(o),isProf:/^\/(doctor|prof\/education|prof\/apply|expert)/i.test(o),feedbackPl:t.feedbackPl||1,isMavin:t.isMavin,isQuestionnaire:i.url,isTaskList:F.context("user").isLogin,isShowUserUnread:F.context("user").isLogin&&!F.context("user").isBusiness,bottomPr:i.pr})}):n({isFeedback:0,isProf:0,feedbackPl:0,isMavin:0,isQuestionnaire:0,isTaskList:0,isShowUserUnread:0,bottomPr:0})}catch(c){}if(F.context("sysTaskAutoInit")&&s.init(),r&&r.bgImg){if(!e.swf.version)return;var m=e("<div/>").attr("id","top-flash-container").attr("title",r.title).css({position:"absolute",bottom:"0",right:"0"}).mousedown(function(){location.href=r.url});e("#header").css("position","relative").append(m),e.swf.create({id:"top-flash",width:179,height:73,url:r.bgImg,allowscriptaccess:"always",wmode:"transparent"},"top-flash-container")}a.send({module:"common",page:"framework",action:"common-pv",area:"common-page",location:window.location.href})}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message,path:"common:widget/js/logic/dom-ready/dom-ready.js",method:"",ln:145})}}});
;define("common:widget/js/logic/jump-top/jump-top.js",function(i,e,t){function a(i){if(!(i.url&&i.img&&i.on&&i.off))return"";var e=d.date.parse(i.on),t=d.date.parse(i.off),a=1e3*F.context("now");if(e>a||a>t)return"";i.h=parseInt(i.h,10)||"",i.img=c.autoTrans(i.img);var n=['<a class="gb-pr-lk" target="_blank"',' href="'+i.url+'"',' style="',i.h?"height:"+i.h+"px;":"","background: url("+i.img+") no-repeat;",'"',"></a>"];return n.join("")}function n(i){return['<div class="jump-goto-naire">','<a href="'+i+'" target="_blank">\u6709\u5956\u95ee\u5377</a>',"</div>"].join("")}function s(i){var e="";return/^\/(user\/admin|uadmin)/i.test(location.pathname)?e="&rt=2":/^\/shop/i.test(location.pathname)?e="&rt=3":/^\/business/i.test(location.pathname)&&(e="&rt=4"),['<div class="jump-feedback">','<a href="/feedback?pl=',i||"1",e,'" target="_blank">\u610f\u89c1\u53cd\u9988</a>',"</div>"].join("")}function o(i){var e="";e="1"===i?"/business/admin/qrstatics":"2"===i?"/business/admin/qlist":"/ihome/hangjia/index";var t=['<div class="jump-goto-mavin">','<a href="',e,'" data-type="',i,'" target="_blank"><i></i><span>\u8fdb\u5165\u884c\u5bb6\u5de5\u4f5c\u5ba4<span></a>',"</div>"].join("");return t}function r(i){var i=parseInt(i);i>99&&(i="99+");var e=['<div class="jump-goto-unread">','<i class="unread-total">'+i+'</i><div class="message-icon"><a href="javascript:void(0)"></a></div><div class="unread-list-container"></div>',"</div>"].join("");return e}var d=i("common:widget/js/util/tangram/tangram.js"),l=i("common:widget/js/util/log/log.js"),c=(i("common:widget/js/ui/dialog/dialog.js"),i("common:widget/js/util/https/https.js")),u=['<div class="jump-top">','<a href="#" target="_self">\u8fd4\u56de\u9876\u90e8</a>',"</div>"].join(""),m=['<div class="jump-profhelp">','<a href="http://wpa.qq.com/msgrd?v=3&uin=2725326332&site=qq&menu=yes" target="_blank">\u5728\u7ebf\u5ba2\u670d</a>',"</div>"].join(""),p=['<div class="jump-task-list">','<a class="open-task-list" data-action="open-task-list">\u4efb\u52a1\u5217\u8868</a>',"</div>"].join("");t.exports=function(i){function e(i){"undefined"==typeof window.CLIENT_WIN||window.CLIENT_WIN&&window.CLIENT_WIN.closed?(window.CLIENT_WIN=window.open(i,"serverwin","width=1150,height=680,status=no,resizable=yes"),(null==window.CLIENT_WIN||window.CLIENT_WIN.document.location.href!=i)&&(window.CLIENT_WIN=window.open(i,"serverwin","width=1150,height=680,status=no,resizable=yes"))):window.CLIENT_WIN.focus()}function t(i){d.get("/business/ajax/getrecentlytalklist?type=2",function(t){var a=t.data.total,n=t.data.list,s=[];if(0!=a){for(var o=0;o<n.length;o++){var r=n[o].offineCount?'<span class="unread-count-num"> ('+n[o].offineCount+")</span>":"",l=n[o].businessName.length>9?n[o].businessName.slice(0,9)+"...":n[o].businessName;s.push('<li class="is-online-'+n[o].is_online+'"><a href="/business/client?businessId='+n[o].businessId+"&custom_id="+n[o].custom_id+'" target="_blank" title="'+l+"\u5ba2\u670d\uff1a"+n[o].username+'"><i></i>'+l+r+"</a></li>")}i.find(".ul-unread-container").append(s.join("")).delegate("li a","click",function(i){try{i.preventDefault();var t=d(this).attr("href");e(t)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/jump-top/jump-top.js",method:"",ln:239})}})}})}function c(e){var t=d(window).scrollTop(),a=(6==d.browser.ie?t:0)+d(window).height()-v.height()-i.offset[0]-110,n=t>d(window).height()/2?"visible":"hidden";i.isFeedback||i.isProf||i.isMavin||i.isQuestionnaire||i.isTaskList?v.find(".jump-top").css("visibility",n):v.css("visibility",n),v.animate({top:a+"px"},e||0)}d.isPlainObject(i)||(i={}),d.isArray(i.offset)||(i.offset=[0,0]);var f=i.isFeedback?s(i.feedbackPl):i.isProf?m:"",g=i.isQuestionnaire?n(i.isQuestionnaire):"",h=i.isMavin?o(i.isMavin):"",v=d("<div />").addClass("jump-top-box").css({right:i.offset[1]+5+"px"}).html([u,f,g,h,i.isTaskList?p:"",i.bottomPr?a(i.bottomPr):""].join("")).appendTo(document.body);v.find(".jump-top a").click(function(i){try{i.preventDefault(),d(d.browser.ie||d.browser.firefox?document.documentElement:document.body).animate({scrollTop:"0px"},500)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/jump-top/jump-top.js",method:"",ln:196})}}),v.find(".jump-goto-mavin a").click(function(i){try{var e=d(this).data("type");l.send({module:"common",page:"jump-top",area:"goto-mavin",mavin:e,action:"click",type:2031})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/jump-top/jump-top.js",method:"",ln:208})}}),i.isShowUserUnread&&d.get("/business/ajax/unreaddetailtotal",{type:2},function(i){if(i&&i.data&&i.data.unReadTotal>0){var e=r(i.data.unReadTotal);v.append(e).find(".jump-goto-unread").click(function(i){try{d(this).hasClass("show-unread-list")?(d(this).removeClass("show-unread-list"),d(".unread-list-container").html("")):(d(this).addClass("show-unread-list"),d('<div class="unread-title">\u6700\u8fd1\u8054\u7cfb\u4eba</div><div class="unread-list"><ul class="ul-unread-container"></ul></ul></div>').appendTo(".unread-list-container"),d(this).find("i").remove(),t(v)),l.send({type:2014,module:"common",page:"all",area:"business-unreadmsg",action:"click"})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/jump-top/jump-top.js",method:"",ln:274})}})}});var j;6==d.browser.ie&&v.css("position","absolute"),d(window).on("resize scroll",function(){clearTimeout(j),j=setTimeout(c,200)}),c(1)}});
;define("common:widget/js/logic/msg/msg.js",function(e,t){function i(e,t){if(D){var o,a=d+1e3*h<(new Date).getTime()?!0:!1,r=!0,s=_.getLocalData();s&&s.data&&(s.data.interval&&(o=s.data.interval),s.time&&(a||v||s.time>(new Date).getTime()-1e3*o)&&(n(s.data),r=!1)),r&&_.getServerData(t),!e&&o&&(clearTimeout(j),j=setTimeout(function(){i(!1,{poll:1})},1e3*o))}}function o(e,t){var i=t||!0,o=_.delLocalData(e);if(i&&o.length>0){var n={type:10091==o[0].type||10092==o[0].type?1009:o[0].type,id:o[0].id,count:o[0].count};_.delServerData(n)}}function n(e){e&&0==e.status&&(e.globalList&&"2040"==e.globalList.type&&e.globalList.data&&$.show(e.globalList.data),e.actList&&r.isArray(e.actList)?_.show(e.actList):document.title=L)}function a(){if(r(window).on("resize",function(){t.resize()}).on("scroll",function(){t.resize()}),!D)return void $.getCms(f);if(0!=r("#userbar #user-name").size()){var e,o={},n=location.pathname+location.search;(e=n.match(/^\/question\/(\d+)/i))?(o.fr="question",_.getServerData(o)):i();var a=r.url.getQueryValue(location.href,"time");a&&(a=(new Date).getTime()-parseInt(a),c.send({type:2031,page:"bubble",action:"time",time:a})),r(document).on("mousemove",function(){d=(new Date).getTime()}),u.on("show",function(){i()})}}var r=e("common:widget/js/util/tangram/tangram.js"),s=e("common:widget/js/ui/tip/tip.js"),l=e("common:widget/js/util/store/store.js"),c=e("common:widget/js/util/log/log.js"),g=e("common:widget/js/util/event/event.js"),m=e("common:widget/js/ui/dialog/dialog.js"),u=e("common:widget/js/util/visibility/visibility.js"),p="http://msg.zhidao.baidu.com/",f="/s/toutu/promotion.js",d=(new Date).getTime(),h=180,v=0,w=3,y=!1,b=null,T=null,j=null,D=0!=F.context("user").isLogin,k="/uhome/msg/",x="/uhome",L=document.title,C={1001:{title:"{$n}\u4e2a\u63d0\u95ee\u6709\u65b0\u56de\u7b54",url1:k+"newreply?fr=msg",url2:k+"newreply?fr=msg"},1003:{title:"{$n}\u4e2a\u5165\u56e2\u7533\u8bf7",url1:"/team/view/{$tname}#manage-3",url2:"/team/view/{$tname}#manage-3"},1006:{title:"{$n}\u4e2a\u56de\u7b54\u6709\u65b0\u8ffd\u95ee",url1:k+"replyask?fr=msg",url2:k+"replyask?fr=msg"},1010:{title:"{$n}\u4e2a\u63d0\u95ee\u5f97\u5230\u8865\u5145",url1:k+"questionsup?fr=msg",url2:k+"questionsup?fr=msg"},1011:{title:"{$n}\u4e2a\u63d0\u95ee\u6025\u5f85\u5904\u7406",url1:k+"waitdeal?fr=msg",url2:k+"waitdeal?fr=msg"},1009:{title:"{$n}\u4e2a\u56de\u7b54\u88ab\u91c7\u7eb3",url1:k+"event?fr=msg",url2:k+"event?fr=msg"},10091:{title:"{$n}\u4e2a\u56de\u7b54\u83b7\u5f97\u597d\u8bc4",url1:k+"event?fr=msg",url2:k+"event?fr=msg"},10092:{title:"{$n}\u4e2a\u56de\u7b54\u83b7\u5f97\u4e2d\u8bc4",url1:k+"event?fr=msg",url2:k+"event?fr=msg"},1018:{title:"{$n}\u4e2a\u56de\u7b54\u88ab\u63a8\u8350",url1:k+"event?fr=msg",url2:k+"event?fr=msg"},1008:{title:"{$n}\u4e2a\u56de\u7b54\u8d5e\u540c",url1:k+"evaluate?type=to&fr=msg",url2:k+"evaluate?type=to&fr=msg"},1002:{title:"{$n}\u4f4d\u77e5\u53cb\u5411\u60a8\u6c42\u52a9",url1:x+"?type=help&fr=msg",url2:x+"?type=help&fr=msg"},1005:{title:"{$n}\u4e2a\u56e2\u961f\u6c42\u52a9",url1:"/team",url2:"/team/view/{$tname}#question-3"},1012:{title:"{$n}\u4e2a\u65b0\u52a8\u6001",url1:k+"event?fr=msg",url2:k+"event?fr=msg"},1019:{title:"{$n}\u4e2a\u65b0\u901a\u77e5",url1:k+"sysmsg?fr=msg",url2:k+"sysmsg?fr=msg"},1020:{title:"{$n}\u4e2a\u56de\u7b54\u88ab\u63a8\u8350\u4e3a\u4f18\u8d28",url1:k+"event?fr=msg",url2:k+"event?fr=msg"}},$={cookieName:"IK_MSG_POPUP",getCms:function(e){r.ajax({url:e,dataType:"json",success:function(e){e&&$.show(e,"cms")}})},setCookie:function(e){r.cookie.set($.cookieName,e.id,{expires:r.date.parse(e.endTime).getTime(),path:"/"})},generateView:function(e){var t=[];return e.linkText=e.linkText||"\u8fdb\u5165\u4e13\u9898",t.push('<a target="_blank"  href="'+e.linkUrl+'"><img class="task-guide-image" src="'+e.imageUrl+'" /></a>'),t.join("")},show:function(e,i){var o=i||"msg";if("msg"==o){if(e=r.array(e).find($.Validate),!e)return;t.del({type:"2040"},!1)}else if("cms"==o&&!$.Validate(e))return;!e.imageUrl||"http://"===e.imageUrl||e.imageUrl.length<17||(T=new s({rightbottom:"popcms",width:240,position:{my:"right-3 bottom-3",at:"right bottom"},tooltipClass:"task-guide tip-green",arrow:!1,radius:!1,closebox:!0,content:$.generateView(e),close:function(){"cms"==o&&$.setCookie(e)},target:r("#footer")}),T.show(),g.fire("pop.resize"),c.send({type:2031,page:"bubble",action:"pv"}),T.getTipContainer().delegate("a","click",function(e){try{T.hide(),c.send("img"==e.target.nodeName.toLowerCase()?{type:2031,page:"bubble",pos:"bubble-img"}:r(e.target).hasClass("tip-close")?{type:2031,page:"bubble",pos:"bubble-close"}:{type:2031,page:"bubble",pos:"bubble-link"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/msg/msg.js",method:"",ln:158})}}))},Validate:function(e){var t=r.date.parse(e.startTime),i=r.date.parse(e.endTime),o=r.cookie.get($.cookieName);return 1==e.enabled&&o!=e.id&&(new Date).getTime()>=t.getTime()&&(new Date).getTime()<i.getTime()?(g.fire("cmsMsg.show"),!0):!1}},_={getServerData:function(e){var i=p+"api?source=iknow&t="+(new Date).getTime();i+="&cu="+encodeURIComponent(F.context("user").name),e&&(e.fr||e.poll)&&(i+="&"+r.url.jsonToQuery(e)),r.sio(i).callByServer(function(i){if(e&&e.poll){var o=_.getLocalData();if(o&&o.data&&i){var n=r.json.stringify(o.data)==r.json.stringify(i);c.send({type:2031,page:"bubble",action:"poll",match:n})}}t.refresh(i)})},delServerData:function(e){var t=p+"close_notice?t="+(new Date).getTime();t+="&"+r.url.jsonToQuery(e),r.sio(t).callByServer(function(){})},setLocalData:function(e){l.set("ikmsg_time",(new Date).getTime()),l.set("ikmsg_data",r.json.stringify(e))},getLocalData:function(){return{time:l.get("ikmsg_time")||0,data:r.json.parse(l.get("ikmsg_data")||"null")}},delLocalData:function(e){var i=[],o=this.getLocalData();if(o&&(o=o.data)){if(o.actList)for(var n=0;n<o.actList.length;n++)if(o.actList[n].type==e.type){i=o.actList.splice(n,1);break}o.globalList&&o.globalList.type==e.type&&(o.globalList.data=null)}return t.refresh(o),i},clearLocalData:function(){l.remove("ikmsg_data"),l.remove("ikmsg_time"),this.delServerData({type:"99999",count:1})},_buildMsg:function(e){var t=[],i="",o="";return i=' alog-alias="'+e.type+'-title"',o=' alog-action="'+e.type+'-close"',t.push('<a target="_blank" href="'+e.url+'"'+i+' index="'+e.type+'"><i'+o+'></i><span id="notice-'+e.type+'">'+e.title+"</span></a>"),t},show:function(e){this.generateView(e)},hideTip:function(){b&&b.getTipContainer().hide()},showTip:function(){b&&b.getTipContainer().show()},generateView:function(e){var i=[],o=[],n=[],a=this,l=0;if(r.forEach(e,function(e,t){var a=C[e.type];if(!(1008==e.type&&e.create_time<(new Date).getTime()/1e3-864e5)){if(a){var r=a.title.replace("{$n}",'<span class="num">'+e.count+"</span>"),s=e.count>1?a.url1:a.url2.replace("{$qid}",e.qid).replace("{$aid}",e.aid);("1005"==e.type||"1003"==e.type)&&(s=s.replace("{$tname}",e.tname)),e.url=s,e.title=r,e.index=t,w>l?i.push(_._buildMsg(e)):o.push(_._buildMsg(e)),l++,n.push(e.type)}g.fire("tip.callback",e)}}),i.length<=0)return void(b&&(b.hide(),b=null));b||(b=new s({target:"#user-name",closebox:!0,tooltipClass:"nav-notice",direction:"top",closeall:function(){_.clearLocalData()}}),r(document).delegate(".nav-notice .ui-tooltip-content","click",function(e){try{var i={},o=e.target.nodeName.toLowerCase();"i"==o?(e.stopPropagation(),e.preventDefault(e),i.pos="msg-del"):i.pos="msg-title";var n=r(e.target).closest("a"),a=n.attr("index");a&&(i.actType=a,i&&c.send(r.extend(i,{type:2031,page:"msg"})),document.title=L,t.del({type:a}),-1==n.attr("href").indexOf("time=")&&(n[0].href+=(-1==n[0].href.indexOf("?")?"?":"&")+"time="+(new Date).getTime())),1008==a&&"i"==o&&m.confirm("\u662f\u5426\u4e0d\u518d\u663e\u793a\u88ab\u8d5e\u540c\u6d88\u606f\uff1f",{onaccept:function(){r.sio(p+"getuswitch?t="+(new Date).getTime()).callByServer(function(e){var t=e.config||{};t[1008]=0,r.sio(p+"uswitch?config="+r.json.stringify(t)).callByServer(function(){})}),r(this).dialog("close")}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/msg/msg.js",method:"",ln:350})}})),b.target.tooltip("option","content",i.join("")),b.on("show",function(){a.generateMore(this.getTipBody(),o.join(""))}),b.show();{var u=b.getTipBody();r(u).find("a").each(function(e,t){var i,o,n=(t.href+top.location.href).match(/uhome/gi);n&&n.length>1?(i=t.href,o=i.substr(i.lastIndexOf("#")),i=i.replace(/(&t=\d+)*#.+$/g,"")+"&t="+(new Date).getTime(),-1==i.indexOf("?")&&(i=i.replace(/&/,"?")),t.href=i+o,t.target="_top"):t.target="_blank"})}g.fire("tip.resize")},generateMore:function(e,t){""!=r.string(t).trim()?(r(b.getTipContainer()).removeClass("nav-notice-small"),r(e).append('<div id="more-notice-holder" style="display:none;">'+t+"</div>"),0==r("#more-control-div").size()&&(r(e).after('<div id="more-control-div"><a href="###" id="more-control-a" class="open"></a></div>'),r("#more-control-div").click(function(e){try{e.preventDefault();var t=r(this).find("a").first();t.hasClass("open")?(t.removeClass("open").addClass("close"),r("#more-notice-holder").show(),y=!0):t.hasClass("close")&&(r("#more-notice-holder").hide(),t.removeClass("close").addClass("open"),y=!1)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/msg/msg.js",method:"",ln:411})}})),y&&(r("#more-notice-holder").show(),r("#more-control-div a").removeClass("open").addClass("close"))):(r("#more-control-div").remove(),r("#more-notice-holder").remove(),y=!1,r(b.getTipContainer()).addClass("nav-notice-small"))}};g.on("tip.resize",function(){if(b){var e=r("#user-name"),t=b.getTipContainer(),i=r(t).find(".tip-arrow");if(!e||!t||z)return!1;var o=r(e).offset(),n=r(window).scrollTop();n>o.top+27?(r(t).css(r.browser.ie&&r.browser.ie<7?{left:o.left+"px",top:n+1+"px"}:{left:o.left+"px",top:"1px",position:"fixed"}),r(i).hide()):(o.top+=27,r(t).css({left:o.left+"px",top:o.top+"px",position:"absolute"}),r(i).show())}}),g.on("tip.del",function(e,t,i){o(t,i)});var z=!1;g.on("userbar.show",function(e,i){z=i.waiting,t.hide()}),g.on("userbar.hide",function(e,i){z=i.waiting,t.resize(),t.show()}),g.on("userbar.reposition",function(e,i){z=i.waiting,t.resize(),t.show()}),r.object.extend(t,{init:a,show:_.showTip,hide:_.hideTip,del:o,resize:function(){g.fire("tip.resize"),g.fire("pop.resize")},force:function(){},refresh:function(e){_.setLocalData(e),i()}})});
;define("common:widget/js/logic/msg-new/msg-new.js",function(e,s,t){function i(e){var s=d("#nav-msg-layout");s.size()||(s=d(f(j,{isNewAsk:e.ask_notice.unread,isNewReply:e.reply_notice.unread,isNewSys:e.sysmsg.unread,isHotspot:e.itopic.unread})).insertAfter("#userbar-msg"),z&&s.css({top:z.top,left:z.left}),d(".nav-msg-menu",s).on("click","a",function(e){try{e.preventDefault(),d(this).parent().children().removeClass("active"),d(this).addClass("active"),n(d(this).data("type"),d(this).data("url"))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/msg-new/msg-new.js",method:"",ln:223})}}),d(".nav-msg-list",s).on("mouseenter","li",function(){d(this).addClass("hover")}).on("mouseleave","li",function(){d(this).removeClass("hover")}).on("click",".msg-resume",function(){try{var e=d(this).parents("li"),s=(e.parent(".nav-msg-list"),"");s=d.json.stringify(1009==e.data("type")&&e.data("r-uniq-id")?[{srctype:e.data("type"),uniq_id:e.data("uniq-id")},{srctype:1018,uniq_id:e.data("r-uniq-id")}]:[{srctype:e.data("type"),uniq_id:e.data("uniq-id")}]),d.post("/notice/close/batch",{close_list:s},function(s){if(!s.errno){var t=d("#userbar-msg i");t.size()&&(parseInt(t.text())>1?t.html(parseInt(t.text())-1):(t.remove(),d(".nav-msg-menu .active").find("s").remove(),W&&W.commonUserbar&&p.fire("common.userbarMsgNum",0))),e.remove(),d(".nav-msg-list").find("li").size()?a():d(".nav-msg-list").empty().html('<li class="msg-null"><i class="i-msg-null"></i><br><span>\u60a8\u8fd8\u6ca1\u6709\u6b64\u7c7b\u65b0\u6d88\u606f\u54e6~</span></li>'),c()}},"json"),e.find(".task-msg-simulate").length&&h.set("TASK_NEW_SHOW",0)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/msg-new/msg-new.js",method:"",ln:289})}}).on("click",".msg-link",function(){try{d(this).next(".msg-resume").click(),d(this.hasClass("task-msg-simulate"))&&h.set("TASK_NEW_SHOW",0)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/msg-new/msg-new.js",method:"",ln:297})}}),d(".nav-msg-menu a.active",s).click(),d("#notice-all-clear").unbind("click"),d("#notice-all-clear").bind("click",function(){try{c(),d(".nav-msg-list").empty().html('<li class="msg-null"><i class="i-msg-null"></i><br><span>\u60a8\u8fd8\u6ca1\u6709\u6b64\u7c7b\u65b0\u6d88\u606f\u54e6~</span></li>');var e=d("#nav-msg-layout").prev("#userbar-msg");d(".nav-msg-menu a").find("s").remove(),e.find("i").remove(),W&&W.commonUserbar&&p.fire("common.userbarMsgNum",0)}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"common:widget/js/logic/msg-new/msg-new.js",method:"",ln:317})}}))}function a(){var e=d(".nav-msg-list");e.next(".scrollbar-wp").remove(),new u({scrollWrapper:e.parent(),scrollContent:e,maxHeight:266}).render()}function n(e,s){var t=d(".nav-msg-list");s=s||S+(e||"ask"),d.get(s,{t:+new Date},function(e){if(0==e.errno){e.data.sysmsg&&h.get("TASK_NEW_SHOW")&&(e.data.sysmsg.list.push({srctype:"4000",sysmsg_content:{brief:h.get("TASK_OL_CONTENT")}}),e.data.sysmsg.total+=1,e.data.sysmsg.unread+=1);var s=e.data.ask_notice||e.data.reply_notice||e.data.sysmsg||e.data;t.empty(),t.next(".scrollbar-wp").remove(),t.css("top","0"),d(s.list).each(function(){var e=this.fields&&this.fields.recommended;1==e?d("<li />").data("type",this.srctype).data("uniq-id",this.uniq_id).data("r-uniq-id",this.fields.recommended_uniqId).html(f(b["1009a"],this)).append('<a class="msg-resume"><span>\u6807\u8bb0\u4e3a\u5df2\u8bfb</span></a>').appendTo(t):d("<li />").data("type",this.srctype).data("uniq-id",this.uniq_id).html(f(b[this.srctype],this)).append('<a class="msg-resume"><span>\u6807\u8bb0\u4e3a\u5df2\u8bfb</span></a>').appendTo(t)}),d.isArray(s.list)&&0!=s.list.length?a():t.empty().html('<li class="msg-null"><i class="i-msg-null"></i><br><span>\u60a8\u8fd8\u6ca1\u6709\u6b64\u7c7b\u65b0\u6d88\u606f\u54e6~</span></li>')}},"json")}function o(){function e(e,s){var t=s.all.unread;if(0==t)e.find("i").remove();else if(T!=t){var a=d("i",e);a[0]||(a=d("<i />").appendTo(e)),a.text(t)}else!e.find("i")[0]&&t?d("<i />").text(t).appendTo(e):t&&e.find("i").text(t);N&&i(s),W&&W.commonUserbar&&p.fire("common.userbarMsgNum",t),l(s.global)}var s=d("#userbar-msg"),t=m(),a=!0,n=C+1e3*D<(new Date).getTime()?!0:!1;t&&t.data&&t.time&&(t.time>(new Date).getTime()-9e4||n?(e(s,t.data),a=!1):a=!0),a&&d.get(x+"?t="+ +new Date,function(t){0==t.errno&&t.data&&(e(s,t.data),r(t.data))},"json")}function l(e){var s=null,t=e;t&&t.data&&(t=t.data,t.length&&(d(t).each(function(e,t){s||1!=t.enabled||(s=t)}),s&&q.show(s)))}function r(e){h.set("ikmsg_time",(new Date).getTime()),h.set("ikmsg_data",d.json.stringify(e))}function m(){return{time:h.get("ikmsg_time")||0,data:d.json.parse(h.get("ikmsg_data")||"null")}}function c(){h.remove("ikmsg_data"),h.remove("ikmsg_time")}var d=e("common:widget/js/util/tangram/tangram.js"),g=e("common:widget/js/ui/tip/tip.js"),f=e("common:widget/js/util/template/template.js"),u=(e("common:widget/js/util/log/log.js"),e("common:widget/js/ui/scrollbar/scrollbar.js")),p=e("common:widget/js/util/event/event.js"),h=e("common:widget/js/util/store/store.js"),_=(e("common:widget/js/ui/dialog/dialog.js"),window.baidu||{});_.template=f;var v,w,k=(F.context("user"),"/s/toutu/promotion.js"),y="http://muzhi.baidu.com",b={4000:"<#:=sysmsg_content.brief#>",1001:'\u4f60\u7684\u63d0\u95ee <a href="<#if(fields.q_isDoctor&& fields.q_isDoctor==1){#>'+y+'<#}#>/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u6536\u5230 <#if(fields.notice_count>0){#><#=fields.notice_count#><#}else{#>1<#}#> \u6761\u65b0\u56de\u7b54\u3002',1025:'\u4f60\u7684\u63d0\u95ee <a href="<#if(fields.q_isDoctor&& fields.q_isDoctor==1){#>'+y+'<#}#>/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u5df2\u6709 <#if(fields.notice_count>0){#><#=fields.notice_count#><#}else{#>1<#}#> \u6761\u56de\u7b54\u4e14\u5185\u5bb9\u6bd4\u8f83\u4f18\u8d28\uff0c\u8bf7\u67e5\u770b\u5e76\u53ca\u65f6\u5904\u7406\u3002',1026:'\u4f60\u7684\u63d0\u95ee <a href="<#if(fields.q_isDoctor&& fields.q_isDoctor==1){#>'+y+'<#}#>/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u5df2\u7ecf\u7531\u767e\u5ea6\u77e5\u9053\u5e2e\u4f60\u9009\u51fa\u4f18\u8d28\u7b54\u6848\uff0c\u8bf7\u67e5\u770b\u5e76\u53ca\u65f6\u91c7\u7eb3\u7b54\u6848\u3002',1006:["<#if(fields.username_arr[0]){#>",'<a href="http://www.baidu.com/p/<#:=fields.username_arr[0]#>?from=zhidao" target="_blank"><#:=fields.username_arr[0]#></a>',"<#}else{#>","\u70ed\u5fc3\u7f51\u53cb","<#}#>","\u8ffd\u95ee\u4e86\u4f60 ",'<a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7ee7\u7eed\u5e2e\u52a9Ta\u5427\u3002'].join(""),1020:'\u606d\u559c\uff01\u4f60\u5bf9\u95ee\u9898 <a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7684\u56de\u7b54\u88ab\u9009\u4e3a\u4f18\u8d28\u7b54\u6848\u3002',1027:'\u4f60\u5bf9\u95ee\u9898 <a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7684\u56de\u7b54\u6536\u5230 <#if(fields.notice_count>0){#><#=fields.notice_count#><#}else{#>1<#}#> \u6761\u65b0\u8bc4\u8bba\u3002',1028:'\u4f60\u5bf9\u95ee\u9898 <a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7684\u8bc4\u8bba\u6536\u5230 <#if(fields.notice_count>0){#><#=fields.notice_count#><#}else{#>1<#}#> \u6761\u65b0\u56de\u590d\u3002',1010:["<#if(fields.username_arr[0]){#>",'<a href="http://www.baidu.com/p/<#:=fields.username_arr[0]#>?from=zhidao" target="_blank"><#:=fields.username_arr[0]#></a>',"<#}else{#>","\u70ed\u5fc3\u7f51\u53cb","<#}#>"," \u8865\u5145\u4e86\u63d0\u95ee ",'<a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7ee7\u7eed\u5e2e\u52a9Ta\u5427\u3002'].join(""),1029:'\u4f60\u56de\u7b54\u8fc7\u7684\u95ee\u9898 <a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u88ab\u8ffd\u52a0\u4e86\u60ac\u8d4f\uff08\u8d22\u5bcc\u503c+50\uff09\uff0c\u53bb\u5b8c\u5584\u56de\u7b54',1008:["<#if(fields.username_arr[0]){#>",'<a href="http://www.baidu.com/p/<#:=fields.username_arr[0]#>?from=zhidao" target="_blank"><#:=fields.username_arr[0]#></a>',"<#}else{#>","\u70ed\u5fc3\u7f51\u53cb","<#}#>",'\u8d5e\u4e86\u4f60\u5bf9\u95ee\u9898<a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7684\u56de\u7b54'].join(""),"1009a":'\u4f60\u5bf9\u95ee\u9898 <a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7684\u56de\u7b54\u88ab\u63d0\u95ee\u8005\u548c\u7f51\u53cb\u540c\u65f6\u91c7\u7eb3\uff01',1009:'\u4f60\u5bf9\u95ee\u9898 <a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7684\u56de\u7b54\u88ab\u63d0\u95ee\u8005\u91c7\u7eb3\uff01',1018:'\u4f60\u5bf9\u95ee\u9898 <a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a> \u7684\u56de\u7b54\u88ab\u7f51\u53cb\u91c7\u7eb3\uff01',1002:["<#if(fields.username_arr[0]){#>",'<a href="http://www.baidu.com/p/<#:=fields.username_arr[0]#>?from=zhidao" target="_blank"><#:=fields.username_arr[0]#></a>',"<#}else{#>","\u70ed\u5fc3\u7f51\u53cb","<#}#>"," \u5411\u4f60\u6c42\u52a9 ",'<a href="/question/<#=fields.qid#>" target="_blank" class="msg-link"><#:=fields.q_title#></a>\uff0c\u5c3d\u5feb\u5e2eTa\u89e3\u7b54\u95ee\u9898\u5427'].join("")},q={cmsCookieName:"IK_MSG_POP",getCms:function(e){d.ajax({url:e,dataType:"json",success:function(e){if(e){q.show(e,"cms");var s=m();s&&s.data&&l(s.data.global)}}})},setCookie:function(e){d.cookie.set(q.cmsCookieName,e.id,{expires:d.date.parse(e.endTime).getTime(),path:"/"})},generateView:function(e){var s=[];return s.push('<a target="_blank"  href="'+e.linkUrl+'"><img class="task-guide-image" src="'+e.imageUrl+'" /></a>'),s.join("")},show:function(e,s){var t=s||"msg";("cms"!=s||q.Validate(e))&&d("#footer").size()&&(!e.imageUrl||"http://"===e.imageUrl||e.imageUrl.length<17||(v?v.getTipBody().html(q.generateView(e)):v=new g({rightbottom:"popcms",width:240,position:{my:"right-3 bottom-3",at:"right bottom"},tooltipClass:"task-guide tip-green",arrow:!1,radius:!1,closebox:!0,content:q.generateView(e),close:function(){"cms"==t?q.setCookie(e):c()},target:d("#footer")}),v.show(),v.getTipContainer().delegate("a","click",function(e){try{v.hide()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/msg-new/msg-new.js",method:"",ln:152})}})))},Validate:function(e){var s=d.date.parse(e.startTime),t=d.date.parse(e.endTime),i=d.cookie.get(q.cmsCookieName),a=!1;return 1==e.enabled&&i!=e.id&&(new Date).getTime()>=s.getTime()&&(new Date).getTime()<t.getTime()&&(a=!0),a}},j=['<div id="nav-msg-layout">','<div class="nav-msg-tri"></div>','<div class="nav-msg-menu">','<a href="#" class="nav-msg-ask<#if(isNewAsk || (!isNewReply && !isNewSys)){#> active<#}#>" data-type="ask"><i></i><span>\u63d0\u95ee</span><#if(isNewAsk){#><s></s><#}#></a>','<a href="#" class="nav-msg-answer<#if(!isNewAsk && isNewReply){#> active<#}#>" data-type="reply"><i></i><span>\u56de\u7b54</span><#if(isNewReply){#><s></s><#}#></a>','<a href="#" class="nav-msg-sys<#if(!isNewAsk && !isNewReply && isNewSys){#> active<#}#>" data-type="sysmsg"><i></i><span>\u7cfb\u7edf</span><#if(isNewSys){#><s></s><#}#></a>','<a href="#" class="nav-msg-hotspot<#if(!isNewAsk && !isNewReply && !isNewSys && isHotspot){#> active<#}#>" data-type="hotspot" data-url="/notice/get/itopic?filter_close=1"><i></i><span>\u70ed\u529b\u6ce2</span><#if(isHotspot){#><s></s><#}#></a>',"</div>",'<div class="nav-msg-wrap"><ol class="nav-msg-list line"></ol></div>','<div class="nav-msg-more">','<a href="/ihome/notice/all" target="_blank" id="notice-all-clear"><i class="i-msg mr-5"></i><span>\u6240\u6709\u901a\u77e5</span></a>',"</div>","</div>"].join(""),T=0,N=!1,x="/notice/get/count",S="/notice/get/",C=(new Date).getTime(),D=180;p.on("msg.num",function(){clearInterval(w),w=setInterval(o,9e4),o()});var A,O,z,W;t.exports.init=function(e){function s(e){clearTimeout(O),O=setTimeout(function(){d(e.target).closest("#userbar-msg").size()||d(e.target).closest("#nav-msg-layout").size()||(clearTimeout(A),A=setTimeout(function(){w=!1,d("#nav-msg-layout").hide(),d(document.body).unbind("mousemove",s)},50))},50)}try{if(q.getCms(k),"0"==F.context("user").isLogin||""==F.context("user").isLogin||"false"==F.context("user").isLogin||void 0==F.context("user").isLogin)return;e&&(z=e.position,W=e);var t={isOpen:0,content:'\u65b0\u7248\u4efb\u52a1\u6765\u4e86\uff01\u7b54\u9898\u5b8c\u5168\u505c\u4e0d\u4e0b\u6765\uff0c\u77e5\u8bc6\u548c\u4e50\u8da3\u4e24\u8005\u90fd\u8981\u517c\u5f97\uff01\u4ece\u4eca\u5929\u8d77,\u8ba9\u6bcf\u4e00\u4e2a\u7b54\u6848\u90fd\u66f4\u52a0\u7cbe\u5f69\uff01<a class="msg-link task-msg-simulate open-task-list" href="javascript:;" data-action="open-task-list">\u6253\u5f00\u65b0\u7248\u4efb\u52a1&gt;&gt;</a>'};t.isOpen&&0!=h.get("TASK_NEW_SHOW")&&(h.set("TASK_NEW_SHOW",1),h.set("TASK_OL_CONTENT",t.content)),p.fire("msg.num"),d("#userbar-msg").mouseenter(function(){var e=d(this);e.find("i")&&parseInt(e.find("i").text())>0&&(clearTimeout(A),A=setTimeout(function(){N=!0,o(),d("#nav-msg-layout").show()},300),d(document.body).unbind("mousemove",s).on("mousemove",s))}),d(document).on("mousemove",function(){C=(new Date).getTime()})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/msg-new/msg-new.js",method:"",ln:572})}}});
;define("common:widget/js/logic/submit/submit.js",function(e,t,o){var a=e("common:widget/js/util/tangram/tangram.js"),r=e("common:widget/js/ui/base/base.js"),c=e("common:widget/js/ui/dialog/dialog.js"),n=e("common:widget/js/logic/ut/ut.js"),i=e("common:widget/js/util/event/event.js"),s=e("common:widget/js/util/form/form.js"),d=e("common:widget/js/logic/captcha/captcha.js"),m=e("common:widget/js/util/log/log.js"),l=r(function(e){var t=this;i.fire("editor.default");var o={url:"/submit/ajax/",params:{ie:"UTF-8"},hasJump:!1,autoRefresh:!1,jumpSubmit:function(e,o,r){var c={name:t.guid+"_FORM_NAME",id:t.guid+"_FORM_ID",action:"/submit/",method:"post"};c.action=""!=document.referrer?"/submit/?cm="+o.cm+"&fr="+encodeURIComponent(document.referrer):"/submit/?cm="+o.cm,1==F.context("hasZhimaTag")&&F.context("zhimaTagOpen")&&(c.action+="&iszhima=1"),new s(a.extend(a.extend(c,r||{}),{input:o})).submit()},errorDeal:function(e,t){var r=t&&t.data||{info:"\u7f51\u7edc\u5f02\u5e38\u5566\uff1a\uff08\u8bf7\u91cd\u65b0\u63d0\u4ea4"},n=t&&t.errorNo;if(r&&n&&10054==n){var s=['<div class="dialog-noemail"><i class="i-upload-big"></i><i class="i-download-big"></i>','<p class="f-bold mt-20">\u77e5\u9053\u5df2\u652f\u6301\u6587\u4ef6\u4e0a\u4f20\u3001\u4e0b\u8f7d\u529f\u80fd\u3002</p>','<p class="f-gray mt-5">\u77e5\u9053\u7f51\u53cb\u4f1a\u5c06\u60a8\u9700\u8981\u7684\u6587\u4ef6\u4e0a\u4f20\u5230\u77e5\u9053\uff0c\u60a8\u53ef\u4ee5\u5728\u7ebf\u9884\u89c8\u548c\u4e0b\u8f7d\u3002</p>','<p class="f-orange mt-5">\u4e3a\u4e86\u60a8\u7684\u4fe1\u606f\u5b89\u5168\uff0c\u8bf7\u4e0d\u8981\u7559\u4e0b\u60a8\u7684\u4e2a\u4eba\u90ae\u7bb1\u3002</p>','<p class="dialog-noemail-btn"><a id="dialog-noemail-btn" class="btn-32-green"><em><b>\u8fd4\u56de\u4fee\u6539</b></em></a></p></div>'];new c({title:"\u4fe1\u606f\u63d0\u793a",width:480,height:360,content:s.join(""),open:function(){a(".dialog-noemail-btn").delegate("a","click",function(e){try{e.preventDefault(),i.fire("dialog.close")}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/submit/submit.js",method:"",ln:102})}})}})}else 12303==n&&o.authcode?o.captcha=new d({type:"pcafter",submitParams:o,from:o.authcode.getFrom()||""}):12304==n&&o.captcha?o.captcha.error():12302==n&&o.authcode?o.authcode.error():(c.alert(r.info),o.autoRefresh&&setTimeout(function(){window.location.reload(!0)},3e3));m.send({type:2032,action:"submitError",errorNo:n})}};if(a.each(a.extend(o,e),function(e,o){a.isFunction(o)&&t.on(e,o)}),o.params&&(o.params.utdata=n.report().c),o.syncId){if("undefined"==typeof t.syncIdMap[o.syncId]&&(t.syncIdMap[o.syncId]=!1),t.syncIdMap[o.syncId])return;t.syncIdMap[o.syncId]=!0}var r=function(){/\/submit\/(ajax|user)/.test(o.url)&&F.context("user").stoken&&(o.params.stoken=F.context("user").stoken),a.ajax(o.url,{type:o.method||"post",dataType:o.dataType||"json",data:o.params,async:!o.sync,success:function(e){if(o.syncId&&(t.syncIdMap[o.syncId]=!1),e&&"undefined"==typeof e.errorNo&&(e.errorNo=e.errno),e&&"undefined"==typeof e.data&&(e.data=e),e&&0==e.errorNo)o.captcha&&o.captcha.dialog.close(),t.fire("beforeJump",e.data),o.hasJump&&o.jumpSubmitDelay?setTimeout(function(){t.fire("jumpSubmit",e.data)},o.jumpSubmitDelay):o.hasJump&&t.fire("jumpSubmit",e.data);else{var a=e?e.data:"";if(t.fire("beforeError",a),e&&267==e.errorNo)return void t.errorCheck({errorNo:267,actCallback:function(){window.open("https://passport.baidu.com/v2/?binding&tpl=ik&u=http%3A%2F%2Fzhidao.baidu.com&device=pc")},confirmCallback:function(){r()}});if(e&&12==e.errorNo&&16==a.reason)return void t.errorCheck({errorNo:12,actCallback:function(){window.open("/feedback/account.html")},confirmCallback:function(){r()}});if(e&&12===Number(e.errorNo)&&1!==Number(a.reason)){var n=new Date(1e3*a.optime),i=n.getFullYear(),s=n.getMonth()+1,d=10>s?"0"+s:s,m=n.getDate(),l=10>m?"0"+m:m,u=i+"-"+d+"-"+l;if(a.days>0)var f=Math.ceil((1e3*a.optime+864e5*a.days-new Date)/864e5);{var h='\u60a8\u7684\u8d26\u53f7\u8fdd\u53cd\u4e86<a href="http://help.baidu.com/question?prod_en=zhidao&class=154&id=851" target="_blank">\u77e5\u9053\u89c4\u8303</a>\uff0c\u5df2\u4e8e'+u+"\u88ab"+(a.days>0?"":"\u6c38\u4e45")+"\u5c01\u7981\uff0c\u65e0\u6cd5\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c"+(a.days>0?"\uff0c\u8fd8\u6709"+f+"\u5929\u89e3\u5c01":"")+'\u3002\u5982\u679c\u60a8\u8ba4\u4e3a\u5224\u65ad\u6709\u8bef\uff0c\u8bf7<a target="_blank" href="http://zhidao.baidu.com/feedback/account.html">\u53d1\u8d77\u7533\u8bc9</a>\uff0c\u5e2e\u52a9\u6211\u4eec\u6301\u7eed\u6539\u8fdb\u3002';c.alert(h,{width:400})}return}if(e&&13==e.errorNo)return void t.errorCheck({errorNo:13,actCallback:function(){window.open("/ihome/set/profile?type=contact")},confirmCallback:function(){r()}});t.fire("errorDeal",e)}},error:function(e,a,r){o.syncId&&(t.syncIdMap[o.syncId]=!1),t.fire("error",r),t.fire("errorDeal")}})};r()}).extend({syncIdMap:{},_init:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/submit/submit.js",method:"",ln:294})}},errorCheck:function(e){var t=this;if(t.errorNo_Checked||(t.errorNo_Checked={267:{title:"\u77e5\u9053\u63d0\u793a",content:"\u8fd8\u5dee\u4e00\u6b65\u5373\u53ef\u5b8c\u6210\u63d0\u4ea4\u54e6\uff1a\u5b8c\u6210\u4e2a\u4eba\u4fe1\u606f\u8865\u586b",act:"\u4fe1\u606f\u8865\u586b",confirm:"\u786e\u8ba4\u63d0\u4ea4",cancel:"\u653e\u5f03\u63d0\u4ea4"},12:{title:"\u77e5\u9053\u63d0\u793a",content:"\u7531\u4e8e\u60a8\u7684\u8d26\u53f7\u5b58\u5728\u5f02\u5e38\u98ce\u9669\uff0c\u6211\u4eec\u6682\u65f6\u51bb\u7ed3\u4e86\u60a8\u7684\u8d26\u53f7\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8d26\u53f7\u7533\u8bc9\u6765\u89e3\u9664\u51bb\u7ed3\u72b6\u6001",act:"\u8fdb\u884c\u8d26\u53f7\u7533\u8bc9",confirm:"\u8fdb\u884c\u8d26\u53f7\u7533\u8bc9",cancel:"\u53d6\u6d88"},13:{title:"\u5e10\u53f7\u5b89\u5168\u98ce\u9669\u63d0\u793a",content:"\u5c0a\u656c\u7684\u77e5\u53cb\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\uff0c\u8bf7\u7ed1\u5b9a\u624b\u673a\u540e\u518d\u8fdb\u884c\u8be5\u64cd\u4f5c\u3002\u7ed1\u5b9a\u540e\u5e10\u53f7\u51fa\u73b0\u5f02\u5e38\u53ef\u514d\u8d39\u83b7\u5f97\u77ed\u4fe1\u63d0\u9192",act:"\u8fdb\u884c\u624b\u673a\u7ed1\u5b9a",confirm:"\u5b8c\u6210\u624b\u673a\u7ed1\u5b9a",cancel:"\u53d6\u6d88",height:180}}),t.errorNo_Checked[e.errorNo])var o=new c({width:350,height:t.errorNo_Checked[e.errorNo].height||160,title:t.errorNo_Checked[e.errorNo].title||"\u77e5\u9053\u63d0\u793a",content:t.errorNo_Checked[e.errorNo].content||"",buttons:[{text:t.errorNo_Checked[e.errorNo].act||"",click:function(){try{var r=a(this).next().find(".btn-32-green");r.html()==(t.errorNo_Checked[e.errorNo].act||"")?(e.actCallback&&e.actCallback(),r.html(t.errorNo_Checked[e.errorNo].confirm||"")):(o.close(),e.confirmCallback&&e.confirmCallback())}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message,path:"common:widget/js/logic/submit/submit.js",method:"",ln:362})}}},{text:t.errorNo_Checked[e.errorNo].cancel||"\u53d6\u6d88",click:function(){try{o.close(),e.cancelCallback&&e.cancelCallback()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/submit/submit.js",method:"",ln:369})}}}],autoDispose:!0})}});i.on("catcha.submit",function(e,t){new l(t)}),o.exports=l});
;define("common:widget/js/logic/union/union.js",function(n,i,o){var t,e=n("common:widget/lib/jquery/jquery.js");o.exports=function(n,i,o){t=t||e.ajax({url:"//dup.baidustatic.com/js/m.js",dataType:"script",cache:!0}),window.BAIDU_DAN_config=window.BAIDU_DAN_config||{},window.BAIDU_DAN_config.zIndex=1,t.done(function(){"object"==e.type(o)&&"undefined"!=typeof BAIDU_CLB_addOrientation&&e.map(o,function(n,i){"string"==e.type(n)&&""!=e.trim(n)&&BAIDU_CLB_addOrientation(i,n)}),"undefined"!=typeof BAIDU_CLB_fillSlotAsync&&BAIDU_CLB_fillSlotAsync(n,i)})}});
;define("common:widget/js/logic/ut/ut.js",function(t,e,n){function o(t){var e=[t.x,t.y],n=m(this),o=g[this.id];if(o)o.hover||(o.hover=!0,o.count++);else{var i=n.position();i.right=i.left+n.width(),i.botton=i.top+n.height(),o=g[this.id]=m.extend(i,{hover:!0,count:1})}o["mouse"+o.count]||(o["mouse"+o.count]=[],o["time"+o.count]={start:+new Date},g.ma.push(o["mouse"+o.count]),g.ea.push(this.id)),o["mouse"+o.count].push(e)}function i(t){var e=[t.x,t.y],n=g[this.id];if(n&&n.hover){if(e[0]&&e[0]>n.left&&e[0]<n.right&&e[1]&&e[1]>n.top&&e[1]<n.buttom)return;n["time"+n.count].end=(new Date).getTime(),n.hover=!1}}function u(){var t=g.ma.length;if(t>0){var e=g.ma[t-1];return e[e.length-1]}}function r(){var t=g.ea.concat(),e=t.length;return e>10&&(t=t.splice(e-10,10)),t.join(",")}function c(){if(l)return p;m.each(g.ea,function(t,e){g.ea[t]=w[e]});var t=[u(),r(),(new Date).getTime()-d,[screen.width,screen.height].join(",")].join("	");return p.c=s(t)+","+j+v,l=!0,p}function s(t){for(var e=[],n={},o=j%100,i=0,u=t.length;u>i;i++){var r=t.charCodeAt(i)^o;e.push(r),n[r]||(n[r]=[]),n[r].push(i)}return e}function a(t){m.each(t,function(t,e){m("#"+e).mouseover(o).mouseout(i),w[e]=t}),m(document.body).click(function(t){try{v=1}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/ut/ut.js",method:"",ln:127})}})}function h(t,e){new f({method:"post",target:"iktssender",action:t,input:e}).submit().dispose()}var m=t("common:widget/lib/jquery/jquery.js"),f=t("common:widget/js/util/form/form.js"),d=+new Date,g={ea:[],ma:[]},p={},l=!1,v=0,j=+new Date,w={};n.exports={start:a,report:c,send:h}});
;define("common:widget/js/logic/set-avatar/set-avatar.js",function(a,e){function t(a,e,t,s){var n=o('<div class="goto-set-avatar" />').appendTo(a).html('<a href="'+(e||"/ihome/set/profile?type=avatar")+'" target="'+(t||"_blank")+'">'+(s||"\u66f4\u6362\u5f62\u8c61")+"</a><p></p>");a.addClass("avatar-mask-p"),a.mouseover(function(){n.css("display","block")}).mouseout(function(){n.css("display","none")})}{var o=a("common:widget/lib/jquery/jquery.js");a("common:widget/js/util/event/event.js")}e.init=function(a){try{t(o(a.elem),a.href,a.openTag,a.str)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/set-avatar/set-avatar.js",method:"",ln:26})}}});
;define("common:widget/js/logic/sign-in/sign-in.js",function(n,i,e){{var t=n("common:widget/js/util/tangram/tangram.js"),s=n("common:widget/js/ui/base/base.js"),a=n("common:widget/js/ui/tip/tip.js"),o=n("common:widget/js/ui/dialog/dialog.js"),d=n("common:widget/js/util/template/template.js"),c=n("common:widget/js/logic/submit/submit.js"),g=n("common:widget/js/util/event/event.js"),r=n("common:widget/js/util/log/log.js");n("common:widget/js/logic/authcode/authcode.js")}n("common:widget/lib/jquery.ui/jquery.ui.datepicker.js"),g.on("short.dialog",function(n,i){var e=['<div class="short-content short-signin-content">',i.content,"</div>"].join(""),s=new o({content:e,autoDispose:!0,width:i.width||215,height:i.height||100,className:i.dialogName||"short-dialog",open:function(){t(this).parent().prev();t(this).parent().prev().css({opacity:i.overlay||".25","z-index":i.zindex||"1015"});var n=t(this),e=+n.css("top").replace("px","")+i.top;n.css("top",e+"px"),setTimeout(function(){i.openDialog&&i.openDialog()},1100),setTimeout(function(){s.close(),i.callback&&i.callback()},i.time||2e3)}})});var l=(F.context("user")&&F.context("user").stoken,function(n,i){this.ele=t(n),t.extend(this,{tag:"li",count:1,auto:1,speed:1500},i),this.init(this.auto)});l.prototype={init:function(n){try{this.offset=t(this.ele).children(this.tag).eq(0).height()*this.count,n&&this.start()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:74})}},_animate:function(){var n=this,i=t(this.ele).find(n.tag);i.length<=n.count||t(this.ele).animate({top:-1*this.offset},500,function(){t(this).css({top:0}),i.filter(function(i){return i<n.count}).appendTo(this)})},start:function(){var n=this;n.timer||(n.timer=setInterval(function(){n._animate()},this.speed))},stop:function(){this.timer&&clearInterval(this.timer),this.timer=null}};var p=s().extend({_initDialog:function(){try{var n=this,i=+F.context("sign-in").signBoxId?+F.context("sign-in").signBoxId:+F.context("sign-in").futureSignBoxId;window.dialogInstance?window.dialogInstance.open():window.dialogInstance=new o({width:800,height:580,autoDispose:!1,className:"sign-in-dialog",content:d(['<div class="wrapper">','<div class="close-layer"></div>','<div class="line upper">','<div class="grid sign-in-desc">','<div class="signin-leftbar">\u60a8\u5df2\u7ecf\u7b7e\u5230<span id="sign-in-days" class="sign-in-days">0</span>\u5929\u5566~<i></i></div>','<div class="left-info">','<div class="info-top">\u8fde\u7eed\u7b7e\u5230\u5f00\u5b9d\u7bb1</div>','<div class="info-box box-'+i+'" data-signBoxId="'+F.context("sign-in").signBoxId+'" data-futureSignBoxId="'+F.context("sign-in").futureSignBoxId+'"></div>','<div class="info-des">\u8ddd\u79bb\u6253\u5f00\u5b9d\u7bb1\u8fd8\u5269<span id="surplus-days" class="surplus-days">'+F.context("sign-in").futureBoxDay+"</span>\u5929</div>",'<div class="info-openbox-des hide">\u60a8\u6709\u4e00\u4e2a\u5b9d\u7bb1\u672a\u9886\u53d6</div>',"</div>",'<a href="#" class="sign-in-btn" id="sign-in-btn">\u70b9\u51fb\u7b7e\u5230</a>',"</div>",'<div class="grid calendar-container">','<div class="sign-in-calendar" id="sign-in-calendar"></div>',"</div>","</div>",'<div class="get-wealth">','<div class="get-wealth-left"><p>\u6682\u65e0\u4e2d\u5956\u4fe1\u606f</p></div>','<div class="get-wealth-right">',"<i></i>\u4ec0\u4e48\u662f\u8d22\u795e",'<div class="get-wealth-desc"><p>\u575a\u6301\u6bcf\u65e5\u7b7e\u5230\uff0c\u5c06\u6709\u673a\u4f1a\u88ab\u77e5\u9053</p><p>\u8d22\u795e\u7838\u4e2d\uff0c\u83b7\u5f97\u66f4\u591a\u5956\u52b1\u3002</P><i></i></div>',"</div>","</div>","</div>"].join("")),open:function(){+F.context("sign-in").signBoxId?(t(".sign-in-dialog .info-top").addClass("info-openbox").text("\u70b9\u51fb\u5b9d\u7bb1"),t(".sign-in-dialog .info-box").attr("class","info-box").addClass("box-"+F.context("sign-in").signBoxId).addClass("box-can-open").data("signboxid",F.context("sign-in").signBoxId).data("futuresignboxId",F.context("sign-in").futureSignBoxId),t(".sign-in-dialog .info-des").addClass("hide"),t(".sign-in-dialog .info-openbox-des").removeClass("hide")):(t(".sign-in-dialog .info-top").removeClass("info-openbox").text("\u8fde\u7eed\u7b7e\u5230\u5f00\u5b9d\u7bb1"),t(".sign-in-dialog .info-box").attr("class","info-box").addClass("box-"+F.context("sign-in").futureSignBoxId).removeClass("box-can-open"),t(".sign-in-dialog .info-des").removeClass("hide"),t(".sign-in-dialog .info-openbox-des").addClass("hide")),t(".sign-in-dialog .close-layer").click(function(){try{n._removeRemedyTip(),t(n.container).find("table .td-signin-none .add-signin").remove(),t(n.container).find("table .td-signin-none").removeClass("active");var i={type:2014,action:"click",pos:"signin-dialog-close"};i.done=t("#sign-in-btn").hasClass("done")?1:0,r.send(i),window.dialogInstance.close()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:180})}}),n._initProperty(),n.defaultDate=[n.month,n.day,n.year].join("/"),n.lastDay=1,1==n.month?(n.lastMonth=12,n.lastYear=n.year-1):(n.lastMonth=n.month-1,n.lastYear=n.year),n.minDate=[n.lastMonth,n.lastDay,n.lastYear].join("/"),t(n.target).datepicker({showOtherMonths:!0,selectOtherMonths:!1,showMonthAfterYear:!0,yearSuffix:"\u5e74",prevText:"\u67e5\u770b\u4e0a\u4e00\u6708",nextText:"\u67e5\u770b\u4e0b\u4e00\u6708",defaultDate:n.defaultDate,minDate:n.minDate,maxDate:n.defaultDate,beforeShowDay:function(i){var e=t.parseJSON(F.context("sign-in").signinDays),s=lastMonth=futureDate=!1,a=[i.getFullYear(),i.getMonth()+1,i.getDate()].join("/");return t(e).each(function(n,i){a==i&&(s=!0)}),i.getMonth()+1<=n.lastMonth&&i.getFullYear()==n.lastYear&&(lastMonth=!0),(i.getDate()>n.day||i.getMonth()+1>n.month)&&(futureDate=!0),s?[!1,"td-signin-done"]:lastMonth?[!1,"td-signin-none td-signin-lastMonth"]:futureDate?[!1,"td-signin-none td-signin-future"]:[!1,"td-signin-none"]}}),t(".ui-datepicker-calendar .td-signin-done .ui-td-div").append('<span class="ui-signin-right"></span>'),n.instance=t(n.target).data("datepicker"),t(n.instance).on("update",function(){t(".ui-datepicker-calendar .td-signin-done .ui-td-div").append('<span class="ui-signin-right"></span>'),n._lightToday(),n._showRemedyTip()}),n._updateSignIn()}})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:283})}},_initProperty:function(){try{var n=this;n.year=n.options.year,n.month=n.options.month,n.day=n.options.day,n.target=".sign-in-dialog #sign-in-calendar",n.container=".sign-in-dialog",n.signCardCanUsed=F.context("sign-in").signCardCanUsed,n.cardShopId=910}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:300})}},_initEvent:function(){try{var n=this;t(".sign-in-dialog").delegate("#sign-in-btn","click",function(i){try{n._remedyTip&&n._remedyTip.instance.element.size()&&"show"==n._remedyTip._status&&(t(n.container).find("table .td-signin-none").removeClass("active"),t(n.container).find("table .td-signin-none .add-signin").remove(),n._remedyTip.hide()),t(this).hasClass("done")?r.send({type:2014,action:"click",pos:"signin-dialog-uhome"}):(i.preventDefault(),r.send({type:2014,action:"click",pos:"signin-dialog-submit"}),g.fire("login.check",{isLogin:function(){new c({url:"/submit/user",params:{cm:100509},beforeJump:function(i,e){n._updateSignIn();var t="";if(e&&e.signLottery&&e.signLottery.desc){var s=e.signLottery;t=+s.itemId>0?'<div class="reward"><p>\u606d\u559c\u60a8\uff0c\u83b7\u5f97\u4e86</p><p><span>'+e.expToday+"</span>\u70b9\u7ecf\u9a8c\u503c + <span>1</span>\u5f20"+s.desc+"</p></div>":'<div class="reward"><p>\u606d\u559c\u60a8\uff0c\u83b7\u5f97\u4e86</p><p><span>'+e.expToday+"</span>\u70b9\u7ecf\u9a8c\u503c + "+s.desc+"</p></div>"}else t=+F.context("sign-in").monthSpeedToday?'<div class="speed"><i></i>\u7b54\u9898\u52a0\u901f<span>'+F.context("sign-in").monthSpeedToday+"</span>\u5929</div>":'<div class="reward"><p>\u606d\u559c\u60a8\uff0c\u83b7\u5f97\u4e86</p><p><span>'+e.expToday+"</span>\u70b9\u7ecf\u9a8c\u503c</p></div>";g.fire("short.dialog",{content:t}),n.options.success&&n.options.success(),n._todayMonth()},errorDeal:function(n,i){g.fire("short.dialog",{content:"<p>"+i.errorMsg+"</p>"})}})}}))}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:370})}}).delegate(".speed-up-desc","mouseenter",function(){t(".speed-up-tip").css("display","block")}).delegate(".speed-up-desc","mouseleave",function(){t(".speed-up-tip").css("display","none")}).on("click",".box-can-open",function(){try{n.getBox(t(this).data("signboxid"))}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:377})}})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:378})}},_lightToday:function(){var n=this,i=t(n.target).find(".ui-datepicker-today");1!=F.context("sign-in").isSignIn||i.hasClass("td-signin-done")||i.removeClass("td-signin-none").addClass("td-signin-done").find(".ui-td-div").append('<span class="ui-signin-right"></span>')},_getWealthLevel:function(n,i){var e=0;return t(i).each(function(t){n>=i[t]&&i[t+1]&&n<i[t+1]?e=t+1:n==i[i.length-1]&&(e=i.length-1)}),e},_updateSignIn:function(){var n=this;setTimeout(function(){t.get("/ihome/api/signInfo?t="+(new Date).getTime(),function(i){if(!i.errno){if(i=i.data,t.object.each(i,function(n,i){"num"!=i&&"newNum"!=i&&"allDate"!=i&&(F.context("sign-in")[i]=n)}),F.context("sign-in").dayNum=i.num,F.context("sign-in").originalNewDayNum=i.newNum,F.context("sign-in").userWealth=i.userWealth,-1!=(F.context("sign-in").newDayNum+"").indexOf(".")&&(F.context("sign-in").newDayNum=Number(F.context("sign-in").newDayNum.toFixed(1))),n.signCardCanUsed=F.context("sign-in").signCardCanUsed,1==F.context("sign-in").isSignIn){if(F.context("user").isMavin)var e="/ihome/hangjia/index";else var e="/ihome";t("#sign-in-btn").addClass("done").prop({href:e,target:"_blank"}).html('\u5df2\u7b7e\u5230\uff0c\u7b54\u9898\u52a0\u901f<div class="sign-tip"><p>\u56de\u7b54\u88ab\u91c7\u7eb3\u4e00\u6b21\u53ef\u52a0\u901f1\u5929\uff0c</p><p>\u4e00\u5929\u53ef\u52a0\u901f3\u6b21\u54e6\uff01</p></div>'),t(".go-sign-in").html("<span>\u5df2\u7b7e\u5230</span>"),n._lightToday()}t("#sign-in-days").text(F.context("sign-in").dayNum),t("#surplus-days").text(F.context("sign-in").futureBoxDay),F.context("sign-in").signBoxId?(t(".sign-in-dialog .info-top").addClass("info-openbox").text("\u70b9\u51fb\u5b9d\u7bb1"),t(".sign-in-dialog .info-box").attr("class","info-box").addClass("box-"+F.context("sign-in").signBoxId).addClass("box-can-open").data("signboxid",F.context("sign-in").signBoxId).data("futuresignboxid",F.context("sign-in").futureSignBoxId),t(".sign-in-dialog .info-des").addClass("hide"),t(".sign-in-dialog .info-openbox-des").removeClass("hide")):(t(".sign-in-dialog .info-top").removeClass("info-openbox").text("\u8fde\u7eed\u7b7e\u5230\u5f00\u5b9d\u7bb1"),t(".sign-in-dialog .info-box").attr("class","info-box").addClass("box-"+F.context("sign-in").futureSignBoxId).removeClass("box-can-open"),t(".sign-in-dialog .info-des").removeClass("hide"),t(".sign-in-dialog .info-openbox-des").addClass("hide")),t(".sign-in-day-num").text(F.context("sign-in").dayNum),n._showRemedyTip()}})},300),t.get("/api/getsignlottery?t="+(new Date).getTime(),function(i){if(i&&i.length){var e=["<ul>"];t.forEach(i,function(n){e.push("<li>"+n.uname+"\u7b7e\u5230\u88ab\u5927\u8d22\u795e\u7838\u4e2d\uff0c\u83b7\u5f97"+n.desc+"</li>")}),e.push("</ul>"),t(".get-wealth-left").html(d(e.join(""))),n.initMarquee()}else t(".get-wealth-left").html("<p>\u6682\u65e0\u4e2d\u5956\u4fe1\u606f</p>")})},_todayMonth:function(){var n=this,i=t(n.target).find(".ui-datepicker-today"),e=t(n.target).find(".ui-datepicker-prev"),s=t(n.target).find(".ui-datepicker-next");i.hasClass("ui-datepicker-other-month")&&(e.hasClass("ui-state-disabled")?s.click():e.click())},getBox:function(n){var i=this;g.fire("login.check",{isLogin:function(){var e=F.context("user")&&F.context("user").stoken,s={128:"CopperChest",129:"SilverChest",130:"GoldChest",131:"DiamondChest"};if(s[n]){var a="/shop/submit/chest?type="+s[n];t.ajax({url:a,type:"post",data:{itemId:n,stoken:e},success:function(e){if(e.errno)return void o.alert('<div style="text-align:center">'+e.errmsg+"</div>");var s=e.data.goodsInfo;if(g.fire("short.dialog",{top:50,overlay:.75,zindex:1015,width:400,height:600,dialogName:"box-dialog",content:'<div class="ka"><div class="apace-line"></div><div class="image"><img src="'+s.goodsPicSmall+'" /></div> <p>'+s.goodsName+'</p><p>\u60a8\u7684\u7b7e\u5230\u5956\u52b1</p></div><div class="box-big wobble'+n+'"></div>',time:3e3,openDialog:function(){t(".box-big").addClass("box-big"+n).removeClass("wobble"+n)},callback:function(){var n='<div class="reward"><p>\u606d\u559c\u60a8\uff0c\u83b7\u5f97\u4e86</p><p>'+s.goodsName+"</p></div>";g.fire("short.dialog",{content:n})}}),!e.errno){var a={cm:100508,uflag:"sign_award"};new c({url:"/submit/user",params:a,beforeJump:function(){i._updateSignIn()},errorDeal:function(n,i){g.fire("short.dialog",{content:"<p>"+i.errorMsg+"</p>"})}})}}})}}})},_getRemedyInfo:function(n){var i=this,e=F.context("sign-in").reSignItemId,s=0;t.ajax({url:"/ihome/myitem/ucenter",dataType:"jsonp",success:function(a){t.each(a.property,function(n,i){i.item_id==e&&(s=parseInt(i.number))}),n&&t.isFunction(n)&&n({itemId:e,itemNum:s,signCardCanUsed:i.signCardCanUsed,userWealth:F.context("sign-in").userWealth})}})},_removeRemedyTip:function(){var n=this;n._remedyTip&&n._remedyTip.instance.element.size()&&"show"==n._remedyTip._status&&n._remedyTip.hide()},_canResignin:function(n){var i=!0,n=t(n),e=n.hasClass("td-signin-lastMonth"),s=n.hasClass("td-signin-future");return i=e&&s||!e&&!s?!0:!1,(n.hasClass("ui-datepicker-other-month")||n.hasClass("td-signin-done"))&&(i=!1),i},_showRemedyTip:function(){var n=this,i=null;t(n.container).find("table .ui-state-disabled").unbind("click"),t(n.container).find("table .ui-state-disabled").click(function(e){try{var s=t(this),o=parseInt(s.find(".ui-state-default").html());if(s.hasClass("active"))return;if(!t(s).size())return;if(n._remedyTip&&n._remedyTip.instance.element.size()&&t(n._remedyTip.target).closest(s).size()&&"show"==n._remedyTip._status)return;if(t(n.container).find("table .td-signin-none").removeClass("active"),t(n.container).find("table .td-signin-none .add-signin").remove(),n._removeRemedyTip(),!n._canResignin(s))return;t(s).closest(".ui-datepicker-today").size()?0==F.context("sign-in").isSignIn&&(t("#sign-in-btn").click(),t(s).unbind("click")):(s.addClass("active"),s.find(".ui-td-div").append('<span class="add-signin">\u8865\u7b7e</span>'),n._getRemedyInfo(function(d){if(F.context("user").isMavin)var r="/ihome/hangjia/index";else var r="/ihome";0==F.context("sign-in").isSignIn?i=['<p class="intro">\u54ce\u5440\uff0c\u4eca\u5929\u8fd8\u6ca1\u6709\u7b7e\u5230 T_T</p>','<p class="intro">\u8d76\u7d27\u70b9\u51fb\u7b7e\u5230\u5427\u3002</p>'].join(""):d.signCardCanUsed<=0?i=['<p class="intro">\u8865\u7b7e\u7684\u673a\u4f1a\u5df2\u7ecf\u7528\u5b8c\u4e86T_T...</p>','<p class="intro">\u4ee5\u540e\u4e00\u5b9a\u8981\u597d\u597d\u73cd\u60dc\u554a\uff01</p>','<p class="btn">','<a class="btn-22-green mr-10 mt-10" target="_blank" href="'+r+'">\u7b54\u9898\u52a0\u901f</a>','<a class="btn-22-white remedy-cancel mt-10">\u53d6\u6d88</a>',"</p>"].join(""):d.signCardCanUsed>0&&0==d.itemNum&&d.userWealth>=150?i=['<p class="title"><strong>150</strong>\u8d22\u5bcc\u503c\u5151\u6362<strong>1</strong>\u5f20\u8865\u7b7e\u5361</p>','<p class="intro">\u5269\u4f59\u8d22\u5bcc\u503c\u4e3a'+d.userWealth+"</p>",'<p class="btn">','<a href="/shop/view?id='+n.cardShopId+'" target="_blank" class="mt-5 btn-22-green">\u5151\u6362\u8865\u7b7e\u5361</a>','<a class="btn-22-white remedy-cancel mt-10">\u53d6\u6d88</a>',"</p>"].join(""):d.signCardCanUsed>0&&0==d.itemNum&&d.userWealth<150?i=['<p class="intro">\u8d22\u5bcc\u503c\u4e0d\u8db3\uff0c\u4e0d\u80fd\u5151\u6362\u8865\u7b7e\u5361</p>','<p class="intro">\u7b54\u9898\u53ef\u8d62\u53d6\u8d22\u5bcc\u503c</p>','<p class="btn">','<a href="'+r+'" target="_blank" class="mt-5 btn-22-green">\u53bb\u7b54\u9898</a>','<a class="btn-22-white remedy-cancel mt-10">\u53d6\u6d88</a>',"</p>"].join(""):d.signCardCanUsed>0&&d.itemNum>0&&d.itemId>0&&(i=['<p class="title">\u60a8\u672c\u6708\u8fd8\u6709<strong>'+d.signCardCanUsed+"</strong>\u6b21\u8865\u7b7e\u7684\u673a\u4f1a</p>",'<p class="intro">\u5269\u4f59'+d.itemNum+"\u5f20\u8865\u7b7e\u5361</p>",'<p class="btn">','<a class="btn-22-green remedy-ok mr-10 mt-10">\u8865\u7b7e</a>','<a class="btn-22-white remedy-cancel mt-10">\u53d6\u6d88</a>',"</p>"].join("")),n._remedyTip=new a({direction:"top",tooltipClass:"remedyTip",target:s,content:i,closebox:!0,position:{my:"left top+10",at:"left-90 bottom"}}),n._remedyTip.show(),t(n._remedyTip.getTipContainer()).delegate(".remedy-ok","click",function(i){try{i.preventDefault(),t(n.container).find("table .td-signin-none").removeClass("active"),t(n.container).find("table .td-signin-none .add-signin").remove();var e=parseInt(n.month),a=n.year;new c({params:{cm:100900,itemid:d.itemId,number:1,args:t.json.stringify({day:o})},beforeJump:function(){s.addClass("td-signin-done ui-datepicker-unselectable ui-state-disabled").removeClass("td-signin-none").find(".ui-td-div").append('<span class="ui-signin-right"></span>'),n._remedyTip.hide();var i=t.parseJSON(F.context("sign-in").signinDays);i.push([a,e,o].join("/")),F.context("sign-in").signinDays=t.json.stringify(i),n.signCardCanUsed=n.signCardCanUsed-1;var d='<div class="reward"><p>\u8865\u7b7e\u6210\u529f\uff01</p><p>\u672c\u6708\u8fd8\u6709<span>'+n.signCardCanUsed+"</span>\u6b21\u8865\u7b7e\u673a\u4f1a</p></div>";g.fire("short.dialog",{content:d}),n._updateSignIn()},errorDeal:function(i,e,t){n._remedyTip.hide(),n._updateSignIn();var s="";switch(t){case 17011:s="<p>\u9009\u62e9\u7684\u65e5\u671f\u5df2\u7ecf\u7b7e\u5230\u4e86\u3002</p>";break;case 17012:s="<p>\u60a8\u672c\u6708\u8865\u7b7e\u7684\u673a\u4f1a\u5df2\u7ecf\u7528\u5b8c\u4e86\u3002</p>";break;case 17010:s="<p>\u60a8\u6ca1\u6709\u8db3\u591f\u7684\u8865\u7b7e\u5361\u3002</p>";break;default:s="<p>\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002</p>"}g.fire("short.dialog",{content:s})}})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:836})}}).on("click",".remedy-cancel",function(i){try{i.preventDefault(),t(n.container).find("table .td-signin-none").removeClass("active"),t(n.container).find("table .td-signin-none .add-signin").remove(),n._remedyTip.hide()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:842})}}).on("click",".remedy-sign",function(i){try{i.preventDefault(),t(n.container).find("table .td-signin-none").removeClass("active"),t(n.container).find("table .td-signin-none .add-signin").remove(),t(".sign-in-dialog #sign-in-btn").click(),n._remedyTip.hide()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:849})}}),t(e.target).unbind("mouseover")}))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:854})}}).mouseenter(function(i){tdElem=t(i.target).closest(".td-signin-none"),n._canResignin(tdElem)&&(tdElem.find(".add-signin").length||tdElem.hasClass("ui-datepicker-today")||tdElem.find(".ui-td-div").append('<span class="add-signin">\u8865\u7b7e</span>'))}).mouseleave(function(i){tdElem=t(i.target).closest(".td-signin-none"),n._canResignin(tdElem)&&(tdElem.hasClass("active")||t(tdElem).find(".add-signin").remove())})},initMarquee:function(){try{var n=t(".get-wealth-left").find("ul");if(!n||n.find("li").length<2)return;new l(n)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:889})}},init:function(n){try{var i=this;i.options=n,i._initDialog(),i._initEvent()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/sign-in/sign-in.js",method:"",ln:899})}}});e.exports=p});
;define("common:widget/js/logic/mini-editor/mini-editor.js",function(t,e,n){var i=t("common:widget/js/util/tangram/tangram.js"),o=t("common:widget/js/util/event/event.js"),a=t("common:widget/js/ui/base/base.js"),r=a(function(){var t=this;t.maxLength=200,t.countByte=!1,t.className="",t.name="mini-editor",t.defaultContent=""}).extend({init:function(){try{var t=this;t.target=i(t.target),t.container=i("<div/>").attr("id",t.guid+t.name).addClass(t.name).addClass(t.className).appendTo(t.target),i("<textarea/>").attr("id",t.guid+"textarea").appendTo(t.container).val(t.defaultContent),i("<p/>").attr("id",t.guid+"limit").addClass("mini-editor-limit").hide().appendTo(t.container).html(t.maxLength),t._getElement("textarea").on("change keyup",function(){t.fire("change",this)}).keydown(function(e){e.ctrlKey&&13==e.keyCode&&(t.fire("submit"),this.blur())}).focus(function(){t.getContent()==t.defaultContent&&t.setContent(""),t.container.css({borderColor:"#4aca6d"}),t._getElement("textarea").css("color","#333"),t.fire("focus")}).blur(function(){t.container.css("borderColor","#d2dbe1"),""==t.getContent()&&t.setContent(t.defaultContent),t.fire("blur")}),t.on("change",function(e,n){var a=t.getContent(),r=t.countByte?i.string(a).getByteLength():a.length,s=t.maxLength-r,d=t._getElement("limit");1>s&&(t.setContent(t.countByte?i.string(a).subByte(t.maxLength):a.substr(0,t.maxLength)),s=0),1>s?d.addClass("mini-editor-alert"):d.removeClass("mini-editor-alert"),d.html(s).hide();var l=i(n).removeClass("longer").css("width","").css("line-height");n.scrollHeight>1.5*(parseFloat(l)||24)?(i(n).addClass("longer"),o.fire("expand"),d.show(),i.browser.isGecko&&i(n).css({width:t.width||"100%","overflow-y":"scroll"})):(i.browser.isGecko&&i(n).css("overflow-y",""),o.fire("shrink"))})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/mini-editor/mini-editor.js",method:"",ln:95})}},_getElement:function(t){return t?this.container.find("#"+this.guid+t):this.container},getElement:function(t){return this._getElement(t).get(0)},getContent:function(){return i.string(this._getElement("textarea").val()).trim()},setContent:function(t){return this._getElement("textarea").val(t)}});n.exports=r});
;define("common:widget/js/logic/file-type/file-type.js",function(e,i,p){var f=e("common:widget/lib/jquery/jquery.js"),l={"file-image":"jpg,jpeg,gif,bmp,png,jpe,cur,svg,svgz,tif,tiff,ico","file-doc":"doc,docx,ods,ots,odt,rtf,dot,dotx,odm, vsd,vsdx","file-pdf":"pdf","file-excel":"xls,xlsx,xlt,xltx,csv","file-txt":"txt,html,htm,xhtml,xml,js,css","file-mp3":"wma,wav,mp3,aac,ra,ram,mp2,ogg,aif,mpega,amr,mid,midi","file-video":"wmv,rmvb,mpeg4,mpeg2,flv,avi,3gp,mpga,qt,rm,wmz,wmd,wvx,wmx,wm,swf,mpg,mp4,mkv,mpeg,mov","file-ppt":"ppt,pptx,pps,pot,ppsx,potx","file-ipa":"ipa","file-exe":"exe,msi","file-zip":"zip,rar,7z,tar,gz","file-apk":"apk","file-bt":"torrent","file-epub":"epub","file-umd":"umd"},t={0:["file-doc","file-pdf","file-excel","file-ppt","file-txt","file-epub","file-umd"],1:["file-exe","file-apk","file-ipa"],2:["file-mp3"],3:["file-video"],4:["file-bt"],5:["file-unknow"]};p.exports=function(e){e=(""+e).toLocaleLowerCase();var i=5,p="unknow";return f.each(l,function(l,m){return f.array(f.makeArray(m.split(","))).contains(e)?(p=l,f.each(t,function(e,p){return f.array(p).contains(l)?(i=e,!1):void 0}),!1):void 0}),{fileClass:p,fileType:i}}});
;define("common:widget/js/logic/task/task.js",function(require,exports,module){var $=require("common:widget/js/util/tangram/tangram.js"),Scrollbar=require("common:widget/js/ui/scrollbar/scrollbar.js"),bt=require("common:widget/js/util/template/template.js"),Dialog=require("common:widget/js/ui/dialog/dialog.js"),login=require("common:widget/js/logic/login/login.js"),ec=require("common:widget/js/util/event/event.js"),addressDialog=require("common:widget/js/logic/address-dialog/address-dialog.js"),Tip=require("common:widget/js/ui/tip/tip.js"),log=require("common:widget/js/util/log/log.js"),https=require("common:widget/js/util/https/https.js"),stoken=F.context("user")&&F.context("user").stoken,Marquee=function(a,e){this.ele=$(a),$.extend(this,{tag:"li",count:1,auto:1,speed:1500},e),this.init(this.auto)};Marquee.prototype={init:function(a){try{this.offset=$(this.ele).children(this.tag).eq(0).height()*this.count,a&&this.start()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/task/task.js",method:"",ln:39})}},_animate:function(){var a=this,e=$(this.ele).find(a.tag);e.length<=a.count||$(this.ele).animate({top:-1*this.offset},500,function(){$(this).css({top:0}),e.filter(function(e){return e<a.count}).appendTo(this)})},start:function(){var a=this;a.timer||(a.timer=setInterval(function(){a._animate()},this.speed))},stop:function(){this.timer&&clearInterval(this.timer),this.timer=null}};var task={init:function(){try{if(!F.context("user").isLogin)return;this.api="/task/api/mytask",this.bindEnter(),this.loadAccomplishTask()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/task/task.js",method:"",ln:76})}},bindEnter:function(){var a=this;$(document.body).on("click",".open-task-list",function(){try{if("open-task-list"!==$(this).data("action"))return;if($(this).hasClass("task-list-isopen"))return;$(this).addClass("task-list-isopen"),a.openTaskListDialog(),log.send({type:20150626,action:"click"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/task/task.js",method:"",ln:93})}}).on("click",".jump-task-list .toggle-btn",function(){try{$(this).parents(".ik-task-award-tips").animate({left:50})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/task/task.js",method:"",ln:99})}}).on("click",".jump-task-list .get-award-btn",function(){try{var e=$(this).data("task-id"),t=$(this).parents(".ik-task-award-tips");a.getTaskAward({taskId:e},function(){t.animate({left:50})}),$(".ik-task-award-count").remove()}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"common:widget/js/logic/task/task.js",method:"",ln:113})}}).on("click",".jump-task-list .open-award-list-btn",function(){try{a.openTaskListDialog(),$(this).parents(".ik-task-award-tips").animate({left:50})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/task/task.js",method:"",ln:120})}}).on("mouseover.taskTip",".ik-task-award-tips",function(){$(document.body).off("mouseover.taskTip"),clearTimeout(a.accomplishTipTimer)}).on("click",".finish-award-gift-box",function(){try{var e=$(this).data("item-id");if(!e)return;$(this).removeClass("finish-award-gift-box"),a.openGiftBox(e,$(this))}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/task/task.js",method:"",ln:132})}}).on("mouseover",".hq-em-tip",function(){a.tip||(a.tip=new Tip({direction:"top",content:"<p>\u5982\u4f55\u56de\u7b54\u9ad8\u8d28\u91cf\u95ee\u9898\uff1f</p><p>\u2460\u52a0\u5165\u56e2\u961f\u5185\u6709\u4efb\u52a1\u5305\u53ef\u56de\u7b54\u9ad8\u8d28\u91cf\u95ee\u9898</p><p>\u2461\u516b\u7ea7\u4ee5\u4e0a\u7528\u6237\u4e2a\u4eba\u4e2d\u5fc3\u53ef\u56de\u7b54\u9ad8\u8d28\u95ee\u9898</p>",target:this,position:{my:"left top",at:"left-10 bottom+10"}})),a.tip.show(),a.tip.getTipContainer().css({"z-index":1e4}),$(".tip-arrow-top",a.tip.getTipContainer()).css("left","12px")}).on("mouseout",".hq-em-tip",function(){a.tip&&a.tip.hide()})},openGiftBox:function(a,e){var t=this,s={128:"CopperChest",129:"SilverChest",130:"GoldChest",131:"DiamondChest"};if(s[a]){var i="/shop/submit/chest?type="+s[a];$.ajax({url:i,type:"post",data:{itemId:a,stoken:stoken},success:function(a){return a.errno?void Dialog.alert('<div style="text-align:center">'+a.errmsg+"</div>"):void t.showBoxGift(a.data,e)}})}},showBoxGift:function(a,e){var t=a.goodsInfo;t.goodsPicSmall=https.autoTrans(t.goodsPicSmall);var s=[];s.push('<div class="award-item hidden" data-type="item">'),s.push('<p class="finish-award " data-item-id="'+t.itemId+'">'),s.push('<img src="'+t.goodsPicSmall+'" />'),s.push("</p>"),s.push('<p class="award-name">'+t.goodsName+"</p>"),s.push("</div>"),e.fadeOut(function(){$(s.join("")).insertBefore(this).fadeIn(function(){e.remove()})}),1!=t.goodsType&&/^[356]$/.test(t.goodsType)&&addressDialog.init({goodsName:t.goodsName,goodsType:t.goodsType,cmd:10005,params:{tradeStyle:t.tradeStyle,goodsId:t.goodsId,tradeId:t.tradeId}})},bindDialog:function(){var a=this;this.$el.on("click",".task-card-header li",function(){try{var e=/(\w+)\-task\-menu/.test($(this).attr("class"))&&RegExp.$1;a.loadCard(e)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message,path:"common:widget/js/logic/task/task.js",method:"",ln:252})}}).on("click",".get-ranking-award",function(){try{a.getTaskAward({type:"weekAdoptReward"},function(){a.$el.find(".get-ranking-award").removeClass("get-ranking-award").addClass("get-ranking-award-disabled"),a.$el.find(".ranking-award-num").text("0")})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/task/task.js",method:"",ln:262})}}).on("click",".open-grow-up-task",function(){try{if($(this).hasClass("open-grow-up-task-disabled"))return;$(this).addClass("open-grow-up-task-disabled");var e=$(this).data("tgroup"),t=$(this);return a.startGrowthTask({tgroup:e},function(){t.removeClass("open-grow-up-task").text("\u524d\u5f80");var a=$(".growth-task-finish-count");a.data("count")>0||a.data("task")-1>0||a.remove()}),!1}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"common:widget/js/logic/task/task.js",method:"",ln:281})}}).on("click",".get-task-award",function(){try{var e=$(this).data("taskid"),t=$(this).parent("li");a.getTaskAward({taskId:e},function(){t.addClass("finish-item"),t.find(".task-process").hide(),t.find(".get-task-award").hide(),t.append('<span class="finish-sign"></span>');var a=$(".ik-task-award-count");if(a.length){var e=a.text()-1;e?a.text(e):a.remove()}if(t.hasClass("grow-up-item")||t.hasClass("adopt-up-item")){var a=$(".growth-task-finish-count");if(a.data("count")-1>0||a.data("task")>0)return;a.remove()}})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message,path:"common:widget/js/logic/task/task.js",method:"",ln:309})}}),this.initMarquee()},initMarquee:function(){try{var a=this.$el.find(".winner-list").find("ul");if(a.find("li").length<2)return;new Marquee(a)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/task/task.js",method:"",ln:320})}},startGrowthTask:function(a,e){a.stoken=stoken,$.ajax({url:"/task/submit/opentask",type:"post",data:a,dataType:"json",success:function(a){return a.errno?void Dialog.alert('<div style="text-align:center">'+a.errmsg+"</div>"):void Dialog.alert('<div style="text-align:center">\u606d\u559c\uff0c\u4efb\u52a1\u5f00\u542f\u6210\u529f\uff01</div>',{close:function(){e&&e()}})}})},getTaskAward:function(a,e){var t="/task/submit/getreward",s=this;a.stoken=stoken,$.ajax({url:t,type:"post",data:a,dataType:"json",success:function(a){return a.errno?void Dialog.alert('<div style="text-align:center">'+a.errmsg+"</div>"):(s.openAward(a.data),void(e&&e()))}})},openTaskListDialog:function(){if(!this.isTaskListDialogOpen){var a=['<div class="ik-task-list">','<span class="close"></span>','<div class="loading" style="text-align:center;line-height:450px;font-size:18px;color:#666;">\u4efb\u52a1\u5217\u8868\u52a0\u8f7d\u4e2d...</div>',"</div>"].join(""),e=this;this.$taskListDialog=new Dialog({width:625,height:625,autoDispose:!0,className:"ik-task-dialog",content:a,open:function(){var a=$(this).find(".ik-task-list");e.initTaskListDialog(a),a.on("click",".close",function(){try{e.$taskListDialog.close()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/task/task.js",method:"",ln:395})}})},close:function(){e.isTaskListDialogOpen=0,$(".jump-task-list .open-task-list").removeClass("task-list-isopen")}})}},initTaskListDialog:function(a){var e=this;$.ajax({url:this.api,cache:!1,dataType:"json",success:function(t){return t.errno?12003===t.errno?(e.$taskListDialog.close(),void ec.fire("login.log",{onLoginSuccess:function(){e.openTaskListDialog()}})):void 0:void e._initTaskListDialog(t.data,a)}})},_filterDataList:function(a){var e=0,t=[];return $.each(a,function(a,s){return"3"==s.taskStatus?!0:(1!==e?(s.display=1,e=1):s.display=0,void t.push(s))}),t},_initTaskListDialog:function(data,$el){var tmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('    <div class="task-basic clearfix">        <div class="usr-info">            <img class="usr-ico" src="'),userTaskInfo.imId?_template_fun_array.push("https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/","undefined"==typeof userTaskInfo.imId?"":baidu.template._encodeHTML(userTaskInfo.imId),".jpg"):_template_fun_array.push("https://gss0.bdstatic.com/70cFsj3f_gcX8t7mm9GUKT-xh_/avatar/100/r6s1g4.gif"),_template_fun_array.push('"><span>',"undefined"==typeof userTaskInfo.username?"":baidu.template._encodeHTML(userTaskInfo.username),'</span>        </div>        <div class="task-info">            <p class="hl">\u672c\u5468\u91c7\u7eb3\u6392\u540d\uff1a<em>'),!userTaskInfo.weekAdoptRank||userTaskInfo.weekAdoptRank>2e4?_template_fun_array.push('<span style="font-size:14px;color:#8b8b8b">\u6682\u672a\u8fdb\u5165\u6392\u884c</span>'):_template_fun_array.push("","undefined"==typeof userTaskInfo.weekAdoptRank?"":baidu.template._encodeHTML(userTaskInfo.weekAdoptRank),""),_template_fun_array.push('</em></p>            <p class="tip">\u524d2\u4e07\u540d\u53ef\u83b7\u5956\u52b1\uff0c\u6392\u540d\u8d8a\u9ad8\u5956\u52b1\u8d8a\u9ad8</p>            <p class="hl">\u672c\u5468\u91c7\u7eb3\u6570\uff1a<em>',"undefined"==typeof userTaskInfo.weekAdoptNum?"":baidu.template._encodeHTML(userTaskInfo.weekAdoptNum),'</em></p>            <p class="tip">\u518d\u83b7\u5f97',"undefined"==typeof userTaskInfo.weekRankNextLevelGap?"":baidu.template._encodeHTML(userTaskInfo.weekRankNextLevelGap),'\u4e2a\u91c7\u7eb3\u53ef\u9886\u53d6\u66f4\u591a\u5956\u52b1</p>        </div>        <div class="award-info">            <p>\u5f53\u524d\u6392\u884c\u5956\u52b1\uff1a'),userTaskInfo.perWeekAdoptReward.length||_template_fun_array.push("-"),_template_fun_array.push("            ");for(var m=0;m<userTaskInfo.perWeekAdoptReward.length;m++)_template_fun_array.push("                "),"wealth"==userTaskInfo.perWeekAdoptReward[m].type&&_template_fun_array.push("                    <em>","undefined"==typeof userTaskInfo.perWeekAdoptReward[m].value?"":baidu.template._encodeHTML(userTaskInfo.perWeekAdoptReward[m].value),'</em><span class="wealth"></span>/\u5c0f\u65f6                '),_template_fun_array.push("            ");_template_fun_array.push("            </p>            <p>\u5f85\u9886\u53d6\u5956\u52b1\uff1a            "),userTaskInfo.weekAdoptReward.length||_template_fun_array.push("-"),_template_fun_array.push("            ");for(var m=0;m<userTaskInfo.weekAdoptReward.length;m++)_template_fun_array.push("                "),"wealth"==userTaskInfo.weekAdoptReward[m].type&&_template_fun_array.push('                    <em class="ranking-award-num">',"undefined"==typeof userTaskInfo.weekAdoptReward[m].value?"":baidu.template._encodeHTML(userTaskInfo.weekAdoptReward[m].value),'</em><span class="wealth"></span>                '),_template_fun_array.push("            ");_template_fun_array.push('            </p>            <a class="get-award '),_template_fun_array.push(userTaskInfo.weekAdoptReward.length&&userTaskInfo.weekAdoptReward[0].value&&userTaskInfo.weekAdoptReward[0].value>0?"get-ranking-award":"get-ranking-award-disabled"),_template_fun_array.push('">\u9886\u53d6\u6392\u884c\u699c\u5956\u52b1</a>        </div>    </div>    <div class="winner-list">        <ul>            '),rewardNotice.length||_template_fun_array.push("<li><span></span>\u6682\u65e0\u4fe1\u606f</li>"),_template_fun_array.push("            ");for(var s=0;s<rewardNotice.length;s++){_template_fun_array.push("                <li><span></span>\u606d\u559c<a>","undefined"==typeof rewardNotice[s].username?"":baidu.template._encodeHTML(rewardNotice[s].username),"</a>"),2==rewardNotice[s].type?_template_fun_array.push("\u6253\u5f00<a>","undefined"==typeof rewardNotice[s].chest?"":baidu.template._encodeHTML(rewardNotice[s].chest),"</a>"):(_template_fun_array.push(""),_template_fun_array.push(3==rewardNotice[s].type?"\u9886\u53d6":"\u5b8c\u6210"),_template_fun_array.push("<a>","undefined"==typeof rewardNotice[s].name?"":baidu.template._encodeHTML(rewardNotice[s].name),"</a>")),_template_fun_array.push("\u83b7\u5f97<em>                    "),"wealth"==rewardNotice[s].reward[0].type&&_template_fun_array.push("","undefined"==typeof rewardNotice[s].reward[0].value?"":baidu.template._encodeHTML(rewardNotice[s].reward[0].value),""),_template_fun_array.push("","undefined"==typeof rewardNotice[s].reward[0].name?"":baidu.template._encodeHTML(rewardNotice[s].reward[0].name),"                        ");for(var i=1;i<rewardNotice[s].reward.length;i++)_template_fun_array.push("                        \u3001"),"wealth"==rewardNotice[s].reward[i].type&&_template_fun_array.push("","undefined"==typeof rewardNotice[s].reward[i].value?"":baidu.template._encodeHTML(rewardNotice[s].reward[i].value),""),_template_fun_array.push("","undefined"==typeof rewardNotice[s].reward[i].name?"":baidu.template._encodeHTML(rewardNotice[s].reward[i].name),"                        ");_template_fun_array.push("                </em></li>            ")}_template_fun_array.push('        </ul>    </div>    <div class="task-board">        <ul class="task-card-header clearfix">            <li class="daily-task-menu">\u65e5\u5e38\u4efb\u52a1</li>            <li class="growth-task-menu">\u6210\u957f\u4efb\u52a1<em class="growth-task-finish-count hidden"></em></li>        </ul>        <div class="task-card-content">            <div class="task-list-com daily-task-list">                <ul class="task-card-list '),dailyTask.length>3&&_template_fun_array.push("card-list-scroll"),_template_fun_array.push('">                '),dailyTask&&dailyTask.length||_template_fun_array.push('                    <li class="empty-task">\u6682\u65e0\u65e5\u5e38\u4efb\u52a1</li>                '),_template_fun_array.push("                ");for(var i=0;i<dailyTask.length;i++){_template_fun_array.push('                    <li>                        <span class="task-ico" style="background: url(',"undefined"==typeof dailyTask[i].imgUrl?"":dailyTask[i].imgUrl,')"></span>                        <strong>',"undefined"==typeof dailyTask[i].name?"":baidu.template._encodeHTML(dailyTask[i].name),'</strong>                        <div class="task-cont">                            <p>',"undefined"==typeof dailyTask[i].tdesc?"":baidu.template._encodeHTML(dailyTask[i].tdesc),""),117==dailyTask[i].taskId&&_template_fun_array.push('<em class="hq-em-tip"></em>'),_template_fun_array.push('                            </p>                            <p class="task-reward clearfix"><label>\u5956\u52b1\uff1a</label>                                <span class="task-reward-content">                                ');for(var j=0;j<dailyTask[i].reward.length;j++)_template_fun_array.push('                                    <span data-type="',"undefined"==typeof dailyTask[i].reward[j].type?"":baidu.template._encodeHTML(dailyTask[i].reward[j].type),'"                                        '),dailyTask[i].reward[j].itemId&&_template_fun_array.push('                                            data-item-id="',"undefined"==typeof dailyTask[i].reward[j].itemId?"":baidu.template._encodeHTML(dailyTask[i].reward[j].itemId),'"                                        '),_template_fun_array.push('                                        class="aw">',"undefined"==typeof dailyTask[i].reward[j].name?"":baidu.template._encodeHTML(dailyTask[i].reward[j].name),"x","undefined"==typeof dailyTask[i].reward[j].value?"":baidu.template._encodeHTML(dailyTask[i].reward[j].value),"                                    </span>                                ");_template_fun_array.push('                                </span>                            </p>                        </div>                    <span class="task-process">                        <em>',"undefined"==typeof dailyTask[i].taskProgressNum?"":dailyTask[i].taskProgressNum,"</em> / ","undefined"==typeof dailyTask[i].targetNum?"":dailyTask[i].targetNum,"                    </span>                        "),"2"==dailyTask[i].taskStatus?_template_fun_array.push('                           <a class="go-btn get-task-award" data-taskid="',"undefined"==typeof dailyTask[i].taskId?"":baidu.template._encodeHTML(dailyTask[i].taskId),'">\u9886\u53d6\u5956\u52b1</a>                        '):_template_fun_array.push('                           <a class="go-btn" href="',"undefined"==typeof dailyTask[i].gotoUrl?"":dailyTask[i].gotoUrl,'">\u524d\u5f80</a>                        '),_template_fun_array.push("                    </li>                ")}_template_fun_array.push('                </ul>            </div>            <div class="task-list-com growth-task-list hidden">                <ul class="task-card-list">                    '),growupTask.levelUpList.length||growupTask.adoptUpList.length||_template_fun_array.push('                        <li class="empty-task">\u6682\u65e0\u6210\u957f\u4efb\u52a1</li>                    '),_template_fun_array.push("                   ");for(var k=0;k<growupTask.levelUpList.length;k++){_template_fun_array.push('                       <li class="grow-up-item '),growupTask.levelUpList[k].display||_template_fun_array.push(" hidden"),_template_fun_array.push('">                           <span class="task-ico" style="background: url(',"undefined"==typeof growupTask.levelUpList[k].imgUrl?"":growupTask.levelUpList[k].imgUrl,')"></span>                           <strong>\u6210\u957f\u4e4b\u8def</strong>                                                      <div class="task-cont">                               <p>',"undefined"==typeof growupTask.levelUpList[k].tdesc?"":baidu.template._encodeHTML(growupTask.levelUpList[k].tdesc),'</p>                               <p class="task-reward clearfix"><label>\u5956\u52b1\uff1a</label>                                   <span class="task-reward-content">                                    ');for(var l=0;l<growupTask.levelUpList[k].reward.length;l++)_template_fun_array.push('                                        <span data-type="',"undefined"==typeof growupTask.levelUpList[k].reward[l].type?"":baidu.template._encodeHTML(growupTask.levelUpList[k].reward[l].type),'"                                            '),growupTask.levelUpList[k].reward[l].itemId&&_template_fun_array.push('                                                data-item-id="',"undefined"==typeof growupTask.levelUpList[k].reward[l].itemId?"":baidu.template._encodeHTML(growupTask.levelUpList[k].reward[l].itemId),'"                                            '),_template_fun_array.push('                                                class="aw">                                            ',"undefined"==typeof growupTask.levelUpList[k].reward[l].name?"":baidu.template._encodeHTML(growupTask.levelUpList[k].reward[l].name),"x","undefined"==typeof growupTask.levelUpList[k].reward[l].value?"":baidu.template._encodeHTML(growupTask.levelUpList[k].reward[l].value),"                                        </span>                                    ");_template_fun_array.push('                                        </span>                               </p>                           </div>                           <span class="task-process">                               <em>',"undefined"==typeof growupTask.levelUpList[k].taskProgressNum?"":baidu.template._encodeHTML(growupTask.levelUpList[k].taskProgressNum),"</em> / ","undefined"==typeof growupTask.levelUpList[k].targetNum?"":baidu.template._encodeHTML(growupTask.levelUpList[k].targetNum),"                           </span>                           "),growupTask.levelUp.openFlag?(_template_fun_array.push("                               "),"2"==growupTask.levelUpList[k].taskStatus?_template_fun_array.push('                                   <a class="go-btn get-task-award" data-taskid="',"undefined"==typeof growupTask.levelUpList[k].taskId?"":baidu.template._encodeHTML(growupTask.levelUpList[k].taskId),'">\u9886\u53d6\u5956\u52b1</a>                                '):_template_fun_array.push('                                   <a class="go-btn" href="',"undefined"==typeof growupTask.levelUpList[k].gotoUrl?"":growupTask.levelUpList[k].gotoUrl,'">\u524d\u5f80</a>                                '),_template_fun_array.push("                           ")):_template_fun_array.push('                               <a class="go-btn open-grow-up-task" href="',"undefined"==typeof growupTask.levelUpList[k].gotoUrl?"":growupTask.levelUpList[k].gotoUrl,'" data-tgroup="levelUp">\u5f00\u542f</a>                           '),_template_fun_array.push("                       </li>                   ")}_template_fun_array.push("                   ");for(var k=0;k<growupTask.adoptUpList.length;k++){_template_fun_array.push('                          <li class="adopt-up-item '),growupTask.adoptUpList[k].display||_template_fun_array.push(" hidden"),_template_fun_array.push('">                              <span class="task-ico" style="background: url(',"undefined"==typeof growupTask.adoptUpList[k].imgUrl?"":growupTask.adoptUpList[k].imgUrl,')"></span>                              <strong>\u77e5\u8bc6\u4e4b\u8def</strong>                                                            <div class="task-cont">                                  <p>',"undefined"==typeof growupTask.adoptUpList[k].tdesc?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].tdesc),'</p>                                  <p class="task-reward clearfix"><label>\u5956\u52b1\uff1a</label>                                      <span class="task-reward-content">                                       ');for(var l=0;l<growupTask.adoptUpList[k].reward.length;l++)_template_fun_array.push('                                           <span data-type="',"undefined"==typeof growupTask.adoptUpList[k].reward[l].type?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].reward[l].type),'"                                               '),growupTask.adoptUpList[k].reward[l].itemId&&_template_fun_array.push('                                                   data-item-id="',"undefined"==typeof growupTask.adoptUpList[k].reward[l].itemId?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].reward[l].itemId),'"                                               '),_template_fun_array.push('                                                   class="aw">                                               ',"undefined"==typeof growupTask.adoptUpList[k].reward[l].name?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].reward[l].name),"x","undefined"==typeof growupTask.adoptUpList[k].reward[l].value?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].reward[l].value),"                                           </span>                                       ");_template_fun_array.push('                                       </span>                                  </p>                              </div>                              <span class="task-process">                                  <em>',"undefined"==typeof growupTask.adoptUpList[k].taskProgressNum?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].taskProgressNum),"</em> / ","undefined"==typeof growupTask.adoptUpList[k].targetNum?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].targetNum),"                              </span>                              "),growupTask.adoptUp.openFlag?(_template_fun_array.push("                                 "),"2"==growupTask.adoptUpList[k].taskStatus?_template_fun_array.push('                                    <a class="go-btn get-task-award" data-taskid="',"undefined"==typeof growupTask.adoptUpList[k].taskId?"":baidu.template._encodeHTML(growupTask.adoptUpList[k].taskId),'">\u9886\u53d6\u5956\u52b1</a>                                 '):_template_fun_array.push('                                    <a class="go-btn" href="',"undefined"==typeof growupTask.adoptUpList[k].gotoUrl?"":growupTask.adoptUpList[k].gotoUrl,'">\u524d\u5f80</a>                                 '),_template_fun_array.push("                              ")):_template_fun_array.push('                                 <a class="go-btn open-grow-up-task" data-tgroup="adoptUp" href="',"undefined"==typeof growupTask.adoptUpList[k].gotoUrl?"":growupTask.adoptUpList[k].gotoUrl,'">\u5f00\u542f</a>                              '),_template_fun_array.push("                          </li>                   ")}if(_template_fun_array.push("                    "),growupTask.levelUp.openFlag&&growupTask.branchList){_template_fun_array.push("                       ");for(var k=0;k<growupTask.branchList.length;k++){_template_fun_array.push('                           <li class="branch-task-item">                               <span class="task-ico" style="background: url(',"undefined"==typeof growupTask.branchList[k].imgUrl?"":growupTask.branchList[k].imgUrl,')"></span>                               <strong>',"undefined"==typeof growupTask.branchList[k].name?"":baidu.template._encodeHTML(growupTask.branchList[k].name),'</strong>                               <div class="task-cont">                                   <p>',"undefined"==typeof growupTask.branchList[k].tdesc?"":baidu.template._encodeHTML(growupTask.branchList[k].tdesc),'</p>                                   <p class="task-reward clearfix"><label>\u5956\u52b1\uff1a</label>                                       <span class="task-reward-content">                                       ');for(var l=0;l<growupTask.branchList[k].reward.length;l++)_template_fun_array.push('                                           <span data-type="',"undefined"==typeof growupTask.branchList[k].reward[l].type?"":baidu.template._encodeHTML(growupTask.branchList[k].reward[l].type),'"                                           '),growupTask.branchList[k].reward[l].itemId&&_template_fun_array.push('                                               data-item-id="',"undefined"==typeof growupTask.branchList[k].reward[l].itemId?"":baidu.template._encodeHTML(growupTask.branchList[k].reward[l].itemId),'"                                               '),_template_fun_array.push('                                                   class="aw">                                                   ',"undefined"==typeof growupTask.branchList[k].reward[l].name?"":baidu.template._encodeHTML(growupTask.branchList[k].reward[l].name),"x","undefined"==typeof growupTask.branchList[k].reward[l].value?"":baidu.template._encodeHTML(growupTask.branchList[k].reward[l].value),"                                            </span>                                        ");_template_fun_array.push('                                            </span>                                   </p>                               </div>                               <span class="task-process">                                  <em>',"undefined"==typeof growupTask.branchList[k].taskProgressNum?"":baidu.template._encodeHTML(growupTask.branchList[k].taskProgressNum),"</em> / ","undefined"==typeof growupTask.branchList[k].targetNum?"":baidu.template._encodeHTML(growupTask.branchList[k].targetNum),"                               </span>                               "),"2"==growupTask.branchList[k].taskStatus?_template_fun_array.push('                                   <a class="go-btn get-task-award" data-taskid="',"undefined"==typeof growupTask.branchList[k].taskId?"":baidu.template._encodeHTML(growupTask.branchList[k].taskId),'">\u9886\u53d6\u5956\u52b1</a>                               '):_template_fun_array.push('                                   <a class="go-btn" href="',"undefined"==typeof growupTask.branchList[k].gotoUrl?"":growupTask.branchList[k].gotoUrl,'">\u524d\u5f80</a>                               '),_template_fun_array.push("                           </li>                       ")}_template_fun_array.push("                    ")}_template_fun_array.push("                </ul>            </div>        </div>    </div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],levelUpList=data.growupTask.levelUp.list,adoptUpList=data.growupTask.adoptUp.list,branchList=[];data.growupTask.levelUpList=[],data.growupTask.adoptUpList=[],data.growupTask.branchList=[];var growthTaskFinishCount=0,growthTaskNotOpen=0;levelUpList&&levelUpList.length&&($.each(levelUpList,function(a,e){e.branch&&(branchList=branchList.concat(e.branch))}),data.growupTask.levelUpList=this._filterDataList(levelUpList),data.growupTask.branchList=this._filterDataList(branchList,1),data.growupTask.levelUpList[0]&&"2"==data.growupTask.levelUpList[0].taskStatus&&(growthTaskFinishCount+=1),data.growupTask.branchList[0]&&"2"==data.growupTask.branchList[0].taskStatus&&(growthTaskFinishCount+=1),data.growupTask.levelUp.openFlag||(growthTaskNotOpen+=1)),adoptUpList&&adoptUpList.length&&(data.growupTask.adoptUpList=this._filterDataList(adoptUpList),data.growupTask.adoptUpList[0]&&"2"==data.growupTask.adoptUpList[0].taskStatus&&(growthTaskFinishCount+=1),data.growupTask.adoptUp.openFlag||(growthTaskNotOpen+=1));var content=tmpl(data);content=https.autoTrans(content,1),this._onDialogOpen($el,growthTaskFinishCount,growthTaskNotOpen,content),this.isTaskListDialogOpen=1},_onDialogOpen:function(a,e,t,s){a.find(".loading").remove(),a.prepend(s);var i=this;i.$el=a,i.initScrollBar(a.find(".daily-task-list")),i.bindDialog(),e&&$(".growth-task-finish-count").attr("data-count",e).fadeIn(),t&&$(".growth-task-finish-count").attr("data-task",t).fadeIn();var n=a.find(".growth-task-list").find(".task-card-list");n.find("li").not(".hidden").length>=3&&n.addClass("card-list-scroll"),a.find(".go-btn").each(function(a,e){var t=$(e).attr("href");t&&(t+=(~t.indexOf("?")?"&":"?")+"from=taskBoard",$(e).attr("href",t))})},openAward:function(data,callback,openCallback){var tmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<dl class="ik-finish-task">    <dt>\u5b8c\u6210\uff1a',"undefined"==typeof name?"":baidu.template._encodeHTML(name),'</dt>    <dd class="clearfix finish-task-',"undefined"==typeof reward.length?"":reward.length,'">        ');for(var j=0;j<reward.length;j++)_template_fun_array.push('            <div data-type="',"undefined"==typeof reward[j].type?"":baidu.template._encodeHTML(reward[j].type),'"  class="award-item '),reward[j].itemId>=128&&reward[j].itemId<=131&&_template_fun_array.push("gift-box-item finish-award-gift-box"),_template_fun_array.push('" data-item-id="',"undefined"==typeof reward[j].itemId?"":baidu.template._encodeHTML(reward[j].itemId),'">                '),"wealth"==reward[j].type?_template_fun_array.push('                    <p class="finish-award"><img src="https://gss0.bdstatic.com/70cFsjip0QIZ8tyhnq/img/iknow/5caifuzhi1.png"/></p>                '):(_template_fun_array.push('                    <p class="finish-award">'),reward[j].itemId>=128&&reward[j].itemId<=131&&_template_fun_array.push('<span class="chesk-open-tip"></span>'),_template_fun_array.push('<img src="http://img.baidu.com/img/iknow/item/img/',"undefined"==typeof reward[j].itemId?"":reward[j].itemId,'/item_m_0.jpg"/></p>                ')),_template_fun_array.push('                <p class="award-name">',"undefined"==typeof reward[j].name?"":reward[j].name,"x","undefined"==typeof reward[j].value?"":reward[j].value,"</p>            </div>        ");
_template_fun_array.push('    </dd>    <dd>        <span class="btn-ok">\u786e\u5b9a</span>    </dd></dl>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],content=tmpl(data);content=https.autoTrans(content,1);var me=this;this.$awardDialog=new Dialog({width:553,height:555,autoDispose:!0,className:"ik-task-dialog",content:content,open:function(){var a=$(this).find(".gift-box-item");me.shakeGiftBox(a),me._bindAward($(this)),openCallback&&openCallback()},close:function(){callback&&callback()}})},shakeGiftBox:function(a){this.shakeEle(a.find("img"),"left",10,18),this.shakeEle(a.find(".chesk-open-tip"),"top",-5,-15)},shakeEle:function(a,e,t,s){var i=this,n={};n[e]=t,a.animate(n,{speed:80,complete:function(){i.shakeEle($(this),e,s,t)}})},_bindAward:function(a){var e=this;a.on("click",".btn-ok",function(){try{e.$awardDialog.close(),e.isTaskListDialogOpen&&e.swipeOffItem()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/task/task.js",method:"",ln:615})}})},initAward:function(){try{this.$awardDialog?this.$awardDialog.open():this.openAward()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/task/task.js",method:"",ln:620})}},loadCard:function(a){if(/daily|growth/.test(a)){var e="growth"===a?"addClass":"removeClass";this.$el.find(".task-card-content")[e]("growth-task-card-content");{var t=this.$el,s=t.find("."+a+"-task-list");t.find(".task-card-content").children(".task-list-com").hide().filter("."+a+"-task-list").fadeIn()}this.initScrollBar(s)}},initScrollBar:function(a){a.hasClass("scroll-loaded")||a.find("li").length<3||(a.addClass("scroll-loaded"),setTimeout(function(){var e=new Scrollbar({scrollWrapper:a,scrollContent:a.find(".task-card-list"),maxHeight:300,autoHide:0});e.render()},150))},accomplishTip:function(){},swipeOffItem:function(){if(this.isTaskListDialogOpen){var a=$(".growth-task-list").find(".finish-item").not(".branch-task-item");a.length&&a.next("li.hidden").length&&a.animate({left:530},{complete:function(){a.hide().next("li").fadeIn(function(){a.remove()})}})}},loadAccomplishTask:function(){var a=this,e=setInterval(function(){var t=$(document.body).find(".jump-task-list");t.length&&(clearInterval(e),a._loadAccomplishTaskData(t))},50)},_loadAccomplishTask:function($taskList,data){if(!~location.href.indexOf("/question/")&&!~location.href.indexOf("/link?url=")){var tmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="ik-task-award-tips '),1==len&&_template_fun_array.push("ik-task-award-tips-short"),_template_fun_array.push('">    <div class="task-tips-cont">        <p>\u5b8c\u6210<em>\u201c',"undefined"==typeof text?"":baidu.template._encodeHTML(text),"\u201d</em>\u4efb\u52a1\u3002</p>        "),1==len?_template_fun_array.push('            <span class="get-award get-award-btn" data-task-id="',"undefined"==typeof taskId?"":baidu.template._encodeHTML(taskId),'">\u9886\u53d6\u5956\u52b1</span>        '):_template_fun_array.push('            <span class="get-award open-award-list-btn">\u67e5\u770b\u5956\u52b1</span>        '),_template_fun_array.push('        <span class="toggle-btn"></span>    </div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],content=tmpl(data),left=1===data.len?-540:-607,me=this;$(content).appendTo($taskList).animate({left:left},{complete:function(){var a=$(this);me.accomplishTipTimer=setTimeout(function(){a.animate({left:50})},5e3)}})}},_loadAccomplishTaskData:function(a){var e=this;$.ajax({url:"/task/api/getmytasklist",cache:!1,data:{popFlag:1,status:"done"},success:function(t){if(!t.errno){var s=t.data&&t.data.done,i=t.data&&t.data.doneNum;i=+i;var n={len:0,taskId:0,text:""};if(n.len=s.length,i&&$("<div />").addClass("ik-task-award-count").html(i).appendTo(".jump-top-box .jump-task-list"),s&&s.length){if(1===s.length)n.text=s[0].name,n.taskId=s[0].taskId;else{var r=[];$.each(s,function(a,e){r.push(e.name)}),n.text=r.join("\u3001"),n.text.length>14&&(n.text=n.text.substring(0,13)+"...")}e._loadAccomplishTask(a,n)}}}})}};module.exports=task});
;define("common:widget/js/logic/address-dialog/address-dialog.js",function(e,i,s){var t=e("common:widget/lib/jquery/jquery.js"),a=(e("common:widget/js/ui/base/base.js"),e("common:widget/js/ui/dialog/dialog.js")),d=e("common:widget/js/util/event/event.js"),o=(e("common:widget/js/logic/submit/submit.js"),e("common:widget/js/ui/address/address.js")),l=e("common:widget/js/logic/qianbao-iframe/qianbao-dialog.js");e("common:widget/lib/jquery.validate/jquery.validate.js");var n={},c=t.createClass(function(e){var i=this,s={title:"",noCloseBtn:!1,url:"/shop/submit/setaddress"};t.extend(s,e),i.opt=s;var d={content:"",width:480,height:260,autoDispose:!0,className:"ik-task-ex-dialog address-dialog"},o='<h1>\u606d\u559c\u60a8\uff01\u5f00\u542f\u5b9d\u7bb1\u83b7\u5f97<span style="color:red"> '+s.goodsName+"</span></h1>";if(s.sType&&"noTitle"===s.sType&&(o=""),3==s.goodsType){{s.noCloseBtn?"":'<span class="close-dialog grid-r">X</span>'}d.content=['<div class="dialog-container f-12">','<div class="header">','<span class="close-dialog grid-r">X</span>','<div class="title f-bold">',o,"</div>","\u8bf7\u586b\u5199\u6536\u8d27\u5730\u5740\uff0c\u8fd9\u4ef6\u5546\u54c1\u5c31\u4f1a\u6295\u5411\u60a8\u7684\u6000\u62b1\u5566~","</div>",'<div class="main mt-10">','<form id="add-form" class="add-form">','<div class="line">','<label id="lbl-name" for="ipt-name">\u6536\u4ef6\u4eba\u59d3\u540d\uff1a</label><input id="ipt-name" name="Name" value="',n.addName,'" />',"</div>",'<div class="line">','<label id="lbl-province" for="sel-province">\u6240\u5728\u5730\u533a\uff1a</label>','<div class="select" id="con-province">','<select id="sel-province" data-save="',n.addProvince,'" name="Province"></select>',"</div>",'<div class="select" id="con-city">','<select id="sel-city" name="City" data-save="',n.addCity,'"></select>',"</div>",'<div class="select" id="con-district">','<select id="sel-district" name="District" data-save="',n.addDistrict,'"></select>',"</div>","</div>",'<div class="line">','<label id="lbl-address" for="ipt-address">\u8857\u9053\u5730\u5740\uff1a</label><input id="ipt-address" name="Address" value="',n.addStreet,'" />',"</div>",'<div class="line">','<label id="lbl-zipcode" for="ipt-zipcode">\u90ae\u653f\u7f16\u7801\uff1a</label><input id="ipt-zipcode" name="ZipCode" value="',n.addZip,'" />',"</div>",'<div class="line">','<label id="lbl-tel" for="ipt-tel">\u624b\u673a\u53f7\u7801\uff1a</label><input id="ipt-tel" type="tel" name="Tel" value="',n.addPhone,'" />',"</div>","</form>",'<a class="submit-btn" id="submit-btn">\u786e\u8ba4\u63d0\u4ea4</a>',"</div>",'<div class="footer mt-10">','<p class="f-red">\u8bf7\u786e\u8ba4\u60a8\u63d0\u4ea4\u7684\u4fe1\u606f\u6b63\u786e\uff0c\u63d0\u4ea4\u540e\u4e0d\u80fd\u4fee\u6539</p>',"<p>\u5982\u56e0\u586b\u5199\u4fe1\u606f\u9519\u8bef\u5bfc\u81f4\u672a\u80fd\u6536\u8d27\uff0c\u8d23\u4efb\u81ea\u8d1f</p>","</div>","</div>"].join(""),d.width=850,d.height=430}else{s.url="/shop/submit/setTradeInfo";var o,c,r,p,m;d.className="phone-dialog address-dialog ik-task-ex-dialog",5==s.goodsType?(c="\u586b\u5199\u5b8c\u624b\u673a\u53f7\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9\u60a8\u7684\u624b\u673a\u5145\u503c\u5566~",r='<label id="lbl-tel" for="ipt-tel">\u5145\u503c\u624b\u673a\u53f7\uff1a</label><span class="phone-pre">+86</span><input id="ipt-tel" class="ipt-exchange" type="tel" maxlength="11" name="tele" />',p="\u624b\u673a\u53f7",exchangeDialogWarnRed="\u8bf7\u786e\u4fdd\u60a8\u7684\u624b\u673a\u53f7\u6b63\u786e\u6709\u6548\uff0c\u4e00\u65e6\u63d0\u4ea4\uff0c\u4e0d\u53ef\u4fee\u6539",m="<p>\u76ee\u524d\u4ec5\u652f\u6301\u4e2d\u56fd\u5927\u9646\u5730\u533a\u624b\u673a\u53f7</p>",exchangeDialogbutton="\u786e\u8ba4\u63d0\u4ea4"):6==s.goodsType?(c="\u586b\u5199\u5b8cQQ\u53f7\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u9001\u60a8Q\u5e01\u5566~",r='<label id="lbl-qq" for="ipt-qq">\u5145\u503cQQ\u53f7\uff1a</label><input id="ipt-qq" class="ipt-exchange" type="text" maxlength="20" name="qq" />',p="QQ\u53f7",exchangeDialogWarnRed="\u8bf7\u786e\u4fdd\u60a8\u7684QQ\u53f7\u6b63\u786e\u6709\u6548\uff0c\u4e00\u65e6\u63d0\u4ea4\uff0c\u4e0d\u53ef\u4fee\u6539",m="",exchangeDialogbutton="\u786e\u8ba4\u63d0\u4ea4"):8==s.goodsType&&(c="\u586b\u5199\u8981\u5145\u503c\u7684\u624b\u673a\u53f7\uff0c\u7ed1\u5361\u6210\u529f\u81ea\u52a8\u5145\u503c",r='<label id="lbl-tel" for="ipt-tel">\u5145\u503c\u624b\u673a\u53f7\uff1a</label><span class="phone-pre">+86</span><input id="ipt-tel" class="ipt-exchange" type="tel" maxlength="11" name="tele" />',p="\u624b\u673a\u53f7",exchangeDialogWarnRed="\u767e\u5ea6\u94b1\u5305\u65b0\u7528\u6237\u4e13\u4eab\uff0c\u8bf7\u786e\u4fdd\u7ed1\u5b9a\u7684\u94f6\u884c\u5361\u672a\u4f7f\u7528\u8fc7\u767e\u5ea6\u94b1\u5305\uff0c\u5426\u5219\u5145\u503c\u5931\u8d25\uff01",m="<p>\u76ee\u524d\u4ec5\u652f\u6301\u4e2d\u56fd\u5927\u9646\u5730\u533a\u624b\u673a\u53f7</p>",exchangeDialogbutton="\u53bb\u7ed1\u5361"),d.content=['<div class="dialog-container f-12">','<div class="header">','<span class="close-dialog grid-r">X</span>','<div class="title f-bold">',o,"</div>",c,"</div>",'<div class="main mt-10">','<form id="add-form" class="add-form">','<div class="line" id="phone-wp">',r,"</div>",'<div class="line" id="phone-wp-c" style="display:none;">','<span class="confirm-title">\u8bf7\u786e\u8ba4\u5145\u503c',p,'\uff1a</span><span class="confirm-content"></span>',"</div>","</form>",'<div class="line" id="submit-wp-pre">','<a class="submit-btn grid" id="submit-btn">',exchangeDialogbutton,"</a>","</div>",'<div class="line" id="submit-wp" style="display:none;">','<a class="submit-btn mr-10 grid" id="modify-btn">\u8fd4\u56de\u4fee\u6539</a>','<a class="submit-btn grid" id="submit-btn-c">\u786e\u8ba4\u63d0\u4ea4</a>',"</div>","</div>",'<div class="footer mt-10">','<p class="f-red">',exchangeDialogWarnRed,"</p>",m,"</div>","</div>"].join("")}dialog=new a(d),t(".address-dialog").find(".close-dialog").click(function(){try{dialog.close()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/address-dialog/address-dialog.js",method:"",ln:173})}}),i.init(),t("#submit-btn").click(function(){try{i.validate()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/address-dialog/address-dialog.js",method:"",ln:180})}}),t("#submit-btn-c").click(function(){try{if(8==s.goodsType){var i=t("#ipt-tel").val(),a=F.context("mybdpayinfo");F.context("qianbaoPostParams",{tele:i,type:"tele",goodsId:e.params.goodsId,tradeId:e.params.tradeId}),l.showDialog(a)}}catch(d){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:d.message,path:"common:widget/js/logic/address-dialog/address-dialog.js",method:"",ln:198})}}),t("#modify-btn").click(function(){try{i.backConfirmInput()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/address-dialog/address-dialog.js",method:"",ln:201})}})}).extend({_init:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/address-dialog/address-dialog.js",method:"",ln:206})}},submit:function(){var e=this,i=t.form.json(t("#add-form")[0]),s={};3==this.opt.goodsType?(s={name:i.Name,zipcode:i.ZipCode,address:i.Address,tel:i.Tel,province:i.Province,city:i.City,district:i.District,type:"new"},s.fullAddress=i.Province+i.City+(i.District||"")+i.Address):(s=i,s.type=6==this.opt.goodsType?"qq":"tele"),t.extend(s,e.opt.params),d.fire("dialog.close"),t.ajax({url:e.opt.url,type:"post",data:s,success:function(i){i.errno?e.opt.errorDeal&&e.opt.errorDeal(i):e.opt.successDeal&&e.opt.successDeal(i)}})},validate:function(){var e=this;t.validator.addMethod("notEmpty",function(e){return t.trim(e)&&"\u8bf7\u9009\u62e9"!=e},""),t("#add-form").validate({rules:{Province:"notEmpty",City:"notEmpty",ZipCode:{required:!0,maxlength:10},Address:{required:!0,maxlength:50},Name:{required:!0,maxlength:10},Tel:{required:!0,number:!0}},messages:{Province:"\u8bf7\u9009\u62e9\u7701\u4efd",City:"\u8bf7\u9009\u62e9\u57ce\u5e02",ZipCode:{required:"\u8bf7\u586b\u5199\u90ae\u7f16",maxlength:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u7f16"},Address:{required:"\u8bf7\u586b\u5199\u5730\u5740",maxlength:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u5730\u5740"},Name:{required:"\u8bf7\u586b\u5199\u59d3\u540d",maxlength:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u59d3\u540d"},Tel:{required:"\u8bf7\u586b\u5199\u7535\u8bdd\u53f7\u7801",phone:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u7535\u8bdd\u53f7\u7801"},tele:{required:"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u7801",digits:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",maxlength:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",minlength:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"},qq:{required:"\u8bf7\u586b\u5199QQ\u53f7\u7801",digits:"\u8bf7\u586b\u5199\u6b63\u786e\u7684QQ\u53f7\u7801",maxlength:"\u8bf7\u586b\u5199\u6b63\u786e\u7684QQ\u53f7\u7801"}},highlight:function(e,i){t(e).closest("input, .select").addClass(i)},unhighlight:function(e,i){t(e).closest("input, .select").removeClass(i)}});var i=t("#add-form").valid();i&&(8==e.opt.goodsType?(e.confirmInput(),t.ajax({url:"/shop/mybdpayinfo",type:"get",success:function(e){e.errno||F.context("mybdpayinfo",e.mybdpayinfo)}})):this.submit())},confirmInput:function(){t("#phone-wp").hide(),t(".confirm-content").text(t(".ipt-exchange").val()),t("#phone-wp-c").show(),t("#submit-wp-pre").hide(),t("#submit-wp").show(),t(".footer").hide()},backConfirmInput:function(){t("#phone-wp-c").hide(),t("#phone-wp").show(),t("#submit-wp").hide(),t("#submit-wp-pre").show(),t(".footer").show()},addressVisability:function(e){t("#sel-city").show(),t("#con-city").css("visibility",""),t("#lbl-city").css("visibility",""),"none"==t("#sel-district").css("display")?(t("#sel-district").show(),t("#con-district").css("visibility","hidden"),t("#lbl-district").css("visibility","hidden")):e.value["sel-district"]&&(t("#con-district").css("visibility",""),t("#lbl-district").css("visibility",""))},init:function(){try{var e=this,i={container:["#sel-province","#sel-city","#sel-district"],defaultValue:["\u5317\u4eac","\u6d77\u6dc0\u533a"]};t("#sel-province").data("save")&&(i.defaultValue=[t("#sel-province").data("save"),t("#sel-city").data("save"),t("#sel-district").data("save")]);var s=new o(i);e.addressVisability(s),s.on("change",function(){e.addressVisability(s)})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message,path:"common:widget/js/logic/address-dialog/address-dialog.js",method:"",ln:399})}}});s.exports={init:function(e){try{{new c(e)}}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/address-dialog/address-dialog.js",method:"",ln:404})}}}});
;define("common:widget/js/logic/prof-anonymous/prof-anonymous.js",function(e,t,o){var n=e("common:widget/js/util/tangram/tangram.js"),i="IK_PROFANONYMOUS",s="IK_PROFANONYMOUS_CLOSE",a="IK_PROFANONYMOUS_EXPIRE",c=!0,p=null,r=null,u=null;o.exports={getCookie:function(){return n.cookie.get(i)},isAnonymous:function(e){var t=(this.getCookie()||"").split(",");return n.array.contains(t,e+"")},isExpire:function(){if(!this.getCookie())return!0;if("1"==F.context("user").isLogin){var e=(new Date).getTime(),t=n.cookie.get(a);if(t){if(e-n.date.parse(t)>0)return!0}else t=(new Date).getTime()+6048e5,t=n.date.format(new Date(t),"yyyy-MM-dd HH:mm:ss"),n.cookie.set(a,t,{path:"/",expires:15552e6})}return!1},isUserClose:function(){return+n.cookie.get(s)>0?!0:!1},init:function(){try{!this.isExpire()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/prof-anonymous/prof-anonymous.js",method:"",ln:56})}},close:function(e){c=!1,r&&clearTimeout(r),p.stop().animate({width:"35px"},"fast",function(){p.find("span").addClass("tip-expand").removeClass("tip-close")}),0==e&&n.cookie.set(s,1,{path:"/",expires:15552e6})},expand:function(e){c=!0,p.stop().animate({width:"245px"},"fast",function(){p.find("span").addClass("tip-close").removeClass("tip-expand")}),0==e&&n.cookie.set(s,0,{path:"/",expires:15552e6})},initTip:function(){try{var e=["\u3010\u7b49\u5f85\u56de\u7b54\u3011","\u3010\u5df2\u56de\u7b54\u3011"],t=this,o="/prof/api/questioninfo?t="+(new Date).getTime();n.get(o,function(o){if(0==o.errNo&&o.data.length>0){var i="<div id='pgctip' class='pgctip'><div class='pgctip-main'><a class='grid'><b>\u5386\u53f2\u63d0\u95ee(#{count})</b><span class='tip-close'></span></a><ul>#{content}</ul></div></div>",s="<li><a href='/question/#{qid}' target='_blank'>#{index}\uff0e#{qStatus}#{qTitle}</a></li>",a=[];n.each(o.data,function(t,o){3>t&&a.push(n.string(s).format({index:t+1,qid:o.qid,qTitle:n.string(o.title).subByte(38,"..."),qStatus:e[o.qstatus||0]}))});var l=n.string(i).format({content:a.join(""),count:o.data.length});p=n(l),p.appendTo("#body"),t.isUserClose()?t.close():t.expand(),r=setTimeout(function(){t.close(!1)},3e3),6==n.browser.ie&&(u&&clearTimeout(u),n("#pgctip").css("position","absolute"),n(window).on("resize scroll",function(){u=setTimeout(function(){n("#pgctip").css("top",n(window).scrollTop()+303)},200)})),n("#pgctip").on("click",function(){try{c?t.close():t.expand()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message,path:"common:widget/js/logic/prof-anonymous/prof-anonymous.js",method:"",ln:137})}}).on("mouseover",function(e){e.preventDefault(),t.expand()}).on("mouseout",function(e){e.preventDefault(),t.close()})}},"json")}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message,path:"common:widget/js/logic/prof-anonymous/prof-anonymous.js",method:"",ln:146})}}}});