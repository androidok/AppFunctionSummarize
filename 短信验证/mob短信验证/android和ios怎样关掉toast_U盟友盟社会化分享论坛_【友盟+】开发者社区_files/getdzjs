var gj_plugin={check_url:"source/plugin/pcmgr_url_safeguard/url_api.inc.php",mal_url:"http://c.pc.qq.com/fcgi-bin/safeurl?pagetype=4&ins=0&showtrust=0",report_url:"http://openapi.guanjia.qq.com/fcgi-bin/rpt?softver=1&guid=0&appid=10003&cmd=2&crytype=0&plain=1&",clientX:0,clientY:0,hover:0,time_hide:500,time_out:0,time_out_show:0,safe_div:null,wording:['<strong class="safe_a">安全网站，请放心访问</strong>','<strong class="little_safe">可信度高，可以访问</strong>','<strong class="unsafe_a">危险网站，千万别访问</strong>','<strong class="little_unsafe">可信度低，不建议访问</strong>','<strong class="little_safe">安全性未知，谨慎访问</strong>'],operate:['<a class="gj_a gj_left" target="_blank" href="http://guanjia.qq.com/report_url.html">我要举报</a>','<a class="gj_a gj_left" target="_blank" href="http://guanjia.qq.com/complaint.html">我要申诉</a>'],show:['<a class="gj_a" href="javascript:SF.statUpPcmgr();">使用电脑管家</a>','<img class="gj_icon" src="http://s.pc.qq.com/discuz/image/v2/gj_icon.png"/><a style="text-decoration:none;color:#373737">电脑管家深度保护上网安全！</a><a class="gj_a" href="http://dldir2.qq.com/invc/xfspeed/qqpcmgr/download/QQPCDownload140003.exe">一键安装</a>'],pack:0,pack_finish:0,pack_return:0,js_runtime:0,report_obj:null};
function extend(c,a){for(var b in a){c[b]=a[b];}return c;}var Browser={};try{(function(){var b=navigator.userAgent.toLowerCase(),g=document.compatMode=="CSS1Compat",d=b.indexOf("opera")>-1,a=b.indexOf("chrome")>-1,i=(/webkit|khtml/).test(b),f=!d&&b.indexOf("msie")>-1,c=!i&&b.indexOf("gecko")>-1,j=f&&!g,h=window.location.href.toLowerCase().indexOf("https")===0;
extend(Browser,{isOpera:d,isIE:f,isFirefox:c,isSafari:i,isChrome:a});})();}catch(e){}var gj_plugin_function={hoverTimeOut:function(a){gj_plugin.time_out=setTimeout(function(){if(gj_plugin.hover==2){return;
}jQuery(".safe_statu").hide();},gj_plugin.time_hide);},mousePos:function(b){var a,c;var b=b?b:window.event;return{x:b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:b.clientY+document.body.scrollTop+document.documentElement.scrollTop};
},go_mal_url:function(a,b){a=gj_plugin.mal_url+"&url="+a+"&eviltype="+b;return a;},createStarBar:function(f){f=parseInt(f);var a=5;var h=Math.floor(f/20);
var c=((f%20)>=10)?1:0;var d=a-h-c;var g='<div style="position: relative;background: #f0f9fe;"><a style="text-decoration:none;color:#373737">网站可信度:</a>';
for(var b=0;b<h;b++){g+='<img class="gj_star gj_ie6png" src="http://s.pc.qq.com/discuz/image/v2/star.png"/>';}for(var b=0;b<c;b++){g+='<img class="gj_star gj_ie6png" src="http://s.pc.qq.com/discuz/image/v2/half_star.png"/>';
}for(var b=0;b<d;b++){g+='<img class="gj_star gj_ie6png" src="http://s.pc.qq.com/discuz/image/v2/empty_star.png"/>';}g+="</div>";return g;},createInfoBar:function(a){var b='<div><a style="text-decoration:none;color:#373737">';
if(a.whitetype!=14){if(a.DomainName!=""){b+=("<div>网站名称："+a.DomainName+"</div>");}if(a.Orgnization!=""){b+=("<div>网站主办方："+a.Orgnization+"</div>");}if(a.ICPSerial!=""){b+=("<div>备案/许可证号："+a.ICPSerial+"</div>");
}}else{b+="<div>"+a.WordingTitle+"</div>";}b+="</a></div>";return b;},add_a_attr:function(c,b){b.attr("urltype",c.urltype);b.attr("ICPOk",c.isDomainICPOk);
b.attr("score",c.DomainScore);b.attr("whitetype",c.whitetype);b.attr("Serial",c.KexinSerial);b.attr("domain",c.DomainName);b.attr("org",c.Orgnization);
b.attr("ICPS",c.ICPSerial);b.attr("WordingTitle",c.WordingTitle);b.attr("_href",c.url);var a="";switch(parseInt(c.whitetype)){case 11:a="safe.png";break;
case 12:a="unkown_high.png";break;case 13:a="unkown_little.png";break;case 14:a="unsafe.png";break;default:a="unkown.png";break;}},get_a_attr:function(a){var b={};
b.urltype=a.attr("urltype");b.isDomainICPOk=a.attr("ICPOk");b.DomainScore=a.attr("score");b.whitetype=a.attr("whitetype");b.KexinSerial=a.attr("Serial");
b.DomainName=a.attr("domain");b.Orgnization=a.attr("org");b.ICPSerial=a.attr("ICPS");b.WordingTitle=a.attr("WordingTitle");b.url=a.attr("_href");return b;
},insertDivContent:function(a){jQuery("#gj_show_statu").attr("src","http://s.pc.qq.com/discuz/image/v2/"+a.show_statu);jQuery("#gj_show_wording").html(a.show_wording);
jQuery("#gj_show_gj").html(a.show_gj);jQuery("#gj_operate").html('<a class="gj_a" target="_blank" href="'+a.url+'">打开</a> <a  style="margin-left: 5px;" class="gj_a" target="_blank" href="http://guanjia.qq.com/cloud/detail/redirect.html?pcmgr='+a.url+'">'+a.operate_title+"<a/>");
},createShowDiv:function(c,b){var a={};a.show_div="";a.show_png="";a.show_statu="";a.show_wording="";a.show_operate="";a.show_info="";a.show_gj="";a.url=c.url;
a.operate_title="";switch(parseInt(c.whitetype)){case 11:a.show_statu="ICO.png";a.show_info="";a.show_operate=(c.isDomainICPOk=="1")?'<a class="gj_a gj_detail_left" target="_blank" href="http://guanjia.qq.com/tapi/discuz/redirect.php?sn='+c.KexinSerial+'">详情</a>':"";
break;case 12:a.show_statu="ICO5.png";a.show_operate=gj_plugin.operate[0];a.show_info="";break;case 13:a.show_statu="ICO3.png";a.show_operate=gj_plugin.operate[1];
break;case 14:a.show_statu="ICO4.png";a.show_operate=gj_plugin.operate[1];a.show_info=gj_plugin_function.createInfoBar(c);break;default:a.show_statu="ICO2.png";
a.show_info="";break;}switch(parseInt(c.whitetype)){case 11:a.show_wording=gj_plugin.wording[0];a.operate_title="我要举报";break;case 12:a.show_wording=gj_plugin.wording[1];
a.operate_title="我要申诉";break;case 13:a.show_wording=gj_plugin.wording[3];a.operate_title="为什么可信度低?";break;case 14:a.show_wording=gj_plugin.wording[2];a.operate_title="为什么危险?";
break;case 15:a.show_wording=gj_plugin.wording[4];a.operate_title="我要举报";break;default:break;}if(a.show_operate==""&&c.whitetype==1){a.show_operate=gj_plugin.operate[0];
}a.show_gj=gj_plugin.show[1];gj_plugin_function.insertDivContent(a);},url_filter:function(f){var a=parseInt(f.whitetype);var c=window.location.hostname;
var d=/^http:\/\/([^\/]*)(\/)?.*/;var b=null;if(a==11||a==12||a==15){return false;}b=d.exec(f.url);if(b[3]==c){return false;}return true;},gettype_callback_a:function(g){if(g.retcode=="0"){var d=jQuery(".gj_safe_a");
var c=g.results;for(var b=0;b<c.length;b++){if(!gj_plugin_function.url_filter(c[b])){continue;}var f=d.eq(parseInt(c[b].urlSeq));gj_plugin.report_obj=c[b];
var a=f.attr("href");f.attr("href",function(){jQuery(this).attr("data",f.attr("href"));jQuery(this).removeAttr("target");return"javascript:void(0)";});
f.click(function(){gj_plugin_function.go_mal_url(jQuery(this).attr("data"),gj_plugin.report_obj.eviltype);});gj_plugin_function.add_a_attr(c[b],f);f.mouseover(function(i){clearTimeout(gj_plugin.time_out);
clearTimeout(gj_plugin.time_out_show);gj_plugin.hover=1;if(gj_plugin.safe_div!=null){gj_plugin.safe_div.hide();}var h=gj_plugin_function.get_a_attr(jQuery(this));
gj_plugin_function.createShowDiv(h,jQuery(this));gj_plugin.safe_div=jQuery(".safe_statu");gj_plugin.time_out_show=setTimeout(function(){return function(){gj_plugin_function.report_svr(gj_plugin.report_obj,1);
gj_plugin.safe_div.css("top",gj_plugin.clientY+8);gj_plugin.safe_div.css("left",gj_plugin.clientX-30);gj_plugin.safe_div.show();};}(i),150);});f.click(function(i){clearTimeout(gj_plugin.time_out);
clearTimeout(gj_plugin.time_out_show);gj_plugin.hover=1;if(gj_plugin.safe_div!=null){gj_plugin.safe_div.hide();}var h=gj_plugin_function.get_a_attr(jQuery(this));
gj_plugin_function.createShowDiv(h,jQuery(this));gj_plugin.safe_div=jQuery(".safe_statu");gj_plugin.time_out_show=setTimeout(function(){return function(){gj_plugin_function.report_svr(gj_plugin.report_obj,1);
gj_plugin.safe_div.css("top",gj_plugin.clientY+8);gj_plugin.safe_div.css("left",gj_plugin.clientX-30);gj_plugin.safe_div.show();};}(i),150);});f.mousemove(function(h){var i=gj_plugin_function.mousePos(h);
gj_plugin.clientX=i.x;gj_plugin.clientY=i.y;});f.mouseout(function(){clearTimeout(gj_plugin.time_out_show);gj_plugin_function.hoverTimeOut(jQuery(this));
});}jQuery(".safe_statu").mouseenter(function(){gj_plugin.hover=2;});jQuery(".safe_statu").mouseleave(function(){jQuery(this).hide();});jQuery(".safe_statu").find(".gj_a").click(function(){gj_plugin_function.report_svr(gj_plugin.report_obj,2);
});jQuery(".safe_statu").find("a.gj_a_left").click(function(){gj_plugin_function.report_svr(gj_plugin.report_obj,3);});}gj_plugin.pack_return++;if(gj_plugin.pack_finish==1){if(gj_plugin.pack_return==gj_plugin.pack){gj_plugin.js_runtime=(new Date()).valueOf()-gj_plugin.js_runtime;
gj_plugin_function.report_time(gj_plugin.js_runtime);}}},report_time:function(c){var a=new Image(1,1);var b=51+"|"+gj_plugin_function.URLEncode(window.location.href)+"&host="+window.location.host+"&value="+c;
a.src=gj_plugin.report_url+"content="+b;a.onload=a.onerror=null;a.complete;},report_svr:function(b,a){var c="";switch(parseInt(b.whitetype)){case 11:c="1";
break;case 12:c="2";break;case 13:c="6";break;case 14:c="3";break;default:c="4";break;}if(b.timeout==1){c="4";}c+=a;gj_plugin_function.report(b.url,c);
},report:function(b,d){var a=new Image(1,1);var c=d+"|"+gj_plugin_function.URLEncode(b)+"&host="+window.location.host;a.src=gj_plugin.report_url+"content="+c;
a.onload=a.onerror=null;a.complete;},URLEncode:function(h){var c="";var a=0;h=h.toString();h=h.replace("&amp;","&");var g=/(^[a-zA-Z0-9-_.]*)/;while(a<h.length){var d=g.exec(h.substr(a));
if(d!=null&&d.length>1&&d[1]!=""){c+=d[1];a+=d[1].length;}else{if(h.substr(a,1)==" "){c+="+";}else{var b=h.charCodeAt(a);var f=b.toString(16);c+="%"+(f.length<2?"0":"")+f.toUpperCase();
}a++;}}return c;},getBatchUrlType:function(d,c,f){var b="";for(var a=f;a<d.length;a++){b+=gj_plugin_function.URLEncode(d[a][0])+"^"+d[a][1]+"|";}jQuery.ajax({url:gj_plugin.check_url,dataType:"jsonp",jsonp:"gj_plugin_function.gettype_callback_"+c,type:"post",cache:"false",timeout:30000,error:function(g,j,i){if(j=="timeout"){var h={retcode:0,url:j_obj.attr("href"),urltype:1,timeout:1};
report_svr(h,0);gettype_callback_a(h);}},data:"content="+b+"&cb=gj_plugin_function.gettype_callback_"+c});},checkIllegal:function(a){var c=["http://","ftp://","https://","mailto:"];
var d=false;for(var b=0;b<c.length;b++){if(a.substr(0,8).indexOf(c[b])>=0){d=true;break;}}return d;},checkAddIcon:function(b,a){if(typeof(a.get(0).innerText)=="undefined"){a.get(0).innerText=a.get(0).innerHTML.replace(/<.+?>/gim,"");
}if(b.urltype==2){if(gj_plugin_function.checkForWord(a.get(0).innerText)){if(a.get(0).innerText!=b.url){gj_plugin_function.report_svr(b,8);}}else{gj_plugin_function.report_svr(b,7);
}return true;}if(gj_plugin_function.checkForWord(a.get(0).innerText)){if(a.get(0).innerText!=b.url){gj_plugin_function.report_svr(b,8);}return true;}else{gj_plugin_function.report_svr(b,7);
return false;}if(gj_plugin_function.checkForPaper(a.get(0))){return false;}return true;},checkForWord:function(c){c=c.replace(" ... ","");var b=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi;
var a=new RegExp(b);if(c.match(a)){return true;}else{if(gj_plugin_function.checkIllegal(c)){return true;}return false;}},checkForPaper:function(d){var a=false;
var c;var b;if(d.previousSibling==null){return a;}if(d.previousSibling.nodeName=="#text"||d.previousSibling.nodeName=="A"||d.previousSibling.nodeName=="FONT"){if(!document.all){c=d.previousSibling.textContent;
}else{c=d.previousSibling.nodeValue;}if(d.previousSibling.nodeName=="A"){c=d.innerHTML;}if(typeof(c)=="undefined"){return a;}if(c.substr(c.length-1,1)==" "||c.substr(c.length-1,1).charCodeAt()==160||c.substr(c.length-1,1)=="："||c.substr(c.length-1,1)==":"||c=="\n"){return a;
}}a=true;return a;},insertSafeDiv:function(){show_div='<div class="safe_statu" style="text-decoration:none;display:none;">';show_div+='<div><div class="gj_tri"><img src="http://s.pc.qq.com/discuz/image/v2/header_tri.png" /></div><div>';
show_div+='<div class="gj_body">';show_div+='<div class="gj_statu"><div style="display:block;float:left;position: relative; top: -3px;"><img id="gj_show_statu" class="gj_ie6png" src="http://s.pc.qq.com/discuz/image/v2/"></img></div><div class="safe_statu_wording" style="margin-top: 3px;"><span><a id="gj_show_wording" style="text-decoration:none;">safe_statu_wording</a></span></div></div>';
show_div+='<div style="display:block;clear:both;margin-top:0px;"></div>';show_div+='<div id="gj_operate" style="position:relative; top: 4px;"></div>';show_div+="</div>";
show_div+='<div class="gj_bottom">';show_div+='<!-- <div id="gj_show_info">show_info</div> -->';show_div+='<div id="gj_show_gj" style="display:block;clear:both;padding-top:3px;">show_gj<a style="text-decoration:none;color:#373737"> 从此上网不被骗！ </a>show_operate</div>';
show_div+="</div>";show_div+="</div>";jQuery("body").append(show_div);},loadjscssfile:function(a,b){if(b=="js"){var c=document.createElement("script");
c.setAttribute("type","text/javascript");c.setAttribute("src",a);}else{if(b=="css"){var c=document.createElement("link");c.setAttribute("rel","stylesheet");
c.setAttribute("type","text/css");c.setAttribute("href",a);}}if(typeof c!="undefined"){document.getElementsByTagName("head")[0].appendChild(c);}}};jQuery(document).ready(function(){gj_plugin.js_runtime=(new Date()).valueOf();
var b=jQuery("#postlist .pcb table").not(".locked").find("a").filter(function(){if(jQuery(this).parent(".locked").size()!=0){return false;}if(jQuery(this).children(".locked").size()!=0){return false;
}if(jQuery(this).attr("title")!=""&&typeof(jQuery(this).attr("title"))!="undefined"){return false;}if(jQuery(this).find("image").size()!=0){return false;
}if(jQuery(this).find("img").size()!=0){return false;}if(jQuery(this).attr("href").substr(0,10)=="javascript"){return false;}if(jQuery(this).attr("href")==""){return false;
}if(jQuery(this).attr("href").indexOf("@")!=-1){return false;}if(jQuery(this).attr("href")=="#"){return false;}if(typeof(jQuery(this).attr("style"))!="undefined"&&jQuery(this).attr("style")!=""){return false;
}if(jQuery(this).attr("onclick")!=null){return false;}if(!gj_plugin_function.checkIllegal(jQuery(this).attr("href"))){return false;}if(jQuery(this).html()==""){return false;
}if(jQuery(this).parent().attr("id").indexOf("attach")!=-1){return false;}return true;});var c=0;var d=[];var a=0;var f=0;b.each(function(){jQuery(this).attr("class","gj_safe_a");
d[c]=[jQuery(this).attr("href"),c];c++;a++;if(a==50){gj_plugin_function.getBatchUrlType(d,"a",f);d=[];a=0;f=c;gj_plugin.pack++;}});if(a!=0){gj_plugin_function.getBatchUrlType(d,"a",f);
gj_plugin.pack++;}gj_plugin.pack_finish=1;gj_plugin_function.insertSafeDiv();});