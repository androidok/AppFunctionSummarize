webpackJsonp([2],{1108:function(t,e){},1109:function(t,e){},1110:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.state.route,n=e.params.id,i=W(t),o=i.actionType.FETCH;return t.dispatch(o,n)}function s(t){var e=W(t),n=e.actionType.RESET;t.dispatch(n)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(49),a=i(r),c=n(625),l=n(280),u=(i(l),n(50)),d=n(5),f=n(19),p=n(54),h=n(48),m=n(262),v=n(676),y=n(93),C=n(622),g=n(713),_=n(636),b=n(621),w=n(265),k=n(1111),x=i(k),E=n(36),T=i(E),L=n(261),O=i(L),S=n(618),M=i(S),$=n(714),P=i($),F=n(730),U=i(F),R=n(739),I=i(R),j=n(626),A=i(j),N=n(637),V=i(N),z=n(718),K=i(z),q=n(726),B=i(q),W=function(t){return t.state.view.column},D=T.default.eventType.ROOT_CONTAINER_CLICK;e.default={data:function(){return{following:!1,page:1,pageSize:20,recommendEntries:[],newCommentContent:"",isMobile:!1,isWeixin:!1,isCollectPopupVisible:!1,bannerInfo:x.default,sticky:!1,isViewNavOnTop:!1,fixedIsShow:!1}},components:{Avatar:O.default,UserPopover:M.default,RelatedEntry:P.default,CommentForm:U.default,CommentList:I.default,CollectPopup:A.default,AppDownload:V.default,RelatedEntryAside:K.default,ArticleActionsFixed:B.default},computed:(0,a.default)({},(0,u.mapGetters)({user:d.USER}),{state:function(){return W(this.$store)},column:function(){return this.state.column},entry:function(){return this.state.entry},author:function(){return this.state.author},followed:function(){return this.author.followed},like:function(){return this.entry.liked},authorAvatar:function(){return(0,m.getCroppedImageUrl)(this.author.avatar_large,80,80)},date:function(){return(0,f.formatDate)(this.entry.createdAt,"YYYY 年 MM 月 DD 日")},canEdit:function(){var t=this.user||{};return t.id&&t.id===this.author.id||"admin"===t.role},editLink:function(){return(0,w.getPostEditUrl)(this.column.id)},entryScreenshot:function(){var t=this.entry&&this.entry.screenshot;return t&&!this.column.isTitleImageFullscreen?"url("+t+")":null},entryFullscreenScreenshot:function(){return this.entry&&this.entry.screenshot},entryTitle:function(){return this.entry&&this.entry.title},entryLikeCount:function(){return this.entry&&this.entry.collectionCount},entryView:function(){return this.state.entryView},entryViewContent:function(){var t=this.entryView&&this.entryView.transcodeContent;return t&&(0,g.processArticleHtml)(t)},entryOriginalUrl:function(){return this.entry&&this.entry.originalUrl},entryTags:function(){return this.entry?this.entry.tags:[]},likeIcon:function(){return"https://gold-cdn.xitu.io/images/post/"+(this.like?"collection_press":"collection")+".svg"},postSharePocketUrl:function(){return"http://getpocket.com/edit?url="+encodeURIComponent(this.entryOriginalUrl)},postShareEvernoteUrl:function(){return"http://www.addtoany.com/add_to/evernote?linkurl="+encodeURIComponent(this.entryOriginalUrl)+"&linkname="+encodeURIComponent(this.entryTitle)},entryQrFixed:function(){var t=this.$route.params.id,e=(0,y.getLandingUrl)("article-parse",{id:t,type:"post",source:"article_sharefloater",campaign:"share_article"});return(0,c.getQrCodeUrl)(e,{type:10,size:10})},entryQr:function(){var t=this.$route.params.id,e=(0,y.getLandingUrl)("article-parse",{id:t,type:"post",source:"post",campaign:"share_article"});return(0,c.getQrCodeUrl)(e,{type:10,size:10})}}),metaInfo:function(){var t=(0,v.getEntrySEOMeta)(this.entry,this.entryViewContent),e=t.title,n=t.keywords,i=t.description;return{title:e||"专栏",meta:[{vmid:"keywords",name:"keywords",content:n},{vmid:"description",name:"description",content:i}]}},methods:{appDownload:function(){(0,b.recoredAppDownloadClick)("post"),window.open("http://a.app.qq.com/o/simple.jsp?pkgname=com.daimajia.gold","_blank")},toggleDropdown:function(t){(0,h.toggleDropdown)(t)},fetch:function(){return o(this.$store)},reset:function(){return s(this.$store)},onHeaderVisibilityChanged:function(t){this.isViewNavOnTop=!t},toggleLike:function(){this.user||T.default.emit(T.default.eventType.REQUEST_REGISTER),this.$store.dispatch(d.TOGGLE_LIKE_ENTRY,this.entry)},toggleFollow:function(){return this.$store.dispatch(d.TOGGLE_FOLLOW_USER,this.author)},loadMoreLikes:function(){this.$store.dispatch(this.state.likerList.actionType.FETCH_MORE)},blurComment:function(){this.$refs.commentForm.blur()},focusComment:function(){this.$refs.commentForm.focus()},onShouldFetchMoreComment:function(){this.$store.dispatch(this.state.commentList.actionType.FETCH_MORE)},onSubmitedComment:function(){this.refreshCommentList()},refreshCommentList:function(){var t=this.state.commentList.actionType.FORCE_FETCH,e=this.entry.id;this.$store.dispatch(t,{entryId:e})},collect:function(){var t=this;this.$ensureAuthorized().then(function(){return t.isCollectPopupVisible=!0}).catch(function(){})},zoomImages:function(){var t=[].slice.call(this.$el.querySelector(".post-content").querySelectorAll("img"));window.mediumZoom(t)},handleShowFull:function(){this.user||this.isMobile||(document.querySelector(".post-content-container").style.maxHeight=document.querySelector(".post-content").clientHeight/2+"px")},handleFullscreenImages:function(){},shareToWeibo:function(t){(0,_.shareToWeibo)(this.entry),t?(0,b.recordShareWeiboClick)("article","post_floater"):(0,b.recordShareWeiboClick)("article","post_bottom")},shareToPocket:function(){(0,_.shareToPocket)(this.entry)},shareToEvernote:function(){(0,_.shareToPocket)(this.entry)},recordEntryView:function(){(0,C.recordEntryView)(this.entry)},initEventListener:function(){var t=this;T.default.onVmLife(this,D,function(e,n){t.blurComment()})}},preFetch:function(t){return o(t)},mounted:function(){var t=this;this.entry.createdAt=this.entry.createdAt,"#comment"===this.$route.hash&&this.$refs.commentForm.focus(),this.isMobile=document.body.clientWidth<960,this.isWeixin=(0,p.isInWechatApp)(),this.initEventListener(),this.fetch().then(function(){t.$nextTick(function(){t.zoomImages(),t.handleShowFull(),t.handleFullscreenImages()}),t.recordEntryView()}).catch(function(e){t.$error(e)}),this.removeScrollListener=(0,h.onScroll)(window,function(){var e=t.$refs.postMeta.getBoundingClientRect().top,n=document.documentElement.clientHeight/2-100;window.pageYOffset<200||e<n?t.fixedIsShow=!1:t.fixedIsShow=!0;var i=t.$refs.aside.getBoundingClientRect(),o=i.height;t.sticky=window.pageYOffset>o+100})},beforeDestroy:function(){this.reset(),this.removeScrollListener()}}},1111:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={url:"/post/58d8e99261ff4b006cd6874d",title:"参加掘金征文赢取千元奖金",content:"本期的征文主题是：聊聊你的最佳实践，程序员在开发过程中，随着经验的积累，往往会形成对某类难题的最佳解决方式，这种方式通常比其他解决方式都更有效，甚至成为了某种问题的标准解决方案。所以本期主题，我们希望大家来分享一下自己的最佳实践。"}},1112:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view-container",{on:{headerVisibilityChanged:t.onHeaderVisibilityChanged}},[i("div",{staticClass:"root-view-bg"}),i("div",{staticClass:"view column-view"},[i("div",{staticClass:"columen-view-main"},[i("div",{staticClass:"container entry-view"},[t.entry.id?t._e():i("div",{staticClass:"post-placeholder"},[i("img",{staticClass:"fade",attrs:{src:"https://gold-cdn.xitu.io/images/post-loading.png"}})]),t.entry.id?i("app-link",{staticClass:"post-author clearfix",attrs:{to:t.$userRoute(t.author),blank:!0}},[i("avatar",{staticClass:"avatar",attrs:{user:t.author}}),i("div",{staticClass:"author-info float-left"},[i("div",{staticClass:"author-name text-pointer"},[t._v(t._s(t.author.username))]),i("div",{staticClass:"author-meta"},[t._v(t._s(t.date)),t.canEdit?i("a",{staticClass:"post-edit text-a",attrs:{href:t.editLink},on:{click:function(t){t.stopPropagation()}}},[t._v(" · 编辑")]):t._e()])])],1):t._e()],1),t.entryScreenshot?i("div",{staticClass:"post-hero",style:{"background-image":t.entryScreenshot}}):t._e(),t.column.isTitleImageFullscreen?i("img",{staticClass:"post-hero-full",attrs:{src:t.entryFullscreenScreenshot}}):t._e(),t.entry.id?i("div",{staticClass:"container entry-view"},[i("h1",{staticClass:"post-title"},[t._v(t._s(t.entryTitle))]),i("div",{staticClass:"post-info-mobile"},[i("div",{staticClass:"action create-at-action"},[t._v(t._s(t.date))]),i("app-link",{staticClass:"action text-a",attrs:{to:t.$userRoute(t.author),blank:!0}},[t._v(t._s(t.author.username))])],1),i("div",{staticClass:"post-content-container",class:{hidden:!t.user}},[i("div",{staticClass:"entry-content post-content",domProps:{innerHTML:t._s(t.entryViewContent)}})]),t.user?t._e():i("div",{staticClass:"show-full"}),t.user?t._e():i("div",{staticClass:"show-full-block"},[i("div",{staticClass:"show-full-btn",on:{click:function(e){t.$requestQuickLogin("一键登录展开全文")}}},[t._v("展开全文")])])]):t._e(),t.entryTags?i("div",{staticClass:"post-tags tags cloud"},t._l(t.entryTags,function(e){return i("div",{staticClass:"tag"},[i("app-link",{staticClass:"tag-link",attrs:{to:t.$tagRoute(e),blank:!0}},[t._v(t._s(e.title))])],1)})):t._e(),i("div",{ref:"postMeta",staticClass:"post-meta"},[i("div",{staticClass:"actions"},[i("div",{staticClass:"action",on:{click:t.toggleLike}},[i("img",{staticClass:"inline square inline-icon",attrs:{src:t.likeIcon}}),t.entryLikeCount>0?i("span",{staticClass:"like-count",class:{true:!!t.like}},[t._v(t._s(t.entryLikeCount))]):t._e()])]),t.user&&!t.isWeixin?i("div",{staticClass:"actions secondary sparse"},[t.entry.collectStateError?t._e():i("div",{ref:"collectBtn",staticClass:"action collection",attrs:{title:"收藏"},on:{click:t.collect}},[t.entry.collected?t._e():i("img",{staticClass:"inline square inline-icon collect",attrs:{src:n(1113)}}),t.entry.collected?i("img",{staticClass:"inline square inline-icon collect",attrs:{src:n(1114)}}):t._e(),t.isCollectPopupVisible?i("collect-popup",{attrs:{entry:t.entry},on:{close:function(e){t.isCollectPopupVisible=!1}}}):t._e()],1),i("div",{staticClass:"action",attrs:{title:"评论"},on:{click:function(e){e.stopPropagation(),t.focusComment(e)}}},[i("img",{staticClass:"inline square inline-icon",attrs:{src:n(1115)}})]),i("div",{staticClass:"action dropdown share-dropdown",attrs:{title:"分享"},on:{click:function(e){t.toggleDropdown(e)}}},[i("img",{staticClass:"inline square inline-icon dropdown-active",attrs:{src:n(1116)}}),i("ul",{staticClass:"dropdown-list",attrs:{title:""}},[i("div",{staticClass:"dropdown-hint"},[t._v("分享到...")]),i("li",[i("a",{staticClass:"share-link",on:{click:function(e){e.preventDefault(),t.shareToWeibo(!1)}}},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/weibo.svg"}}),i("span",[t._v("新浪微博")])])]),i("li",{staticClass:"dropdown-wechat-share share-link"},[i("a",{staticClass:"share-link"},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/weixin.svg"}}),i("span",[t._v("微信")]),i("div",{staticClass:"wechat-qr-box"},[i("div",{staticClass:"qr-box-title text-muted text-center"},[t._v("微信扫一扫")]),i("img",{staticClass:"entry-qr",attrs:{src:t.entryQr}})])])]),i("li",[i("a",{staticClass:"share-link",attrs:{href:t.postSharePocketUrl,target:"_blank"}},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/pocket.svg"}}),i("span",[t._v("Pocket")])])]),i("li",[i("a",{staticClass:"share-link",attrs:{href:t.postShareEvernoteUrl,target:"_blank"}},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/evernote.svg"}}),i("span",[t._v("Evernote")])])])])])]):t._e(),t.user||t.isWeixin?t._e():i("div",{staticClass:"actions secondary"},[i("div",{staticClass:"action text-gray"},[t._v("分享到")]),i("a",{staticClass:"action",on:{click:function(e){e.preventDefault(),t.shareToWeibo(!1)}}},[i("img",{staticClass:"inline square inline-icon",attrs:{src:"https://gold-cdn.xitu.io/images/weibo.svg"}})]),i("div",{staticClass:"action dropdown share-dropdown",on:{click:t.toggleDropdown}},[i("img",{staticClass:"inline square inline-icon dropdown-active",attrs:{src:"https://gold-cdn.xitu.io/images/weixin.svg"}}),i("ul",{staticClass:"dropdown-list text-center"},[i("div",{staticClass:"qr-box-title text-muted"},[t._v("微信扫一扫")]),i("img",{staticClass:"entry-qr",attrs:{src:t.entryQr}})])])])]),!t.isMobile&&t.state.likerList.list.length?i("div",{staticClass:"post-like-users"},[i("ul",{staticClass:"users-list"},[t._l(t.state.likerList.list,function(e){return i("li",{staticClass:"users-list-item"},[i("app-link",{attrs:{to:t.$userRoute(e),blank:!0}},[i("user-popover",{attrs:{user:e}},[i("avatar",{staticClass:"avatar",attrs:{user:e}})],1)],1)],1)}),t.state.likerList.canNext?i("li",{staticClass:"users-list-item",on:{click:t.loadMoreLikes}},[i("div",{staticClass:"more-users"},[i("i",{staticClass:"ion-more"})])]):t._e()],2)]):t._e(),i("div",{staticClass:"container bottom-container"},[t.isWeixin?t._e():i("section",{staticClass:"post-author-box"},[i("app-link",{staticClass:"float-left text-pointer",attrs:{to:t.$userRoute(t.author),blank:!0}},[i("avatar",{staticClass:"avatar author-avatar",attrs:{user:t.author}})],1),i("app-link",{staticClass:"author-info float-left text-pointer",attrs:{to:t.$userRoute(t.author),blank:!0}},[i("div",{staticClass:"author-name"},[t._v(t._s(t.author.username))]),i("div",{staticClass:"author-meta"},[i("span",[t._v(t._s(t.author.jobTitle))]),t.author.company&&t.author.jobTitle?i("span",[t._v(" @ ")]):t._e(),i("span",[t._v(t._s(t.author.company))])])]),t.user&&t.user.id!=t.author.id?i("div",{staticClass:"subscribe-button float-right",class:{true:t.followed,loading:t.following},on:{click:t.toggleFollow}}):t._e(),t.user&&t.user.id!=t.author.id?t._e():i("app-link",{staticClass:"to-user-button text-blue text-pointer float-right",attrs:{to:t.$userRoute(t.author),blank:!0}},[t._v("个人主页")])],1),i("section",{staticClass:"wallet-section"},[i("a",{directives:[{name:"link",rawName:"v-link.blank",value:t.bannerInfo.url,expression:"bannerInfo.url",modifiers:{blank:!0}}],staticClass:"text-blue title-text"},[t._v(t._s(t.bannerInfo.title))]),i("div",{staticClass:"sub-text"},[t._v(t._s(t.bannerInfo.content))])]),t.state.relatedEntryList.length?i("section",{staticClass:"about-section"},[i("div",{staticClass:"box-title"},[t._v("相关文章")]),i("ul",{staticClass:"recommend-entries-box"},t._l(t.state.relatedEntryList,function(t){return i("li",{staticClass:"item"},[i("related-entry",{staticClass:"related-entry",attrs:{entry:t}})],1)}))]):t._e(),i("section",{staticClass:"comments-block"},[i("div",{staticClass:"box-title"},[t._v("评论")]),i("div",{staticClass:"comment-box"},[i("comment-form",{ref:"commentForm",staticClass:"comment-form",attrs:{id:"comment",user:t.user,entry:t.entry},on:{submited:t.onSubmitedComment}})],1),i("comment-list",{staticClass:"comment-list",attrs:{list:t.state.commentList.list,entry:t.entry},on:{"should-fetch-more":t.onShouldFetchMoreComment}})],1)]),i("div",{staticClass:"weixin-bottom"},[i("img",{staticClass:"logo",attrs:{src:"https://gold-cdn.xitu.io/images/logo-white-background.svg"}}),i("div",{staticClass:"weixin-bottom-title"},[t._v("高质量的技术分享社区")]),i("div",{staticClass:"weixin-bottom-subtitle"},[t._v("开发者 · 设计师 · 产品经理")]),i("a",{attrs:{href:"javascript:void(0);"},on:{click:t.appDownload}},[i("button",{staticClass:"weixin-bottom-download-button"},[t._v("立即下载")])])])]),i("div",{ref:"aside",staticClass:"columen-view-aside",class:{sticky:t.sticky,top:t.isViewNavOnTop}},[i("section",{staticClass:"section download-section shadow"},[i("app-download")],1),i("section",{staticClass:"sticky-section shadow"},[i("app-download",{staticClass:"section"})],1),t.state.relatedEntryList.length?i("section",{staticClass:"section aside-top-section shadow"},[i("header",{staticClass:"aside-header"},[t._v("相关文章")]),i("ul",{staticClass:"aside-list"},t._l(t.state.relatedEntryList,function(t){return i("li",{staticClass:"item"},[i("related-entry-aside",{staticClass:"related-entry-aside",attrs:{entry:t}})],1)}))]):t._e()]),i("div",{staticClass:"columen-view-fixed"},[i("article-actions-fixed",{attrs:{show:t.fixedIsShow,"is-like":t.like,likeCount:t.entryLikeCount,"weixin-share-qr":t.entryQrFixed},on:{shareToWeibo:function(e){t.shareToWeibo(!0)},toggleLike:t.toggleLike}})],1)])])},staticRenderFns:[]}},1113:function(t,e,n){t.exports=n.p+"static/img/collect.4ab2670.svg"},1114:function(t,e,n){t.exports=n.p+"static/img/collected.3452e88.svg"},1115:function(t,e,n){t.exports=n.p+"static/img/comment.19fd3e9.svg"},1116:function(t,e,n){t.exports=n.p+"static/img/share.79cb260.svg"},607:function(t,e,n){function i(t){n(1108),n(1109)}var o=n(16)(n(1110),n(1112),i,"data-v-13f76525",null);t.exports=o.exports},609:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return new d}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),r=i(s),a=n(18),c=i(a),l=n(20),u=i(l);e.createLock=o;var d=function(){function t(){(0,c.default)(this,t),this.busy=!1}return(0,u.default)(t,[{key:"do",value:function(t){var e=this;return this.busy?r.default.resolve():(this.busy=!0,r.default.resolve("function"==typeof t?t():t).then(function(t){return e.busy=!1,t}).catch(function(t){return e.busy=!1,r.default.reject(t)}))}}]),t}()},610:function(t,e,n){function i(t){n(611)}var o=n(16)(n(612),n(613),i,"data-v-009ea7bb",null);t.exports=o.exports},611:function(t,e){},612:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=n(260),r=n(262);e.default={name:"Thumb",props:["url","default","width","height","shrink","format","size","alt","blank"],serverCacheKey:function(t){return(0,o.default)(t).map(function(e){return t[e]}).join(":")},computed:{thumbUrl:function(){var t=this.url||(this.blank?"":this.default||s.defaultThumbUrl);return this.width&&this.height?this.shrink?(0,r.getShrinkedImageUrl)(t,this.width,this.height,{format:this.format}):(0,r.getCroppedImageUrl)(t,this.width,this.height,{format:this.format}):t},thumbStyle:function(){return{backgroundImage:"url("+this.thumbUrl+")",backgroundSize:this.size||"cover"}}}}},613:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thumb",style:t.thumbStyle},[n("img",{staticClass:"hidden",attrs:{src:t.thumbUrl}})])},staticRenderFns:[]}},614:function(t,e,n){"use strict";function i(t){return s.uploadFile(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.uploadFile=i;var o=n(616),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o)},615:function(t,e,n){"use strict";function i(t,e){return o(t).then(s).then(r.bind(null,e))}function o(t){return new c.default(function(e,n){var i=new FileReader;i.onload=function(t){return e(t.target.result)},i.onerror=function(t){return n(t)},i.readAsArrayBuffer(t.slice(0,64))})}function s(t){return Array.prototype.slice.call(new Uint8Array(t)).reduce(function(t,e){return t+e.toString(16)},"")}function r(t,e){for(var n=0;n<l.length;n++)if(l[n].regx.test(e))return-1!==t.indexOf(l[n].name);return!1}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),c=function(t){return t&&t.__esModule?t:{default:t}}(a);e.isValidImageFileType=i;var l=[{name:"jpg",regx:/^ffd8ff/},{name:"gif",regx:/^474946/},{name:"png",regx:/89504e47/},{name:"webp",regx:/57454250/},{name:"bmp",regx:/^424d/},{name:"any",regx:/./}]},616:function(t,e,n){"use strict";function i(t){return r.createTask(t).start()}Object.defineProperty(e,"__esModule",{value:!0}),e.uploadFile=i;var o=n(617),s=function(t){return t&&t.__esModule?t:{default:t}}(o),r=new s.default({bucket:"gold-user-assets"})},617:function(t,e,n){/**
 * juejin-file-uploader v2.0.1
 * (c) 2017 WEBuster
 * @license MIT
 */
!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){var e=t.filename,i=t.tokenUrl,o=t.bucket,s=t.xhr;return n({method:"GET",url:i+"?bucket="+encodeURIComponent(o)+"&filename="+encodeURIComponent(e),xhr:s}).then(function(t){return t.d}).then(function(t){return{token:t.token,key:t.key,url:t.url.https}})}function e(t){var e=t.file,i=t.key,o=t.token,s=t.uploadUrl,r=t.xhr,a=new FormData;return a.append("token",o),a.append("file",e),a.append("key",i),n({method:"POST",url:s,data:a,xhr:r})}function n(t){var e=t.xhr,n=t.method,i=t.url,o=t.data;return new Promise(function(t,s){e.open(n,i,!0),e.responseType="json",e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var n=e.response;t("string"==typeof n?JSON.parse(n):n)}else s(new Error(e.statusText))},e.onerror=function(){s(new Error(e.statusText))},e.send(o)})}function i(t){return r(new Error("upload aborted"),{aborted:!0,reason:t})}var o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function n(t,e){var i=e.bucket,s=e.tokenUrl,r=e.uploadUrl;o(this,n),this.file=t,this.bucket=i,this.tokenUrl=s,this.uploadUrl=r,this.infoXhr=new XMLHttpRequest,this.uploadXhr=new XMLHttpRequest,this.abortError=null}return s(n,[{key:"start",value:function(){var n=this;return t({filename:this.file.name,tokenUrl:this.tokenUrl,bucket:this.bucket,xhr:this.infoXhr}).then(function(t){var i=t.token,o=t.key,s=t.url;return e({key:o,token:i,file:n.file,uploadUrl:n.uploadUrl,xhr:n.uploadXhr}).then(function(){return s})}).catch(function(t){return Promise.reject(n.abortError||t)})}},{key:"abort",value:function(t){this.abortError=i(t),this.infoXhr.abort(),this.uploadXhr.abort()}}]),n}(),c={bucket:"",tokenUrl:"https://cdn-ms.juejin.im/v1/policy/info",uploadUrl:"https://up.qbox.me"};return function(){function t(e){o(this,t),this.config=r(c,e)}return s(t,[{key:"createTask",value:function(t){return new a(t,this.config)}}]),t}()})},618:function(t,e,n){function i(t){n(628)}var o=n(16)(n(629),n(630),i,"data-v-311d2efa",null);t.exports=o.exports},619:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return f.getUserById(t)}function s(t){return _.getUserCollectionCount(t.id).then(function(e){var n=[{name:"like",count:t.collectedEntriesCount},{name:"collection",count:e.total,createdCount:e.created,followedCount:e.followed},{name:"tag",count:t.subscribedTagsCount}];return(-1!==["admin","editor"].indexOf(t.role)||t.postedEntriesCount)&&n.unshift({name:"share",count:t.postedEntriesCount}),(t.isAuthor||t.postedPostsCount)&&n.unshift({name:"article",count:t.postedPostsCount}),n})}function r(t,e,n){var i=(new k.default).page(e).pageSize(n);return C.getUserCreatedCollectionList(t,i)}function a(t,e,n){var i=(new k.default).page(e).pageSize(n);return C.getUserFollowedCollectionList(t,i)}function c(t,e,n,i){var o=(new k.default).pointer(n).pageSize(i).sort(e);return h.getUserColumnEntryList(t,o)}function l(t,e,n,i){var o=(new k.default).pointer(n).pageSize(i).sort(e);return h.getUserSharedEntryList(t,o)}function u(t,e,n){var i=(new k.default).page(e).pageSize(n);return v.getUserSubscribedTagList(t,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.getUserById=o,e.getUserProfileTypeInfoList=s,e.getUserCreatedCollectionList=r,e.getUserFollowedCollectionList=a,e.getUserColumnEntryList=c,e.getUserSharedEntryList=l,e.getUserSubscribedTagList=u;var d=n(42),f=i(d),p=n(9),h=i(p),m=n(41),v=i(m),y=n(67),C=i(y),g=n(92),_=i(g),b=n(4),w=(i(b),n(7)),k=function(t){return t&&t.__esModule?t:{default:t}}(w)},621:function(t,e,n){"use strict";function i(){r.default.exec.bind(r.default,"send","event","share2weibo").apply(null,arguments)}function o(t){r.default.exec("send","event","appDownload",t)}Object.defineProperty(e,"__esModule",{value:!0}),e.recordShareWeiboClick=i,e.recoredAppDownloadClick=o;var s=n(263),r=function(t){return t&&t.__esModule?t:{default:t}}(s)},622:function(t,e,n){"use strict";function i(t){return t&&t.id?c.recordEntryView(t.id).catch(function(t){console.error(t)}):r.default.resolve()}function o(t){return t&&t.id?c.recordEntryPublicView(t.id).catch(function(t){console.error(t)}):r.default.resolve()}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),r=function(t){return t&&t.__esModule?t:{default:t}}(s);e.recordEntryView=i,e.recordEntryPublicView=o;var a=n(623),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(a)},623:function(t,e,n){"use strict";function i(t){return r.recordEntryView(t)}function o(t){return r.recordEntryPublicView(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.recordEntryView=i,e.recordEntryPublicView=o;var s=n(624),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s)},624:function(t,e,n){"use strict";function i(t){return r.default.resolve()}function o(t){return r.default.resolve()}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),r=function(t){return t&&t.__esModule?t:{default:t}}(s);e.recordEntryView=i,e.recordEntryPublicView=o},625:function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,i=void 0===n?6:n,o=e.size,r=void 0===o?6:o,a=e.level,c=void 0===a?"L":a;return(0,s.default)(t,{type:i,size:r,level:c})}Object.defineProperty(e,"__esModule",{value:!0}),e.getQrCodeUrl=i;var o=n(266),s=function(t){return t&&t.__esModule?t:{default:t}}(o)},626:function(t,e,n){function i(t){n(631)}var o=n(16)(n(632),n(634),i,"data-v-e4647de6",null);t.exports=o.exports},627:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return v.updateCollection(t)}function s(t){return r(t).then(function(){return _.uploadFile(t)})}function r(t){return a(t).then(function(){return c(t)})}function a(t){return h.default.resolve().then(function(){if(t.size>E)return h.default.reject(new Error("文件过大"))})}function c(t){return(0,b.isValidImageFileType)(t,x).then(function(t){if(!t)return h.default.reject(new Error("不支持此文件格式"))})}function l(t){return C.deleteCollection(t)}function u(t){return C.createCollection(t)}function d(t){var e="admin"===((0,k.getCurrentUser)()||{}).role,n=e?"admin":"user";console.log(t);var i=t.title,o=t.imageUrl||w.defaultWeiboImageUrl,s="https://juejin.im/collection/"+t.id+"?utm_source=weibo&utm_campaign="+n,r=f(t.author),a=t.own?"我在掘金上创建了一个收藏集「"+i+"」，推荐给你。来自@稀土掘金":"我在掘金上发现了一个收藏集「"+i+"」，作者是@"+r+" ，推荐给你。来自@稀土掘金",c=["http://service.weibo.com/share/share.php","?title="+encodeURIComponent(a),"&url="+encodeURIComponent(s),"&pic="+o].join("");window.open(c,"_blank")}function f(t){return((t.community||{}).weibo||{}).username||t.username}Object.defineProperty(e,"__esModule",{value:!0});var p=n(2),h=function(t){return t&&t.__esModule?t:{default:t}}(p);e.updateCollection=o,e.uploadBackgroundImageFile=s,e.deleteCollection=l,e.createCollection=u,e.shareToWeibo=d;var m=n(92),v=i(m),y=n(67),C=i(y),g=n(614),_=i(g),b=n(615),w=n(260),k=n(4),x=["jpg","png"],E=1048576},628:function(t,e){},629:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(619),s=n(609),r=n(261),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={components:{Avatar:a.default},props:["userId"],data:function(){return{user:null,followLock:(0,s.createLock)(),visible:!1,top:0,left:0}},computed:{popoverStyle:function(){return{top:this.top+"px",left:this.left+"px"}},position:function(){return this.user&&(this.$userPosition(this.user)||this.user.self_description||"暂无简介")},self:function(){return this.user&&this.user.self},followed:function(){return this.user&&this.user.followed}},methods:{fetch:function(){var t=this;return(0,o.getUserById)(this.userId).then(function(e){t.user=e})},toggleFollow:function(){var t=this;this.followLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(i.TOGGLE_FOLLOW_USER,t.user).catch(function(e){t.$error(e)})}).catch(function(){})})},showPopover:function(t){var e=this;clearTimeout(this.hideToken),this.showToken=setTimeout(function(){e.fetch().then(function(){e.showToken&&(e.visible=!0,e.$nextTick(function(){var n=t.target.getBoundingClientRect(),i=e.$refs.popover,o=i.offsetWidth,s=i.offsetHeight,r=n.left-o/2+20,a=n.top-s-10;a<60&&(r=n.left-10-o,a=n.top-s/2+10),r=Math.max(0,r),e.left=r,e.top=a}))})},300)},hidePopover:function(){var t=this;clearTimeout(this.showToken),this.showToken=null,this.hideToken=setTimeout(function(){t.popoverTimeout=null,t.visible=!1},300)}}}},630:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-popover-box",on:{mouseenter:function(e){t.showPopover(e)},mouseleave:t.hidePopover}},[t.visible?n("div",{ref:"popover",staticClass:"user-popover",style:t.popoverStyle},[n("div",{staticClass:"info-row"},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user}})],1),n("div",{staticClass:"user-info"},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.user),blank:!0}},[t._v(t._s(t.user.username))]),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1)],1),n("div",{staticClass:"meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.postedEntriesCount||0))]),n("div",{staticClass:"title"},[t._v("分享")])]),n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followersCount||0))]),n("div",{staticClass:"title"},[t._v("关注者")])]),n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.totalCollectionsCount||0))]),n("div",{staticClass:"title"},[t._v("获得喜欢")])])]),t.self?t._e():n("button",{staticClass:"follow-btn",class:{followed:t.followed},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}},[t._v(t._s(t.followed?"已关注":"关注"))])])]):t._e(),t._t("default")],2)},staticRenderFns:[]}},631:function(t,e){},632:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(36),s=(i(o),n(48)),r=n(5),a=n(67),c=(n(633),n(627)),l=n(609),u=n(51),d=n(610),f=i(d);e.default={components:{Thumb:f.default},props:["entry"],data:function(){return{list:[],page:1,loading:!1,filled:!1,creating:!1,isNewFormVisible:!1,newCollectionTitle:"",collectLock:(0,l.createLock)()}},computed:{empty:function(){return!this.list.length&&!this.loading},canCreate:function(){return!!this.newCollectionTitle}},methods:{close:function(){this.$emit("close")},showNewForm:function(){var t=this;this.isNewFormVisible=!0,this.$nextTick(function(){t.$refs.titleInput.focus()})},init:function(){this.fetchList(),this.initEventListener()},initEventListener:function(){var t=this;(0,s.onScrollBottomOffsetChange)(this.$refs.list,function(e){e<50&&t.fetchList()})},fetchList:function(){var t=this;this.loading||this.filled||(this.loading=!0,(0,a.getCurrentUserCollectionListForAddingEntry)(this.entry.id,this.page).then(function(e){t.list=(0,u.unique)(t.list.concat(e),function(t){return t.id}),t.page++,t.loading=!1,t.filled=0===e.length}).catch(function(e){t.loading=!1,t.$error(e)}))},createCollection:function(){var t=this;if(!this.creating){this.creating=!0;var e=this.newCollectionTitle.trim();if(e)return(0,c.createCollection)({title:e}).then(function(e){return t.toggleCollect(e).then(function(){t.list.unshift(e),t.$refs.list.scrollTop=0,t.isNewFormVisible=!1,t.newCollectionTitle="",t.creating=!1})}).catch(function(e){t.$error(e),t.creating=!1})}},toggleCollect:function(t){return this.$store.dispatch(r.TOGGLE_COLLECT_ENTRY,{entry:this.entry,collection:t})},onCollectionClick:function(t){var e=this;this.collectLock.do(function(){return e.toggleCollect(t).then(function(){return setTimeout(function(){e.close()},300)})})}},mounted:function(){this.init()}}},633:function(t,e,n){"use strict";function i(t){return t?t.length>20?r.default.reject("标题要在20个字符以内"):r.default.resolve():r.default.reject("标题不能为空")}function o(t){return t?t.length>100?r.default.reject("描述要在100个字符以内"):r.default.resolve():r.default.reject("描述不能为空")}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),r=function(t){return t&&t.__esModule?t:{default:t}}(s);e.titleValidator=i,e.descriptionValidator=o},634:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"collect-popup-box",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[i("div",{staticClass:"mask",on:{click:t.close}}),i("div",{ref:"popup",staticClass:"collect-popup"},[i("div",{staticClass:"title"},[t._v("添加到收藏集")]),i("ul",{ref:"list",staticClass:"collection-list"},[t._l(t.list,function(e){return i("li",{staticClass:"item",on:{click:function(n){t.onCollectionClick(e)}}},[i("div",{staticClass:"item-block"},[i("thumb",{staticClass:"thumb",attrs:{url:e.imageUrl,width:50,height:50}}),i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"entry-count"},[t._v(t._s(e.entryCount))])],1),i("div",{staticClass:"item-block"},[i("button",{staticClass:"collect-icon",class:{collected:e.isIn},style:{display:e.isIn?"block":""}})])])}),t.empty?i("div",{staticClass:"empty"},[i("img",{staticClass:"empty-icon",attrs:{src:n(635)}}),i("div",{staticClass:"empty-title"},[t._v("点击下方文字新建收藏集")])]):t._e()],2),i("div",{staticClass:"action-box"},[t.isNewFormVisible?i("form",{staticClass:"new-form",on:{submit:function(e){e.preventDefault(),t.createCollection(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newCollectionTitle,expression:"newCollectionTitle"}],ref:"titleInput",staticClass:"title-input",attrs:{disabled:t.creating,maxlength:"20"},domProps:{value:t.newCollectionTitle},on:{input:function(e){e.target.composing||(t.newCollectionTitle=e.target.value)}}}),i("button",{staticClass:"submit-btn",attrs:{disabled:!t.canCreate||t.creating},on:{click:function(e){e.preventDefault(),t.createCollection(e)}}},[t._v("添加")])]):i("button",{staticClass:"new-btn",on:{click:t.showNewForm}},[t._v("新建收藏集")])])])])},staticRenderFns:[]}},635:function(t,e,n){t.exports=n.p+"static/img/collection.77d703d.svg"},636:function(t,e,n){"use strict";function i(t){var e="admin"===((0,c.getCurrentUser)()||{}).role,n=e?"admin":"user",i=o(t.user),s=t.title+" - "+i+" - 掘金专栏",r=t.originalUrl+"?utm_source=weibo&utm_campaign="+n,l=t.screenshot||a.defaultWeiboImageUrl,u=["http://service.weibo.com/share/share.php","?title="+encodeURIComponent(s),"&url="+encodeURIComponent(r),"&pic="+l].join("");window.open(u,"_blank")}function o(t){return((t.authData||{}).weibo||{}).nickname||t.username}function s(t){var e=["https://getpocket.com/edit","?url="+encodeURIComponent(t.originalUrl)].join("");window.open(e,"_blank")}function r(t){var e=["https://www.addtoany.com/add_to/evernote","?linkurl="+encodeURIComponent(t.originalUrl),"&linkname="+encodeURIComponent(t.title)].join("");window.open(e,"_blank")}Object.defineProperty(e,"__esModule",{value:!0}),e.shareToWeibo=i,e.shareToPocket=s,e.shareToEvernote=r;var a=n(260),c=n(4)},637:function(t,e,n){function i(t){n(638)}var o=n(16)(n(639),n(647),i,"data-v-151dc5e1",null);t.exports=o.exports},638:function(t,e){},639:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={timelineIndex:n(640),columnIndex:n(641),collectionIndex:n(642),exploreIndex:n(643),entryPublic:n(644),entryDetail:n(645),column:n(646)};e.default={components:{},props:["page"],data:function(){return{downloadUrl:""}},mounted:function(){var t=this.$route.name;this.downloadUrl=i[t]}}},640:function(t,e,n){t.exports=n.p+"static/img/timeline.e011f09.png"},641:function(t,e,n){t.exports=n.p+"static/img/zhuanlan.9e7bee2.png"},642:function(t,e,n){t.exports=n.p+"static/img/collections.eec2cd9.png"},643:function(t,e,n){t.exports=n.p+"static/img/explore.2a0f594.png"},644:function(t,e,n){t.exports=n.p+"static/img/entry.7c9ce29.png"},645:function(t,e,n){t.exports=n.p+"static/img/detail.6e4b8cc.png"},646:function(t,e,n){t.exports=n.p+"static/img/post.7cb7332.png"},647:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-download"},[n("div",{staticClass:"qr-box"},[n("img",{staticClass:"qr-img",attrs:{src:t.downloadUrl}})]),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-info"},[n("span",{staticClass:"headline"},[t._v("下载掘金客户端")]),n("span",{staticClass:"desc"},[t._v("只有高手分享的技术社区")])])}]}},668:function(t,e,n){"use strict";function i(t){return s.uploadFile(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.uploadFile=i;var o=n(614),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o)},676:function(t,e,n){"use strict";function i(t,e){t=t||{},e=e||t.parsedContent;var n=t.title||"",i=o(e)||t.content;return{title:n,keywords:s((t.tags||[]).map(function(t){return t.title})),description:r(i)}}function o(t){return(t||"").replace(/<.*?>/g,"")}function s(t){return t=t||[],t.join(",").replace(/[\r\n\s]+/g," ")}function r(t){return t=(t||"").trim().slice(0,130),t.replace(/[\r\n\s]+/g," ")}Object.defineProperty(e,"__esModule",{value:!0}),e.getEntrySEOMeta=i,e.toKeywords=s,e.toDescription=r;n(267)},710:function(t,e,n){function i(t){n(745)}var o=n(16)(n(746),n(761),i,"data-v-746db1b2",null);t.exports=o.exports},711:function(t,e,n){t.exports=n.p+"static/img/oval-sub-comment.3675eb0.svg"},713:function(t,e,n){"use strict";function i(t){var e=a.default.load(t,{decodeEntities:!1});return s(e),o(e),e.html()}function o(t){t("a[href]").each(function(){var e=t(this),n=e.attr("href");n&&0!==n.indexOf("#")&&e.attr({href:(0,c.getRedirectUrl)(n),target:"_blank",rel:"nofollow noopener noreferrer"})})}function s(t){t("script").remove(),t("link").remove(),t("meta").remove()}Object.defineProperty(e,"__esModule",{value:!0}),e.processArticleHtml=i;var r=n(276),a=function(t){return t&&t.__esModule?t:{default:t}}(r),c=n(93)},714:function(t,e,n){function i(t){n(715)}var o=n(16)(n(716),n(717),i,"data-v-9db545a6",null);t.exports=o.exports},715:function(t,e){},716:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(610),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={components:{Thumb:o.default},props:["entry"]}},717:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related-entry"},[n("app-link",{staticClass:"entry-link",attrs:{to:t.$entryDetailRoute(t.entry),blank:!0}},[n("thumb",{staticClass:"thumb",attrs:{url:this.entry.screenshot}}),n("div",{staticClass:"info"},[n("div",{staticClass:"row title-row"},[n("span",{staticClass:"title"},[t._v(t._s(t.entry.title))])]),n("div",{staticClass:"row meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"meta user"},[n("div",{staticClass:"username"},[t._v(t._s(t.entry.user.username))])]),t.entry.collectionCount?n("li",{staticClass:"meta like"},[n("div",{staticClass:"icon icon-likes iconfont icon-xlcollection"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.collectionCount))])]):t._e(),t.entry.commentsCount?n("li",{staticClass:"meta comment"},[n("div",{staticClass:"icon icon-comments iconfont icon-xlchatbox"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.commentsCount))])]):t._e()])])])],1)],1)},staticRenderFns:[]}},718:function(t,e,n){function i(t){n(719)}var o=n(16)(n(720),n(721),i,"data-v-2b5b4e9e",null);t.exports=o.exports},719:function(t,e){},720:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(610),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={components:{Thumb:o.default},props:["entry"]}},721:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related-entry-aside"},[n("app-link",{staticClass:"title",attrs:{to:t.$entryDetailRoute(t.entry),blank:!0}},[t._v(t._s(t.entry.title))]),n("ul",{staticClass:"meta-list"},[t.entry.collectionCount?n("li",{staticClass:"meta like"},[n("div",{staticClass:"icon ion-heart"}),n("span",{staticClass:"count"},[t._v(t._s(t.entry.collectionCount))])]):t._e(),t.entry.commentsCount?n("li",{staticClass:"meta comment"},[n("div",{staticClass:"icon ion-chatbox"}),n("span",{staticClass:"count"},[t._v(t._s(t.entry.commentsCount))])]):t._e()])],1)},staticRenderFns:[]}},726:function(t,e,n){function i(t){n(727)}var o=n(16)(n(728),n(729),i,"data-v-1407612e",null);t.exports=o.exports},727:function(t,e){},728:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={components:{},props:["show","isLike","likeCount","weixinShareQr"],data:function(){return{canLike:!0}},computed:{isPost:function(){return"column"===this.$route.name}},methods:{toggleLike:function(){var t=this;this.canLike&&(this.canLike=!1,this.$emit("toggleLike"),setTimeout(function(){t.canLike=!0},500))},shareToWeibo:function(){this.$emit("shareToWeibo")}},mounted:function(){}}},729:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"articles-actions-fixed",class:{show:t.show}},[n("li",[n("div",{staticClass:"action shadow action-like",class:{"action-like-active":t.isLike},on:{click:t.toggleLike}}),n("div",{staticClass:"like-count align-center"},[t._v(t._s(t.likeCount))])]),n("li",[t.isPost?n("a",{staticClass:"action shadow action-comment",attrs:{href:"#comment"}}):t._e()]),n("li",[n("a",{staticClass:"action shadow action-weibo",on:{click:function(e){e.preventDefault(),t.shareToWeibo(e)}}})]),n("li",[n("div",{staticClass:"action shadow action-weixin"}),n("div",{staticClass:"wx-qr-img"},[n("img",{attrs:{src:t.weixinShareQr}})])])])},staticRenderFns:[]}},730:function(t,e,n){function i(t){n(731)}var o=n(16)(n(732),n(738),i,"data-v-efcd2e56",null);t.exports=o.exports},731:function(t,e){},732:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=i(o),r=n(5),a=n(733),c=i(a),l=n(261),u=i(l),d=n(734),f=i(d);e.default={components:{Avatar:u.default,ImageUploader:f.default},props:["user","entry","vote"],data:function(){return{content:"",isActionBoxVisible:!1,submitting:!1,metaKey:!1,ctrlKey:!1,enterKey:!1}},watch:{content:function(t){t&&!this.user&&this.$requestRegister()}},methods:{focus:function(){this.$refs.input.focus()},blur:function(){this.content||(this.isActionBoxVisible=!1)},submit:function(){var t=this,e=this.entry,n=this.content.trim();return this.user?n?(this.submitting=!0,void this.uploadImage().then(function(i){return t.$store.dispatch(r.SUBMIT_COMMENT,{entry:e,content:n,imageUrl:i})}).then(function(){t.$refs.imageUploader.cleanFile(),t.content="",t.submitting=!1,t.$emit("submited")}).catch(function(e){t.submitting=!1,t.$error(e)})):void this.$alert("评论不能为空"):void this.$requestRegister()},uploadImage:function(){return this.$refs.imageUploader.file?this.$refs.imageUploader.upload():s.default.resolve()},listenerKeykown:function(t){var e={17:"ctrlKey",91:"metaKey",93:"metaKey",224:"metaKey",13:"enterKey"},n=e[t.keyCode];n&&(this[n]=!0)},listenerKeyup:function(t){this.ctrlKey=!1,this.metaKey=!1,this.enterKey=!1},quickSubmit:function(t){(this.metaKey||this.ctrlKey)&&this.enterKey&&this.submit()}},mounted:function(){(0,c.default)(this.$refs.input)}}},733:function(t,e,n){var i,o,s;/*!
	Autosize 3.0.20
	license: MIT
	http://www.jacklmoore.com/autosize
*/
!function(n,r){o=[e,t],i=r,void 0!==(s="function"==typeof i?i.apply(e,o):i)&&(t.exports=s)}(0,function(t,e){"use strict";function n(t){function e(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function n(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function i(){var e=t.style.height,i=n(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="auto";var s=t.scrollHeight+a;if(0===t.scrollHeight)return void(t.style.height=e);t.style.height=s+"px",c=t.clientWidth,i.forEach(function(t){t.node.scrollTop=t.scrollTop}),o&&(document.documentElement.scrollTop=o)}function o(){i();var n=Math.round(parseFloat(t.style.height)),o=window.getComputedStyle(t,null),s=Math.round(parseFloat(o.height));if(s!==n?"visible"!==o.overflowY&&(e("visible"),i(),s=Math.round(parseFloat(window.getComputedStyle(t,null).height))):"hidden"!==o.overflowY&&(e("hidden"),i(),s=Math.round(parseFloat(window.getComputedStyle(t,null).height))),l!==s){l=s;var a=r("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!s.has(t)){var a=null,c=t.clientWidth,l=null,u=function(){t.clientWidth!==c&&o()},d=function(e){window.removeEventListener("resize",u,!1),t.removeEventListener("input",o,!1),t.removeEventListener("keyup",o,!1),t.removeEventListener("autosize:destroy",d,!1),t.removeEventListener("autosize:update",o,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),s.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",d,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",o,!1),window.addEventListener("resize",u,!1),t.addEventListener("input",o,!1),t.addEventListener("autosize:update",o,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",s.set(t,{destroy:d,update:o}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),o()}()}}function i(t){var e=s.get(t);e&&e.destroy()}function o(t){var e=s.get(t);e&&e.update()}var s="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(n){return e[t.indexOf(n)]},set:function(n,i){-1===t.indexOf(n)&&(t.push(n),e.push(i))},delete:function(n){var i=t.indexOf(n);i>-1&&(t.splice(i,1),e.splice(i,1))}}}(),r=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(t){return t},a.destroy=function(t){return t},a.update=function(t){return t}):(a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t)}),t},a.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t}),e.exports=a})},734:function(t,e,n){function i(t){n(735)}var o=n(16)(n(736),n(737),i,"data-v-54e3f196",null);t.exports=o.exports},735:function(t,e){},736:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(615),o=n(668),s=["jpg","png"];e.default={data:function(){return{file:null,url:null}},methods:{showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.file=t,window.URL.revokeObjectURL(this.url),this.url=t?window.URL.createObjectURL(t):null},cleanFile:function(){this.changeFile(null)},onActionBoxClick:function(){this.url?this.cleanFile():this.showFileDialog()},onFileSelected:function(t){var e=this;if(this.$refs.input.value=null,t)return this.isWithVaildSize(t)?void(0,i.isValidImageFileType)(t,s).then(function(n){n?e.changeFile(t):e.$alert("不支持此格式的图片上传")}):void this.$alert("文件过大")},isWithVaildSize:function(t){return t.size<=1048576},upload:function(){return(0,o.uploadFile)(this.file)}}}},737:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-uploader"},[n("input",{ref:"input",staticClass:"input",attrs:{type:"file"},on:{change:function(e){t.onFileSelected(e.target.files[0])}}}),t.url?n("div",{staticClass:"preview-box"},[n("img",{staticClass:"preview",attrs:{src:t.url}}),n("button",{staticClass:"clean-btn",attrs:{title:"移除图片"},on:{click:t.cleanFile}},[n("i",{staticClass:"ion-close-circled"})])]):n("button",{staticClass:"upload-btn",on:{click:t.showFileDialog}},[n("i",{staticClass:"icon ion-image"}),n("span",[t._v("上传图片")])])])},staticRenderFns:[]}},738:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-form",on:{click:function(t){t.stopPropagation()},keyup:t.listenerKeyup,keydown:t.listenerKeykown}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"content-input",attrs:{placeholder:"说说你的看法"},domProps:{value:t.content},on:{focus:function(e){t.isActionBoxVisible=!0},keyup:t.quickSubmit,input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible||t.vote,expression:"isActionBoxVisible || vote"}],staticClass:"action-box"},[n("image-uploader",{directives:[{name:"show",rawName:"v-show",value:t.vote,expression:"vote"}],ref:"imageUploader",staticClass:"image-uploader"}),n("div",{staticClass:"submit-box"},[n("span",{staticClass:"submit-text"},[t._v("Ctrl or ⌘ + Enter")]),n("button",{staticClass:"submit-btn",on:{click:t.submit}},[t._v("评论")])])],1),t.submitting?n("div",{staticClass:"submitting-mask"},[t._v("提交中...")]):t._e()],1)},staticRenderFns:[]}},739:function(t,e,n){function i(t){n(740)}var o=n(16)(n(741),n(764),i,"data-v-51163f89",null);t.exports=o.exports},740:function(t,e){},741:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(36),s=i(o),r=n(48),a=n(742),c=i(a),l=s.default.eventType.ROOT_CONTAINER_SCROLL;e.default={components:{Comment:c.default},props:["list","entry"],methods:{fetchMoreIfConditionIsSatisfied:function(){(0,r.getBottomOffset)(this.$refs.list)>-200&&this.$emit("should-fetch-more")}},mounted:function(){var t=this;s.default.onVmLife(this,l,function(){t.fetchMoreIfConditionIsSatisfied()}),(0,r.onMouseWheel)(this.$refs.list,function(){t.fetchMoreIfConditionIsSatisfied()})}}},742:function(t,e,n){function i(t){n(743)}var o=n(16)(n(744),n(763),i,"data-v-7f6a837b",null);t.exports=o.exports},743:function(t,e){},744:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),s=n(19),r=n(94),a=n(609),c=n(261),l=i(c),u=n(618),d=i(u),f=n(710),p=i(f);e.default={components:{Avatar:l.default,UserPopover:d.default,SubCommentBox:p.default},props:["comment","entry"],data:function(){return{isSubCommentBoxActive:!1,likeLock:(0,a.createLock)()}},computed:{date:function(){return(0,s.getRelativeDateString)(this.comment.createdAt)},displayedLikeCount:function(){return(0,r.getTruncatedNumberString)(this.comment.likesCount)},replyPlaceholder:function(){return"对 "+this.comment.user.username+" 的回复"},toggleSubCommentBtnTitle:function(){var t=this.comment.subCount;return this.isSubCommentBoxActive?"收起评论":t?this.comment.subCount+"条评论":"评论"}},methods:{toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(o.TOGGLE_LIKE_COMMENT,{comment:t.comment,entry:t.entry}).catch(function(e){t.$error(e)})}).catch(function(){})})}},mounted:function(){this.comment.createdAt=this.comment.createdAt}}},745:function(t,e){},746:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!1,i=0;i<e.length;i++)if(t.indexOf(e[i])>0){n=!0;break}return n}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),r=i(s),a=n(2),c=i(a),l=n(5),u=n(747),d=n(609),f=n(48),p=n(36),h=i(p),m=n(748),v=i(m),y=n(752),C=i(y),g=(n(31),h.default.eventType.ROOT_CONTAINER_SCROLL,function(){return{page:1,total:0,list:[],fetchLock:(0,d.createLock)(),replyLock:(0,d.createLock)(),replyForm:{content:"",comment:null},metaKey:!1,ctrlKey:!1,enterKey:!1}});e.default={components:{SubComment:v.default,Pagination:C.default},props:["parent","entry","render"],data:g,computed:{isMobile:function(){return o()},pageSize:function(){return this.isMobile?20:5},replyPlaceholder:function(){var t=((this.replyForm.comment||{}).user||{}).username;return t?"回复 "+t+" ：":"输入评论"},shouldCancelReply:function(){return this.replyForm.comment&&!this.replyForm.content},canReply:function(){return!!this.replyForm.content.trim()},replyBtnTitle:function(){return this.shouldCancelReply?"取消":"评论"},totalPage:function(){return Math.max(Math.ceil(this.total/5),1)},startTime:function(){return this.list.length?this.list[this.list.length-1].createdAt:null},fetching:function(){return this.fetchLock.busy},empty:function(){return!this.list.length&&!this.fetching}},methods:{close:function(){this.$emit("close")},getTarUser:function(t){return t.replyCommentId!==this.parent.id?t.replyUser:null},prepareReply:function(t){this.$refs.replyInput.focus(),this.replyForm.content="",this.replyForm.comment=t},cancelReply:function(){this.replyForm.content="",this.replyForm.comment=null},listenerKeyup:function(t){this.ctrlKey=!1,this.metaKey=!1,this.enterKey=!1},listenerKeykown:function(t){var e={17:"ctrlKey",91:"metaKey",93:"metaKey",224:"metaKey",13:"enterKey"},n=e[t.keyCode];n&&(this[n]=!0)},reply:function(){var t=this;this.replyLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(l.REPLY_COMMENT,{entry:t.entry,parent:t.parent,tar:t.replyForm.comment||t.parent,content:t.replyForm.content.trim()}).then(function(){return t.refresh()}).catch(function(e){t.$error(e)})}).catch(function(){})})},onReplyBtnClick:function(){this.shouldCancelReply?this.cancelReply():this.canReply&&this.reply()},quickSubmit:function(){(this.metaKey||this.ctrlKey)&&this.enterKey&&this.reply()},refresh:function(){this.reset(),this.fetch()},fetch:function(){var t=this;return this.fetchLock.do(function(){return(0,u.getSubCommentList)({commentId:t.parent.id,entryId:t.entry.id,page:t.page,pageSize:t.pageSize}).then(function(e){t.list=e.list,t.total=e.total})}).catch(function(e){t.$error(e)})},gotoPage:function(t){var e=this;this.page=t,this.fetch().then(function(){(0,f.scrollToElement)(e.$refs.subCommentBox,-110)})},fetchMore:function(){var t=this;this.fetchLock.do(function(){return(0,u.getSubCommentList)({commentId:t.parent.id,entryId:t.entry.id,page:t.page+1,pageSize:t.pageSize}).then(function(e){t.page=t.page+1,t.list=t.list.concat(e.list),t.total=e.total}).then(function(){return new c.default(function(t){return window.setTimeout(t,500)})})}).catch(function(e){t.$error(e)})},reset:function(){(0,r.default)(this,g())}},mounted:function(){var t=this;(0,f.onScrollBottomOffsetChange)(this.$refs.subCommentBoxInner,function(e){e<50&&t.fetchMore()}),this.$refs.replyInput.focus(),this.isMobile&&h.default.emit(h.default.eventType.LOCK_ROOT_CONTAINER_SCROLL),this.refresh()},beforeDestroy:function(){this.isMobile&&h.default.emit(h.default.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}}},747:function(t,e,n){"use strict";function i(t){return s.getSubCommentList(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getSubCommentList=i;var o=n(69),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o)},748:function(t,e,n){function i(t){n(749)}var o=n(16)(n(750),n(751),i,"data-v-6fdfc18a",null);t.exports=o.exports},749:function(t,e){},750:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),s=n(261),r=i(s),a=n(618),c=i(a);e.default={components:{Avatar:r.default,UserPopover:c.default},props:["comment","tarUser"],computed:{date:function(){return(0,o.getRelativeDateString)(this.comment.createdAt)}},methods:{reply:function(){this.$emit("reply")}}}},751:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-comment"},[n("user-popover",{staticClass:"user-popover--avatar",attrs:{userId:t.comment.user.id}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user}})],1),n("div",{staticClass:"content-box"},[n("div",{staticClass:"header"},[n("div",{staticClass:"user-info"},[n("user-popover",{staticClass:"user-popover--info",attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username))])],1),n("div",{staticClass:"position"},[t._v(t._s(t.$userPosition(t.comment.user)))])],1)]),n("div",{staticClass:"content"},[t.tarUser?n("span",{staticClass:"text-reply"},[t._v("回复"),n("app-link",{attrs:{to:t.$userRoute(t.tarUser),blank:!0}},[n("span",{staticClass:"username"},[t._v(t._s(t.tarUser.username))])]),t._v("：")],1):t._e(),n("span",{directives:[{name:"parse-url",rawName:"v-parse-url"}],staticClass:"content-html"},[t._v(t._s(t.comment.content))])]),n("div",{staticClass:"footer"},[n("span",{staticClass:"date"},[t._v(t._s(t.date))]),n("a",{staticClass:"reply-btn",attrs:{href:"javascript:void(0)"},on:{click:t.reply}},[t._v("回复")])])])],1)},staticRenderFns:[]}},752:function(t,e,n){function i(t){n(753)}var o=n(16)(n(754),n(760),i,"data-v-2c38f2aa",null);t.exports=o.exports},753:function(t,e){},754:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(755),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=n(51);e.default={props:["current","total"],computed:{canPrev:function(){return this.current>1},canNext:function(){return this.current<this.total},list:function(){var t=this.current,e=this.total;return e<=6?(0,s.getSequence)(1,e):t<=4?[].concat((0,o.default)((0,s.getSequence)(1,4)),[!1,e]):t>=e-4?[1,!1].concat((0,o.default)((0,s.getSequence)(e-4,e))):[1,!1,t,t+1,!1,e]}},methods:{prev:function(){this.update(this.current-1)},next:function(){this.update(this.current+1)},update:function(t){this.$emit("update",t)},onItemClick:function(t){t&&this.update(t)}}}},755:function(t,e,n){"use strict";e.__esModule=!0;var i=n(756),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},756:function(t,e,n){t.exports={default:n(757),__esModule:!0}},757:function(t,e,n){n(58),n(758),t.exports=n(11).Array.from},758:function(t,e,n){"use strict";var i=n(43),o=n(27),s=n(56),r=n(270),a=n(271),c=n(96),l=n(759),u=n(97);o(o.S+o.F*!n(272)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,d,f=s(t),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,y=0,C=u(f);if(v&&(m=i(m,h>2?arguments[2]:void 0,2)),void 0==C||p==Array&&a(C))for(e=c(f.length),n=new p(e);e>y;y++)l(n,y,v?m(f[y],y):f[y]);else for(d=C.call(f),n=new p;!(o=d.next()).done;y++)l(n,y,v?r(d,m,[o.value,y],!0):o.value);return n.length=y,n}})},759:function(t,e,n){"use strict";var i=n(28),o=n(57);t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},760:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"pagination"},[t.canPrev?n("li",{staticClass:"item",on:{click:t.prev}},[t._v("上一页")]):t._e(),t._l(t.list,function(e){return n("li",{staticClass:"item",class:{ellipsis:!e,current:e==t.current},on:{click:function(n){t.onItemClick(e)}}},[t._v(t._s(e||"..."))])}),t.canNext?n("li",{staticClass:"item",on:{click:t.next}},[t._v("下一页")]):t._e()],2)},staticRenderFns:[]}},761:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"subCommentBox",staticClass:"sub-comment-box",class:{"sub-comment-box__m":t.isMobile}},[i("div",{staticClass:"sub-comment-box__top"},[i("div",{staticClass:"icon-close",on:{click:t.close}}),i("h3",[t._v("评论")])]),i("div",{ref:"subCommentBoxInner",staticClass:"sub-comment-box__inner"},[t.empty?i("div",{staticClass:"empty-comment"},[i("dl",[i("dt",[i("img",{attrs:{src:n(762)}})]),i("dd",[t._v("暂无评论")])])]):i("div",[i("ul",{staticClass:"sub-comment-list"},t._l(t.list,function(e){return i("li",{key:e.id,staticClass:"item"},[i("sub-comment",{staticClass:"sub-comment",class:{"sub-comment__m":t.isMobile},attrs:{comment:e,tarUser:t.getTarUser(e)},on:{reply:function(n){t.prepareReply(e)}}})],1)})),t.totalPage>1?i("pagination",{staticClass:"pagination",attrs:{total:t.totalPage,current:t.page},on:{update:t.gotoPage}}):t._e()],1),i("form",{staticClass:"reply-form",on:{submit:function(t){t.preventDefault()},keyup:t.listenerKeyup,keydown:t.listenerKeykown}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyForm.content,expression:"replyForm.content"}],ref:"replyInput",attrs:{maxlength:"1024",placeholder:t.replyPlaceholder},domProps:{value:t.replyForm.content},on:{keyup:t.quickSubmit,input:function(e){e.target.composing||(t.replyForm.content=e.target.value)}}}),i("button",{staticClass:"reply-btn",on:{click:t.onReplyBtnClick}},[t._v(t._s(t.replyBtnTitle))])])])])},staticRenderFns:[]}},762:function(t,e,n){t.exports=n.p+"static/img/empty-comment.40bc8a6.svg"},763:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment"},[i("user-popover",{attrs:{userId:t.comment.user.id}},[i("app-link",{attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[i("avatar",{staticClass:"avatar",attrs:{user:t.comment.user}})],1)],1),i("div",{staticClass:"content-box"},[i("div",{staticClass:"header"},[i("div",{staticClass:"user-info"},[i("user-popover",{attrs:{userId:t.comment.user.id}},[i("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username))])],1),i("div",{staticClass:"position"},[t._v(t._s(t.$userPosition(t.comment.user)))])],1)]),i("div",{staticClass:"content"},[t.comment.reply?i("span",[t._v("回复"),i("router-link",{attrs:{to:t.$userRoute(t.comment.reply.user)}},[i("span",{staticClass:"username"},[t._v(t._s(t.comment.reply.user.username))])]),t._v("：")],1):t._e(),i("span",{directives:[{name:"parse-url",rawName:"v-parse-url"}],staticClass:"content-html"},[t._v(t._s(t.comment.content))])]),i("div",{staticClass:"footer"},[i("button",{staticClass:"like-btn",class:{liked:t.comment.liked},on:{click:t.toggleLike}},[i("i",{staticClass:"collection-arrow-ion ion-arrow-up-b"}),i("span",[t._v(t._s(t.displayedLikeCount))])]),i("span",{staticClass:"sub-comment-btn text-pointer",on:{click:function(e){t.isSubCommentBoxActive=!t.isSubCommentBoxActive}}},[i("img",{staticClass:"icon",attrs:{src:n(711)}}),i("span",{staticClass:"title"},[t._v(t._s(t.toggleSubCommentBtnTitle))]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSubCommentBoxActive,expression:"isSubCommentBoxActive"}],staticClass:"sub-comment--arrow"})]),i("span",{staticClass:"date"},[t._v(t._s(t.date))])]),t.isSubCommentBoxActive?i("sub-comment-box",{staticClass:"sub-comment-box",attrs:{parent:t.comment,entry:t.entry},on:{close:function(e){t.isSubCommentBoxActive=!1}}}):t._e()],1)],1)},staticRenderFns:[]}},764:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{ref:"list",staticClass:"comment-list"},t._l(t.list,function(e,i){return n("li",{key:i,staticClass:"item"},[n("comment",{attrs:{comment:e,entry:t.entry}})],1)}))},staticRenderFns:[]}}});