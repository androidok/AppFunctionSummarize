var extendMethods={getAgvid:function(){void 0==this.loadAgvidIframeFlag&&(this.loadAgvidIframeFlag=0);var b={isLocalStorage:window.localStorage?!0:!1,dataDom:null,initDom:function(){if(!this.dataDom)try{this.dataDom=document.createElement("input");this.dataDom.type="hidden";this.dataDom.style.display="none";this.dataDom.addBehavior("#default#userData");document.body.appendChild(this.dataDom);var a=new Date,a=new Date(a.getTime()+31536E6);this.dataDom.expires=a.toUTCString()}catch(e){return!1}return!0},
set:function(a,b){this.isLocalStorage?window.localStorage.setItem(a,b):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.setAttribute(a,b),this.dataDom.save(this.hname))},get:function(a){if(this.isLocalStorage)return window.localStorage.getItem(a);if(this.initDom())return this.dataDom.load(this.hname),this.dataDom.getAttribute(a)},remove:function(a){this.isLocalStorage?localStorage.removeItem(a):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.removeAttribute(a),this.dataDom.save(this.hname))},
isSupport:function(){return this.isLocalStorage||this.initDom()}};if(!b.isSupport())return"";var d=b.get("agvid"),c=b.get("agvidct");d||(d="");if(!(d&&6048E5>+new Date-1*c)){if(0!=this.loadAgvidIframeFlag)return d;this.loadAgvidIframeFlag=1;c=function(a){-1!=a.origin.indexOf("https://vid.agrant.cn")&&(a=a.data)&&16==a.length&&"V"==a.charAt(a.length-1)&&(b.set("agvid",a),b.set("agvidct",+new Date),this.loadAgvidIframeFlag=2)};"function"==typeof window.addEventListener?window.addEventListener("message",
c,!1):"function"==typeof window.attachEvent&&window.attachEvent("onmessage",c);this.runAtDomready(function(){var a=document.createElement("iframe");a.src="https://vid.agrant.cn/store.html";a.style.display="none";a.width=a.height="0";document.body.appendChild(a)})}return d},jspage_flag:function(){return-1!=window.location.host.indexOf("dyna")?3:"function"==typeof document.querySelectorAll&&1==document.querySelectorAll("a.ttobj").length?1:2}(),init:function(b){var d=document.getElementsByClassName("ttobj");
for(i=0;i<d.length;i++){var c=d[i].href,a="";if(-1!=c.indexOf("ctp"))var a=c.indexOf("ctp"),e=c.slice(a),f=c.slice(0,a),a=e.replace(/(ctp=0|ctp\%3D0)(.+)/,function(a,b,c){return 0<b.indexOf("%")?f+"ctp%3D3"+c:f+"ctp=3"+c});else a=c;d[i].href=a}this.iNowMouseover=b.iNowMouseover||"0";this.iNowMouseout=b.iNowMouseout||"0";this.iNowClick=b.iNowClick||"0";this.iNowMousedown=b.iNowMousedown||"0";this.iNowMouseup=b.iNowMouseup||"0";this.iTouchStart=b.iTouchStart||"0";this.iTouchEnd=b.iTouchEnd||"0";this.iNowVib=
b.iNowVib||"0";this.addClick();1!=this.jspage_flag&&2!=this.jspage_flag||this.showEvent(0,null,"viewability="+this.getViewExplore());this.checkImpression();this.sendPosData("ag_ad",1)},sendPosData:function(b,d){var c=this;if(0==document.documentElement.clientHeight||0==document.documentElement.clientWidth)c.iNowVib=0;b=c.getId(b);c.addEvent(b,"mousedown",function(a){a=a||event;c.iNowMousedown++;a.stopPropagation()});c.addEvent(b,"mouseup",function(a){a=a||event;c.iNowMouseup++;a.stopPropagation()});
1!==this.jspage_flag&&2!==this.jspage_flag||c.addEvent(b,"mouseenter",function(a){c.iNowMouseover++;1==c.iNowMouseover&&c.showEvent(0);a=a||event;a.stopPropagation()});c.addEvent(b,"mouseleave",function(a){a=a||event;c.iNowMouseout++;a.stopPropagation()});c.addEvent(b,"touchstart",function(){c.iTouchStart++});c.addEvent(b,"touchend",function(){c.iTouchEnd++});c.addEvent(b,"click",function(a){a=a||event;c.showEvent(d,a)})},runAtDomready:function(b){var d=document,c=window;if("complete"===d.readyState)b();
else if(d.addEventListener)d.addEventListener("DOMContentLoaded",b,!1),c.addEventListener("load",b,!1);else{d.attachEvent("onreadystatechange",b);c.attachEvent("onload",b);var a=!1;try{a=null===c.frameElement&&d.documentElement}catch(h){}if(a&&a.doScroll)(function k(){if(a){try{a.doScroll("left")}catch(m){return setTimeout(k,50)}b()}})();else{var e=!1,f=d.onload,g=d.onreadystatechange;d.onload=d.onreadystatechange=function(){g instanceof Function&&g();e||d.readyState&&"loaded"!==d.readyState&&"complete"!==
d.readyState||(f instanceof Function&&f(),e=!0,b())}}}},addClick:function(){var b=this,d=document.getElementsByClassName("ttobj");for(i=0;i<d.length;i++){var c=d[i].href,a="";if(-1!=c.indexOf("ctp"))var e=c.indexOf("ctp"),f=c.slice(e),g=c.slice(0,e),a=f.replace(/(ctp=3|ctp\%3D3)(.+)/,function(a,b,c){return 0<b.indexOf("%")?g+"ctp%3D1"+c:g+"ctp=1"+c});else a=c;b.addEvent(d[i],"mousedown",function(a){return function(c){c.preventDefault();c.stopPropagation();1===b.getButton(c)&&(this.href=a,b.showEvent(1,
c))}}(a));b.addEvent(d[i],"click",function(a){return function(c){c.preventDefault();c.stopPropagation();if(0===b.getButton(c)){var d=document.createElement("a");d.setAttribute("href",a);d.setAttribute("target","_blank");document.body.appendChild(d);d.click();document.body.removeChild(d);b.showEvent(1,c)}}}(a));b.addEvent(d[i],"mouseenter",function(b){return function(b){b.stopPropagation();this.href=a}}(a));b.addEvent(d[i],"mouseleave",function(a){return function(b){this.href=a}}(c));b.addEvent(d[i],
"touchstart",function(a){return function(b){this.href=a}}(a));b.addEvent(d[i],"touchend",function(a){return function(b){this.href=a}}(c))}},getButton:function(b){if(b)return b.button;if(window.event)switch(window.event.button){case 1:return 0;case 4:return 1;case 2:return 2;case 0:return 2}},getAddressInfo:function(){function b(){var g="abcdefghij".split("");if(e){if(100<=new Date-a){e=!1;for(var h=c.split(""),k=0;k<h.length;k++)f="|"==h[k]?f+"l":"."==h[k]?f+"k":f+g[h[k]];d.showEvent(0,null,"ttcinfo="+
f)}setTimeout(b,100)}}var d=this,c="",a=new Date,e=!0,f="";d.getAddress(function(b){c=""==c?b:c+"|"+b;a=new Date});setTimeout(b,100)},showEvent:function(b,d,c){1==b&&this.iNowClick++;try{var a=window.navigator.platform}catch(l){a=""}try{var e=window.navigator.language}catch(l){e=""}try{var f=document.body.clientWidth+"-"+document.body.clientHeight}catch(l){f=""}try{var g=window.screen.width+"_"+window.screen.height}catch(l){g=""}try{var h=document.characterSet}catch(l){h=""}try{var k=encodeURIComponent(window.location.href)}catch(l){k=
""}try{var m=(new Date).getTime()}catch(l){m=""}var p=this.iNowClick,q=this.iNowMousedown,r=this.iNowMouseup,t=this.iNowMouseover,u=this.iNowMouseout,v=this.iTouchStart,w=this.iTouchEnd;try{var n=this.getUrlParam("adxreq")}catch(l){n=""}var x=this.iNowVib,a="agvid="+this.getAgvid()+"&atsp="+a+"&atsl="+e+"&atsbr="+f+"&atssr="+g+"&atsc="+h+"&atsdomain="+k+"&atstime="+m+"&ttclk="+p+"&ttmdn="+q+"&ttmup="+r+"&ttmov="+t+"&ttmot="+u+"&adxreq="+n+"&opttype="+b+"&ttvib="+x+"&tttoust="+v+"&tttoued="+w;null!=
c&&"undefined"!=typeof c&&(a+="&"+c);if(0<b){b="";try{d=d||window.event,b=d.clientX+"-"+d.clientY}catch(l){b=""}a+="&ttpos="+b}this.buRequest(a)},buRequest:function(b,d){var c="//t.agrantsem.com/ttker.gif?"+b,a=new Image,e="_request_log_"+Math.floor(2147483648*Math.random()).toString(36);window[e]=a;a.onload=a.onerror=a.onabort=function(){a.onload=a.onerror=a.onabort=null;a=window[e]=null;d&&d(c)};a.src=c},getUrlParam:function(b){b=new RegExp("(^|&)"+(b?b:"")+"=([^&]*)(&|$)");b=window.location.search.substr(1).match(b);
if(null!=b)return unescape(b[2])},getViewExplore:function(){var b,d,c,a,e=navigator.userAgent.toLowerCase(),f;(f=e.match(/rv:([\d.]+)\) like gecko/))||(f=e.match(/msie ([\d\.]+)/))||(f=e.match(/edge\/([\d\.]+)/))||((f=e.match(/firefox\/([\d\.]+)/))?b=f[1]:(f=e.match(/(?:opera|opr).([\d\.]+)/))?d=f[1]:(f=e.match(/chrome\/([\d\.]+)/))?c=f[1]:(f=e.match(/version\/([\d\.]+).*safari/))?a=f[1]:0);e=0;b&&(e=1);c&&(b=f[1].split("."),e=51<=parseInt(b[0])?1:0);d&&(e=1);a&&(e=1);return e},checkImpression:function(){function b(a){3!==
d.jspage_flag&&(d.getViewExplore()?d.showEvent(30):d.showEvent(31))}var d=this,c=!0,a=[],e=!0;window.IntersectionObserver&&window.requestAnimationFrame||(e=!1);if(!e)b("img.jsp?im&imflg=1");else if(window.IntersectionObserver){var f=new IntersectionObserver(function(a){0>=a[0].intersectionRatio||(b("img.jsp?im&imflg=2+rd="+a[0].intersectionRatio),f.disconnect())},{threshold:[0,.25,.5]});f.observe(d.getId("ag_ad"))}else if(window.requestAnimationFrame){var g=function(){var d;var e=a.length;if(3>e)d=
-1;else{d=[];for(var f=1;f<e;f++)d.push(a[f]-a[f-1]);d=d.concat().sort();e=d.shift();d.shift();d=e}20>=d&&0<d?(b("img.jsp?im&imflg=3+minIntval="+d),c=!1):c&&setTimeout(g,100)},h=function(){var b=a.push(+new Date);if(3<b)for(var d=3;d<b;d++)a.shift();c&&window.requestAnimationFrame(h)};window.requestAnimationFrame(h);setTimeout(g,100)}},getAddress:function(b){function d(a){a=/([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(a)[1];void 0===c[a]&&b(a);c[a]=!0}var c={},a=window.RTCPeerConnection||window.mozRTCPeerConnection||
window.webkitRTCPeerConnection,e=!!window.webkitRTCPeerConnection;a||(a=document.createElement("iframe"),a.style.display="none",a.sandbox="allow-same-origin",a.addEventListener("DOMNodeInserted",function(a){a.stopPropagation()},!1),a.addEventListener("DOMNodeInsertedIntoDocument",function(a){a.stopPropagation()},!1),document.body.appendChild(a),e=a.contentWindow,a=e.RTCPeerConnection||e.mozRTCPeerConnection||e.webkitRTCPeerConnection,e=!!e.webkitRTCPeerConnection);var f;e&&(f={iceServers:[{urls:"stun:stun.services.mozilla.com"}]});
if(a){var g=new a(f,{optional:[{RtpDataChannels:!0}]});g.onicecandidate=function(a){a.candidate&&d(a.candidate.candidate)};g.createDataChannel("");g.createOffer(function(a){g.setLocalDescription(a,function(){},function(){})},function(){});setTimeout(function(){g.localDescription.sdp.split("\n").forEach(function(a){0===a.indexOf("a=candidate:")&&d(a)})},600)}},getId:function(b){return document.getElementById(b)},getClassNames:function(b,d){if(document.getElementsByClassName)return document.getElementsByClassName(b);
d=document.getElementsByTagName(d);var c=[];for(i=0;i<d.length;i++){a:for(var a=node[i].className.split(/\s+/),e=0;e<a.length;e++)if(void 0==a[e])break a;b&&c.push(node[i])}return c},addEvent:function(b,d,c){document.addEventListener?b.addEventListener(d,c,!1):b.attachEvent("on"+d,c)},removeEvent:function(b,d,c){document.addEventListener?b.removeEventListener(d,c,!1):b.detachEvent("on"+d,c)}};
extendMethods.init({iNowMouseover:0,iNowMouseout:0,iNowClick:0,iNowMousedown:0,iNowMouseup:0,iTouchStart:0,iTouchEnd:0,iNowVib:1});