/*
  Implement Github like autocomplete mentions
  http://ichord.github.com/At.js

  Copyright (c) 2013 chord.luo@gmail.com
  Licensed under the MIT license.
*/
function pageName(){return"undefined"==typeof pageFullPath?void 0:pageFullPath.split("/").pop()}function pagePath(){return"undefined"==typeof pageFullPath?void 0:pageFullPath.split("/").slice(0,-1).join("/")}function htmlEscape(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function abspath(e,t){t[0]!="/"&&(t="/"+t,e&&(t="/"+e+t));var i=t.split("/"),a=i.slice(0,-1).join("/"),n=i.pop();return[a,n]}(function(){var e=[].slice;(function(e){return"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)})(function(t){var i,a,n,o,s,r,l,c;return r={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13},o={before_save:function(e){var i,a,n,o;if(!t.isArray(e))return e;for(o=[],a=0,n=e.length;n>a;a++)i=e[a],t.isPlainObject(i)?o.push(i):o.push({name:i});return o},matcher:function(e,t){var i,a;return e="(?:^|\\s)"+e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),a=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),i=a.exec(t),i?i[2]||i[1]:null},filter:function(e,t,i){var a,n,o,s;for(s=[],n=0,o=t.length;o>n;n++)a=t[n],~a[i].toLowerCase().indexOf(e)&&s.push(a);return s},remote_filter:null,sorter:function(e,t,i){var a,n,o,s;if(!e)return t;for(s=[],n=0,o=t.length;o>n;n++)a=t[n],a.atwho_order=a[i].toLowerCase().indexOf(e),a.atwho_order>-1&&s.push(a);return s.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){try{return e.replace(/\$\{([^\}]*)\}/g,function(e,i){return t[i]})}catch(i){return""}},highlighter:function(e,t){var i;return t?(i=new RegExp(">\\s*(\\w*)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(i,function(e,t,i,a){return"> "+t+"<strong>"+i+"</strong>"+a+" <"})):e},before_insert:function(e){return e}},l=function(){function e(e,t){this.context=e,this.key=t}var i;return i={},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(e,t){var i,a,n;return i=this.fetch(),a=this.context.get_opt("search_key"),t(i=this.context.callbacks("filter").call(this.context,e,i,a)),i&&i.length>0?void 0:(n=this.context.callbacks("remote_filter"))!=null?n.call(this.context,e,t):void 0},e.prototype.fetch=function(){return i[this.key]||[]},e.prototype.save=function(e){return i[this.key]=this.context.callbacks("before_save").call(this.context,e||[])},e.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},e.prototype.reload=function(e){return this._load(e)},e.prototype._load=function(e){var i=this;return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(e){return i.save(e)}):this.save(e)},e}(),n=function(){function a(e){this.id=e.id||n(),this.settings={},this.pos=0,this.current_flag=null,this.query=null,this.the_flag={},this._views={},this._models={},this.$inputor=t(e),i.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.listen()}var n,s;return s=0,n=function(){return s+=1},a.prototype.listen=function(){var e=this;return this.$inputor.on("keyup.atwho",function(t){return e.on_keyup(t)}).on("keydown.atwho",function(t){return e.on_keydown(t)}).on("scroll.atwho",function(){var t;return(t=e.view)!=null?t.hide():void 0}).on("blur.atwho",function(){var t;return(t=e.view)!=null?t.hide(e.get_opt("display_timeout")):void 0})},a.prototype.set_context_for=function(e){return e=this.current_flag=this.the_flag[e],this.view=this._views[e],this.model=this._models[e],this},a.prototype.reg=function(e,i){var a;return a=this.settings[e]=t.extend({},this.settings[e]||t.fn.atwho["default"],i),this.set_context_for((a.alias?this.the_flag[a.alias]=e:void 0,e=this.the_flag[e]=e)),(this._models[e]=new l(this,e)).reload(a.data),this._views[e]=new c(this,e),this},a.prototype.trigger=function(e,t){var i,a;return t.push(this),i=this.get_opt("alias"),a=i?""+e+"-"+i+".atwho":""+e+".atwho",this.$inputor.trigger(a,t)},a.prototype.super_call=function(){var i,a;a=arguments[0],i=2<=arguments.length?e.call(arguments,1):[];try{return o[a].apply(this,i)}catch(n){return t.error(""+n+" Or maybe At.js doesn't have function "+a)}},a.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||o[e]},a.prototype.get_opt=function(e){try{return this.settings[this.current_flag][e]}catch(t){return null}},a.prototype.rect=function(){var e,t;return e=this.$inputor.caret("offset",this.pos-1),t=document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+t}},a.prototype.catch_query=function(){var e,i,a,n,o,s,r,l=this;return i=this.$inputor.val(),e=this.$inputor.caret("pos"),s=i.slice(0,e),n=null,t.map(this.settings,function(e){var t;return t=l.callbacks("matcher").call(l,e.at,s),null!=t?(n=t,l.set_context_for(e.at)):void 0}),"string"==typeof n&&n.length<=this.get_opt("max_len",20)?(o=e-n.length,a=o+n.length,this.pos=o,n={text:n.toLowerCase(),head_pos:o,end_pos:a},this.trigger("matched",[this.current_flag,n.text])):(r=this.view)!=null&&r.hide(),this.query=n},a.prototype.insert=function(e){var t,i,a,n,o;return t=this.$inputor,e=""+e,a=t.val(),i=this.get_opt("display_flag")?0:this.current_flag.length,n=a.slice(0,(this.query.head_pos||0)-i),o=""+n+e+" "+a.slice(this.query.end_pos||0),t.val(o),t.caret("pos",n.length+e.length+1),t.change()},a.prototype.on_keyup=function(e){switch(e.keyCode){case r.ESC:e.preventDefault(),this.view.hide();break;case r.DOWN:case r.UP:t.noop();break;default:this.look_up()}},a.prototype.on_keydown=function(e){var i;if((i=this.view)!=null?i.visible():void 0)switch(e.keyCode){case r.ESC:e.preventDefault(),this.view.hide();break;case r.UP:e.preventDefault(),this.view.prev();break;case r.DOWN:e.preventDefault(),this.view.next();break;case r.TAB:case r.ENTER:if(!this.view.visible())return;e.preventDefault(),this.view.choose();break;default:t.noop()}},a.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},a.prototype.look_up=function(){var e,i;if(e=this.catch_query())return i=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(e.text,t.proxy(i,this))},a}(),c=function(){function e(e,i){this.context=e,this.key=i,this.id=this.context.get_opt("alias")||"at-view-"+this.key.charCodeAt(0),this.$el=t("<div id='"+this.id+"' class='atwho-view'><ul id='"+this.id+"-ul' class='atwho-view-url'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.bind_event=function(){var e,i=this;return e=this.$el.find("ul"),e.on("mouseenter.view","li",function(i){return e.find(".cur").removeClass("cur"),t(i.currentTarget).addClass("cur")}).on("click",function(e){return i.choose(),e.preventDefault()})},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(){var e;return e=this.$el.find(".cur"),this.context.insert(this.context.callbacks("before_insert").call(this.context,e.data("value"),e)),this.context.trigger("inserted",[e]),this.hide()},e.prototype.reposition=function(){var e,i;return i=this.context.rect(),i.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(i.bottom=i.top-this.$el.height()),e={left:i.left,top:i.bottom},this.$el.offset(e),this.context.trigger("reposition",[e])},e.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},e.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},e.prototype.show=function(){return this.visible()||this.$el.show(),this.reposition()},e.prototype.hide=function(e){var t,i=this;return isNaN(e&&this.visible())?this.$el.hide():(t=function(){return i.hide()},clearTimeout(this.timeout_id),this.timeout_id=setTimeout(t,e))},e.prototype.render=function(e){var i,a,n,o,r,l,c;if(!t.isArray(e||e.length<=0))return this.hide(),void 0;for(this.$el.find("ul").empty(),a=this.$el.find("ul"),r=this.context.get_opt("tpl",s),l=0,c=e.length;c>l;l++)n=e[l],o=this.context.callbacks("tpl_eval").call(this.context,r,n),i=t(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),i.data("atwho-info",n),a.append(i);return this.show(),a.find("li:first").addClass("cur")},e}(),s="<li data-value='${name}'>${name}</li>",a={init:function(e){var i,a;return a=(i=t(this)).data("atwho"),a||i.data("atwho",a=new n(this)),a.reg(e.at,e)},load:function(e,t){return this.set_context_for(e),this.model.load(t)},run:function(){return this.look_up()}},i=t("<div id='atwho-container'></div>"),t.fn.atwho=function(e){var n;return n=arguments,t("body").append(i),this.filter("textarea, input").each(function(){var i;return"object"!=typeof e&&e?a[e]?(i=t(this).data("atwho"))?a[e].apply(i,Array.prototype.slice.call(n,1)):void 0:t.error("Method "+e+" does not exist on jQuery.caret"):a.init.apply(this,n)})},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:s,callbacks:o,search_key:"name",limit:5,max_len:20,display_flag:!0,display_timeout:300}})}).call(this),/*
  Implement Github like autocomplete mentions
  http://ichord.github.com/At.js

  Copyright (c) 2013 chord.luo@gmail.com
  Licensed under the MIT license.
*/
function(){(function(e){return"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)})(function(e){"use strict";var t,i,a,n;return n="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getPos=function(){var e,t,i,a,n,o,s,r,l;return i=this.domInputor,i.focus(),document.selection?(s=document.selection.createRange(),o=0,s&&s.parentElement()===i&&(n=i.value.replace(/\r\n/g,"\n"),a=n.length,l=i.createTextRange(),l.moveToBookmark(s.getBookmark()),t=i.createTextRange(),t.collapse(!1),l.compareEndPoints("StartToEnd",t)>-1?r=e=a:(r=-l.moveStart("character",-a),e=-l.moveEnd("character",-a)))):r=i.selectionStart,r},t.prototype.setPos=function(e){var t,i;return t=this.domInputor,document.selection?(i=t.createTextRange(),i.move("character",e),i.select()):t.setSelectionRange(e,e)},t.prototype.getPosition=function(e){var t,a,n,o,s,r,l,c,d;return t=this.$inputor,n=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},e=e||this.getPos(),l=t.val().slice(0,e),s="<span>"+n(l)+"</span>",s+="<span id='caret'>|</span>",r=new i(t),a=r.create(s).rect(),c=a.left-t.scrollLeft(),d=a.top-t.scrollTop(),o=a.height,{left:c,top:d,height:o}},t.prototype.getOffset=function(t){var i,a,n,o,s,r,l;return i=this.$inputor,document.selection?(s=this.domInputor.createTextRange(),t&&s.move("character",t),r=s.boundingLeft+i.scrollLeft(),l=s.boundingTop+e(window).scrollTop()+i.scrollTop(),a=s.boundingHeight):(n=i.offset(),o=this.getPosition(t),r=n.left+o.left,l=n.top+o.top,a=o.height),{left:r,top:l,height:a}},t}(),i=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],t.prototype.mirrorCss=function(){var t,i=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},e.each(this.css_attr,function(e,a){return t[a]=i.$inputor.css(a)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,i;return e=this.$mirror.find("#caret"),t=e.position(),i={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),i},t}(),a={pos:function(e){return e?this.setPos(e):this.getPos()},position:function(e){return this.getPosition(e)},offset:function(e){return this.getOffset(e)}},e.fn.caret=function(i){var n;return n=new t(this),a[i]?a[i].apply(n,Array.prototype.slice.call(arguments,1)):e.error("Method "+i+" does not exist on jQuery.caret")}})}.call(this),function(){var e;(e=window.GitLab)==null&&(window.GitLab={}),GitLab.GfmAutoComplete={dataSource:"",loadedSource:"",loadedSourceData:null,enableLinkIssue:!0,Emoji:{assetBase:"",template:'<li data-value="${insert}">${name} <img alt="${name}" height="20" src="${image}" width="20" /></li>'},Members:{template:'<li data-value="${name}">${name} <small>${username}</small></li>'},Issues:{template:'<li data-value="${id}"><small>#${id}</small> ${title} </li>'},PullRequests:{template:'<li data-value="${id}"><small>!${id}</small> ${title} </li>'},Code:{template:'<li data-value="${id}"><small>!${id}</small> ${title} </li>'},reload:function(){var e,t,i,a,n,o,s,r,l,c,d,u,h,f,p,m,g,v;for(a=this.loadedSourceData,o=$(".md-input, .edit_note textarea"),s=[],$("#notes-list .note a.avatar, #issue-title a.author").each(function(){return s.push({username:$(this).attr("username"),name:$(this).attr("name")})}),i=[],r=0,u=s.length;u>r;r++){for(t=s[r],n=!1,l=0,h=i.length;h>l;l++)e=i[l],e.username===t.username&&(n=!0);n||i.push(t)}for(v=a.members,c=0,f=v.length;f>c;c++){for(t=v[c],n=!1,d=0,p=i.length;p>d;d++)e=i[d],e.username===t.username&&(n=!0);n||i.push(t)}for(this.Members.data=i,g=0,m=i.length;m>g;g++)t=i[g],this.Members.data[t.name]=t.username;return o.atwho("load","@",i),this.enableLinkIssue&&o.atwho("load","issues",a.issues),o.atwho("load","pull_requests",a.pull_requests),o.atwho("load",":",a.emojis)},setup:function(){var e,t,i,a,n=this;return a=this,i=$(".md-input, .edit_note textarea"),i.atwho({at:":",tpl:this.Emoji.template,callbacks:{before_save:function(e){return $.map(e,function(e){return{name:e,insert:e+":",image:""+n.Emoji.assetBase+"/"+e+".png"}})}}}),i.atwho({at:"@",tpl:this.Members.template,search_key:"search",callbacks:{before_save:function(e){var t,a;return a={},t=$.map(e,function(e){return a[e.name]=e.username,{name:e.name,username:e.username,search:""+e.username+" "+e.name}}),i.data("users",a),t}}}),this.enableLinkIssue&&i.atwho({at:"#",alias:"issues",search_key:"search",tpl:this.Issues.template,callbacks:{before_save:function(e){return $.map(e,function(e){return{id:e.ident,title:htmlSafe(e.title),search:""+e.ident+" "+e.title}})}}}),i.atwho({at:"!",alias:"pull_requests",search_key:"search",tpl:this.PullRequests.template,callbacks:{before_save:function(e){return $.map(e,function(e){return{id:e.iid,title:htmlSafe(e.title),search:""+e.iid+" "+e.title}})}}}),i.atwho({at:"&",alias:"codes",search_key:"search",tpl:this.Code.template,callbacks:{before_save:function(e){return $.map(e,function(e){return{id:e.id,key:htmlSafe(e.key),search:""+e.id+" "+e.key}})}}}),t=function(){var e,t;return e=$(document.activeElement),t=e.prop("selectionStart"),t>0?e.val().charAt(t-1):""},e=function(e){var n,o,s,r,l;if(o=!1,a.dataSource){for(l=[t(),String.fromCharCode(e.charCode)],s=0,r=l.length;r>s;s++)if(n=l[s],["@","#","!",":","&"].indexOf(n)>=0){o=!0;break}if(!o)return null;if(a.dataSource!==a.loadedSource)return a.loadedSource=a.dataSource,$.getJSON(a.dataSource).done(function(e){return a.loadedSourceData=e,a.reload(),i.atwho("run"),i.off(".checkload")});if(a.loadedSourceData)return a.reload()}},i.on("keypress.checkload",e),i.on("keydown.checkload",e)}}}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var e,t;t=this,e=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.result_add_option=function(e){var t,i;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),e.group_array_index!=null&&t.push("group-option"),e.classes!==""&&t.push(e.classes),i=e.style.cssText!==""?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+i+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=(i=e.which)!=null?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,i;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=Math.floor(Math.random()*e.length),t=e.substring(i,i+1)},e.prototype.container_width=function(){var e;return this.options.width!=null?this.options.width:(e=window.getComputedStyle!=null?parseFloat(window.getComputedStyle(this.form_field).getPropertyValue("width")):"undefined"!=typeof jQuery&&null!==jQuery&&this.form_field_jq!=null?this.form_field_jq.outerWidth():this.form_field.getWidth(),e+"px")},e.browser_is_supported=function(){var e;return window.navigator.appName==="Microsoft Internet Explorer"?null!==(e=document.documentMode)&&e>=8:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),t.AbstractChosen=e}.call(this),function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return e.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,a,n,o,s;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),o=e.childNodes,s=[],a=0,n=o.length;n>a;a++)i=o[a],s.push(this.add_option(i,t,e.disabled));return s},e.prototype.add_option=function(e,t,i){return e.nodeName.toUpperCase()==="OPTION"?(e.text!==""?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e}(),e.select_to_array=function(t){var i,a,n,o,s;for(a=new e,s=t.childNodes,n=0,o=s.length;o>n;n++)i=s[n],a.add_node(i);return a.parsed},this.SelectParser=e}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var e,t,i,a,n={}.hasOwnProperty,o=function(e,t){function i(){this.constructor=e}for(var a in t)n.call(t,a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};i=this,e=jQuery,e.fn.extend({chosen:function(i){return AbstractChosen.browser_is_supported()?this.each(function(){var a;return a=e(this),a.hasClass("chzn-done")?void 0:a.data("chosen",new t(this,i))}):this}}),t=function(t){function n(){return a=n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},n.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},n.prototype.set_up_html=function(){var t,i;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",t=["chzn-container"],t.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chzn-rtl"),i={id:this.container_id,"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.container=e("<div />",i),this.is_multiple?this.container.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop"><ul class="chzn-results"></ul></div>'):this.container.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chzn-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},n.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){e.container_mousedown(t)}),this.container.mouseup(function(t){e.container_mouseup(t)}),this.container.mouseenter(function(t){e.mouse_enter(t)}),this.container.mouseleave(function(t){e.mouse_leave(t)}),this.search_results.mouseup(function(t){e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel DOMMouseScroll",function(t){e.search_results_mousewheel(t)}),this.form_field_jq.bind("liszt:updated",function(t){e.results_update_field(t)}),this.form_field_jq.bind("liszt:activate",function(t){e.activate_field(t)}),this.form_field_jq.bind("liszt:open",function(t){e.container_mousedown(t)}),this.search_field.blur(function(t){e.input_blur(t)}),this.search_field.keyup(function(t){e.keyup_checker(t)}),this.search_field.keydown(function(t){e.keydown_checker(t)}),this.search_field.focus(function(t){e.input_focus(t)}),this.is_multiple?this.search_choices.click(function(t){e.choices_click(t)}):this.container.click(function(e){e.preventDefault()})},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},n.prototype.container_mousedown=function(t){return this.is_disabled||(t&&t.type==="mousedown"&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chzn-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(e){return e.target.nodeName!=="ABBR"||this.is_disabled?void 0:this.results_reset(e)},n.prototype.search_results_mousewheel=function(e){var t,i,a;return t=-((i=e.originalEvent)!=null?i.wheelDelta:void 0)||((a=e.originialEvent)!=null?a.detail:void 0),null!=t?(e.preventDefault(),e.type==="DOMMouseScroll"&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){var e,t,a,n,o;for(this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",o=this.results_data,a=0,n=o.length;n>a;a++)t=o[a],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},n.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},n.prototype.result_do_highlight=function(e){var t,i,a,n,o;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),a=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),n=a+o,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=n)return this.search_results.scrollTop(t-a>0?t-a:0);if(o>i)return this.search_results.scrollTop(i)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){if(this.result_single_selected!=null)this.result_do_highlight(this.result_single_selected);else if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return this.container.addClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},n.prototype.results_hide=function(){return this.result_clear_highlight(),this.container.removeClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.results_showing=!1},n.prototype.set_tab_index=function(){var e;return this.form_field_jq.attr("tabindex")?(e=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",e)):void 0},n.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for="+this.form_field.id+"]")),this.form_field_label.length>0?this.form_field_label.click(function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},n.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(t){var i,a,n,o=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(i=this.container_id+"_c_"+t.array_index,this.choices+=1,a=t.disabled?'<li class="search-choice search-choice-disabled" id="'+i+'"><span>'+t.html+"</span></li>":'<li class="search-choice" id="'+i+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>',this.search_container.before(a),n=e("#"+i).find("a").first(),n.click(function(e){return o.choice_destroy_link_click(e)}))},n.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(e){return this.result_deselect(e.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,i,a,n;return this.result_highlight?(t=this.result_highlight,i=t.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t,this.selected_item.removeClass("chzn-default")),t.addClass("result-selected"),n=i.substr(i.lastIndexOf("_")+1),a=this.results_data[n],a.selected=!0,this.form_field.options[a.options_index].selected=!0,this.is_multiple?this.choice_build(a):(this.selected_item.find("span").first().text(a.text),this.allow_single_deselect&&this.single_deselect_control_build()),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[a.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()):void 0},n.prototype.result_activate=function(e){return e.addClass("active-result")},n.prototype.result_deactivate=function(e){return e.removeClass("active-result")},n.prototype.result_deselect=function(t){var i,a;return a=this.results_data[t],this.form_field.options[a.options_index].disabled?!1:(a.selected=!1,this.form_field.options[a.options_index].selected=!1,i=e("#"+this.container_id+"_o_"+t),i.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[a.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},n.prototype.winnow_results=function(){var t,i,a,n,o,s,r,l,c,d,u,h,f,p,m,g,v,b;for(this.no_results_clear(),c=0,d=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),s=this.search_contains?"":"^",o=new RegExp(s+d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),f=new RegExp(d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),b=this.results_data,p=0,g=b.length;g>p;p++)if(i=b[p],!i.disabled&&!i.empty)if(i.group)e("#"+i.dom_id).css("display","none");else if(!this.is_multiple||!i.selected){if(t=!1,l=i.dom_id,r=e("#"+l),o.test(i.html))t=!0,c+=1;else if(this.enable_split_word_search&&(i.html.indexOf(" ")>=0||i.html.indexOf("[")===0)&&(n=i.html.replace(/\[|\]/g,"").split(" "),n.length))for(m=0,v=n.length;v>m;m++)a=n[m],o.test(a)&&(t=!0,c+=1);t?(d.length?(u=i.html.search(f),h=i.html.substr(0,u+d.length)+"</em>"+i.html.substr(u+d.length),h=h.substr(0,u)+"<em>"+h.substr(u)):h=i.html,r.html(h),this.result_activate(r),i.group_array_index!=null&&e("#"+this.results_data[i.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(r))}return 1>c&&d.length?this.no_results(d):this.winnow_results_set_highlight()},n.prototype.winnow_results_clear=function(){var t,i,a,n,o;for(this.search_field.val(""),i=this.search_results.find("li"),o=[],a=0,n=i.length;n>a;a++)t=i[a],t=e(t),t.hasClass("group-result")?o.push(t.css("display","auto")):this.is_multiple&&t.hasClass("result-selected")?o.push(void 0):o.push(this.result_activate(t));return o},n.prototype.winnow_results_set_highlight=function(){var e,t;return this.result_highlight||(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null==e)?void 0:this.result_do_highlight(e)},n.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i)},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t,i;return this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first(),i&&this.result_do_highlight(i)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t))),this.results_showing?void 0:this.results_show()},n.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(e){var t,i;switch(t=(i=e.which)!=null?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,i,a,n,o,s,r,l;if(this.is_multiple){for(i=0,s=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],r=0,l=o.length;l>r;r++)a=o[r],n+=a+":"+this.search_field.css(a)+";";return t=e("<div />",{style:n}),t.text(this.search_field.val()),e("body").append(t),s=t.width()+25,t.remove(),this.f_width||(this.f_width=this.container.outerWidth()),s>this.f_width-10&&(s=this.f_width-10),this.search_field.css({width:s+"px"})}},n.prototype.generate_random_id=function(){var t;for(t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();e("#"+t).length>0;)t+=this.generate_random_char();return t},n}(AbstractChosen),i.Chosen=t}.call(this),/*
Copyright 2012 Igor Vaynberg

Version: 3.3.2 Timestamp: Mon Mar 25 12:14:18 PDT 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
function(e){typeof e.fn.each2=="undefined"&&e.fn.extend({each2:function(t){for(var i=e([0]),a=-1,n=this.length;++a<n&&(i.context=i[0]=this[a])&&t.call(i[0],a,i)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function i(e,t){for(var i=0,n=t.length;n>i;i+=1)if(a(e,t[i]))return i;return-1}function a(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function n(t,i){var a,n,o;if(null===t||t.length<1)return[];for(a=t.split(i),n=0,o=a.length;o>n;n+=1)a[n]=e.trim(a[n]);return a}function o(e){return e.outerWidth(!1)-e.width()}function s(i){var a="keyup-change-value";i.bind("keydown",function(){e.data(i,a)===t&&e.data(i,a,i.val())}),i.bind("keyup",function(){var n=e.data(i,a);n!==t&&i.val()!==n&&(e.removeData(i,a),i.trigger("keyup-change"))})}function r(i){i.bind("mousemove",function(i){var a=N;(a===t||a.x!==i.pageX||a.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function l(e,i,a){a=a||t;var n;return function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){i.apply(a,t)},e)}}function c(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function d(e,t){var a=l(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){i(e.target,t.get())>=0&&a(e)})}function u(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],a=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(a,a):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function h(e){e.preventDefault(),e.stopPropagation()}function f(e){e.preventDefault(),e.stopImmediatePropagation()}function p(t){if(!D){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);D=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),D.attr("class","select2-sizer"),e("body").append(D)}return D.text(t.val()),D.width()}function m(t,i,a){var n,o,s=[];n=t.attr("class"),n&&(n=""+n,e(n.split(" ")).each2(function(){this.indexOf("select2-")===0&&s.push(this)})),n=i.attr("class"),n&&(n=""+n,e(n.split(" ")).each2(function(){this.indexOf("select2-")!==0&&(o=a(this),o&&s.push(this))})),t.attr("class",s.join(" "))}function g(e,t,i,a){var n=e.toUpperCase().indexOf(t.toUpperCase()),o=t.length;return 0>n?(i.push(a(e)),void 0):(i.push(a(e.substring(0,n))),i.push("<span class='select2-match'>"),i.push(a(e.substring(n,n+o))),i.push("</span>"),i.push(a(e.substring(n+o,e.length))),void 0)}function v(t){var i,a=0,n=null,o=t.quietMillis||100,s=t.url,r=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){a+=1;var i=a,o=t.data,c=s,d=t.transport||e.ajax,u=t.type||"GET",h={};o=o?o.call(r,l.term,l.page,l.context):null,c="function"==typeof c?c.call(r,l.term,l.page,l.context):c,null!==n&&n.abort(),t.params&&(e.isFunction(t.params)?e.extend(h,t.params.call(r)):e.extend(h,t.params)),e.extend(h,{url:c,dataType:t.dataType,data:o,type:u,cache:!1,success:function(e){if(!(a>i)){var n=t.results(e,l.page);l.callback(n)}}}),n=d.call(r,h)},o)}}function b(t){var i,a,n=t,o=function(e){return""+e.text};e.isArray(n)&&(a=n,n={results:a}),e.isFunction(n)===!1&&(a=n,n=function(){return a});var s=n();return s.text&&(o=s.text,e.isFunction(o)||(i=n.text,o=function(e){return e[i]})),function(t){var i,a=t.term,s={results:[]};return""===a?(t.callback(n()),void 0):(i=function(n,s){var r,l;if(n=n[0],n.children){r={};for(l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);r.children=[],e(n.children).each2(function(e,t){i(t,r.children)}),(r.children.length||t.matcher(a,o(r),n))&&s.push(r)}else t.matcher(a,o(n),n)&&s.push(n)},e(n().results).each2(function(e,t){i(t,s.results)}),t.callback(s),void 0)}}function w(i){var a=e.isFunction(i);return function(n){var o=n.term,s={results:[]};e(a?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||n.matcher(o,i))&&s.results.push(e?this:{id:this,text:this})}),n.callback(s)}}function y(t){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error("formatterName must be a function or a falsy value")}function _(t){return e.isFunction(t)?t():t}function k(t){var i=0;return e.each(t,function(e,t){t.children?i+=k(t.children):i++}),i}function x(e,i,n,o){var s,r,l,c,d,u=e,h=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(r=-1,l=0,c=o.tokenSeparators.length;c>l&&(d=o.tokenSeparators[l],r=e.indexOf(d),!(r>=0));l++);if(0>r)break;if(s=e.substring(0,r),e=e.substring(r+d.length),s.length>0&&(s=o.createSearchChoice(s,i),s!==t&&null!==s&&o.id(s)!==t&&o.id(s)!==null)){for(h=!1,l=0,c=i.length;c>l;l++)if(a(o.id(s),o.id(i[l]))){h=!0;break}h||n(s)}}return u!==e?e:void 0}function M(t,i){var a=function(){};return a.prototype=new t,a.prototype.constructor=a,a.prototype.parent=t.prototype,a.prototype=e.extend(a.prototype,i),a}if(window.Select2===t){var C,j,T,A,S,D,N,E;C={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case C.LEFT:case C.RIGHT:case C.UP:case C.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case C.SHIFT:case C.CTRL:case C.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},E=e(document),S=function(){var e=1;return function(){return e++}}(),E.bind("mousemove",function(e){N={x:e.pageX,y:e.pageY}}),j=M(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var a,n,o=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&i.element.data("select2")!==null&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+S()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return i.element.closest("body")}),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(_(i.containerCss)),this.container.addClass(_(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabIndex"),this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){e(this).select2("focus")}).attr("tabIndex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(_(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=a=this.container.find(o),this.search=n=this.container.find("input.select2-input"),n.attr("tabIndex",this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),r(this.results),this.dropdown.delegate(o,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.delegate(o,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&a.mousewheel(function(e,t,i,n){var o=a.scrollTop();n>0&&0>=o-n?(a.scrollTop(0),h(e)):0>n&&a.get(0).scrollHeight-a.scrollTop()+n<=a.height()&&(a.scrollTop(a.get(0).scrollHeight-a.height()),h(e))}),s(n),n.bind("keyup-change input paste",this.bind(this.updateResults)),n.bind("focus",function(){n.addClass("select2-focused")}),n.bind("blur",function(){n.removeClass("select2-focused")}),this.dropdown.delegate(o,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(i.element.is(":disabled")||i.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(i){var o,s,r,l;if(o=i.element,o.get(0).tagName.toLowerCase()==="select"&&(this.select=s=i.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(a,n,o){var s,r=this.opts.id,l=this;s=function(a,n,c){var d,u,h,f,p,m,g,v,b,w;for(a=i.sortResults(a,n,o),d=0,u=a.length;u>d;d+=1)h=a[d],p=h.disabled===!0,f=!p&&r(h)!==t,m=h.children&&h.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+c),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),w=i.formatResult(h,v,o,l.opts.escapeMarkup),w!==t&&v.html(w),g.append(v),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),s(h.children,b,c+1),g.append(b)),g.data("select2-data",h),n.append(g)},s(n,a,0)}},e.fn.select2.defaults,i),typeof i.id!="function"&&(r=i.id,i.id=function(e){return e[r]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(s?(i.query=this.bind(function(i){var n,s,r,l={results:[],more:!1},c=i.term;r=function(e,t){var n;e.is("option")?i.matcher(c,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:a(e.attr("disabled"),"disabled")}):e.is("optgroup")&&(n={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){r(t,n.children)}),n.children.length>0&&t.push(n))},n=o.children(),this.getPlaceholder()!==t&&n.length>0&&(s=n[0],e(s).text()===""&&(n=n.not(s))),n.each2(function(e,t){r(t,l.results)}),i.callback(l)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=v.call(i.element,i.ajax)):"data"in i?i.query=b(i.data):"tags"in i&&(i.query=w(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(e){return{id:e,text:e}}),i.initSelection===t&&(i.initSelection=function(t,o){var s=[];e(n(t.val(),i.separator)).each(function(){var t=this,n=this,o=i.tags;e.isFunction(o)&&(o=o()),e(o).each(function(){return a(this.id,t)?(n=this.text,!1):void 0}),s.push({id:t,text:n})}),o(s)}))),typeof i.query!="function")throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,t=this.opts.element;t.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,t;e=this.opts.element.attr("disabled")!=="disabled",t=this.opts.element.attr("readonly")==="readonly",e=e&&!t,this.enabled!==e&&(e?this.enable():this.disable()),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(_(this.opts.containerCssClass)),m(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(this.opts.dropdownCssClass))}),t.bind("propertychange.select2 DOMAttrModified.select2",e),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(t){t.forEach(e)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,a,n=this.container.offset(),o=this.container.outerHeight(!1),s=this.container.outerWidth(!1),r=this.dropdown.outerHeight(!1),l=e(window).scrollLeft()+e(window).width(),c=e(window).scrollTop()+e(window).height(),d=n.top+o,u=n.left,h=c>=d+r,f=n.top-r>=this.body().scrollTop(),p=this.dropdown.outerWidth(!1),m=l>=u+p,g=this.dropdown.hasClass("select2-drop-above");this.body().css("position")!=="static"&&(t=this.body().offset(),d-=t.top,u-=t.left),g?(i=!0,!f&&h&&(i=!1)):(i=!1,!h&&f&&(i=!0)),m||(u=n.left+s-p),i?(d=n.top-r,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),a=e.extend({top:d,left:u,width:s},_(this.opts.dropdownCss)),this.dropdown.css(a)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var i,a=this.containerId,n="scroll."+a,o="resize."+a,s="orientationchange."+a;this.clearDropdownAlignmentPreference(),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),i=e("#select2-drop-mask"),i.length==0&&(i=e(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.bind("mousedown touchstart",function(){var t,i=e("#select2-drop");i.length>0&&(t=i.data("select2"),t.opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.css(t()),i.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var r=this;this.container.parents().add(window).each(function(){e(this).bind(o+" "+n+" "+s,function(){e("#select2-drop-mask").css(t()),r.positionDropdown()})}),this.focusSearch()},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,a="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).unbind(i).unbind(a).unbind(n)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return _(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,a,n,o,s,r,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),void 0;t=this.findHighlightableChoices(),a=e(t[i]),n=a.offset().top+a.outerHeight(!0),i===t.length-1&&(r=l.find("li.select2-more-results"),r.length>0&&(n=r.offset().top+r.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),n>o&&l.scrollTop(l.scrollTop()+(n-o)),s=a.offset().top-l.offset().top,0>s&&a.css("display")!="none"&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)"),this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),a=this.highlight();a>-1&&a<i.length;){a+=t;var n=e(i[a]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(a);break}}},highlight:function(t){var a,n,o=this.findHighlightableChoices();return arguments.length===0?i(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),a=e(o[t]),a.addClass("select2-highlighted"),this.ensureHighlightVisible(),n=a.data("select2-data"),n&&this.opts.element.trigger({type:"highlight",val:this.id(n),choice:n}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var a=this.findHighlightableChoices();this.highlight(a.index(i))}else i.length==0&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),a=this.resultsPage+1,n=this,o=this.search.val(),s=this.context;i.length!==0&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:a,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:o,page:a,context:s}),n.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(n.opts.formatLoadMore(a+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove(),n.positionDropdown(),n.resultsPage=a,n.context=e.context)})})))},tokenize:function(){},updateResults:function(i){function n(){c.scrollTop(0),l.removeClass("select2-active"),u.positionDropdown()}function o(e){c.html(e),n()}var s,r,l=this.search,c=this.results,d=this.opts,u=this,h=l.val(),f=e.data(this.container,"select2-last-term");if((i===!0||!f||!a(h,f))&&(e.data(this.container,"select2-last-term",h),i===!0||this.showSearchInput!==!1&&this.opened())){var p=this.getMaximumSelectionSize();if(p>=1&&(s=this.data(),e.isArray(s)&&s.length>=p&&y(d.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(p)+"</li>"),void 0;if(l.val().length<d.minimumInputLength)return y(d.formatInputTooShort,"formatInputTooShort")?o("<li class='select2-no-results'>"+d.formatInputTooShort(l.val(),d.minimumInputLength)+"</li>"):o(""),void 0;if(d.maximumInputLength&&l.val().length>d.maximumInputLength)return y(d.formatInputTooLong,"formatInputTooLong")?o("<li class='select2-no-results'>"+d.formatInputTooLong(l.val(),d.maximumInputLength)+"</li>"):o(""),void 0;d.formatSearching&&this.findHighlightableChoices().length===0&&o("<li class='select2-searching'>"+d.formatSearching()+"</li>"),l.addClass("select2-active"),r=this.tokenize(),r!=t&&null!=r&&l.val(r),this.resultsPage=1,d.query({element:d.element,term:l.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(s){var r;return this.opened()?(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&l.val()!==""&&(r=this.opts.createSearchChoice.call(null,l.val(),s.results),r!==t&&null!==r&&u.id(r)!==t&&u.id(r)!==null&&e(s.results).filter(function(){return a(u.id(this),u.id(r))}).length===0&&s.results.unshift(r)),s.results.length===0&&y(d.formatNoMatches,"formatNoMatches")?(o("<li class='select2-no-results'>"+d.formatNoMatches(l.val())+"</li>"),void 0):(c.empty(),u.opts.populateResults.call(this,c,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&y(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(s,i),n(),this.opts.element.trigger({type:"loaded",data:s}),void 0)):(this.search.removeClass("select2-active"),void 0)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){u(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),a=i.closest(".select2-result").data("select2-data");a&&(this.highlight(t),this.onSelect(a,e))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function i(){var i,a,n,o,s;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){if(i=this.opts.element.attr("style"),i!==t)for(a=i.split(";"),o=0,s=a.length;s>o;o+=1)if(n=a[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==n&&n.length>=1)return n[1];return this.opts.width==="resolve"?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var a=i.call(this);null!==a&&this.container.css("width",a)}}),T=M(j,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr("disabled","disabled"),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),u(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,i=this.container,a=this.dropdown,n=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+S()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===C.PAGE_UP||e.which===C.PAGE_DOWN)return h(e),void 0;switch(e.which){case C.UP:case C.DOWN:return this.moveHighlight(e.which===C.UP?-1:1),h(e),void 0;case C.TAB:case C.ENTER:return this.selectHighlighted(),h(e),void 0;case C.ESC:return this.cancel(e),h(e),void 0}}})),this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind("keydown",this.bind(function(e){return!this.enabled||e.which===C.TAB||C.isControl(e)||C.isFunctionKey(e)||e.which===C.ESC?void 0:this.opts.openOnEnter===!1&&e.which===C.ENTER?(h(e),void 0):e.which==C.DOWN||e.which==C.UP||e.which==C.ENTER&&this.opts.openOnEnter?(this.open(),h(e),void 0):e.which==C.DELETE||e.which==C.BACKSPACE?(this.opts.allowClear&&this.clear(),h(e),void 0):void 0})),s(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(e){this.opened()||(this.open(),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.focusser.val(""),h(e))})),t.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),f(e),this.close(),this.selection.focus())})),t.bind("mousedown",this.bind(function(e){n=!0,this.opened()?this.close():this.enabled&&this.open(),h(e),n=!1})),a.bind("mousedown",this.bind(function(){this.search.focus()})),t.bind("focus",this.bind(function(e){h(e)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");t&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t})))},initSelection:function(){if(this.opts.element.val()===""&&this.opts.element.text()==="")this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(t,i){var a=t.find(":selected");e.isFunction(i)&&i({id:a.attr("value"),text:a.text(),element:a})}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var o=i.val(),s=null;t.query({matcher:function(e,i,n){var r=a(o,t.id(n));return r&&(s=n),r},callback:e.isFunction(n)?function(){n(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.select.find("option").first().text()!==""?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.opts.element.val()===""&&e!==t){if(this.select&&this.select.find("option:first").text()!=="")return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,t,i){var n=0,o=this,s=!0;if(this.findHighlightableChoices().each2(function(e,t){return a(o.id(t.data("select2-data")),o.opts.element.val())?(n=e,!1):void 0}),i!==!1&&this.highlight(n),t===!0){var r=this.opts.minimumResultsForSearch;s=0>r?!1:k(e.results)>=r,this.showSearch(s)}},showSearch:function(t){this.showSearchInput=t,this.dropdown.find(".select2-search")[t?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[t?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(e,t){var i=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),a(i,this.id(e))||this.triggerChange()},updateSelection:function(e){var i,a=this.selection.find("span");this.selection.data("select2-data",e),a.empty(),i=this.opts.formatSelection(e,a),i!==t&&a.append(this.opts.escapeMarkup(i)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,i=!1,a=null,n=this;if(arguments.length===0)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return a={id:t.attr("value"),text:t.text(),element:t.get(0)},!1}),this.updateSelection(a),this.setPlaceholder(),i&&this.triggerChange();else{if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");if(!e&&0!==e)return this.clear(i),i&&this.triggerChange(),void 0;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),i&&n.triggerChange()})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i;return arguments.length===0?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),void 0)}}),A=M(j,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var i=[];e.find(":selected").each2(function(e,t){i.push({id:t.attr("value"),text:t.text(),element:t[0]})}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(i,o){var s=n(i.val(),t.separator),r=[];t.query({matcher:function(i,n,o){var l=e.grep(s,function(e){return a(e,t.id(o))}).length;return l&&r.push(o),l},callback:e.isFunction(o)?function(){o(r)}:e.noop})}),t},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i),this.search.attr("id","s2id_autogen"+S()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===C.BACKSPACE&&this.search.val()===""){this.close();var i,a=t.find(".select2-search-choice-focus");if(a.length>0)return this.unselect(a.first()),this.search.width(10),h(e),void 0;i=t.find(".select2-search-choice:not(.select2-locked)"),i.length>0&&i.last().addClass("select2-search-choice-focus")}else t.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case C.UP:case C.DOWN:return this.moveHighlight(e.which===C.UP?-1:1),h(e),void 0;case C.ENTER:case C.TAB:return this.selectHighlighted(),h(e),void 0;case C.ESC:return this.cancel(e),h(e),void 0}if(e.which!==C.TAB&&!C.isControl(e)&&!C.isFunctionKey(e)&&e.which!==C.BACKSPACE&&e.which!==C.ESC){if(e.which===C.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===C.PAGE_UP||e.which===C.PAGE_DOWN)&&h(e),e.which===C.ENTER&&h(e)}}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.opened()||this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(i,"mousedown",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.delegate(i,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||this.opts.element.val()!==""){var e=this;
this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(this.getMaxSearchWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var a=[],n=[],o=this;e(t).each(function(){i(o.id(this),a)<0&&(a.push(o.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var a,n=!i.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),r=n?o:s,l=this.id(i),c=this.getVal();a=this.opts.formatSelection(i,r.find("div")),a!=t&&r.find("div").replaceWith("<div>"+this.opts.escapeMarkup(a)+"</div>"),n&&r.find(".select2-search-choice-close").bind("mousedown",h).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),h(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),r.data("select2-data",i),r.insertBefore(this.searchContainer),c.push(l),this.setVal(c)},unselect:function(e){var t,a,n=this.getVal();if(e=e.closest(".select2-search-choice"),e.length===0)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(a=i(this.id(t),n),a>=0&&(n.splice(a,1),this.setVal(n),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),n=this;t.each2(function(t,a){var o=n.id(a.data("select2-data"));i(o,e)>=0&&(a.addClass("select2-selected"),a.find(".select2-result-selectable").addClass("select2-selected"))}),a.each2(function(e,t){t.is(".select2-result-selectable")||t.find(".select2-result-selectable:not(.select2-selected)").length!==0||t.addClass("select2-selected")}),this.highlight()==-1&&n.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-o(this.search)},resizeSearch:function(){var e,t,i,a,n,s=o(this.search);e=p(this.search)+10,t=this.search.offset().left,i=this.selection.width(),a=this.selection.offset().left,n=i-(t-a)-s,e>n&&(n=i-s),40>n&&(n=i-s),0>=n&&(n=e),this.search.width(n)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),n(e,this.opts.separator))},setVal:function(t){var a;this.select?this.select.val(t):(a=[],e(t).each(function(){i(this,a)<0&&a.push(this)}),this.opts.element.val(a.length===0?"":a.join(this.opts.separator)))},val:function(){var i,a=!1,n=this;if(arguments.length===0)return this.getVal();if(i=arguments[0],arguments.length>1&&(a=arguments[1]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),a&&this.triggerChange(),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),a&&this.triggerChange();else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e(t).map(n.id);n.setVal(i),n.updateSelection(t),n.clearSearch(),a&&n.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t){var i,a=this;return arguments.length===0?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(t||(t=[]),i=e.map(t,function(e){return a.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),void 0)}}),e.fn.select2=function(){var a,n,o,s,r=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(r.length===0||typeof r[0]=="object")a=r.length===0?{}:e.extend({},r[0]),a.element=e(this),a.element.get(0).tagName.toLowerCase()==="select"?s=a.element.attr("multiple"):(s=a.multiple||!1,"tags"in a&&(a.multiple=s=!0)),n=s?new A:new T,n.init(a);else{if(typeof r[0]!="string")throw"Invalid arguments to select2 plugin: "+r;if(i(r[0],l)<0)throw"Unknown method: "+r[0];if(o=t,n=e(this).data("select2"),n===t)return;if(o=r[0]==="container"?n.container:n[r[0]].apply(n,r.slice(1)),o!==t)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,a){var n=[];return g(e.text,i.term,n,a),n.join("")},formatSelection:function(e){return e?e.text:t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:x,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:v,local:b,tags:w},util:{debounce:l,markMatch:g},"class":{"abstract":j,single:T,multi:A}}}}(jQuery),function(){this.Api={users_path:"/users/search?q=:query",user_path:"/users/search?id=:user_id",projects_path:"/projects/search?q=:query",project_path:"/projects/search?id=:project_id",user:function(e,t){var i;return i=Api.user_path.replace(":user_id",e),$.ajax({url:i,dataType:"json"}).done(function(e){return t(e)})},users:function(e,t,i){var a;return a=Api.users_path.replace(":query",e),$.ajax({url:a,data:{page:1,per_page:10,enterprise_id:i||gon.enterprise_id},dataType:"json"}).done(function(e){return t(e)})},project:function(e,t){var i;return i=Api.project_path.replace(":project_id",e),$.ajax({url:i,dataType:"json"}).done(function(e){return t(e)})},projects:function(e,t){var i;return i=Api.projects_path.replace(":query",e),$.ajax({url:i,data:{page:1,per_page:10},dataType:"json"}).done(function(e){return t(e)})}}}.call(this),function(){$(function(){return $.extend($.fn.select2.defaults,{formatNoMatches:function(){return"没有找到匹配项"},formatInputTooShort:function(e,t){return"请再输入"+(t-e.length)+"个字符"},formatInputTooLong:function(e,t){return"请删掉"+(e.length-t)+"个字符"},formatSelectionTooBig:function(e){return"你只能选择最多"+e+"项"},formatLoadMore:function(){return"加载结果中..."},formatSearching:function(){return"搜索中..."}}),$(".ajax-users-select").select2({placeholder:"搜索用户",multiple:$(".ajax-users-select").hasClass("multiselect"),minimumInputLength:2,query:function(e){return Api.users(e.term,function(t){var i;return i={results:t},e.callback(i)})},formatResult:function(e){var t,i;return t=e.avatar,i="<div class='user-result'>",i+="<div class='user-image'><img class='ui circular image' style='width: 37px; height: 37px; margin-right: 5px;' src='"+t+"'></div>",i+="<div class='user-name'>"+sanitize(e.name)+"</div>",i+="<div class='user-username'>"+e.username+"</div>",i+="</div>"},formatSelection:function(e){return sanitize(e.name)},dropdownCssClass:"ajax-users-dropdown",escapeMarkup:function(e){return e}}),$(".ajax-projects-select").select2({placeholder:"搜索项目",multiple:$(".ajax-projects-select").hasClass("multiselect"),minimumInputLength:3,query:function(e){return Api.projects(e.term,function(t){var i;return i={results:t},e.callback(i)})},initSelection:function(e,t){var i;return i=$(e).val(),""!==i?Api.project(i,t):void 0},formatResult:function(e){return sanitize(e.name)},formatSelection:function(e){return sanitize(e.name)},dropdownCssClass:"ajax-projects-dropdown"})})}.call(this),function(e){var t;t=e.fn.chosen,e.fn.extend({chosen:function(i){var a;return a={search_contains:"true"},e.extend(a,i),t.apply(this,[a])},disable:function(){return e(this).attr("disabled","disabled").addClass("disabled")},enable:function(){return e(this).removeAttr("disabled").removeClass("disabled")}})}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function t(t){return!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1}function i(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var a=e.scrollTo=function(t,i,a){return e(window).scrollTo(t,i,a)};return a.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(n,o,s){"object"==typeof o&&(s=o,o=0),"function"==typeof s&&(s={onAfter:s}),"max"===n&&(n=9e9),s=e.extend({},a.defaults,s),o=o||s.duration;var r=s.queue&&s.axis.length>1;return r&&(o/=2),s.offset=i(s.offset),s.over=i(s.over),this.each(function(){function l(t){var i=e.extend({},s,{queue:!0,duration:o,complete:t&&function(){t.call(u,f,s)}});h.animate(p,i)}if(null!==n){var c,d=t(this),u=d?this.contentWindow||window:this,h=e(u),f=n,p={};switch(typeof f){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(f)){f=i(f);break}f=d?e(f):e(f,u);case"object":if(f.length===0)return;(f.is||f.style)&&(c=(f=e(f)).offset())}var m=e.isFunction(s.offset)&&s.offset(u,f)||s.offset;e.each(s.axis.split(""),function(e,t){var i="x"===t?"Left":"Top",n=i.toLowerCase(),o="scroll"+i,g=h[o](),v=a.max(u,t);if(c)p[o]=c[n]+(d?0:g-h.offset()[n]),s.margin&&(p[o]-=parseInt(f.css("margin"+i),10)||0,p[o]-=parseInt(f.css("border"+i+"Width"),10)||0),p[o]+=m[n]||0,s.over[n]&&(p[o]+=f["x"===t?"width":"height"]()*s.over[n]);else{var b=f[n];p[o]=b.slice&&b.slice(-1)==="%"?parseFloat(b)/100*v:b}s.limit&&/^\d+$/.test(p[o])&&(p[o]=p[o]<=0?0:Math.min(p[o],v)),!e&&s.axis.length>1&&(g===p[o]?p={}:r&&(l(s.onAfterFirst),p={}))}),l(s.onAfter)}})},a.max=function(i,a){var n="x"===a?"Width":"Height",o="scroll"+n;if(!t(i))return i[o]-e(i)[n.toLowerCase()]();var s="client"+n,r=i.ownerDocument||i.document,l=r.documentElement,c=r.body;return Math.max(l[o],c[o])-Math.min(l[s],c[s])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var i=this.get(t);if(t.options.interrupt&&t._last&&t._last!==i)return e(t.elem).stop();var a=Math.round(t.now);i!==a&&(e(t.elem)[t.prop](a),t._last=this.get(t))}},a}),function(){window.Projects=function(){return $(".new_project, .edit_project").on("ajax:before",function(){var e;if(e=$(this).attr("id")==="transfer_form"){if($.trim($("#transfer_form .select2-choice span").text())==="")return;return $(".transfer-project-loader").show(),$(".transfer-commit,.ajax-users-dropdown .select2-input").attr("disabled","disabled").addClass("disabled")}return $(".project_new_holder, .project_edit_holder").hide(),$(".save-project-loader").show()}),disableButtonIfEmptyField("#project_name",".project-submit")},$(function(){var e;return $(".project-refs-select").on("change",function(){return $(this).parents("form").submit()}),$("#project_issues_enabled").change(function(){return $(this).is(":checked")===!0?$("#project_issues_tracker").removeAttr("disabled"):$("#project_issues_tracker").attr("disabled","disabled"),$("#project_issues_tracker").change()}),$(".star-container").on("ajax:success",function(e,t){return $(".star-container .social-count").html(t.count),$(".star-container").toggleClass("stared")}),$(".watch-container").on("ajax:success",function(e,t){return $(".watch-container .social-count").html(t.count),$(".watch-container").toggleClass("watched")}),$("input[id='private']").click(function(){return $("input[id='private']").attr("checked")==="checked"?$("div .clearfix[id='language']").hide(500):$("div .clearfix[id='language']").show(500)}),$("div .clearfix#select_app").hide(0),$("input[id='paas']").click(function(){return $("input[id='paas']").attr("checked")==="checked"?$("div .clearfix#select_app").show(500):$("div .clearfix#select_app").hide(500)}),$("div .detail_sonar#sonar_detail_form").hide(0),e=$("#sonar_detail_form"),$("a#sonar_detail").click(function(){return $("#sonar_detail_modal").modal("show")}),$("#sonar_cancel").click(function(){return $("#sonar_detail_modal").modal("hide")}),$("#btn_utest_detail").click(function(){return $("#utest_detail_modal").modal("show")}),$("#utest_cancel").click(function(){return $("#utest_detail_modal").modal("hide")}),$("#btn_codesafe_detail").click(function(){return $("#codesafe_detail_modal").modal("show")}),$("#codesafe_cancel").click(function(){return $("#codesafe_detail_modal").modal("hide")})})}.call(this),function(){this.Tree={init:function(){var e;return e=window.history&&window.history.pushState&&window.history.replaceState&&window.history.state!==void 0,$(".tree-holder").length>0&&(e&&Tree.initTreeSlide(),Tree.initTreeCommit()),Tree.highlightBlobLines(),Tree.initLineJump("#modal-linejump"),$(window).on("hashchange",Tree.highlightBlobLines),$(document).on("click",".line-numbers a",Tree.multiSelectLines)},initLineJump:function(e){return $(document).on("keypress",function(t){var i,a,n,o;return n=$(e),a=n.find("input"),o=function(e){return e&&(location.hash="#L"+e,Tree.highlightBlobLines()),n.modal("hide"),a.val("")},a.on("keydown",function(e){return e.which===13&&o(a.val()),e.stopPropagation()}),n.find(".ui.button").on("click",function(){return o(a.val())}),t.which==="l".charCodeAt(0)&&(i=$("#tree-content-holder .file_content"),i.hasClass("code"))?(n.modal("show"),t.preventDefault()):void 0})},fetchReplacement:function(e){return $.ajax({url:e,dataType:"script",beforeSend:function(){return $(".tree_progress").show()},complete:function(){return $(".tree_progress").hide(),$(document).trigger("tree.complete")}})},initTreeSlide:function(){return $(".tree-holder, .breadcrumb_path").on("click",".repo-name, .tree-item-file-name a",function(e){return e.preventDefault(),window.history.pushState({cache:!0},null,$(this).attr("href")),Tree.fetchReplacement(window.location.href)}),window.history.replaceState({cache:!0},null,window.location.href),$(".tree-holder").on("click","div.tree-item",function(e){return alreadyContext?e.preventDefault():$(e.target).is("a")||$(e.target).parent().is("a")?void 0:$(this).find(".tree-item-file-name a").trigger("click")}),$(document).ready(function(){return window.addEventListener("popstate",function(e){var t;return location.hash.indexOf("#")!==-1?!1:((t=e.state)!=null?t.cache:void 0)?Tree.fetchReplacement(window.location.href):void 0},!1)})},initTreeCommit:function(){var e;return e=$(".tree-content-holder .tree-content").data("logs-path"),e?$.ajax({url:e,dataType:"script",complete:function(){return $(".tree-content-holder .tree-content").removeData("logs-path")}}):void 0},highlightBlobLines:function(e){var t,i,a,n,o;if(window.location.hash!==""&&(n=window.location.hash.match(/\#L(\d+)(\-L?(\d+))?/),t=parseInt(null!=n?n[1]:void 0),i=parseInt(null!=n?n[3]:void 0),!isNaN(t))){for(isNaN(i)&&(i=t),$(".tree-content-holder .highlight .line.hll").removeClass("hll"),a=o=t;i>=t?i>=o:o>=i;a=i>=t?++o:--o)$("#LC"+a).addClass("hll");if(!e)return $.scrollTo("#L"+t,500,{offset:-128})}},multiSelectLines:function(e){var t,i,a,n,o,s,r;return!event.shiftKey||!$("pre div[class='line hll']")||(n=window.location.hash.match(/\#L(\d+)(?:\-L?(\d+))?/),s=parseInt(null!=n?n[1]:void 0),a=parseInt(null!=n?n[2]:void 0),i=parseInt((r=$(this).attr("href").match(/\#L(\d+)$/))!=null?r[1]:void 0),isNaN(s)&&isNaN(i)||(t=isNaN(a)?s:Math.min(s,a),t===i))?void 0:(o=i>t?"#L"+t+"-"+i:"#L"+i+"-"+t,window.location.hash=o,e.preventDefault())},initHighlightTheme:function(e){return $(".highlight").each(function(){var t,i;return i=$(this).parent("div"),t=i.hasClass("lines")?"lines "+e:e,i.attr("class",t)})}}}.call(this),function(e){"use strict";e.scoped=function(){function t(t){return e(t).attr("scoped")!==void 0}function i(){e("style").each(function(i,a){if(t(a)){var n=e(a);n.data("original-style",n.html())}})}function a(i){e("style").each(function(a,n){if(t(n)&&!i.hasClass("depends_on_"+a))try{n.innerHTML=""}catch(o){e(n).attr("disabled","disabled")}})}function n(){e("style").each(function(i,a){var n=e(a);if(t(a))try{a.innerHTML=n.data("original-style")}catch(o){e(this).removeAttr("disabled")}})}function o(e){var t,i,a,n;if(e.currentStyle)return l(50),e.currentStyle;t=document.defaultView.getComputedStyle(e,null),i="";for(a in t)parseInt(a,10)&&(n=r(t[a]),t[n]!==void 0&&(i+=t[a]+":"+t[n]+";\n"));return i}function s(){var t=e("style");t.each(function(t,i){var a=e(i),n=e(this).parent(),o=n.find("*");if(o.add(n).each(function(){var t=e(this);this.nodeName!=="STYLE"&&t.data("scopedprocessed")&&(t.attr("style",t.data("originalInline")||""),t.data("scopedprocessed",!0))}),a.attr("scoped")!==void 0){try{a.data("scopedprocessed")&&(this.innerHTML=a.data("original-style"))}catch(s){a.removeAttr("disabled")}a.data("scopedprocessed",!0)}})}function r(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function l(t){var i=new Date;for(i.setTime(i.getTime()+t);(new Date).getTime()<i.getTime();)e.noop()}if(!("scoped"in document.createElement("style"))){var c=!0;try{document.createElement("div").style.setProperty("opacity",0,"")}catch(d){c=!1}s(),i();var u=e("style");u.each(function(i){var a=e(this);t(a)&&(a.addClass("this_is_"+i),a.parent().find("style").each(function(){e(this).addClass("depends_on_"+i)}))}),u.each(function(){var i=e(this);if(t(i)){a(i);var s=[],r=i.parent(),l=r.find("*");l.add(r).each(function(){e(this).css("cssText",""),this.nodeName!=="STYLE"&&s.push(o(this))}),l.add(r).each(function(){var t,i;if(this.nodeName!=="STYLE")if(e(this).data("originalInline")||e(this).data("originalInline",e(this).attr("style")),t=s.shift(),"string"==typeof t)e(this).css("cssText",t);else if(c){for(i in t)if("content"!==i||t[i]!=="none")try{this.style.setProperty(i,t[i])}catch(a){}}else for(i in t)try{this&&this.style&&i&&t[i]&&""!==i&&t[i]!==""&&(this.style[i]=t[i])}catch(a){}}),n()}}),e("style").each(function(i,a){if(t(a))try{a.innerHTML=""}catch(n){e(a).attr("disabled","disabled")}})}}}(jQuery),/*!
 * toc - jQuery Table of Contents Plugin
 * v0.3.2
 * http://projects.jga.me/toc/
 * copyright Greg Allen 2014
 * MIT License
 */
!function(e){e.fn.smoothScroller=function(t){t=e.extend({},e.fn.smoothScroller.defaults,t);var i=e(this);return e(t.scrollEl).animate({scrollTop:i.offset().top-e(t.scrollEl).offset().top-t.offset},t.speed,t.ease,function(){var e=i.attr("id");e.length&&(history.pushState?history.pushState(null,null,"#"+e):document.location.hash=e),i.trigger("smoothScrollerComplete")}),this},e.fn.smoothScroller.defaults={speed:400,ease:"swing",scrollEl:"body,html",offset:0},e("body").on("click","[data-smoothscroller]",function(t){t.preventDefault();var i=e(this).attr("href");0===i.indexOf("#")&&e(i).smoothScroller()})}(jQuery),function(e){var t={};e.fn.toc=function(t){var i,a=this,n=e.extend({},jQuery.fn.toc.defaults,t),o=e(n.container),s=e(n.selectors,o),r=[],l=n.activeClass,c=function(t,i){if(n.smoothScrolling&&"function"==typeof n.smoothScrolling){t.preventDefault();var o=e(t.target).attr("href");n.smoothScrolling(o,n,i)}e("li",a).removeClass(l),e(t.target).parent().addClass(l)},d=function(){i&&clearTimeout(i),i=setTimeout(function(){for(var t,i=e(window).scrollTop(),o=Number.MAX_VALUE,s=0,c=0,d=r.length;d>c;c++){var u=Math.abs(r[c]-i);o>u&&(s=c,o=u)}e("li",a).removeClass(l),t=e("li:eq("+s+")",a).addClass(l),n.onHighlight(t)},50)};return n.highlightOnScroll&&(e(window).bind("scroll",d),d()),this.each(function(){var t=e(this),i=e(n.listType);s.each(function(a,o){var s=e(o);r.push(s.offset().top-n.highlightOffset);var l=n.anchorName(a,o,n.prefix);o.id!==l&&e("<span/>").attr("id",l).insertBefore(s);var u=e("<a/>").text(n.headerText(a,o,s)).attr("href","#"+l).bind("click",function(i){e(window).unbind("scroll",d),c(i,function(){e(window).bind("scroll",d)}),t.trigger("selected",e(this).attr("href"))}),h=e("<li/>").addClass(n.itemClass(a,o,s,n.prefix)).append(u);i.append(h)}),t.html(i)})},jQuery.fn.toc.defaults={container:"body",listType:"<ul/>",selectors:"h1,h2,h3",smoothScrolling:function(t,i,a){e(t).smoothScroller({offset:i.scrollToOffset}).on("smoothScrollerComplete",function(){a()})},scrollToOffset:0,prefix:"",activeClass:"toc-active",onHighlight:function(){},highlightOnScroll:!0,highlightOffset:100,anchorName:function(i,a){if(a.id.length)return a.id;var n=e(a).text();if(t[n]){for(var o=2;t[n+o];)o++;n=n+"-"+o}return t[n]=!0,n},headerText:function(e,t,i){return i.text()},itemClass:function(e,t,i,a){return a+"-"+i[0].tagName.toLowerCase()}}}(jQuery),function(e){var t={debugOn:!1,markupCreated:!1,markup:"",attachEvents:function(i){e("#gollum-dialog-action-ok").click(function(e){t.eventOK(e,i)}),e("#gollum-dialog-action-cancel").click(t.eventCancel),e('#gollum-dialog-dialog input[type="text"]').keydown(function(e){e.keyCode==13&&t.eventOK(e,i)})},detachEvents:function(){e("#gollum-dialog-action-ok").unbind("click"),e("#gollum-dialog-action-cancel").unbind("click")},createFieldMarkup:function(e){for(var i="<fieldset>",a=0;a<e.length;a++)if(typeof e[a]=="object"){switch(i+='<div class="field">',e[a].type){case"text":i+=t.createFieldText(e[a]);break;case"file":i+=t.createFieldFile(e[a])}i+="</div>"}return i+="</fieldset>"},createFieldText:function(e){var t="";return e.name&&(t+="<label",e.id&&(t+=' for="gollum-dialog-dialog-generated-field-'+e.id+'"'),t+=">"+e.name+"</label>"),t+='<input type="text"',e.id&&(t+=' name="'+e.id+'"',e.type=="code"&&(t+=' class="code"'),e.defaultValue&&(t+=' value="'+e.defaultValue.split('"').join("&quot;")+'"'),t+=' id="gollum-dialog-dialog-generated-field-'+e.id+'">'),e.context&&(t+='<span class="context">'+e.context+"</span>"),t},createFieldFile:function(e){var t="",i=e.id||"upload",a=e.name||"file",n=e.action||"/uploadFile";return t+='<form method=post enctype="multipart/form-data" action="'+n+'" '+'id="'+i+'">',t+='<input type=file name="'+a+'">',t+="</form>",e.context&&(t+='<span class="context">'+e.context+"</span>"),t},createMarkup:function(i,a){return t.markupCreated=!0,e.facebox?'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-title"><h4>'+i+"</h4></div>"+'<div id="gollum-dialog-dialog-body">'+a+"</div>"+'<div id="gollum-dialog-dialog-buttons">'+'<a href="#" title="Cancel" id="gollum-dialog-action-cancel" '+'class="gollum-minibutton">取消</a>'+'<a href="#" title="OK" id="gollum-dialog-action-ok" '+'class="gollum-minibutton">确定</a>'+"</div>"+"</div>":'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-inner"><div id="gollum-dialog-dialog-bg"><div id="gollum-dialog-dialog-title"><h4>'+i+"</h4></div>"+'<div id="gollum-dialog-dialog-body">'+a+"</div>"+'<div id="gollum-dialog-dialog-buttons">'+'<a href="#" title="Cancel" id="gollum-dialog-action-cancel" '+'class="minibutton">取消</a>'+'<a href="#" title="OK" id="gollum-dialog-action-ok" '+'class="minibutton">确定</a>'+"</div>"+"</div>"+"</div>"+"</div>"},eventCancel:function(e){e.preventDefault(),i("Cancelled dialog."),t.hide()},eventOK:function(i,a){i.preventDefault();var n=[];e("#gollum-dialog-dialog-body input").each(function(){n[e(this).attr("name")]=e(this).val()}),a&&"function"==typeof a&&a(n),t.hide()},hide:function(){e.facebox?(t.markupCreated=!1,e(document).trigger("close.facebox"),t.detachEvents()):e.browser.msie?(e("#gollum-dialog-dialog").hide().removeClass("active"),e("select").css("visibility","visible")):(e("#gollum-dialog-dialog").css("display","none"),e("#gollum-dialog-dialog").animate({opacity:0},{duration:200,complete:function(){e("#gollum-dialog-dialog").removeClass("active")}}))},init:function(a){var n="",o="";return a&&"object"==typeof a?(a.body&&typeof a.body=="string"&&(o="<p>"+a.body+"</p>"),a.fields&&typeof a.fields=="object"&&(o+=t.createFieldMarkup(a.fields)),a.title&&typeof a.title=="string"&&(n=a.title),t.markupCreated&&(e.facebox?e(document).trigger("close.facebox"):e("#gollum-dialog-dialog").remove()),t.markup=t.createMarkup(n,o),e.facebox?e(document).bind("reveal.facebox",function(){a.OK&&typeof a.OK=="function"&&(t.attachEvents(a.OK),e(e('#facebox input[type="text"]').get(0)).focus())}):(e("body").append(t.markup),a.OK&&typeof a.OK=="function"&&t.attachEvents(a.OK)),t.show(),void 0):(i("Editor Dialog: Cannot init; invalid init object"),void 0)},show:function(){t.markupCreated?(i("Showing dialog"),e.facebox?e.facebox(t.markup):e.browser.msie?(e("#gollum-dialog.dialog").addClass("active"),t.position(),e("select").css("visibility","hidden")):(e("#gollum-dialog.dialog").css("display","none"),e("#gollum-dialog-dialog").animate({opacity:0},{duration:0,complete:function(){e("#gollum-dialog-dialog").css("display","block"),t.position(),e("#gollum-dialog-dialog").animate({opacity:1},{duration:500}),e(e('#gollum-dialog-dialog input[type="text"]').get(0)).focus()}}))):i("Dialog: No markup to show. Please use init first.")},position:function(){var t=e("#gollum-dialog-dialog-inner").height();e("#gollum-dialog-dialog-inner").css("height",t+"px").css("margin-top",-1*parseInt(t/2))}};e.facebox&&e(document).bind("reveal.facebox",function(){e("#facebox img.close_image").remove()});var i=function(e){t.debugOn&&"undefined"!=typeof console&&console.log(e)};e.GollumDialog=t}(jQuery),$(document).ready(function(){$.GollumEditor()}),function(e){var t={MarkupType:"markdown",EditorMode:"code",NewFile:!1,HasFunctionBar:!0,Debug:!1,NoDefinitionsFor:[]},i={};e.GollumEditor=function(s){if(i=e.extend(t,s),a("GollumEditor loading"),o.baseEditorMarkup()&&(o.titleDisplayed()&&e("#gollum-editor-title-field").addClass("active"),o.editSummaryMarkup()&&(e.GollumEditor.Placeholder.add(e("#gollum-editor-edit-summary input")),e('#gollum-editor form[name="gollum-editor"]').submit(function(t){t.preventDefault(),a("submitting"),e(this).unbind("submit"),e(this).submit()})),o.collapsibleInputs()&&e("#gollum-editor .collapsed a.button, #gollum-editor .expanded a.button").click(function(t){t.preventDefault(),e(this).parent().toggleClass("expanded"),e(this).parent().toggleClass("collapsed")}),o.previewButton()&&e("#gollum-editor #gollum-editor-preview").click(function(){var t=e("#gollum-editor form").attr("action"),i=e(e("#gollum-editor form").get(0));i.attr("action",this.href||"/preview"),i.attr("target","_blank");var a=window.location.pathname.split("/");return i.attr("page",a[a.length-1]||""),i.submit(),i.attr("action",t),i.removeAttr("target"),!1}),o.functionBar())){var l=e("#gollum-editor-body").attr("data-markup-lang");l&&(i.MarkupType=l),n.setActiveLanguage(i.MarkupType),o.formatSelector()&&r.init(e("#gollum-editor-format-selector select")),o.help()&&(e("#gollum-editor-help").hide(),e("#gollum-editor-help").removeClass("jaws"))}},e.GollumEditor.defineLanguage=function(e,t){"object"==typeof t?n.define(e,t):a("GollumEditor.defineLanguage: definition for "+e+" is not an object")};var a=function(e){i.Debug&&"undefined"!=typeof console&&console.log(e)},n={_ACTIVE_LANG:"",_LOADED_LANGS:[],_LANG:{},define:function(t,i){if(n._ACTIVE_LANG=t,n._LOADED_LANGS.push(t),typeof e.GollumEditor.WikiLanguage=="object"){var a={};e.extend(a,e.GollumEditor.WikiLanguage,i),n._LANG[t]=a}else n._LANG[t]=i},getActiveLanguage:function(){return n._ACTIVE_LANG},setActiveLanguage:function(t){n._ACTIVE_LANG!=null&&n._ACTIVE_LANG.length<=0&&r.updateCommitMessage(t),n.getHookFunctionFor("deactivate")&&n.getHookFunctionFor("deactivate")(),n.isLoadedFor(t)?(n._ACTIVE_LANG=t,s.refresh(),n.getHookFunctionFor("activate")&&n.getHookFunctionFor("activate")()):(n._ACTIVE_LANG=null,n.loadFor(t,function(i,l){function c(e,t){e.preventDefault();var i=n.getDefinitionFor(t);return"object"==typeof i&&s.executeAction(i),!1}"success"!=l&&(a("Failed to load language definition for "+t),n.define(t,{})),o.functionBar()&&s.refresh(),n.isValid()&&o.formatSelector()&&r.updateSelected(),n.getHookFunctionFor("activate")&&n.getHookFunctionFor("activate")(),Mousetrap.bind(["command+1","ctrl+1"],function(e){c(e,"function-h1")}),Mousetrap.bind(["command+2","ctrl+2"],function(e){c(e,"function-h2")}),Mousetrap.bind(["command+3","ctrl+3"],function(e){c(e,"function-h3")}),Mousetrap.bind(["command+b","ctrl+b"],function(e){c(e,"function-bold")}),Mousetrap.bind(["command+i","ctrl+i"],function(e){c(e,"function-italic")}),Mousetrap.bind(["command+s","ctrl+s"],function(t){return t.preventDefault(),e("#gollum-editor-submit").trigger("click"),!1})}))},getHookFunctionFor:function(e,t){return t||(t=n._ACTIVE_LANG),n.isLoadedFor(t)&&n._LANG[t][e]&&typeof n._LANG[t][e]=="function"?n._LANG[t][e]:null},getDefinitionFor:function(e,t){return t||(t=n._ACTIVE_LANG),n.isLoadedFor(t)&&n._LANG[t][e]&&typeof n._LANG[t][e]=="object"?n._LANG[t][e]:null},loadFor:function(t,a){if(i.NoDefinitionsFor.length)for(var n=0;n<i.NoDefinitionsFor.length;n++)if(t==i.NoDefinitionsFor[n]&&"function"==typeof a)return a(null,"error"),void 0;var o=baseUrl+"/javascript/editor/langs/"+t+".js";e.ajax({url:o,dataType:"script",complete:function(e,t){"function"==typeof a&&a(e,t)}})},isLoadedFor:function(e){if(n._LOADED_LANGS.length===0)return!1;for(var t=0;t<n._LOADED_LANGS.length;t++)if(n._LOADED_LANGS[t]==e)return!0;return!1},isValid:function(){return n._ACTIVE_LANG&&typeof n._LANG[n._ACTIVE_LANG]=="object"}},o={baseEditorMarkup:function(){return e("#gollum-editor").length&&e("#gollum-editor-body").length},collapsibleInputs:function(){return e("#gollum-editor .collapsed, #gollum-editor .expanded").length},formatSelector:function(){return e("#gollum-editor-format-selector select").length},functionBar:function(){return i.HasFunctionBar&&e("#gollum-editor-function-bar").length},ff4Environment:function(){var e=new RegExp(/Firefox\/4.0b/);return e.test(navigator.userAgent)},editSummaryMarkup:function(){return e("input#gollum-editor-message-field").length>0},help:function(){return e("#gollum-editor #gollum-editor-help").length&&e("#gollum-editor #function-help").length},previewButton:function(){return e("#gollum-editor #gollum-editor-preview").length},titleDisplayed:function(){return i.NewFile}},s={isActive:!1,activate:function(){a("Activating function bar"),e("#gollum-editor-function-bar a.function-button").each(function(){n.getDefinitionFor(e(this).attr("id"))?(e(this).click(s.evtFunctionButtonClick),e(this).removeClass("disabled")):e(this).attr("id")!="function-help"&&e(this).addClass("disabled")}),e("#gollum-editor-function-bar").addClass("active"),s.isActive=!0},deactivate:function(){e("#gollum-editor-function-bar a.function-button").unbind("click"),e("#gollum-editor-function-bar").removeClass("active"),s.isActive=!1},evtFunctionButtonClick:function(t){t.preventDefault();var i=n.getDefinitionFor(e(this).attr("id"));"object"==typeof i&&s.executeAction(i)},executeAction:function(t){var i=e("#gollum-editor-body").val();s.getFieldSelectionPosition(e("#gollum-editor-body"));var n=s.getFieldSelection(e("#gollum-editor-body")),o=n,r=!0,l=null;if(t.exec&&typeof t.exec=="function")return t.exec(i,n,e("#gollum-editor-body")),void 0;var c=/([^\n]+)/gi;if(t.search&&typeof t.search=="object"&&(a("Replacing search Regex"),c=null,c=new RegExp(t.search),a(c)),a('repText is "'+o+'"'),t.replace&&typeof t.replace=="string"){a("Running replacement - using "+t.replace);var d=t.replace;o=o.replace(c,d),o=o.replace(/\$[\d]/g,""),""===o&&(a("Search string is empty"),l=d.indexOf("$1"),o=d.replace(/\$[\d]/g,""),-1==l&&(l=Math.floor(d.length/2)))}t.append&&typeof t.append=="string"&&(o==n&&(r=!1),o+=t.append),o&&s.replaceFieldSelection(e("#gollum-editor-body"),o,r,l)},getFieldSelectionPosition:function(e){if(e.length){var t=0,i=0,n=e.get(0);if(typeof n.selectionStart=="number"&&typeof n.selectionEnd=="number")t=n.selectionStart,i=n.selectionEnd;else{var o=document.selection.createRange(),s=o.duplicate();s.moveToElementText(n),s.setEndPoint("EndToEnd",o),t=s.text.length-o.text.length,i=t+o.text.length;var r,l=t,c=0;for(a("IE: start position is currently "+l),r=0;l>r;r++)n.value.charAt(r).match(/\r/)&&++c;c&&(a("IE start: compensating for "+c+" line breaks"),t-=c,c=0);var d=i;for(r=0;d>r;r++)n.value.charAt(r).match(/\r/)&&++c;c&&(a("IE end: compensating for "+c+" line breaks"),i-=c)}return{start:t,end:i}}},getFieldSelection:function(e){var t,i="";return e.length?(t=s.getFieldSelectionPosition(e),i=e.val().substring(t.start,t.end),a("Selected: "+i+" ("+t.start+", "+t.end+")"),i):!1},isShown:function(){return e("#gollum-editor-function-bar").is(":visible")},refresh:function(){o.functionBar()&&(a("Refreshing function bar"),n.isValid()?(e("#gollum-editor-function-bar a.function-button").unbind("click"),s.activate(),l&&l.setActiveHelp(n.getActiveLanguage())):(a("Language definition is invalid."),s.isShown()&&s.deactivate(),l.isShown()&&l.hide()))},replaceFieldSelection:function(e,t,i,a){var n=s.getFieldSelectionPosition(e),o=e.val(),r=!0;i===!1&&(r=!1);var l=null;if(e[0].scrollTop&&(l=e[0].scrollTop),e.val(o.substring(0,n.start)+t+o.substring(n.end)),e[0].focus(),r)if(e[0].setSelectionRange)a?e[0].setSelectionRange(n.start+a,n.start+a):e[0].setSelectionRange(n.start,n.start+t.length);else if(e[0].createTextRange){var c=e[0].createTextRange();c.collapse(!0),a?(c.moveEnd(n.start+a),c.moveStart(n.start+a)):(c.moveEnd("character",n.start+t.length),c.moveStart("character",n.start)),c.select()}l&&(e[0].scrollTop=l)}},r={$_SELECTOR:null,evtChangeFormat:function(){var t=e(this).val();r.updateCommitMessage(t),n.setActiveLanguage(t)},updateCommitMessage:function(e){var t=document.getElementById("gollum-editor-message-field"),i=t.value;/^(?:created|updated)/i.test(i)&&(t.value=i.replace(/\([^\)]*\)$/,"("+e+")"))},init:function(e){a("Initializing format selector"),r.$_SELECTOR&&typeof r.$_SELECTOR=="object"&&r.$_SELECTOR.unbind("change"),r.$_SELECTOR=e,r.updateSelected(),r.$_SELECTOR.change(r.evtChangeFormat)},updateSelected:function(){var e=n.getActiveLanguage();r.$_SELECTOR.val(e)}},l={_ACTIVE_HELP:"",_LOADED_HELP_LANGS:[],_HELP:{},define:function(t,i){l.isValidHelpFormat(i)?(a("help is a valid format"),l._ACTIVE_HELP_LANG=t,l._LOADED_HELP_LANGS.push(t),l._HELP[t]=i,e("#function-help").length&&(e("#function-help").hasClass("disabled")&&e("#function-help").removeClass("disabled"),e("#function-help").unbind("click"),e("#function-help").click(l.evtHelpButtonClick),l.generateHelpMenuFor(t),e("#gollum-editor-help").length&&typeof e("#gollum-editor-help").attr("data-autodisplay")!="undefined"&&e("#gollum-editor-help").attr("data-autodisplay")==="true"&&l.show())):e("#function-help").length&&e("#function-help").addClass("disabled")},generateHelpMenuFor:function(t){if(!l._HELP[t])return a("Help is not defined for "+t.toString()),!1;var i=l._HELP[t];e("#gollum-editor-help-parent").html(""),e("#gollum-editor-help-list").html(""),e("#gollum-editor-help-content").html("");for(var n=0;n<i.length&&typeof i[n]=="object";n++){var o=e('<li><a href="#" rel="'+n+'">'+i[n].menuName+"</a></li>");e("#gollum-editor-help-parent").append(o),0===n&&o.children("a").addClass("selected"),o.children("a").click(l.evtParentMenuClick)}l.generateSubMenu(i[0],0),e(e("#gollum-editor-help-list li a").get(0)).click()},generateSubMenu:function(t,i){e("#gollum-editor-help-list").html(""),e("#gollum-editor-help-content").html("");for(var a=0;a<t.content.length&&typeof t.content[a]=="object";a++){var n=e('<li><a href="#" rel="'+i+":"+a+'">'+t.content[a].menuName+"</a></li>");e("#gollum-editor-help-list").append(n),n.children("a").click(l.evtSubMenuClick)}},hide:function(){e.browser.msie?e("#gollum-editor-help").css("display","none"):e("#gollum-editor-help").animate({opacity:0},200,function(){e("#gollum-editor-help").animate({height:"hide"},200)})},show:function(){e.browser.msie?e("#gollum-editor-help").css("display","block"):e("#gollum-editor-help").animate({height:"show"},200,function(){e("#gollum-editor-help").animate({opacity:1},300)})},showHelpFor:function(t,i){var a=l._HELP[l._ACTIVE_HELP_LANG][t].content[i].data;e("#gollum-editor-help-content").html(a)},isLoadedFor:function(e){for(var t=0;t<l._LOADED_HELP_LANGS.length;t++)if(e==l._LOADED_HELP_LANGS[t])return!0;return!1},isShown:function(){return e("#gollum-editor-help").is(":visible")},isValidHelpFormat:function(e){return"object"==typeof e&&e.length&&typeof e[0].menuName=="string"&&typeof e[0].content=="object"&&e[0].content.length},setActiveHelp:function(t){l.isLoadedFor(t)?(l._ACTIVE_HELP_LANG=t,e("#function-help").length&&(e("#function-help").hasClass("disabled")&&e("#function-help").removeClass("disabled"),e("#function-help").unbind("click"),e("#function-help").click(l.evtHelpButtonClick),l.generateHelpMenuFor(t))):(e("#function-help").length&&e("#function-help").addClass("disabled"),l.isShown()&&l.hide())},evtHelpButtonClick:function(t){t.preventDefault(),l.isShown()?(e("#gollum-editor-help").length&&e("#gollum-editor-help").attr("data-autodisplay")!=="undefined"&&e("#gollum-editor-help").attr("data-autodisplay")==="true"&&(e.post("/wiki/help?_method=delete"),e("#gollum-editor-help").attr("data-autodisplay","")),l.hide()):l.show()},evtParentMenuClick:function(t){if(t.preventDefault(),!e(this).hasClass("selected")){var i=e(this).attr("rel"),a=l._HELP[l._ACTIVE_HELP_LANG][i];e("#gollum-editor-help-parent li a").removeClass("selected"),e(this).addClass("selected"),l.generateSubMenu(a,i),e(e("#gollum-editor-help-list li a").get(0)).click()}},evtSubMenuClick:function(t){if(t.preventDefault(),!e(this).hasClass("selected")){var i=e(this).attr("rel").split(":");e("#gollum-editor-help-list li a").removeClass("selected"),e(this).addClass("selected"),l.showHelpFor(i[0],i[1])}}};e.GollumEditor.defineHelp=l.define,e.GollumEditor.Dialog=e.GollumDialog,e.GollumEditor.replaceSelection=function(t){s.replaceFieldSelection(e("#gollum-editor-body"),t)},e.GollumEditor.Placeholder=e.GollumPlaceholder}(jQuery),$(document).ready(function(){$("#delete-link").click(function(e){var t=confirm($(this).data("confirm"));if(t){var i=baseUrl+"/delete/"+pageFullPath;window.location=i}e.preventDefault()}),$(".markdown-body a.menu, .markdown-body a.anchor").click(function(){id=$($(this).attr("href")),$("html,body").animate({scrollTop:id.offset().top-60},1)});var e={node1:null,node2:null,selectNodeRange:function(){if(e.node1&&e.node2){if($("#wiki-history td.selected").removeClass("selected"),e.node1.addClass("selected"),e.node2.addClass("selected"),e.nodeComesAfter(e.node1,e.node2)){var t=e.node1;e.node1=e.node2,e.node2=t}for(var i=e.node1.next();i&&(i.addClass("selected"),i[0]!=e.node2[0]);)i=i.next()}},nodeComesAfter:function(e,t){var i=!1;return $(e).prevAll().each(function(){$(this)[0]==$(t)[0]&&(i=!0)}),i},checkNode:function(t){var i=t,a=$(t).parent().parent();i.is(":checked")?e.node1?e.node2?i[0].checked=!1:(e.node2=a,e.node2.addClass("selected"),e.selectNodeRange(e.node1,e.node2)):(e.node1=a,e.node1.addClass("selected")):($("#wiki-history tr.selected").each(function(){$(this).find("td.checkbox input").is(":checked")||$(this).removeClass("selected")}),a[0]==e.node1[0]?(e.node1=null,e.node2&&(e.node1=e.node2,e.node2=null)):a[0]==e.node2[0]&&(e.node2=null))}};if($.browser.mozilla?$("body").addClass("ff"):$.browser.webkit?$("body").addClass("webkit"):$.browser.msie&&($("body").addClass("ie"),$.browser.version=="7.0"?$("body").addClass("ie7"):$.browser.version=="8.0"&&$("body").addClass("ie8")),$("#minibutton-upload-page").length&&($("#minibutton-upload-page").parent().removeClass("jaws"),$("#minibutton-upload-page").click(function(e){e.preventDefault(),$.GollumDialog.init({title:"Upload File",fields:[{type:"file",context:"Your uploaded file will be accessible at /uploads/[filename]"}],OK:function(){$("#upload").submit()}})})),$("#minibutton-rename-page").length&&($("#minibutton-rename-page").parent().removeClass("jaws"),$("#minibutton-rename-page").click(function(e){e.preventDefault();var t=pagePath(),i=pageName(),a="Renamed page will be under <span class='path'>"+htmlEscape("/"+t)+"</span>"+" unless an absolute path is given.";$.GollumDialog.init({title:"Rename Page",fields:[{id:"name",name:"Rename to",type:"text",defaultValue:i||"",context:a}],OK:function(e){var a="Rename Page";e.name&&(a=e.name);var n=abspath(t,a),o=n[0],s="/"+t==o?"Renamed "+i+" to "+a:"Renamed "+i+" to "+n.join("/"),r=$("form[name=rename]");r.children("input[name=rename]").val(n.join("/")),r.children("input[name=message]").val(s),r.submit()}})})),$("#minibutton-new-page").length&&($("#minibutton-new-page").parent().removeClass("jaws"),$("#minibutton-new-page").click(function(e){e.preventDefault();var t=pagePath();void 0===t&&$("#file-browser").length!=0&&(t=""==baseUrl?window.location.pathname.substr(1):window.location.pathname.substr(baseUrl.length+1),t=t.replace(/^pages\/?/,""),t=t.replace(/\/$/,""));var i="Page will be created under <span class='path'>"+htmlEscape("/"+t)+"</span>"+" unless an absolute path is given.";$.GollumDialog.init({title:"Create New Page",fields:[{id:"name",name:"Page Name",type:"text",defaultValue:"",context:i}],OK:function(e){var i="New Page";e.name&&(i=e.name);for(var a=[],n=abspath(t,i).join("/").split("/"),o=0;o<n.length;o++)a.push(encodeURIComponent(n[o]));window.location=baseUrl+a.join("/")}})})),$("#wiki-wrapper").hasClass("history")&&($("#wiki-history td.checkbox input").each(function(){$(this).click(function(){e.checkNode($(this))}),$(this).is(":checked")&&e.checkNode($(this))}),$(".history a.action-compare-revision").length&&$(".history a.action-compare-revision").click(function(){$("#version-form").submit()})),$("#searchbar a#search-submit").length&&($.GollumPlaceholder.add($("#searchbar #search-query")),$("#searchbar a#search-submit").click(function(e){e.preventDefault(),$("#searchbar #search-form")[0].submit()}),$("#searchbar #search-form").submit(function(){$.GollumPlaceholder.clearAll(),$(this).unbind("submit"),$(this).submit()})),$("#gollum-revert-form").length&&$(".gollum-revert-button").length&&$("a.gollum-revert-button").click(function(e){e.preventDefault(),$("#gollum-revert-form").submit()}),$("#wiki-wrapper.edit").length&&($("#gollum-editor-submit").click(function(){window.onbeforeunload=null}),$("#gollum-editor-body").one("change",function(){window.onbeforeunload=function(){return"Leaving will discard all edits!"}}),$.GollumEditor()),$("#wiki-wrapper.create").length&&($("#gollum-editor-submit").click(function(){window.onbeforeunload=null}),$("#gollum-editor-body").one("change",function(){window.onbeforeunload=function(){return"Leaving will not create a new page!"}}),$.GollumEditor({NewFile:!0,MarkupType:default_markup})),$("#wiki-history").length){var t={};$("img.identicon").each(function(e,i){var a=$(i),n=parseInt(a.data("identicon"),10),o=t[n];if(void 0===o){var s=$("<canvas width=16 height=16/>").get(0);render_identicon(s,n,16),o=s.toDataURL("image/png"),t[n]=o}a.attr("src",o)})}}),function(e){var t={_PLACEHOLDERS:[],_p:function(t){this.fieldObject=t,this.placeholderText=t.val();var i=t.val();t.addClass("ph"),t.blur(function(){e(this).val()==""&&(e(this).val(i),e(this).addClass("ph"))}),t.focus(function(){e(this).removeClass("ph"),e(this).val()==i?e(this).val(""):e(this)[0].select()})},add:function(e){t._PLACEHOLDERS.push(new t._p(e))},clearAll:function(){for(var e=0;e<t._PLACEHOLDERS.length;e++)t._PLACEHOLDERS[e].fieldObject.val()==t._PLACEHOLDERS[e].placeholderText&&t._PLACEHOLDERS[e].fieldObject.val("")},exists:function(){return _PLACEHOLDERS.length}};e.GollumPlaceholder=t}(jQuery),/*
 * jQuery Color Animations
 * Copyright 2007 John Resig
 * Released under the MIT and GPL licenses.
 */
function(e){function t(t){var i;return t&&t.constructor==Array&&t.length==3?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(i[1])*2.55,parseFloat(i[2])*2.55,parseFloat(i[3])*2.55]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:a[e.trim(t).toLowerCase()]}function i(i,a){var n;do{if(n=e.curCSS(i,a),""!=n&&"transparent"!=n||e.nodeName(i,"body"))break;a="backgroundColor"}while(i=i.parentNode);return t(n)}e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,n){e.fx.step[n]=function(e){e.state==0&&(e.start=i(e.elem,n),e.end=t(e.end)),e.elem.style[n]="rgb("+[Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2]),255),0)].join(",")+")"}});var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t={"function-bold":{search:/(^[\n]+)([\n\s]*)/g,replace:"*$1*$2"},"function-italic":{search:/(^[\n]+)([\n\s]*)/g,replace:"_$1_$2"},"function-code":{search:/(^[\n]+)([\n\s]*)/g,replace:"+$1+$2"},"function-ul":{search:/(^[\n]+)([\n\s]*)/g,replace:"* $1$2"},"function-ol":{search:/(.+)([\n]?)/g,replace:". $1$2"},"function-blockquote":{search:/(.+)([\n]?)/g,replace:"----\n$1$2\n----\n"},"function-link":{exec:function(t,i){e.GollumEditor.Dialog.init({title:"Insert Link",fields:[{id:"text",name:"Link Text",type:"text",help:"The text to display to the user.",defaultValue:i},{id:"href",name:"URL",type:"text",help:"The URL to link to."}],OK:function(t){var i="";t.text&&t.href&&(i=t.href+"["+t.text+"]"),e.GollumEditor.replaceSelection(i)}})}},"function-image":{exec:function(){e.GollumEditor.Dialog.init({title:"Insert Image",fields:[{id:"url",name:"Image URL",type:"text"},{id:"alt",name:"Alt Text",type:"text"}],OK:function(t){var i="";t.url&&t.alt&&(i="image::"+t.url+"["+t.alt+"]"),e.GollumEditor.replaceSelection(i)}})}}};e.GollumEditor.defineLanguage("asciidoc",t);var i=[{menuName:"Text Formatting",content:[{menuName:"Headers",data:"<p>ASCIIDoc headers can be written in two ways: with differing underlines or with different indentation using <code>=</code> (equals sign). ASCIIDoc supports headings 1-4. The editor will automatically use the <code>=</code> notation. To create a level one header, prefix your line with one <code>=</code>. Level two headers are created with <code>==</code> and so on.</p>"},{menuName:"Bold / Italic",data:"<p>To display text as <strong>bold</strong>, wrap the text in <code>*</code> (asterisks). To display text as <em>italic</em>, wrap the text in <code>_</code> (underscores). To create <code>monospace</code> text, wrap the text in <code>+</code> (plus signs)."},{menuName:"Scripts",data:"<p>Superscript and subscript is created the same way as other inline formats. To create superscript text, wrap your text in <code>^</code> (carats). To create subscript text, wrap your text in <code>~</code> (tildes).</p>"},{menuName:"Special Characters",data:"<p>ASCIIDoc will automatically convert textual representations of commonly-used special characters. For example, <code>(R)</code> becomes &reg;, <code>(C)</code> becomes &copy; and <code>(TM)</code> becomes &trade;.</p>"}]},{menuName:"Blocks",content:[{menuName:"Paragraphs",data:"<p>ASCIIDoc allows paragraphs to have optional titles or icons to denote special sections. To make a normal paragraph, simply add a line between blocks and a new paragraph will start. If you want to title your paragraphs, adda line prefixed by <code>.</code> (full stop). An example paragraph with optional title is displayed below:<br><br><code>.Optional Title<br><br>This is my paragraph. It is two sentences long.</code></p>"},{menuName:"Source Blocks",data:"<p>To create source blocks (long blocks of code), follow the same syntax as above but with an extra line denoting the inline source and lines of four dashes (<code>----</code>) delimiting the source block.. An example of Python source is below:<br><br><code>.python.py<br>[source,python]<br>----<br># i just wrote a comment in python<br># and maybe one more<br>----</code></p>"},{menuName:"Comment Blocks",data:"<p>Comment blocks are useful if you want to keep notes for yourself inline but do not want them displayed to the public. To create a comment block, simply wrap the paragraph in dividers with four slashes (<code>////</code>). An example comment block is below:<br><br><code>////<br>My comment block is here now<br><br>It can be multiple paragraphs. Really.<br>////</p>"},{menuName:"Quote Blocks",data:"<p>Quote blocks work much like comment blocks &mdash; simply create dividers using four underscores (<code>____</code>) around your quote. An example quote block is displayed below:<br><code>____<br>This is my quote block. Quote something nice here, otherwise there is no point in quoting.<br>____</code></p>"}]},{menuName:"Macros",content:[{menuName:"Links",data:'<p>To create links to external pages, you can simply write the URI if you want the URI to link to itself. (i.e., <code>http://github.com/</code> will automatically be parsed to <a href="javascript:void(0);">http://github.com/</a>. If you want different text to be displayed, simply append it to the end of the URI in between <code>[</code> (brackets.) For example, <code>http://github.com/[GitHub]</code> will be parsed as <a href="javascript:void(0);">GitHub</a>, with the URI pointing to <code>http://github.com</code>.</p>'},{menuName:"Images",data:"<p>Images in ASCIIDoc work much like hyperlinks, but image URLs are prefixed with <code>image:</code>. For example, to link to an image at <code>images/icons/home.png</code>, write <code>image:images/icons/home.png</code>. Alt text can be added by appending the text to the URI in <code>[</code> (brackets).</p>"}]}];e.GollumEditor.defineHelp("asciidoc",i)}(jQuery),function(e){var t={"function-bold":{search:/([^\n]+)([\n]*)/gi,replace:"**$1**$2"},"function-italic":{search:/([^\n]+)([\n]*)/gi,replace:"//$1//$2"},"function-code":{search:/([^\n]+)([\n]*)/gi,replace:"{{{$1}}}$2"},"function-hr":{append:"\n\n----\n\n"},"function-ul":{search:/(.+)([\n]?)/gi,replace:"* $1$2"},"function-ol":{search:/(.+)([\n]?)/gi,replace:"# $1$2"},"function-link":{exec:function(t,i){e.GollumEditor.Dialog.init({title:"Insert Link",fields:[{id:"text",name:"Link Text",type:"text",help:"The text to display to the user.",defaultValue:i},{id:"href",name:"URL",type:"text",help:"The URL to link to."}],OK:function(t){var i="[["+t.href+"|"+t.text+"]]";e.GollumEditor.replaceSelection(i)}})}},"function-image":{exec:function(){e.GollumEditor.Dialog.init({title:"Insert Image",fields:[{id:"url",name:"Image URL",type:"text"},{id:"alt",name:"Alt Text",type:"text"}],OK:function(t){var i="";t.url&&t.alt&&(i="{{"+t.url,t.alt!=""&&(i+="|"+t.alt+"}}")),e.GollumEditor.replaceSelection(i)}})}}};e.GollumEditor.defineLanguage("creole",t)}(jQuery),function(e){var t={"function-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"**$1**$2"},"function-italic":{search:/([^\n]+)([\n\s]*)/g,replace:"_$1_$2"},"function-code":{search:/([^\n]+)([\n\s]*)/g,replace:"`$1`$2"},"function-hr":{append:"\n***\n"},"function-ul":{search:/(.+)([\n]?)/g,replace:"* $1$2"},"function-ol":{exec:function(t,i){for(var a="",n=i.split("\n"),o=/[\w]+/,s=0;s<n.length;s++)o.test(n[s])&&(a+=(s+1).toString()+". "+n[s]+"\n");e.GollumEditor.replaceSelection(a)}},"function-blockquote":{search:/(.+)([\n]?)/g,replace:"> $1$2"},"function-h1":{search:/(.+)([\n]?)/g,replace:"# $1$2"},"function-h2":{search:/(.+)([\n]?)/g,replace:"## $1$2"},"function-h3":{search:/(.+)([\n]?)/g,replace:"### $1$2"},"function-link":{exec:function(t,i){e.GollumEditor.Dialog.init({title:"插入链接",fields:[{id:"text",name:"链接文字",type:"text",defaultValue:i},{id:"href",name:"URL",type:"text"}],OK:function(t){var i="";t.text&&t.href&&(i="["+t.text+"]("+t.href+")"),e.GollumEditor.replaceSelection(i)}})}},"function-image":{exec:function(){e.GollumEditor.Dialog.init({title:"插入图片",fields:[{id:"url",name:"图片路径",type:"text"},{id:"alt",name:"Alt文字",type:"text"}],OK:function(t){var i="";t.url&&t.alt&&(i="!["+t.alt+"]"+"("+t.url+")"),e.GollumEditor.replaceSelection(i)}})}}},i=[{menuName:"区块元素",content:[{menuName:"段落与换行",data:"<p>创建一个段落, 由一个或多个连续的文本行组成。</p><p>换行只需输入两个以上的空格即可。</p>"},{menuName:"标题",data:"<p>一个<code>#</code> 代表h1，<code>##</code> 代表h2，<code>###</code> 代表h3。</p><p>例如：</p><p># 你好h1</p><p>注意# 后面的空格！</p>"},{menuName:"区块引用",data:"<p>区块用 <code>&gt;</code> 表示。每行一个 <code>&gt; </code>符号。</p><p>例如：</p><p>&gt; Hello,</p><p>&gt; 欢迎来到码云</p><p>注意<code>&gt;</code> 后面有空格。</p>"},{menuName:"列表",data:"<p>支持有序或者无序的列表. 你可以使用 <code>*</code>, <code>+</code> or <code>-</code>.</p> 符号后面最多有4个空格或者一个tab."},{menuName:"代码块",data:"<p>建立代码区块很简单，只要简单地缩进 4 个空格或是 1 个制表符就可以</p>"},{menuName:"分隔线",data:"<p>你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。下面每种写法都可以建立分隔线：</p><p>* * *</p><p>***</p><p>*****</p><p>- - -</p><p>---------------------------------------</p>"}]},{menuName:"区段元素",content:[{menuName:"链接",data:"<p>创建链接的方式很简单，如下格式：</p><p>[谷歌](http://www.google.com)</p>你也可以在编辑器中直接点击链接按钮创建。"},{menuName:"强调",data:"<p>使用星号（*）和底线（_）作为标记强调字词的符号，被 * 或 _ 包围的字词会被转成用 &lt;em&gt; 标签包围，用两个 * 或 _ 包起来的话，则会被转成 <code>&lt;strong&gt;</code></p><p>例如：</p><p>*single asterisks*</p><p>_single underscores_</p><p>**double asterisks**</p><p>__double underscores__</p></p>"},{menuName:"代码",data:"<p>需要包含代码时，使用 (<code>`</code>)符号包围. 例如： <code>`myFunction`</code></p>"},{menuName:"图片",data:"<p>添加图片非常简单，格式如下：<p><code>![谷歌logo](http://www.google.com/logo.jpg)</code></p></p>"}]},{menuName:"其他",content:[{menuName:"自动链接",data:'<p>如果你要创建一个简单的链接，可以使用 <code>&lt;</code> and <code>&gt;</code> 包围. 例如 <a href="javascript:void(0);">http://git.oschina.net/</a> 写成 <code>&lt;http://git.oschina.net/&gt;</code>.</p>'},{menuName:"反斜杠",data:"<p>当我们只是想输出某个符号的时候，比如 +，*，#，我们可以在符号前面加入<code>\\</code>, 保持显示你想要的符号。</p><p>例如：如果你想要用星号加在文字旁边的方式来做出强调效果（但不用 <em> 标签），你可以在星号的前面加上反斜杠：<code>\\*literal asterisks\\*</code></code></p>"}]}];e.GollumEditor.defineLanguage("markdown",t),e.GollumEditor.defineHelp("markdown",i)}(jQuery),function(e){var t={"function-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"*$1*$2"},"function-italic":{search:/([^\n]+)([\n\s]*)/g,replace:"/$1/$2"},"function-code":{search:/(^[\n]+)([\n\s]*)/g,replace:"=$1=$2"},"function-ul":{search:/(.+)([\n]?)/g,replace:"* $1$2"},"function-ol":{search:/(.+)([\n]?)/g,replace:"1. $1$2"},"function-blockquote":{search:/(.+)([\n]?)/g,replace:"#+BEGIN_QUOTE\n$1$2\n#+END_QUOTE\n"},"function-h1":{search:/(.+)([\n]?)/g,replace:"* $1$2"},"function-h2":{search:/(.+)([\n]?)/g,replace:"** $1$2"},"function-h3":{search:/(.+)([\n]?)/g,replace:"*** $1$2"},"function-link":{exec:function(t,i){e.GollumEditor.Dialog.init({title:"Insert Link",fields:[{id:"text",name:"Link Text",type:"text",defaultValue:i},{id:"href",name:"URL",type:"text"}],OK:function(t){var i="";t.text&&t.href?i="[["+t.href+"]["+t.text+"]]":t.href&&(i="[["+t.href+"]]"),e.GollumEditor.replaceSelection(i)}})}},"function-image":{exec:function(){e.GollumEditor.Dialog.init({title:"Insert Image",fields:[{id:"url",name:"Image URL",type:"text"}],OK:function(t){var i="";t.url&&(i="[["+t.url+"]]"),e.GollumEditor.replaceSelection(i)}})}}},i=[{menuName:"块元素",content:[{menuName:"Paragraphs &amp; Breaks",data:"<p>To create a paragraph, simply create a block of text that is not separated by one or more blank lines. Blocks of text separated by one or more blank lines will be parsed as paragraphs.</p>"},{menuName:"Headers",data:"<p>Simply prefix your header text with the number of <code>*</code> characters to specify heading depth. For example: <code>* Header 1</code>, <code>** Header 2</code> and <code>*** Header 3</code> will be progressively smaller headers.</p>"},{menuName:"Blockquotes",data:"<p>To create a blockquote, simple embed the text between <code>#+BEGIN_QUOTE</code> and <code>#+END_QUOTE</code>. An example quote block is displayed below:<br><code>#+BEGIN_QUOTE<br>This is my quote block. Quote something nice here, otherwise there is no point in quoting.<br>#+END_QUOTE</code></p>"},{menuName:"Lists",data:"<p>Org-mode supports both ordered and unordered lists. To create an ordered list, simply prefix each line with a number (any number will do &mdash; this is why the editor only uses one number.) To create an unordered list, you can prefix each line with <code>+</code> or <code>-</code>.</p>"},{menuName:"Code Blocks",data:"<p>Code Blocks are similar to blockquote, except that <code>#+BEGIN_EXAMPLE</code> and <code>#+END_EXAMPLE</code> are used.</p>"},{menuName:"Tables",data:"<p>Org-mode supports simple tables (tables with equal number of cells in each row). To create a simple table, just separate the contents of each cell with a <code>|</code> character. For example, <br><br><code>|one|two|three|<br>|four|five|six|</code><br><br> will appear as a table with two rows and three columns.  Additionally, <br><br><code>|one|two|three|<br>|---+---+-----|<br>|four|five|six|</code><br><br> will also appear as a table, but the first row will be interpreted as a header row and the <code>&lt;th&gt;</code> tag will be used to render it. </p>"}]},{menuName:"Span Elements",content:[{menuName:"Links",data:'<p>To create links to external pages, you need to enclose the URI in double square brackets. (i.e., <code>[[http://github.com/]]</code> will automatically be parsed to <a href="javascript:void(0);">http://github.com/</a>)If you want to add text, to be displayed to the user, you write the URI and the text next to each other, both enclosed in square brackets and both of them together enclosed in another pair of square brackets. For example, if you want your link to display the text &ldquo;GitHub&rdquo;, you write <code>[[http://github.com][GitHub]]</code>.</p>'},{menuName:"Emphasis",data:"<p>Forward slashes (<code>/</code>) are treated as emphasis and are wrapped with an <code>&lt;i&gt;</code> tag. Asterisks (<code>*</code>) are treated as bold using the <code>&lt;b&gt;</code> tag.</p>"},{menuName:"Code",data:"<p>To create inline spans of code, simply wrap the code in equal signs (<code>=</code>). Orgmode will turn <code>=myFunction=</code> into <code>myFunction</code>.</p>"},{menuName:"Images",data:"<p>Org-mode image syntax is exactly same as the syntax that you would use for a URI to link to itself. The image URI is enclosed in double square brackets. Alt text on images is not currently supported by Gollum's Org-mode parser.</p>"}]}];e.GollumEditor.defineLanguage("org",t),e.GollumEditor.defineHelp("org",i)}(jQuery),function(e){var t={"function-bold":{search:/(^[\n]+)([\n\s]*)/g,replace:"B<$1>$2"},"function-italic":{search:/(^[\n]+)([\n\s]*)/g,replace:"I<$1>$2"},"function-code":{search:/(^[\n]+)([\n\s]*)/g,replace:"C<$1>$2"},"function-h1":{search:/(.+)([\n]?)/gi,replace:"=head1 $1$2"},"function-h2":{search:/(.+)([\n]?)/gi,replace:"=head2 $1$2"},"function-h3":{search:/(.+)([\n]?)/gi,replace:"=head3 $1$2"},"function-link":{exec:function(t,i){e.GollumEditor.Dialog.init({title:"Insert Link",fields:[{id:"text",name:"Link Text",type:"text",defaultValue:i},{id:"href",name:"URL",type:"text"}],OK:function(t){var i="";t.text&&t.href&&(i="L<"+t.text+"|"+t.href+">"),e.GollumEditor.replaceSelection(i)}})}}};e.GollumEditor.defineLanguage("pod",t);var i=[{menuName:"Command Paragraphs",content:[{menuName:"Headings",data:"<p>All command paragraphs start with <code>=</code> (equals sign).</p><p>To create headings 1 through 4, begin your command paragraph with <code>=headN</code>, where <code>N</code> is the number of the heading 1 through 4. For example, to make a first-order heading (the largest possible,) write <code>=head1</code>, then on the next line begin your paragraph that you want under the heading.</p>"},{menuName:"Beginning &amp; Ending",data:"<p>Perl pod blocks should begin with <code>=pod</code> and end with <code>=cut</code>, signifying to Pod parsers that the pod block has begun and ended. These command paragraphs only signal the beginning and end of a pod block.</p>"},{menuName:"Other Formats",data:"<p>pod also allows blocks in other formats, such as HTML or plain text. To create one of these blocks, use the <code>=format SYNTAX</code> command paragraph, where <code>SYNTAX</code> is the syntax of the block (e.g. <code>html</code> or <code>txt</code>). At the end of your block, use the <code>=end SYNTAX</code> block.</p>"},{menuName:"Encoding",data:"<p>If you are having encoding troubles, use the <code>=encoding ENC_TYPE</code> command, where <code>ENC_TYPE</code> is the encoding type (e.g. <code>utf8</code>, <code>koi8-r</code>). This will affect the entire document, not just the block below the command.</p>"}]},{menuName:"Formatting",content:[{menuName:"Text",data:"<p>Formatting text as <strong>bold</strong>, <em>italic</em> or <code>code</code> works in the <code>S&lt;word&gt;</code> syntax, where <code>S</code> is an abbreviation for the type of text you are trying to create. For example, <code>B&lt;my bold text&gt;</code> becomes <strong>my bold text</strong>,  <code>I&lt;italic text&gt;</code> becomes <em>italic text</em> and <code>C&lt;code here()&gt;</code> becomes <code>code here()</code>.</p>"},{menuName:"Hyperlinks",data:"<p>Writing hyperlinks in pod is much like formatting text, using the same <code>S&lt;&gt;</code> syntax. Instead of <code>B</code>, <code>I</code> or <code>C</code>, use <code>L</code> to begin a hyperlink.</p><p>pod allows you to hyperlink to a <code>man</code> page, a Perl documentation page, or another web page. To link to a <code>man</code> or Perl documentation page, simply include the page name in the link (e.g. <code>L&lt;perl(1)&gt;</code> or <code>L&lt;Net::Ping&gt;</code>). If you want to link to a web page, separate the URL and the link text with a pipe (e.g. to link to github.com, write <code>L&lt;GitHub|http://github.com/&gt;</code>)."}]}];e.GollumEditor.defineHelp("pod",i)}(jQuery),function(e){var t={"function-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"((*$1*))$2"},"function-code":{search:/([^\n]+)([\n\s]*)/g,replace:"(({$1}))$2"},"function-ul":{search:/(.+)([\n]?)/gi,replace:"* $1$2"},"function-ol":{exec:function(t,i){for(var a="",n=i.split("\n"),o=/[\w]+/,s=0;s<n.length;s++)o.test(n[s])&&(a+="("+(s+1).toString()+") "+n[s]);e.GollumEditor.replaceSelection(a)}},"function-h1":{search:/(.+)([\n]?)/gi,replace:"= $1$2"},"function-h2":{search:/(.+)([\n]?)/gi,replace:"== $1$2"},"function-h3":{search:/(.+)([\n]?)/gi,replace:"=== $1$2"}};e.GollumEditor.defineLanguage("rdoc",t)}(jQuery),function(e){var t={"function-bold":{search:/(^[\n]+)([\n\s]*)/g,replace:"*$1*$2"},"function-italic":{search:/(^[\n]+)([\n\s]*)/g,replace:"_$1_$2"},"function-hr":{append:"\n***\n"},"function-code":{search:/(^[\n]+)([\n\s]*)/g,replace:"<pre><code>$1</code></pre>$2"},"function-ul":{search:/(.+)([\n]?)/gi,replace:"* $1$2"},"function-ol":{search:/(.+)([\n]?)/gi,replace:"# $1$2"},"function-blockquote":{search:/(.+)([\n]?)/gi,replace:"bq. $1$2"},"function-link":{exec:function(t,i){e.GollumEditor.Dialog.init({title:"Insert Link",fields:[{id:"text",name:"Link Text",type:"text",help:"The text to display to the user.",defaultValue:i},{id:"href",name:"URL",type:"text",help:"The URL to link to."}],OK:function(t){var i="";t.text&&t.href&&(i='"'+t.text+'":'+t.href),e.GollumEditor.replaceSelection(i)}})}},"function-image":{exec:function(){e.GollumEditor.Dialog.init({title:"Insert Image",fields:[{id:"url",name:"Image URL",type:"text"},{id:"alt",name:"Alt Text",type:"text"}],OK:function(t){if(t.url){var i="!"+t.url;t.alt!=""&&(i+="("+t.alt+")"),i+="!",e.GollumEditor.replaceSelection(i)}}})}}};e.GollumEditor.defineLanguage("textile",t);var i=[{menuName:"Phrase Modifiers",content:[{menuName:"Emphasis / Strength",data:"<p>To place emphasis or strength on inline text, simply place <code>_</code> (underscores) around the text for emphasis or <code>*</code> (asterisks) around the text for strength. In most browsers, <code>_mytext_</code> will appear as italics and <code>*mytext*</code> will appear as bold.</p><p>To force italics or bold, simply double the characters: <code>__mytext__</code> will appear italic and <code>**mytext**</code> will appear as bold text.</p>"},{menuName:"Citations / Editing",data:'<p>To display citations, wrap your text in <code>??</code> (two question marks).</p><p>To display edit marks such as deleted text (strikethrough) or inserted text (underlined text), wrap your text in <code>-</code> (minuses) or <code>+</code> (pluses). For example <code>-mytext-</code> will be rendered as <span style="text-decoration: line-through;">mytext</span> and <code>+mytext+</code> will be rendered as <span style="text-decoration: underline;">mytext</span></p>'},{menuName:"Superscript / Subscript",data:"<p>To display superscript, wrap your text in <code>^</code> (carets). To display subscript, wrap your text in <code>~</code> (tildes).</p>"},{menuName:"Code",data:"<p>To display monospace code, wrap your text in <code>@</code> (at symbol). For example, <code>@mytext@</code> will appear as <code>mytext</code>.</p>"},{menuName:"Acronyms",data:'<p>To create an acronym, suffix the acronym with the definition in parentheses. For example, <code>JS(JavaScript)</code> will be displayed as <abbr title="JavaScript">JS</abbr>.</p>'}]},{menuName:"Block Modifiers",content:[{menuName:"Headings",data:"<p>To display a heading in Textile, prefix your line of text with <code>hn.</code>, where <code>n</code> equals the heading size you want (1 is largest, 6 is smallest).</p>"},{menuName:"Paragraphs / Quotes",data:"<p>To create a new paragraph, prefix your first line of a block of text with <code>p.</code>.</p><p>To create a blockquote, make sure at least one blank line exists between your text and any surrounding text, and then prefix that block with <code>bq.</code> If you need to extend a blockquote to more than one text block, write <code>bq..</code> (note the two periods) and prefix your next normal paragraph with <code>p.</code></p>"},{menuName:"Code Blocks",data:"<p>Code blocks in textile are simply prefixed like any other block. To create a code block, place the beginning of the block on a separate line and prefix it with <code>bc.</code></p><p>To display a preformatted block, prefix the block with <code>pre.</code></p>"},{menuName:"Lists",data:"<p>To create ordered lists, prefix each line with <code>#</code>. To create unordered lists, prefix each line with <code>*</code>.</p>"}]},{menuName:"Links / Images",content:[{menuName:"Links",data:'<p>To display a link, put the text you want to display in quotes, then a colon (<code>:</code>), then the URL after the colon. For example <code>&quot;GitHub&quot;:http://github.com/</code> will appear as <a href="javascript:void(0);">GitHub</a>.</p>'},{menuName:"Images",data:"<p>To display an image, simply wrap the image&rsquo;s URL in <code>!</code> (exclamation points). If you want to link the image to a URL, you can blend the image and link syntax: place your image URL in the exclamation points and suffix that with a colon and your URL. For example, an image at <code>http://myurl/image.png</code> that should link to <code>http://myurl/</code> should be written as <code>!http://myurl/image.png!:http://myurl/</code>.</p>"}]}];e.GollumEditor.defineHelp("textile",i)}(jQuery),window.Mousetrap=function(){function e(e,t,i){return e.addEventListener?e.addEventListener(t,i,!1):(e.attachEvent("on"+t,i),void 0)}function t(e){return"keypress"==e.type?String.fromCharCode(e.which):u[e.which]?u[e.which]:h[e.which]?h[e.which]:String.fromCharCode(e.which).toLowerCase()}function i(e){var t,e=e||{},i=!1;for(t in v)e[t]?i=!0:v[t]=0;i||(w=!1)}function a(e,t,i,a,n){var o,r,l=[];if(!m[e])return[];for("keyup"==i&&s(e)&&(t=[e]),o=0;o<m[e].length;++o)r=m[e][o],r.seq&&v[r.seq]!=r.level||i!=r.action||"keypress"!=i&&t.sort().join(",")!==r.modifiers.sort().join(",")||(a&&r.combo==n&&m[e].splice(o,1),l.push(r));return l}function n(e,t){!1===e(t)&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,t.cancelBubble=!0)}function o(e){e.which="number"==typeof e.which?e.which:e.keyCode;var o=t(e);if(o)if("keyup"==e.type&&b==o)b=!1;else{var r=e.target||e.srcElement,l=r.tagName;if(!(-1<(" "+r.className+" ").indexOf(" mousetrap ")?0:"INPUT"==l||"SELECT"==l||"TEXTAREA"==l||r.contentEditable&&"true"==r.contentEditable)){r=[],e.shiftKey&&r.push("shift"),e.altKey&&r.push("alt"),e.ctrlKey&&r.push("ctrl"),e.metaKey&&r.push("meta");for(var r=a(o,r,e.type),c={},d=!1,l=0;l<r.length;++l)r[l].seq?(d=!0,c[r[l].seq]=1,n(r[l].callback,e)):!d&&!w&&n(r[l].callback,e);e.type==w&&!s(o)&&i(c)}}}function s(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function r(e,t,i){if(!i){if(!c){c={};for(var a in u)a>95&&112>a||u.hasOwnProperty(a)&&(c[u[a]]=a)}i=c[e]?"keydown":"keypress"}return"keypress"==i&&t.length&&(i="keydown"),i}function l(e,o,c,u,h){var g,y,e=e.replace(/\s+/g," "),_=e.split(" "),k=[];if(1<_.length){var x=e,M=c;for(v[x]=0,M||(M=r(_[0],[])),e=function(){w=M,++v[x],clearTimeout(d),d=setTimeout(i,1e3)},c=function(e){n(o,e),"keyup"!==M&&(b=t(e)),setTimeout(i,10)},u=0;u<_.length;++u)l(_[u],u<_.length-1?e:c,M,x,u)}else{for(y="+"===e?["+"]:e.split("+"),_=0;_<y.length;++_)g=y[_],p[g]&&(g=p[g]),c&&"keypress"!=c&&f[g]&&(g=f[g],k.push("shift")),s(g)&&k.push(g);c=r(g,k,c),m[g]||(m[g]=[]),a(g,k,c,!u,e),m[g][u?"unshift":"push"]({callback:o,modifiers:k,action:c,seq:u,level:h,combo:e})}}for(var c,d,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},h={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},f={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},p={option:"alt",command:"meta","return":"enter",escape:"esc"},m={},g={},v={},b=!1,w=!1,y=1;20>y;++y)u[111+y]="f"+y;for(y=0;9>=y;++y)u[y+96]=y;return e(document,"keypress",o),e(document,"keydown",o),e(document,"keyup",o),{bind:function(e,t,i){for(var a=e instanceof Array?e:[e],n=0;n<a.length;++n)l(a[n],t,i);g[e+":"+i]=t},unbind:function(e,t){g[e+":"+t]&&(delete g[e+":"+t],this.bind(e,function(){},t))},trigger:function(e,t){g[e+":"+t]()},reset:function(){m={},g={}}}}(),/*
 * jQuery File Upload Plugin 5.31.6
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){(i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var a=e-this.timestamp;return(!this.bitrate||!i||a>i)&&(this.bitrate=(t-this.loaded)*(1e3/a)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return typeof t.formData=="function"?t.formData(t.form):e.isArray(t.formData)?t.formData:e.type(t.formData)==="object"?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var i,a=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&a-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=a,i=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=i-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(a,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=i,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(a,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var i=this,a=t.xhr?t.xhr():e.ajaxSettings.xhr();a.upload&&(e(a.upload).bind("progress",function(e){var a=e.originalEvent;e.lengthComputable=a.lengthComputable,e.loaded=a.loaded,e.total=a.total,i._onProgress(e,t)}),t.xhr=function(){return a})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,a=this,n=t.files[0],o=t.multipart||!e.support.xhrFileUpload,s=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",n)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:s,value:t.blob}):e.each(t.files,function(e,a){i.push({name:t.paramName[e]||s,value:a})})):(a._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(s,t.blob,n.name):e.each(t.files,function(e,n){(a._isInstanceOf("File",n)||a._isInstanceOf("Blob",n))&&i.append(t.paramName[e]||s,n,n.name)})),t.data=i):(t.contentType=n.type,t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),a=t.paramName;return a?e.isArray(a)||(a=[a]):(a=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",n=(t.prop("files")||[1]).length;n;)a.push(i),n-=1}),a.length||(a=[i.prop("name")||"files[]"])),a},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,a){var n=e.Deferred(),o=n.promise();return i=i||this.options.context||o,t===!0?n.resolveWith(i,a):t===!1&&n.rejectWith(i,a),o.abort=n.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,i){var a=this,n=function(t){return e.Deferred().resolveWith(a,[t]).promise()};i.process=function(e,t){return(e||t)&&(i._processQueue=this._processQueue=(this._processQueue||n(this)).pipe(e,t)),this._processQueue||n(this)},i.submit=function(){return this.state()!=="pending"&&(i.jqXHR=this.jqXHR=a._trigger("submit",t,this)!==!1&&a._onSend(t,this)),this.jqXHR||a._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():a._getXHRPromise()},i.state=function(){return this.jqXHR?a._getDeferredState(this.jqXHR):this._processQueue?a._getDeferredState(this._processQueue):void 0},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),a=i&&i.length>1&&parseInt(i[1],10);return a&&a+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var a,n,o=this,s=t.files[0],r=s.size,l=t.uploadedBytes,c=t.maxChunkSize||r,d=this._blobSlice,u=e.Deferred(),h=u.promise();return this._isXHRUpload(t)&&d&&(l||r>c)&&!t.data?i?!0:l>=r?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(n=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=d.call(s,l,l+c,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+r,o._initXHRData(i),o._initProgressListener(i),a=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(a,s,c){l=o._getUploadedBytes(c)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=a,i.textStatus=s,i.jqXHR=c,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),r>l?n():u.resolveWith(i.context,[a,s,c])}).fail(function(e,t,a){i.jqXHR=e,i.textStatus=t,i.errorThrown=a,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),u.rejectWith(i.context,[e,t,a])})},this._enhancePromise(h),h.abort=function(){return a.abort()},n(),h):!1},_beforeSend:function(e,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,a,n){var o=n._progress.total,s=n._response;n._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),n),s.result=n.result=t,s.textStatus=n.textStatus=i,s.jqXHR=n.jqXHR=a,this._trigger("done",null,n)},_onFail:function(e,t,i,a){var n=a._response;a.recalculateProgress&&(this._progress.loaded-=a._progress.loaded,this._progress.total-=a._progress.total),n.jqXHR=a.jqXHR=e,n.textStatus=a.textStatus=t,n.errorThrown=a.errorThrown=i,this._trigger("fail",null,a)},_onAlways:function(e,t,i,a){this._trigger("always",null,a)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var a,n,o,s,r=this,l=r._getAJAXSettings(i),c=function(){return r._sending+=1,l._bitrateTimer=new r._BitrateTimer,a=a||((n||r._trigger("send",t,l)===!1)&&r._getXHRPromise(!1,l.context,n)||r._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){r._onDone(e,t,i,l)}).fail(function(e,t,i){r._onFail(e,t,i,l)}).always(function(e,t,i){if(r._onAlways(e,t,i,l),r._sending-=1,r._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>r._sending)for(var a=r._slots.shift();a;){if(r._getDeferredState(a)==="pending"){a.resolve();break}a=r._slots.shift()}r._active===0&&r._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),s=o.pipe(c)):(this._sequence=this._sequence.pipe(c,c),s=this._sequence),s.abort=function(){return n=[void 0,"abort","abort"],a?a.abort():(o&&o.rejectWith(l.context,n),c())},this._enhancePromise(s)):c()},_onAdd:function(t,i){var a,n,o,s,r=this,l=!0,c=e.extend({},this.options,i),d=c.limitMultiFileUploads,u=this._getParamName(c);if((c.singleFileUploads||d)&&this._isXHRUpload(c))if(!c.singleFileUploads&&d)for(o=[],a=[],s=0;s<i.files.length;s+=d)o.push(i.files.slice(s,s+d)),n=u.slice(s,s+d),n.length||(n=u),a.push(n);else a=u;else o=[i.files],a=[u];return i.originalFiles=i.files,e.each(o||i.files,function(n,s){var c=e.extend({},i);return c.files=o?s:[s],c.paramName=a[n],r._initResponseObject(c),r._initProgressObject(c),r._addConvenienceMethods(t,c),l=r._trigger("add",t,c)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,a){return a===t[0]?i[0]:a}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var a,n=this,o=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},s):t.isDirectory?(a=t.createReader(),a.readEntries(function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(s)},s)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var a=this;return e.when.apply(e,e.map(t,function(e){return a._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,a,n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(i=e.makeArray(t.prop("files")),i.length)i[0].name===void 0&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(a=t.prop("value"),!a)return e.Deferred().resolve([]).promise();i=[{name:a.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&t.length!==1?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,a={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(a.fileInput).always(function(e){a.files=e,i.options.replaceFileInput&&i._replaceFileInput(a.fileInput),i._trigger("change",t,a)!==!1&&i._onAdd(t,a)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,a={files:[]};return i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&a.files.push(i)}),this._trigger("paste",t,a)===!1||this._onAdd(t,a)===!1)?!1:void 0},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,i=e.dataTransfer,a={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){a.files=i,t._trigger("drop",e,a)!==!1&&t._onAdd(e,a)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;if(i){if(this._trigger("dragover",t)===!1)return!1;e.inArray("Files",i.types)!==-1&&(i.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var a=e.inArray(t,this._specialOptions)!==-1;a&&this._destroyEventHandlers(),this._super(t,i),a&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===void 0?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&e.type(i)==="string"&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,a){t._isRegExpOption(e,a)&&(a=t._getRegExp(a)),i[e]=a})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,a,n=this,o=e.Deferred(),s=o.promise();return s.abort=function(){return a=!0,i?i.abort():(o.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){a||(t.files=e,i=n._onSend(null,t).then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)}))}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){var t,i={className:"autosizejs",append:"",callback:!1,resizeDelay:10},a='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',n=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],o=e(a).data("autosize",!0)[0];o.style.lineHeight="99px",e(o).css("lineHeight")==="99px"&&n.push("lineHeight"),o.style.lineHeight="",e.fn.autosize=function(a){return a=e.extend({},i,a||{}),o.parentNode!==document.body&&e(document.body).append(o),this.each(function(){function i(){var i,s={};if(t=u,o.className=a.className,l=parseInt(h.css("maxHeight"),10),e.each(n,function(e,t){s[t]=h.css(t)}),e(o).css(s),"oninput"in u){var r=u.style.width;u.style.width="0px",i=u.offsetWidth,u.style.width=r}}function s(){var n,s,r,d;t!==u&&i(),o.value=u.value+a.append,o.style.overflowY=u.style.overflowY,s=parseInt(u.style.height,10),"getComputedStyle"in window?(d=window.getComputedStyle(u),r=u.getBoundingClientRect().width,e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,t){r-=parseInt(d[t],10)}),o.style.width=r+"px"):o.style.width=Math.max(h.width(),0)+"px",o.scrollTop=0,o.scrollTop=9e4,n=o.scrollTop,l&&n>l?(u.style.overflowY="scroll",n=l):(u.style.overflowY="hidden",c>n&&(n=c)),n+=f,s!==n&&(u.style.height=n+"px",p&&a.callback.call(u,u))}function r(){clearTimeout(d),d=setTimeout(function(){h.width()!==g&&s()},parseInt(a.resizeDelay,10))}var l,c,d,u=this,h=e(u),f=0,p=e.isFunction(a.callback),m={height:u.style.height,overflow:u.style.overflow,overflowY:u.style.overflowY,wordWrap:u.style.wordWrap,resize:u.style.resize},g=h.width();h.data("autosize")||(h.data("autosize",!0),(h.css("box-sizing")==="border-box"||h.css("-moz-box-sizing")==="border-box"||h.css("-webkit-box-sizing")==="border-box")&&(f=h.outerHeight()-h.height()),c=Math.max(parseInt(h.css("minHeight"),10)-f||0,h.height()),h.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:h.css("resize")==="none"||h.css("resize")==="vertical"?"none":"horizontal"}),"onpropertychange"in u?"oninput"in u?h.on("input.autosize keyup.autosize",s):h.on("propertychange.autosize",function(){event.propertyName==="value"&&s()}):h.on("input.autosize",s),a.resizeDelay!==!1&&e(window).on("resize.autosize",r),h.on("autosize.resize",s),h.on("autosize.resizeIncludeStyle",function(){t=null,s()}),h.on("autosize.destroy",function(){t=null,clearTimeout(d),e(window).off("resize",r),h.off("autosize").off(".autosize").css(m).removeData("autosize")}),s())})}}(window.jQuery||window.Zepto),function(){var e;this.pull_requestsPage=function(){var e,t,i;return i=$(".git-pull-requests-panel"),e=$("#git-pull-requests-filters"),i.find(".ui.dropdown.searchable").dropdown({fullTextSearch:!0,action:"nothing",onChange:function(){return e.submit()}}),i.find(".ui.dropdown:not(.searchable)").dropdown({action:"nothing",onChange:function(){return e.submit()}}),t=$("#git-pull-requests-search"),t.find(".iconfont.icon-close").on("click",function(){return $(this).parent().remove()}),t.find(".keywords").on({focus:function(){return $(this).parents(".search-input-group").addClass("active")},blur:function(){return $(this).parents(".search-input-group").removeClass("active")}})},e=function(){function e(e){var t=this;this.opts=e,this.$el=$(".pull-request"),this.diffs_loaded=!1,this.commits_loaded=!1,this.activateTab(this.opts.action),this.bindEvents(),this.initMergeWidget(),this.$(".show-all-commits").on("click",function(){return t.showAllCommits()})}return e.prototype.$=function(e){return this.$el.find(e)},e.prototype.initMergeWidget=function(){var e=this;return this.showState(this.opts.current_status),$(".automerge_widget").length&&this.opts.check_enable&&$.get(this.opts.url_to_automerge_check,function(t){return e.showState(t.merge_status)},"json"),this.opts.ci_enable?$.get(this.opts.url_to_ci_check,function(t){return e.showCiState(t.status)},"json"):void 0},e.prototype.bindEvents=function(){var e=this;return this.$("#pull-tabs").on("click","a",function(e){var t,i;return t=$(e.currentTarget),i=t.attr("href"),window.history.replaceState({path:i},document.title,i),e.preventDefault()}),this.$("#pull-tabs").on("click","li",function(t){return e.activateTab($(t.currentTarget).data("action"))}),$(".accept_pull_request").on("click",function(){return $(".automerge_widget.can_be_merged").hide(),$(".merge-in-progress").show()}),this.$(".pull-right").on("click","a.js-edit",function(e){return $(".issue-content .comment-content").hide(),$(".issue-content .form-content").show(),$("#pull_request_body").focus(),e.preventDefault()}),this.$(".form-actions").on("click","a.btn-cancel",function(e){return $(".issue-content .comment-content").show(),$(".issue-content .form-content").hide(),e.preventDefault()})},e.prototype.activateTab=function(e){return this.$("#pull-tabs li").removeClass("active").each(function(){return $(this).data("action")===e?$(this).addClass("active"):void 0}),this.$("#"+e).show().siblings(".tab-pane").hide()},e.prototype.showState=function(e){return $(".automerge_widget").hide(),$(".automerge_widget."+e).show()},e.prototype.showCiState=function(e){return $(".ci_widget").hide(),$(".ci_widget.ci-"+e).show()},e.prototype.loadDiff=function(){var e=this;return $.ajax({type:"GET",url:this.$(".nav-tabs .diffs-tab a").attr("href"),beforeSend:function(){return e.$(".status").addClass("loading")},complete:function(){return e.diffs_loaded=!0,e.$(".status").removeClass("loading")},dataType:"script"})},e.prototype.showAllCommits=function(){return this.$(".first-commits").remove(),this.$(".all-commits").removeClass("hide")},e.prototype.alreadyOrCannotBeMerged=function(){return $(".automerge_widget").hide(),$(".merge-in-progress").hide(),$(".automerge_widget.already_cannot_be_merged").show()},e}(),this.PullRequest=e}.call(this),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=function(t,i){var i=i||e(t.imageBox),a={state:{},ratio:1,options:t,imageBox:i,thumbBox:i.find(t.thumbBox),spinner:i.find(t.spinner),image:new Image,getDataURL:function(){var e=this.thumbBox.width(),t=this.thumbBox.height(),a=document.createElement("canvas"),n=i.css("background-position").split(" "),o=i.css("background-size").split(" "),s=parseInt(n[0])-i.width()/2+e/2,r=parseInt(n[1])-i.height()/2+t/2,l=parseInt(o[0]),c=parseInt(o[1]),d=parseInt(this.image.height),u=parseInt(this.image.width);a.width=e,a.height=t;var h=a.getContext("2d");h.drawImage(this.image,0,0,u,d,s,r,l,c);var f=a.toDataURL("image/png");return f},getBlob:function(){for(var e=this.getDataURL(),t=e.replace("data:image/png;base64,",""),i=atob(t),a=[],n=0;n<i.length;n++)a.push(i.charCodeAt(n));return new Blob([new Uint8Array(a)],{type:"image/png"})},zoomIn:function(){this.ratio*=1.1,n()},zoomOut:function(){this.ratio*=.9,n()}},n=function(){var e=parseInt(a.image.width)*a.ratio,t=parseInt(a.image.height)*a.ratio,n=(i.width()-e)/2,o=(i.height()-t)/2;i.css({"background-image":"url("+a.image.src+")","background-size":e+"px "+t+"px","background-position":n+"px "+o+"px","background-repeat":"no-repeat"})},o=function(e){e.stopImmediatePropagation(),a.state.dragable=!0,a.state.mouseX=e.clientX,a.state.mouseY=e.clientY},s=function(e){if(e.stopImmediatePropagation(),a.state.dragable){var t=e.clientX-a.state.mouseX,n=e.clientY-a.state.mouseY,o=i.css("background-position").split(" "),s=t+parseInt(o[0]),r=n+parseInt(o[1]);i.css("background-position",s+"px "+r+"px"),a.state.mouseX=e.clientX,a.state.mouseY=e.clientY}},r=function(e){e.stopImmediatePropagation(),a.state.dragable=!1},l=function(e){a.ratio*=e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?1.1:.9,n()};return a.spinner.show(),a.image.onload=function(){a.spinner.hide(),n(),i.bind("mousedown",o),i.bind("mousemove",s),e(window).bind("mouseup",r),i.bind("mousewheel DOMMouseScroll",l)},a.image.src=t.imgSrc,i.on("remove",function(){e(window).unbind("mouseup",r)}),a};jQuery.fn.cropbox=function(e){return new t(e,this)}}),// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\
// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\
// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
function(e){var t,i,a="0.4.2",n="hasOwnProperty",o=/[\.\/]/,s="*",r=function(){},l=function(e,t){return e-t},c={n:{}},d=function(e,a){e=String(e);var n,o=i,s=Array.prototype.slice.call(arguments,2),r=d.listeners(e),c=0,u=[],h={},f=[],p=t;t=e,i=0;for(var m=0,g=r.length;g>m;m++)"zIndex"in r[m]&&(u.push(r[m].zIndex),r[m].zIndex<0&&(h[r[m].zIndex]=r[m]));for(u.sort(l);u[c]<0;)if(n=h[u[c++]],f.push(n.apply(a,s)),i)return i=o,f;for(m=0;g>m;m++)if(n=r[m],"zIndex"in n)if(n.zIndex==u[c]){if(f.push(n.apply(a,s)),i)break;do if(c++,n=h[u[c]],n&&f.push(n.apply(a,s)),i)break;while(n)}else h[n.zIndex]=n;else if(f.push(n.apply(a,s)),i)break;return i=o,t=p,f.length?f:null};d._events=c,d.listeners=function(e){var t,i,a,n,r,l,d,u,h=e.split(o),f=c,p=[f],m=[];for(n=0,r=h.length;r>n;n++){for(u=[],l=0,d=p.length;d>l;l++)for(f=p[l].n,i=[f[h[n]],f[s]],a=2;a--;)t=i[a],t&&(u.push(t),m=m.concat(t.f||[]));p=u}return m},d.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var i=e.split(o),a=c,n=0,s=i.length;s>n;n++)a=a.n,a=a.hasOwnProperty(i[n])&&a[i[n]]||(a[i[n]]={n:{}});for(a.f=a.f||[],n=0,s=a.f.length;s>n;n++)if(a.f[n]==t)return r;return a.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},d.f=function(e){var t=[].slice.call(arguments,1);return function(){d.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},d.stop=function(){i=1},d.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},d.nts=function(){return t.split(o)},d.off=d.unbind=function(e,t){if(!e)return d._events=c={n:{}},void 0;var i,a,r,l,u,h,f,p=e.split(o),m=[c];for(l=0,u=p.length;u>l;l++)for(h=0;h<m.length;h+=r.length-2){if(r=[h,1],i=m[h].n,p[l]!=s)i[p[l]]&&r.push(i[p[l]]);else for(a in i)i[n](a)&&r.push(i[a]);m.splice.apply(m,r)}for(l=0,u=m.length;u>l;l++)for(i=m[l];i.n;){if(t){if(i.f){for(h=0,f=i.f.length;f>h;h++)if(i.f[h]==t){i.f.splice(h,1);break}!i.f.length&&delete i.f}for(a in i.n)if(i.n[n](a)&&i.n[a].f){var g=i.n[a].f;for(h=0,f=g.length;f>h;h++)if(g[h]==t){g.splice(h,1);break}!g.length&&delete i.n[a].f}}else{delete i.f;for(a in i.n)i.n[n](a)&&i.n[a].f&&delete i.n[a].f}i=i.n}},d.once=function(e,t){var i=function(){return d.unbind(e,i),t.apply(this,arguments)};return d.on(e,i)},d.version=a,d.toString=function(){return"You are running Eve "+a},"undefined"!=typeof module&&module.exports?module.exports=d:"undefined"!=typeof define?define("eve",[],function(){return d}):e.eve=d}(this),// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
function(e,t){"function"==typeof define&&define.amd?define(["eve"],function(i){return t(e,i)}):t(e,e.eve)}(this,function(e,t){function i(e){if(i.is(e,"function"))return y?e():t.on("raphael.DOMload",e);if(i.is(e,G))return i._engine.create[S](i,e.splice(0,3+i.is(e[0],U))).add(e);var a=Array.prototype.slice.call(arguments,0);if(i.is(a[a.length-1],"function")){var n=a.pop();return y?n.call(i._engine.create[S](i,a)):t.on("raphael.DOMload",function(){n.call(i._engine.create[S](i,a))})}return i._engine.create[S](i,arguments)}function a(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[C](i)&&(t[i]=a(e[i]));return t}function n(e,t){for(var i=0,a=e.length;a>i;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function o(e,t,i){function a(){var o=Array.prototype.slice.call(arguments,0),s=o.join("␀"),r=a.cache=a.cache||{},l=a.count=a.count||[];return r[C](s)?(n(l,s),i?i(r[s]):r[s]):(l.length>=1e3&&delete r[l.shift()],l.push(s),r[s]=e[S](t,o),i?i(r[s]):r[s])}return a}function s(){return this.hex}function r(e,t){for(var i=[],a=0,n=e.length;n-2*!t>a;a+=2){var o=[{x:+e[a-2],y:+e[a-1]},{x:+e[a],y:+e[a+1]},{x:+e[a+2],y:+e[a+3]},{x:+e[a+4],y:+e[a+5]}];t?a?n-4==a?o[3]={x:+e[0],y:+e[1]}:n-2==a&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[n-2],y:+e[n-1]}:n-4==a?o[3]=o[2]:a||(o[0]={x:+e[a],y:+e[a+1]}),i.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return i}function l(e,t,i,a,n){var o=-3*t+9*i-9*a+3*n,s=e*o+6*t-12*i+6*a;return e*s-3*t+3*i}function c(e,t,i,a,n,o,s,r,c){null==c&&(c=1),c=c>1?1:0>c?0:c;for(var d=c/2,u=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,m=0;u>m;m++){var g=d*h[m]+d,v=l(g,e,i,n,s),b=l(g,t,a,o,r),w=v*v+b*b;p+=f[m]*I.sqrt(w)}return d*p}function d(e,t,i,a,n,o,s,r,l){if(!(0>l||c(e,t,i,a,n,o,s,r)<l)){var d,u=1,h=u/2,f=u-h,p=.01;for(d=c(e,t,i,a,n,o,s,r,f);$(d-l)>p;)h/=2,f+=(l>d?1:-1)*h,d=c(e,t,i,a,n,o,s,r,f);return f}}function u(e,t,i,a,n,o,s,r){if(!(B(e,i)<F(n,s)||F(e,i)>B(n,s)||B(t,a)<F(o,r)||F(t,a)>B(o,r))){var l=(e*a-t*i)*(n-s)-(e-i)*(n*r-o*s),c=(e*a-t*i)*(o-r)-(t-a)*(n*r-o*s),d=(e-i)*(o-r)-(t-a)*(n-s);if(d){var u=l/d,h=c/d,f=+u.toFixed(2),p=+h.toFixed(2);if(!(f<+F(e,i).toFixed(2)||f>+B(e,i).toFixed(2)||f<+F(n,s).toFixed(2)||f>+B(n,s).toFixed(2)||p<+F(t,a).toFixed(2)||p>+B(t,a).toFixed(2)||p<+F(o,r).toFixed(2)||p>+B(o,r).toFixed(2)))return{x:u,y:h}}}}function h(e,t,a){var n=i.bezierBBox(e),o=i.bezierBBox(t);if(!i.isBBoxIntersect(n,o))return a?0:[];for(var s=c.apply(0,e),r=c.apply(0,t),l=B(~~(s/5),1),d=B(~~(r/5),1),h=[],f=[],p={},m=a?0:[],g=0;l+1>g;g++){var v=i.findDotsAtSegment.apply(i,e.concat(g/l));h.push({x:v.x,y:v.y,t:g/l})}for(g=0;d+1>g;g++)v=i.findDotsAtSegment.apply(i,t.concat(g/d)),f.push({x:v.x,y:v.y,t:g/d});for(g=0;l>g;g++)for(var b=0;d>b;b++){var w=h[g],y=h[g+1],_=f[b],k=f[b+1],x=$(y.x-w.x)<.001?"y":"x",M=$(k.x-_.x)<.001?"y":"x",C=u(w.x,w.y,y.x,y.y,_.x,_.y,k.x,k.y);if(C){if(p[C.x.toFixed(4)]==C.y.toFixed(4))continue;p[C.x.toFixed(4)]=C.y.toFixed(4);var j=w.t+$((C[x]-w[x])/(y[x]-w[x]))*(y.t-w.t),T=_.t+$((C[M]-_[M])/(k[M]-_[M]))*(k.t-_.t);j>=0&&1.001>=j&&T>=0&&1.001>=T&&(a?m++:m.push({x:C.x,y:C.y,t1:F(j,1),t2:F(T,1)}))}}return m}function f(e,t,a){e=i._path2curve(e),t=i._path2curve(t);for(var n,o,s,r,l,c,d,u,f,p,m=a?0:[],g=0,v=e.length;v>g;g++){var b=e[g];if(b[0]=="M")n=l=b[1],o=c=b[2];else{b[0]=="C"?(f=[n,o].concat(b.slice(1)),n=f[6],o=f[7]):(f=[n,o,n,o,l,c,l,c],n=l,o=c);for(var w=0,y=t.length;y>w;w++){var _=t[w];if(_[0]=="M")s=d=_[1],r=u=_[2];else{_[0]=="C"?(p=[s,r].concat(_.slice(1)),s=p[6],r=p[7]):(p=[s,r,s,r,d,u,d,u],s=d,r=u);var k=h(f,p,a);if(a)m+=k;else{for(var x=0,M=k.length;M>x;x++)k[x].segment1=g,k[x].segment2=w,k[x].bez1=f,k[x].bez2=p;m=m.concat(k)}}}}}return m}function p(e,t,i,a,n,o){null!=e?(this.a=+e,this.b=+t,this.c=+i,this.d=+a,this.e=+n,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function m(){return this.x+L+this.y+L+this.width+" × "+this.height}function g(e,t,i,a,n,o){function s(e){return((u*e+d)*e+c)*e}function r(e,t){var i=l(e,t);return((p*i+f)*i+h)*i}function l(e,t){var i,a,n,o,r,l;for(n=e,l=0;8>l;l++){if(o=s(n)-e,$(o)<t)return n;if(r=(3*u*n+2*d)*n+c,$(r)<1e-6)break;n-=o/r}if(i=0,a=1,n=e,i>n)return i;if(n>a)return a;for(;a>i;){if(o=s(n),$(o-e)<t)return n;e>o?i=n:a=n,n=(a-i)/2+i}return n}var c=3*t,d=3*(a-t)-c,u=1-c-d,h=3*i,f=3*(n-i)-h,p=1-h-f;return r(e,1/(200*o))}function v(e,t){var i=[],a={};if(this.ms=t,this.times=1,e){for(var n in e)e[C](n)&&(a[J(n)]=e[n],i.push(J(n)));i.sort(ut)}this.anim=a,this.top=i[i.length-1],this.percents=i}function b(e,a,n,o,s,r){n=J(n);var l,c,d,u,h,f,m=e.ms,v={},b={},w={};if(o)for(_=0,x=li.length;x>_;_++){var y=li[_];if(y.el.id==a.id&&y.anim==e){y.percent!=n?(li.splice(_,1),d=1):c=y,a.attr(y.totalOrigin);break}}else o=+b;for(var _=0,x=e.percents.length;x>_;_++){if(e.percents[_]==n||e.percents[_]>o*e.top){n=e.percents[_],h=e.percents[_-1]||0,m=m/e.top*(n-h),u=e.percents[_+1],l=e.anim[n];break}o&&a.attr(e.anim[e.percents[_]])}if(l){if(c)c.initstatus=o,c.start=new Date-c.ms*o;else{for(var M in l)if(l[C](M)&&(at[C](M)||a.paper.customAttributes[C](M)))switch(v[M]=a.attr(M),v[M]==null&&(v[M]=it[M]),b[M]=l[M],at[M]){case U:w[M]=(b[M]-v[M])/m;break;case"colour":v[M]=i.getRGB(v[M]);var j=i.getRGB(b[M]);w[M]={r:(j.r-v[M].r)/m,g:(j.g-v[M].g)/m,b:(j.b-v[M].b)/m};break;case"path":var T=qt(v[M],b[M]),A=T[1];for(v[M]=T[0],w[M]=[],_=0,x=v[M].length;x>_;_++){w[M][_]=[0];for(var S=1,N=v[M][_].length;N>S;S++)w[M][_][S]=(A[_][S]-v[M][_][S])/m}break;case"transform":var E=a._,L=Ft(E[M],b[M]);if(L)for(v[M]=L.from,b[M]=L.to,w[M]=[],w[M].real=!0,_=0,x=v[M].length;x>_;_++)for(w[M][_]=[v[M][_][0]],S=1,N=v[M][_].length;N>S;S++)w[M][_][S]=(b[M][_][S]-v[M][_][S])/m;else{var q=a.matrix||new p,R={_:{transform:E.transform},getBBox:function(){return a.getBBox(1)}};v[M]=[q.a,q.b,q.c,q.d,q.e,q.f],It(R,b[M]),b[M]=R._.transform,w[M]=[(R.matrix.a-q.a)/m,(R.matrix.b-q.b)/m,(R.matrix.c-q.c)/m,(R.matrix.d-q.d)/m,(R.matrix.e-q.e)/m,(R.matrix.f-q.f)/m]}break;case"csv":var P=z(l[M])[O](k),I=z(v[M])[O](k);if("clip-rect"==M)for(v[M]=I,w[M]=[],_=I.length;_--;)w[M][_]=(P[_]-v[M][_])/m;b[M]=P;break;default:for(P=[][D](l[M]),I=[][D](v[M]),w[M]=[],_=a.paper.customAttributes[M].length;_--;)w[M][_]=((P[_]||0)-(I[_]||0))/m}var B=l.easing,F=i.easing_formulas[B];if(!F)if(F=z(B).match(Q),F&&F.length==5){var $=F;F=function(e){return g(e,+$[1],+$[2],+$[3],+$[4],m)}}else F=ft;if(f=l.start||e.start||+new Date,y={anim:e,percent:n,timestamp:f,start:f+(e.del||0),status:0,initstatus:o||0,stop:!1,ms:m,easing:F,from:v,diff:w,to:b,el:a,callback:l.callback,prev:h,next:u,repeat:r||e.times,origin:a.attr(),totalOrigin:s},li.push(y),o&&!c&&!d&&(y.stop=!0,y.start=new Date-m*o,li.length==1))return di();d&&(y.start=new Date-y.ms*o),li.length==1&&ci(di)}t("raphael.anim.start."+a.id,a,e)}}function w(e){for(var t=0;t<li.length;t++)li[t].el.paper==e&&li.splice(t--,1)}i.version="2.1.2",i.eve=t;var y,_,k=/[, ]+/,x={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},M=/\{(\d+)\}/g,C="hasOwnProperty",j={doc:document,win:e},T={was:Object.prototype[C].call(j.win,"Raphael"),is:j.win.Raphael},A=function(){this.ca=this.customAttributes={}},S="apply",D="concat",N="ontouchstart"in j.win||j.win.DocumentTouch&&j.doc instanceof DocumentTouch,E="",L=" ",z=String,O="split",q="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[O](L),R={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},P=z.prototype.toLowerCase,I=Math,B=I.max,F=I.min,$=I.abs,W=I.pow,H=I.PI,U="number",X="string",G="array",V=Object.prototype.toString,Y=(i._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),K={NaN:1,Infinity:1,"-Infinity":1},Q=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=I.round,J=parseFloat,et=parseInt,tt=z.prototype.toUpperCase,it=i._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},at=i._availableAnimAttrs={blur:U,"clip-rect":"csv",cx:U,cy:U,fill:"colour","fill-opacity":U,"font-size":U,height:U,opacity:U,path:"path",r:U,rx:U,ry:U,stroke:"colour","stroke-opacity":U,"stroke-width":U,transform:"transform",width:U,x:U,y:U},nt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ot={hs:1,rg:1},st=/,?([achlmqrstvxz]),?/gi,rt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,lt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ct=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,dt=(i._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ut=function(e,t){return J(e)-J(t)},ht=function(){},ft=function(e){return e},pt=i._rectPath=function(e,t,i,a,n){return n?[["M",e+n,t],["l",i-2*n,0],["a",n,n,0,0,1,n,n],["l",0,a-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-i,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-a],["a",n,n,0,0,1,n,-n],["z"]]:[["M",e,t],["l",i,0],["l",0,a],["l",-i,0],["z"]]},mt=function(e,t,i,a){return null==a&&(a=i),[["M",e,t],["m",0,-a],["a",i,a,0,1,1,0,2*a],["a",i,a,0,1,1,0,-2*a],["z"]]},gt=i._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return mt(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return mt(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return pt(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return pt(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return pt(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return pt(t.x,t.y,t.width,t.height)}},vt=i.mapPath=function(e,t){if(!t)return e;var i,a,n,o,s,r,l;for(e=qt(e),n=0,s=e.length;s>n;n++)for(l=e[n],o=1,r=l.length;r>o;o+=2)i=t.x(l[o],l[o+1]),a=t.y(l[o],l[o+1]),l[o]=i,l[o+1]=a;return e};if(i._g=j,i.type=j.win.SVGAngle||j.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",i.type=="VML"){var bt,wt=j.doc.createElement("div");if(wt.innerHTML='<v:shape adj="1"/>',bt=wt.firstChild,bt.style.behavior="url(#default#VML)",!bt||typeof bt.adj!="object")return i.type=E;wt=null}i.svg=!(i.vml=i.type=="VML"),i._Paper=A,i.fn=_=A.prototype=i.prototype,i._id=0,i._oid=0,i.is=function(e,t){return t=P.call(t),"finite"==t?!K[C](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||V.call(e).slice(8,-1).toLowerCase()==t},i.angle=function(e,t,a,n,o,s){if(null==o){var r=e-a,l=t-n;return r||l?(180+I.atan2(-l,-r)*180/H+360)%360:0}return i.angle(e,t,o,s)-i.angle(a,n,o,s)},i.rad=function(e){return e%360*H/180},i.deg=function(e){return 180*e/H%360},i.snapTo=function(e,t,a){if(a=i.is(a,"finite")?a:10,i.is(e,G)){for(var n=e.length;n--;)if($(e[n]-t)<=a)return e[n]}else{e=+e;var o=t%e;if(a>o)return t-o;if(o>e-a)return t-o+e}return t},i.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=I.random()*16|0,i="x"==e?t:8|3&t;return i.toString(16)}),i.setWindow=function(e){t("raphael.setWindow",i,j.win,e),j.win=e,j.doc=j.win.document,i._engine.initWin&&i._engine.initWin(j.win)};var yt=function(e){if(i.vml){var t,a=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),t=n.body}catch(s){t=createPopup().document.body}var r=t.createTextRange();yt=o(function(e){try{t.style.color=z(e).replace(a,E);var i=r.queryCommandValue("ForeColor");return i=(255&i)<<16|65280&i|(16711680&i)>>>16,"#"+("000000"+i.toString(16)).slice(-6)}catch(n){return"none"}})}else{var l=j.doc.createElement("i");l.title="Raphaël Colour Picker",l.style.display="none",j.doc.body.appendChild(l),yt=o(function(e){return l.style.color=e,j.doc.defaultView.getComputedStyle(l,E).getPropertyValue("color")})}return yt(e)},_t=function(){return"hsb("+[this.h,this.s,this.b]+")"},kt=function(){return"hsl("+[this.h,this.s,this.l]+")"},xt=function(){return this.hex},Mt=function(e,t,a){if(null==t&&i.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(a=e.b,t=e.g,e=e.r),null==t&&i.is(e,X)){var n=i.getRGB(e);e=n.r,t=n.g,a=n.b}return(e>1||t>1||a>1)&&(e/=255,t/=255,a/=255),[e,t,a]},Ct=function(e,t,a,n){e*=255,t*=255,a*=255;var o={r:e,g:t,b:a,hex:i.rgb(e,t,a),toString:xt};return i.is(n,"finite")&&(o.opacity=n),o};i.color=function(e){var t;return i.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=i.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):i.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=i.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(i.is(e,"string")&&(e=i.getRGB(e)),i.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=i.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=i.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=xt,e},i.hsb2rgb=function(e,t,i,a){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,e=e.h,a=e.o),e*=360;var n,o,s,r,l;return e=e%360/60,l=i*t,r=l*(1-$(e%2-1)),n=o=s=i-l,e=~~e,n+=[l,r,0,0,r,l][e],o+=[r,l,l,r,0,0][e],s+=[0,0,r,l,l,r][e],Ct(n,o,s,a)},i.hsl2rgb=function(e,t,i,a){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),e*=360;var n,o,s,r,l;return e=e%360/60,l=2*t*(.5>i?i:1-i),r=l*(1-$(e%2-1)),n=o=s=i-l/2,e=~~e,n+=[l,r,0,0,r,l][e],o+=[r,l,l,r,0,0][e],s+=[0,0,r,l,l,r][e],Ct(n,o,s,a)},i.rgb2hsb=function(e,t,i){i=Mt(e,t,i),e=i[0],t=i[1],i=i[2];var a,n,o,s;return o=B(e,t,i),s=o-F(e,t,i),a=0==s?null:o==e?(t-i)/s:o==t?(i-e)/s+2:(e-t)/s+4,a=60*((a+360)%6)/360,n=0==s?0:s/o,{h:a,s:n,b:o,toString:_t}},i.rgb2hsl=function(e,t,i){i=Mt(e,t,i),e=i[0],t=i[1],i=i[2];var a,n,o,s,r,l;return s=B(e,t,i),r=F(e,t,i),l=s-r,a=0==l?null:s==e?(t-i)/l:s==t?(i-e)/l+2:(e-t)/l+4,a=60*((a+360)%6)/360,o=(s+r)/2,n=0==l?0:.5>o?l/(2*o):l/(2-2*o),{h:a,s:n,l:o,toString:kt}},i._path2string=function(){return this.join(",").replace(st,"$1")},i._preload=function(e,t){var i=j.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){t.call(this),this.onload=null,j.doc.body.removeChild(this)},i.onerror=function(){j.doc.body.removeChild(this)},j.doc.body.appendChild(i),i.src=e},i.getRGB=o(function(e){if(!e||(e=z(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:s};!(ot[C](e.toLowerCase().substring(0,2))||e.charAt()=="#")&&(e=yt(e));var t,a,n,o,r,l,c=e.match(Y);return c?(c[2]&&(n=et(c[2].substring(5),16),a=et(c[2].substring(3,5),16),t=et(c[2].substring(1,3),16)),c[3]&&(n=et((r=c[3].charAt(3))+r,16),a=et((r=c[3].charAt(2))+r,16),t=et((r=c[3].charAt(1))+r,16)),c[4]&&(l=c[4][O](nt),t=J(l[0]),l[0].slice(-1)=="%"&&(t*=2.55),a=J(l[1]),l[1].slice(-1)=="%"&&(a*=2.55),n=J(l[2]),l[2].slice(-1)=="%"&&(n*=2.55),c[1].toLowerCase().slice(0,4)=="rgba"&&(o=J(l[3])),l[3]&&l[3].slice(-1)=="%"&&(o/=100)),c[5]?(l=c[5][O](nt),t=J(l[0]),l[0].slice(-1)=="%"&&(t*=2.55),a=J(l[1]),l[1].slice(-1)=="%"&&(a*=2.55),n=J(l[2]),l[2].slice(-1)=="%"&&(n*=2.55),(l[0].slice(-3)=="deg"||l[0].slice(-1)=="°")&&(t/=360),c[1].toLowerCase().slice(0,4)=="hsba"&&(o=J(l[3])),l[3]&&l[3].slice(-1)=="%"&&(o/=100),i.hsb2rgb(t,a,n,o)):c[6]?(l=c[6][O](nt),t=J(l[0]),l[0].slice(-1)=="%"&&(t*=2.55),a=J(l[1]),l[1].slice(-1)=="%"&&(a*=2.55),n=J(l[2]),l[2].slice(-1)=="%"&&(n*=2.55),(l[0].slice(-3)=="deg"||l[0].slice(-1)=="°")&&(t/=360),c[1].toLowerCase().slice(0,4)=="hsla"&&(o=J(l[3])),l[3]&&l[3].slice(-1)=="%"&&(o/=100),i.hsl2rgb(t,a,n,o)):(c={r:t,g:a,b:n,toString:s},c.hex="#"+(16777216|n|a<<8|t<<16).toString(16).slice(1),i.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s}},i),i.hsb=o(function(e,t,a){return i.hsb2rgb(e,t,a).hex}),i.hsl=o(function(e,t,a){return i.hsl2rgb(e,t,a).hex}),i.rgb=o(function(e,t,i){return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)}),i.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},i=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),i.hex},i.getColor.reset=function(){delete this.start},i.parsePathString=function(e){if(!e)return null;var t=jt(e);if(t.arr)return At(t.arr);var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return i.is(e,G)&&i.is(e[0],G)&&(n=At(e)),n.length||z(e).replace(rt,function(e,t,i){var o=[],s=t.toLowerCase();if(i.replace(ct,function(e,t){t&&o.push(+t)}),"m"==s&&o.length>2&&(n.push([t][D](o.splice(0,2))),s="l",t="m"==t?"l":"L"),"r"==s)n.push([t][D](o));else for(;o.length>=a[s]&&(n.push([t][D](o.splice(0,a[s]))),a[s]););}),n.toString=i._path2string,t.arr=At(n),n},i.parseTransformString=o(function(e){if(!e)return null;var t=[];return i.is(e,G)&&i.is(e[0],G)&&(t=At(e)),t.length||z(e).replace(lt,function(e,i,a){var n=[];P.call(i),a.replace(ct,function(e,t){t&&n.push(+t)}),t.push([i][D](n))}),t.toString=i._path2string,t});var jt=function(e){var t=jt.ps=jt.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var i in t)t[C](i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])}),t[e]};i.findDotsAtSegment=function(e,t,i,a,n,o,s,r,l){var c=1-l,d=W(c,3),u=W(c,2),h=l*l,f=h*l,p=d*e+3*u*l*i+3*c*l*l*n+f*s,m=d*t+3*u*l*a+3*c*l*l*o+f*r,g=e+2*l*(i-e)+h*(n-2*i+e),v=t+2*l*(a-t)+h*(o-2*a+t),b=i+2*l*(n-i)+h*(s-2*n+i),w=a+2*l*(o-a)+h*(r-2*o+a),y=c*e+l*i,_=c*t+l*a,k=c*n+l*s,x=c*o+l*r,M=90-I.atan2(g-b,v-w)*180/H;return(g>b||w>v)&&(M+=180),{x:p,y:m,m:{x:g,y:v},n:{x:b,y:w},start:{x:y,y:_},end:{x:k,y:x},alpha:M}},i.bezierBBox=function(e,t,a,n,o,s,r,l){i.is(e,"array")||(e=[e,t,a,n,o,s,r,l]);var c=Ot.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},i.isPointInsideBBox=function(e,t,i){return t>=e.x&&t<=e.x2&&i>=e.y&&i<=e.y2},i.isBBoxIntersect=function(e,t){var a=i.isPointInsideBBox;return a(t,e.x,e.y)||a(t,e.x2,e.y)||a(t,e.x,e.y2)||a(t,e.x2,e.y2)||a(e,t.x,t.y)||a(e,t.x2,t.y)||a(e,t.x,t.y2)||a(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},i.pathIntersection=function(e,t){return f(e,t)},i.pathIntersectionNumber=function(e,t){return f(e,t,1)},i.isPointInsidePath=function(e,t,a){var n=i.pathBBox(e);return i.isPointInsideBBox(n,t,a)&&f(e,[["M",t,a],["H",n.x2+10]],1)%2==1},i._removedFactory=function(e){return function(){t("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Tt=i.pathBBox=function(e){var t=jt(e);if(t.bbox)return a(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=qt(e);for(var i,n=0,o=0,s=[],r=[],l=0,c=e.length;c>l;l++)if(i=e[l],i[0]=="M")n=i[1],o=i[2],s.push(n),r.push(o);else{var d=Ot(n,o,i[1],i[2],i[3],i[4],i[5],i[6]);s=s[D](d.min.x,d.max.x),r=r[D](d.min.y,d.max.y),n=i[5],o=i[6]}var u=F[S](0,s),h=F[S](0,r),f=B[S](0,s),p=B[S](0,r),m=f-u,g=p-h,v={x:u,y:h,x2:f,y2:p,width:m,height:g,cx:u+m/2,cy:h+g/2};return t.bbox=a(v),v},At=function(e){var t=a(e);return t.toString=i._path2string,t},St=i._pathToRelative=function(e){var t=jt(e);if(t.rel)return At(t.rel);i.is(e,G)&&i.is(e&&e[0],G)||(e=i.parsePathString(e));var a=[],n=0,o=0,s=0,r=0,l=0;e[0][0]=="M"&&(n=e[0][1],o=e[0][2],s=n,r=o,l++,a.push(["M",n,o]));for(var c=l,d=e.length;d>c;c++){var u=a[c]=[],h=e[c];if(h[0]!=P.call(h[0]))switch(u[0]=P.call(h[0]),u[0]){case"a":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+(h[6]-n).toFixed(3),u[7]=+(h[7]-o).toFixed(3);break;case"v":u[1]=+(h[1]-o).toFixed(3);break;case"m":s=h[1],r=h[2];default:for(var f=1,p=h.length;p>f;f++)u[f]=+(h[f]-(f%2?n:o)).toFixed(3)}else{u=a[c]=[],h[0]=="m"&&(s=h[1]+n,r=h[2]+o);for(var m=0,g=h.length;g>m;m++)a[c][m]=h[m]}var v=a[c].length;switch(a[c][0]){case"z":n=s,o=r;break;case"h":n+=+a[c][v-1];break;case"v":o+=+a[c][v-1];break;default:n+=+a[c][v-2],o+=+a[c][v-1]}}return a.toString=i._path2string,t.rel=At(a),a},Dt=i._pathToAbsolute=function(e){var t=jt(e);if(t.abs)return At(t.abs);if(i.is(e,G)&&i.is(e&&e[0],G)||(e=i.parsePathString(e)),!e||!e.length)return[["M",0,0]];var a=[],n=0,o=0,s=0,l=0,c=0;e[0][0]=="M"&&(n=+e[0][1],o=+e[0][2],s=n,l=o,c++,a[0]=["M",n,o]);for(var d,u,h=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",f=c,p=e.length;p>f;f++){if(a.push(d=[]),u=e[f],u[0]!=tt.call(u[0]))switch(d[0]=tt.call(u[0]),d[0]){case"A":d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=+(u[6]+n),d[7]=+(u[7]+o);break;case"V":d[1]=+u[1]+o;break;case"H":d[1]=+u[1]+n;break;case"R":for(var m=[n,o][D](u.slice(1)),g=2,v=m.length;v>g;g++)m[g]=+m[g]+n,m[++g]=+m[g]+o;a.pop(),a=a[D](r(m,h));break;case"M":s=+u[1]+n,l=+u[2]+o;default:for(g=1,v=u.length;v>g;g++)d[g]=+u[g]+(g%2?n:o)}else if(u[0]=="R")m=[n,o][D](u.slice(1)),a.pop(),a=a[D](r(m,h)),d=["R"][D](u.slice(-2));else for(var b=0,w=u.length;w>b;b++)d[b]=u[b];switch(d[0]){case"Z":n=s,o=l;break;case"H":n=d[1];break;case"V":o=d[1];break;case"M":s=d[d.length-2],l=d[d.length-1];default:n=d[d.length-2],o=d[d.length-1]}}return a.toString=i._path2string,t.abs=At(a),a},Nt=function(e,t,i,a){return[e,t,i,a,i,a]},Et=function(e,t,i,a,n,o){var s=1/3,r=2/3;return[s*e+r*i,s*t+r*a,s*n+r*i,s*o+r*a,n,o]},Lt=function(e,t,i,a,n,s,r,l,c,d){var u,h=120*H/180,f=H/180*(+n||0),p=[],m=o(function(e,t,i){var a=e*I.cos(i)-t*I.sin(i),n=e*I.sin(i)+t*I.cos(i);return{x:a,y:n}});if(d)M=d[0],C=d[1],k=d[2],x=d[3];else{u=m(e,t,-f),e=u.x,t=u.y,u=m(l,c,-f),l=u.x,c=u.y;var g=(I.cos(H/180*n),I.sin(H/180*n),(e-l)/2),v=(t-c)/2,b=g*g/(i*i)+v*v/(a*a);b>1&&(b=I.sqrt(b),i=b*i,a=b*a);var w=i*i,y=a*a,_=(s==r?-1:1)*I.sqrt($((w*y-w*v*v-y*g*g)/(w*v*v+y*g*g))),k=_*i*v/a+(e+l)/2,x=_*-a*g/i+(t+c)/2,M=I.asin(((t-x)/a).toFixed(9)),C=I.asin(((c-x)/a).toFixed(9));M=k>e?H-M:M,C=k>l?H-C:C,0>M&&(M=2*H+M),0>C&&(C=2*H+C),r&&M>C&&(M-=2*H),!r&&C>M&&(C-=2*H)}var j=C-M;if($(j)>h){var T=C,A=l,S=c;C=M+h*(r&&C>M?1:-1),l=k+i*I.cos(C),c=x+a*I.sin(C),p=Lt(l,c,i,a,n,0,r,A,S,[C,T,k,x])}j=C-M;var N=I.cos(M),E=I.sin(M),L=I.cos(C),z=I.sin(C),q=I.tan(j/4),R=4/3*i*q,P=4/3*a*q,B=[e,t],F=[e+R*E,t-P*N],W=[l+R*z,c-P*L],U=[l,c];if(F[0]=2*B[0]-F[0],F[1]=2*B[1]-F[1],d)return[F,W,U][D](p);p=[F,W,U][D](p).join()[O](",");for(var X=[],G=0,V=p.length;V>G;G++)X[G]=G%2?m(p[G-1],p[G],f).y:m(p[G],p[G+1],f).x;return X},zt=function(e,t,i,a,n,o,s,r,l){var c=1-l;return{x:W(c,3)*e+W(c,2)*3*l*i+3*c*l*l*n+W(l,3)*s,y:W(c,3)*t+W(c,2)*3*l*a+3*c*l*l*o+W(l,3)*r}},Ot=o(function(e,t,i,a,n,o,s,r){var l,c=n-2*i+e-(s-2*n+i),d=2*(i-e)-2*(n-i),u=e-i,h=(-d+I.sqrt(d*d-4*c*u))/2/c,f=(-d-I.sqrt(d*d-4*c*u))/2/c,p=[t,r],m=[e,s];return $(h)>"1e12"&&(h=.5),$(f)>"1e12"&&(f=.5),h>0&&1>h&&(l=zt(e,t,i,a,n,o,s,r,h),m.push(l.x),p.push(l.y)),f>0&&1>f&&(l=zt(e,t,i,a,n,o,s,r,f),m.push(l.x),p.push(l.y)),c=o-2*a+t-(r-2*o+a),d=2*(a-t)-2*(o-a),u=t-a,h=(-d+I.sqrt(d*d-4*c*u))/2/c,f=(-d-I.sqrt(d*d-4*c*u))/2/c,$(h)>"1e12"&&(h=.5),$(f)>"1e12"&&(f=.5),h>0&&1>h&&(l=zt(e,t,i,a,n,o,s,r,h),m.push(l.x),p.push(l.y)),f>0&&1>f&&(l=zt(e,t,i,a,n,o,s,r,f),m.push(l.x),p.push(l.y)),{min:{x:F[S](0,m),y:F[S](0,p)},max:{x:B[S](0,m),y:B[S](0,p)}}}),qt=i._path2curve=o(function(e,t){var i=!t&&jt(e);if(!t&&i.curve)return At(i.curve);for(var a=Dt(e),n=t&&Dt(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=(function(e,t,i){var a,n;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][D](Lt[S](0,[t.x,t.y][D](e.slice(1))));break;case"S":"C"==i||"S"==i?(a=t.x*2-t.bx,n=t.y*2-t.by):(a=t.x,n=t.y),e=["C",a,n][D](e.slice(1));break;case"T":"Q"==i||"T"==i?(t.qx=t.x*2-t.qx,t.qy=t.y*2-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][D](Et(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][D](Et(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][D](Nt(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][D](Nt(t.x,t.y,e[1],t.y));break;case"V":e=["C"][D](Nt(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][D](Nt(t.x,t.y,t.X,t.Y))}return e}),l=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)e.splice(t++,0,["C"][D](i.splice(0,6)));e.splice(t,1),u=B(a.length,n&&n.length||0)}},c=function(e,t,i,o,s){e&&t&&e[s][0]=="M"&&t[s][0]!="M"&&(t.splice(s,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=e[s][1],i.y=e[s][2],u=B(a.length,n&&n.length||0))},d=0,u=B(a.length,n&&n.length||0);u>d;d++){a[d]=r(a[d],o),l(a,d),n&&(n[d]=r(n[d],s)),n&&l(n,d),c(a,n,o,s,d),c(n,a,s,o,d);var h=a[d],f=n&&n[d],p=h.length,m=n&&f.length;o.x=h[p-2],o.y=h[p-1],o.bx=J(h[p-4])||o.x,o.by=J(h[p-3])||o.y,s.bx=n&&(J(f[m-4])||s.x),s.by=n&&(J(f[m-3])||s.y),s.x=n&&f[m-2],s.y=n&&f[m-1]}return n||(i.curve=At(a)),n?[a,n]:a},null,At),Rt=(i._parseDots=o(function(e){for(var t=[],a=0,n=e.length;n>a;a++){var o={},s=e[a].match(/^([^:]*):?([\d\.]*)/);if(o.color=i.getRGB(s[1]),o.color.error)return null;o.color=o.color.hex,s[2]&&(o.offset=s[2]+"%"),t.push(o)}for(a=1,n=t.length-1;n>a;a++)if(!t[a].offset){for(var r=J(t[a-1].offset||0),l=0,c=a+1;n>c;c++)if(t[c].offset){l=t[c].offset;break}l||(l=100,c=n),l=J(l);for(var d=(l-r)/(c-a+1);c>a;a++)r+=d,t[a].offset=r+"%"}return t}),i._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),Pt=(i._tofront=function(e,t){t.top!==e&&(Rt(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},i._toback=function(e,t){t.bottom!==e&&(Rt(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},i._insertafter=function(e,t,i){Rt(e,i),t==i.top&&(i.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},i._insertbefore=function(e,t,i){Rt(e,i),t==i.bottom&&(i.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},i.toMatrix=function(e,t){var i=Tt(e),a={_:{transform:E},getBBox:function(){return i}};return It(a,t),a.matrix}),It=(i.transformPath=function(e,t){return vt(e,Pt(e,t))},i._extractTransform=function(e,t){if(null==t)return e._.transform;t=z(t).replace(/\.{3}|\u2026/g,e._.transform||E);var a=i.parseTransformString(t),n=0,o=0,s=0,r=1,l=1,c=e._,d=new p;if(c.transform=a||[],a)for(var u=0,h=a.length;h>u;u++){var f,m,g,v,b,w=a[u],y=w.length,_=z(w[0]).toLowerCase(),k=w[0]!=_,x=k?d.invert():0;"t"==_&&3==y?k?(f=x.x(0,0),m=x.y(0,0),g=x.x(w[1],w[2]),v=x.y(w[1],w[2]),d.translate(g-f,v-m)):d.translate(w[1],w[2]):"r"==_?2==y?(b=b||e.getBBox(1),d.rotate(w[1],b.x+b.width/2,b.y+b.height/2),n+=w[1]):4==y&&(k?(g=x.x(w[2],w[3]),v=x.y(w[2],w[3]),d.rotate(w[1],g,v)):d.rotate(w[1],w[2],w[3]),n+=w[1]):"s"==_?2==y||3==y?(b=b||e.getBBox(1),d.scale(w[1],w[y-1],b.x+b.width/2,b.y+b.height/2),r*=w[1],l*=w[y-1]):5==y&&(k?(g=x.x(w[3],w[4]),v=x.y(w[3],w[4]),d.scale(w[1],w[2],g,v)):d.scale(w[1],w[2],w[3],w[4]),r*=w[1],l*=w[2]):"m"==_&&7==y&&d.add(w[1],w[2],w[3],w[4],w[5],w[6]),c.dirtyT=1,e.matrix=d}e.matrix=d,c.sx=r,c.sy=l,c.deg=n,c.dx=o=d.e,c.dy=s=d.f,1==r&&1==l&&!n&&c.bbox?(c.bbox.x+=+o,c.bbox.y+=+s):c.dirtyT=1}),Bt=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},Ft=i._equaliseTransform=function(e,t){t=z(t).replace(/\.{3}|\u2026/g,e),e=i.parseTransformString(e)||[],t=i.parseTransformString(t)||[];for(var a,n,o,s,r=B(e.length,t.length),l=[],c=[],d=0;r>d;d++){if(o=e[d]||Bt(t[d]),s=t[d]||Bt(o),o[0]!=s[0]||o[0].toLowerCase()=="r"&&(o[2]!=s[2]||o[3]!=s[3])||o[0].toLowerCase()=="s"&&(o[3]!=s[3]||o[4]!=s[4]))return;for(l[d]=[],c[d]=[],a=0,n=B(o.length,s.length);n>a;a++)a in o&&(l[d][a]=o[a]),a in s&&(c[d][a]=s[a])}return{from:l,to:c}};i._getContainer=function(e,t,a,n){var o;return o=null!=n||i.is(e,"object")?e:j.doc.getElementById(e),null!=o?o.tagName?null==t?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:t,height:a}:{container:1,x:e,y:t,width:a,height:n}:void 0},i.pathToRelative=St,i._engine={},i.path2curve=qt,i.matrix=function(e,t,i,a,n,o){return new p(e,t,i,a,n,o)},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function a(e){var i=I.sqrt(t(e));e[0]&&(e[0]/=i),e[1]&&(e[1]/=i)}e.add=function(e,t,i,a,n,o){var s,r,l,c,d=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,i,n],[t,a,o],[0,0,1]];for(e&&e instanceof p&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),s=0;3>s;s++)for(r=0;3>r;r++){for(c=0,l=0;3>l;l++)c+=u[s][l]*h[l][r];d[s][r]=c}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new p(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,i,a){null==t&&(t=e),(i||a)&&this.add(1,0,0,1,i,a),this.add(e,0,0,t,0,0),(i||a)&&this.add(1,0,0,1,-i,-a)},e.rotate=function(e,t,a){e=i.rad(e),t=t||0,a=a||0;var n=+I.cos(e).toFixed(9),o=+I.sin(e).toFixed(9);this.add(n,o,-o,n,t,a),this.add(1,0,0,1,-t,-a)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[z.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return i.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=I.sqrt(t(n[0])),a(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=I.sqrt(t(n[1])),a(n[1]),e.shear/=e.scaley;var o=-n[0][1],s=n[1][1];return 0>s?(e.rotate=i.deg(I.acos(s)),0>o&&(e.rotate=360-e.rotate)):e.rotate=i.deg(I.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[O]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:E)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:E)+(t.rotate?"r"+[t.rotate,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);var $t=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);
_.safari=navigator.vendor=="Apple Computer, Inc."&&($t&&$t[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&$t&&$t[1]<8?function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:ht;for(var Wt=function(){this.returnValue=!1},Ht=function(){return this.originalEvent.preventDefault()},Ut=function(){this.cancelBubble=!0},Xt=function(){return this.originalEvent.stopPropagation()},Gt=function(e){var t=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,i=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft;return{x:e.clientX+i,y:e.clientY+t}},Vt=function(){return j.doc.addEventListener?function(e,t,i,a){var n=function(e){var t=Gt(e);return i.call(a,e,t.x,t.y)};if(e.addEventListener(t,n,!1),N&&R[t]){var o=function(t){for(var n=Gt(t),o=t,s=0,r=t.targetTouches&&t.targetTouches.length;r>s;s++)if(t.targetTouches[s].target==e){t=t.targetTouches[s],t.originalEvent=o,t.preventDefault=Ht,t.stopPropagation=Xt;break}return i.call(a,t,n.x,n.y)};e.addEventListener(R[t],o,!1)}return function(){return e.removeEventListener(t,n,!1),N&&R[t]&&e.removeEventListener(R[t],n,!1),!0}}:j.doc.attachEvent?function(e,t,i,a){var n=function(e){e=e||j.win.event;var t=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,n=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft,o=e.clientX+n,s=e.clientY+t;return e.preventDefault=e.preventDefault||Wt,e.stopPropagation=e.stopPropagation||Ut,i.call(a,e,o,s)};e.attachEvent("on"+t,n);var o=function(){return e.detachEvent("on"+t,n),!0};return o}:void 0}(),Yt=[],Kt=function(e){for(var i,a=e.clientX,n=e.clientY,o=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,s=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft,r=Yt.length;r--;){if(i=Yt[r],N&&e.touches){for(var l,c=e.touches.length;c--;)if(l=e.touches[c],l.identifier==i.el._drag.id){a=l.clientX,n=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var d,u=i.el.node,h=u.nextSibling,f=u.parentNode,p=u.style.display;j.win.opera&&f.removeChild(u),u.style.display="none",d=i.el.paper.getElementByPoint(a,n),u.style.display=p,j.win.opera&&(h?f.insertBefore(u,h):f.appendChild(u)),d&&t("raphael.drag.over."+i.el.id,i.el,d),a+=s,n+=o,t("raphael.drag.move."+i.el.id,i.move_scope||i.el,a-i.el._drag.x,n-i.el._drag.y,a,n,e)}},Qt=function(e){i.unmousemove(Kt).unmouseup(Qt);for(var a,n=Yt.length;n--;)a=Yt[n],a.el._drag={},t("raphael.drag.end."+a.el.id,a.end_scope||a.start_scope||a.move_scope||a.el,e);Yt=[]},Zt=i.el={},Jt=q.length;Jt--;)(function(e){i[e]=Zt[e]=function(t,a){return i.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:Vt(this.shape||this.node||j.doc,e,t,a||this)})),this},i["un"+e]=Zt["un"+e]=function(t){for(var a=this.events||[],n=a.length;n--;)a[n].name!=e||!i.is(t,"undefined")&&a[n].f!=t||(a[n].unbind(),a.splice(n,1),!a.length&&delete this.events);return this}})(q[Jt]);Zt.data=function(e,a){var n=dt[this.id]=dt[this.id]||{};if(arguments.length==0)return n;if(arguments.length==1){if(i.is(e,"object")){for(var o in e)e[C](o)&&this.data(o,e[o]);return this}return t("raphael.data.get."+this.id,this,n[e],e),n[e]}return n[e]=a,t("raphael.data.set."+this.id,this,a,e),this},Zt.removeData=function(e){return null==e?dt[this.id]={}:dt[this.id]&&delete dt[this.id][e],this},Zt.getData=function(){return a(dt[this.id]||{})},Zt.hover=function(e,t,i,a){return this.mouseover(e,i).mouseout(t,a||i)},Zt.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var ei=[];Zt.drag=function(e,a,n,o,s,r){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,d=l.clientY,u=j.doc.documentElement.scrollTop||j.doc.body.scrollTop,h=j.doc.documentElement.scrollLeft||j.doc.body.scrollLeft;if(this._drag.id=l.identifier,N&&l.touches)for(var f,p=l.touches.length;p--;)if(f=l.touches[p],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,d=f.clientY;break}this._drag.x=c+h,this._drag.y=d+u,!Yt.length&&i.mousemove(Kt).mouseup(Qt),Yt.push({el:this,move_scope:o,start_scope:s,end_scope:r}),a&&t.on("raphael.drag.start."+this.id,a),e&&t.on("raphael.drag.move."+this.id,e),n&&t.on("raphael.drag.end."+this.id,n),t("raphael.drag.start."+this.id,s||o||this,l.clientX+h,l.clientY+u,l)}return this._drag={},ei.push({el:this,start:l}),this.mousedown(l),this},Zt.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},Zt.undrag=function(){for(var e=ei.length;e--;)ei[e].el==this&&(this.unmousedown(ei[e].start),ei.splice(e,1),t.unbind("raphael.drag.*."+this.id));!ei.length&&i.unmousemove(Kt).unmouseup(Qt),Yt=[]},_.circle=function(e,t,a){var n=i._engine.circle(this,e||0,t||0,a||0);return this.__set__&&this.__set__.push(n),n},_.rect=function(e,t,a,n,o){var s=i._engine.rect(this,e||0,t||0,a||0,n||0,o||0);return this.__set__&&this.__set__.push(s),s},_.ellipse=function(e,t,a,n){var o=i._engine.ellipse(this,e||0,t||0,a||0,n||0);return this.__set__&&this.__set__.push(o),o},_.path=function(e){e&&!i.is(e,X)&&!i.is(e[0],G)&&(e+=E);var t=i._engine.path(i.format[S](i,arguments),this);return this.__set__&&this.__set__.push(t),t},_.image=function(e,t,a,n,o){var s=i._engine.image(this,e||"about:blank",t||0,a||0,n||0,o||0);return this.__set__&&this.__set__.push(s),s},_.text=function(e,t,a){var n=i._engine.text(this,e||0,t||0,z(a));return this.__set__&&this.__set__.push(n),n},_.set=function(e){!i.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new hi(e);return this.__set__&&this.__set__.push(t),t.paper=this,t.type="set",t},_.setStart=function(e){this.__set__=e||this.set()},_.setFinish=function(){var e=this.__set__;return delete this.__set__,e},_.setSize=function(e,t){return i._engine.setSize.call(this,e,t)},_.setViewBox=function(e,t,a,n,o){return i._engine.setViewBox.call(this,e,t,a,n,o)},_.top=_.bottom=null,_.raphael=i;var ti=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,a=i.body,n=i.documentElement,o=n.clientTop||a.clientTop||0,s=n.clientLeft||a.clientLeft||0,r=t.top+(j.win.pageYOffset||n.scrollTop||a.scrollTop)-o,l=t.left+(j.win.pageXOffset||n.scrollLeft||a.scrollLeft)-s;return{y:r,x:l}};_.getElementByPoint=function(e,t){var i=this,a=i.canvas,n=j.doc.elementFromPoint(e,t);if(j.win.opera&&n.tagName=="svg"){var o=ti(a),s=a.createSVGRect();s.x=e-o.x,s.y=t-o.y,s.width=s.height=1;var r=a.getIntersectionList(s,null);r.length&&(n=r[r.length-1])}if(!n)return null;for(;n.parentNode&&n!=a.parentNode&&!n.raphael;)n=n.parentNode;return n==i.canvas.parentNode&&(n=a),n=n&&n.raphael?i.getById(n.raphaelid):null},_.getElementsByBBox=function(e){var t=this.set();return this.forEach(function(a){i.isBBoxIntersect(a.getBBox(),e)&&t.push(a)}),t},_.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},_.forEach=function(e,t){for(var i=this.bottom;i;){if(e.call(t,i)===!1)return this;i=i.next}return this},_.getElementsByPoint=function(e,t){var i=this.set();return this.forEach(function(a){a.isPointInside(e,t)&&i.push(a)}),i},Zt.isPointInside=function(e,t){var a=this.realPath=gt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(a=i.transformPath(a,this.attr("transform"))),i.isPointInsidePath(a,e,t)},Zt.getBBox=function(e){if(this.removed)return{};var t=this._;return e?((t.dirty||!t.bboxwt)&&(this.realPath=gt[this.type](this),t.bboxwt=Tt(this.realPath),t.bboxwt.toString=m,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&((t.dirty||!this.realPath)&&(t.bboxwt=0,this.realPath=gt[this.type](this)),t.bbox=Tt(vt(this.realPath,this.matrix)),t.bbox.toString=m,t.dirty=t.dirtyT=0),t.bbox)},Zt.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Zt.glow=function(e){if(this.type=="text")return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},i=t.width/2,a=this.paper,n=a.set(),o=this.realPath||gt[this.type](this);o=this.matrix?vt(o,this.matrix):o;for(var s=1;i+1>s;s++)n.push(a.path(o).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/i*s).toFixed(3),opacity:+(t.opacity/i).toFixed(3)}));return n.insertBefore(this).translate(t.offsetx,t.offsety)};var ii=function(e,t,a,n,o,s,r,l,u){return null==u?c(e,t,a,n,o,s,r,l):i.findDotsAtSegment(e,t,a,n,o,s,r,l,d(e,t,a,n,o,s,r,l,u))},ai=function(e,t){return function(a,n,o){a=qt(a);for(var s,r,l,c,d,u="",h={},f=0,p=0,m=a.length;m>p;p++){if(l=a[p],l[0]=="M")s=+l[1],r=+l[2];else{if(c=ii(s,r,l[1],l[2],l[3],l[4],l[5],l[6]),f+c>n){if(t&&!h.start){if(d=ii(s,r,l[1],l[2],l[3],l[4],l[5],l[6],n-f),u+=["C"+d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],o)return u;h.start=u,u=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,l[5],l[6]].join(),f+=c,s=+l[5],r=+l[6];continue}if(!e&&!t)return d=ii(s,r,l[1],l[2],l[3],l[4],l[5],l[6],n-f),{x:d.x,y:d.y,alpha:d.alpha}}f+=c,s=+l[5],r=+l[6]}u+=l.shift()+l}return h.end=u,d=e?f:t?h:i.findDotsAtSegment(s,r,l[0],l[1],l[2],l[3],l[4],l[5],1),d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},ni=ai(1),oi=ai(),si=ai(0,1);i.getTotalLength=ni,i.getPointAtLength=oi,i.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return si(e,t).end;var a=si(e,i,1);return t?si(a,t).end:a},Zt.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():ni(e)},Zt.getPointAtLength=function(e){var t=this.getPath();if(t)return oi(t,e)},Zt.getPath=function(){var e,t=i._getPath[this.type];if(this.type!="text"&&this.type!="set")return t&&(e=t(this)),e},Zt.getSubpath=function(e,t){var a=this.getPath();if(a)return i.getSubpath(a,e,t)};var ri=i.easing_formulas={linear:function(e){return e},"<":function(e){return W(e,1.7)},">":function(e){return W(e,.48)},"<>":function(e){var t=.48-e/1.04,i=I.sqrt(.1734+t*t),a=i-t,n=W($(a),1/3)*(0>a?-1:1),o=-i-t,s=W($(o),1/3)*(0>o?-1:1),r=n+s+.5;return 3*(1-r)*r*r+r*r*r},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:W(2,-10*e)*I.sin((e-.075)*2*H/.3)+1},bounce:function(e){var t,i=7.5625,a=2.75;return 1/a>e?t=i*e*e:2/a>e?(e-=1.5/a,t=i*e*e+.75):2.5/a>e?(e-=2.25/a,t=i*e*e+.9375):(e-=2.625/a,t=i*e*e+.984375),t}};ri.easeIn=ri["ease-in"]=ri["<"],ri.easeOut=ri["ease-out"]=ri[">"],ri.easeInOut=ri["ease-in-out"]=ri["<>"],ri["back-in"]=ri.backIn,ri["back-out"]=ri.backOut;var li=[],ci=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},di=function(){for(var e=+new Date,a=0;a<li.length;a++){var n=li[a];if(!n.el.removed&&!n.paused){var o,s,r=e-n.start,l=n.ms,c=n.easing,d=n.from,u=n.diff,h=n.to,f=(n.t,n.el),p={},m={};if(n.initstatus?(r=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*l,n.status=n.initstatus,delete n.initstatus,n.stop&&li.splice(a--,1)):n.status=(n.prev+(n.percent-n.prev)*(r/l))/n.anim.top,!(0>r))if(l>r){var g=c(r/l);for(var v in d)if(d[C](v)){switch(at[v]){case U:o=+d[v]+g*l*u[v];break;case"colour":o="rgb("+[ui(Z(d[v].r+g*l*u[v].r)),ui(Z(d[v].g+g*l*u[v].g)),ui(Z(d[v].b+g*l*u[v].b))].join(",")+")";break;case"path":o=[];for(var w=0,y=d[v].length;y>w;w++){o[w]=[d[v][w][0]];for(var _=1,k=d[v][w].length;k>_;_++)o[w][_]=+d[v][w][_]+g*l*u[v][w][_];o[w]=o[w].join(L)}o=o.join(L);break;case"transform":if(u[v].real)for(o=[],w=0,y=d[v].length;y>w;w++)for(o[w]=[d[v][w][0]],_=1,k=d[v][w].length;k>_;_++)o[w][_]=d[v][w][_]+g*l*u[v][w][_];else{var x=function(e){return+d[v][e]+g*l*u[v][e]};o=[["m",x(0),x(1),x(2),x(3),x(4),x(5)]]}break;case"csv":if("clip-rect"==v)for(o=[],w=4;w--;)o[w]=+d[v][w]+g*l*u[v][w];break;default:var M=[][D](d[v]);for(o=[],w=f.paper.customAttributes[v].length;w--;)o[w]=+M[w]+g*l*u[v][w]}p[v]=o}f.attr(p),function(e,i,a){setTimeout(function(){t("raphael.anim.frame."+e,i,a)})}(f.id,f,n.anim)}else{if(function(e,a,n){setTimeout(function(){t("raphael.anim.frame."+a.id,a,n),t("raphael.anim.finish."+a.id,a,n),i.is(e,"function")&&e.call(a)})}(n.callback,f,n.anim),f.attr(h),li.splice(a--,1),n.repeat>1&&!n.next){for(s in h)h[C](s)&&(m[s]=n.totalOrigin[s]);n.el.attr(m),b(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&b(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}i.svg&&f&&f.paper&&f.paper.safari(),li.length&&ci(di)},ui=function(e){return e>255?255:0>e?0:e};Zt.animateWith=function(e,t,a,n,o,s){var r=this;if(r.removed)return s&&s.call(r),r;var l=a instanceof v?a:i.animation(a,n,o,s);b(l,r,l.percents[0],null,r.attr());for(var c=0,d=li.length;d>c;c++)if(li[c].anim==t&&li[c].el==e){li[d-1].start=li[c].start;break}return r},Zt.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},v.prototype.delay=function(e){var t=new v(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},v.prototype.repeat=function(e){var t=new v(this.anim,this.ms);return t.del=this.del,t.times=I.floor(B(e,0))||1,t},i.animation=function(e,t,a,n){if(e instanceof v)return e;(i.is(a,"function")||!a)&&(n=n||a||null,a=null),e=Object(e),t=+t||0;var o,s,r={};for(s in e)e[C](s)&&J(s)!=s&&J(s)+"%"!=s&&(o=!0,r[s]=e[s]);return o?(a&&(r.easing=a),n&&(r.callback=n),new v({100:r},t)):new v(e,t)},Zt.animate=function(e,t,a,n){var o=this;if(o.removed)return n&&n.call(o),o;var s=e instanceof v?e:i.animation(e,t,a,n);return b(s,o,s.percents[0],null,o.attr()),o},Zt.setTime=function(e,t){return e&&null!=t&&this.status(e,F(t,e.ms)/e.ms),this},Zt.status=function(e,t){var i,a,n=[],o=0;if(null!=t)return b(e,this,-1,F(t,1)),this;for(i=li.length;i>o;o++)if(a=li[o],a.el.id==this.id&&(!e||a.anim==e)){if(e)return a.status;n.push({anim:a.anim,status:a.status})}return e?0:n},Zt.pause=function(e){for(var i=0;i<li.length;i++)li[i].el.id!=this.id||e&&li[i].anim!=e||t("raphael.anim.pause."+this.id,this,li[i].anim)!==!1&&(li[i].paused=!0);return this},Zt.resume=function(e){for(var i=0;i<li.length;i++)if(li[i].el.id==this.id&&(!e||li[i].anim==e)){var a=li[i];t("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}return this},Zt.stop=function(e){for(var i=0;i<li.length;i++)li[i].el.id!=this.id||e&&li[i].anim!=e||t("raphael.anim.stop."+this.id,this,li[i].anim)!==!1&&li.splice(i--,1);return this},t.on("raphael.remove",w),t.on("raphael.clear",w),Zt.toString=function(){return"Raphaël’s object"};var hi=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,i=e.length;i>t;t++)!e[t]||e[t].constructor!=Zt.constructor&&e[t].constructor!=hi||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},fi=hi.prototype;fi.push=function(){for(var e,t,i=0,a=arguments.length;a>i;i++)e=arguments[i],!e||e.constructor!=Zt.constructor&&e.constructor!=hi||(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},fi.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},fi.forEach=function(e,t){for(var i=0,a=this.items.length;a>i;i++)if(e.call(t,this.items[i],i)===!1)return this;return this};for(var pi in Zt)Zt[C](pi)&&(fi[pi]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e][S](i,t)})}}(pi));return fi.attr=function(e,t){if(e&&i.is(e,G)&&i.is(e[0],"object"))for(var a=0,n=e.length;n>a;a++)this.items[a].attr(e[a]);else for(var o=0,s=this.items.length;s>o;o++)this.items[o].attr(e,t);return this},fi.clear=function(){for(;this.length;)this.pop()},fi.splice=function(e,t){e=0>e?B(this.length+e,0):e,t=B(0,F(this.length-e,t));var i,a=[],n=[],o=[];for(i=2;i<arguments.length;i++)o.push(arguments[i]);for(i=0;t>i;i++)n.push(this[e+i]);for(;i<this.length-e;i++)a.push(this[e+i]);var s=o.length;for(i=0;i<s+a.length;i++)this.items[e+i]=this[e+i]=s>i?o[i]:a[i-s];for(i=this.items.length=this.length-=t-s;this[i];)delete this[i++];return new hi(n)},fi.exclude=function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]==e)return this.splice(t,1),!0},fi.animate=function(e,t,a,n){(i.is(a,"function")||!a)&&(n=a||null);var o,s,r=this.items.length,l=r,c=this;if(!r)return this;n&&(s=function(){!--r&&n.call(c)}),a=i.is(a,X)?a:s;var d=i.animation(e,t,a,s);for(o=this.items[--l].animate(d);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,d,d),this.items[l]&&!this.items[l].removed||r--;return this},fi.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},fi.getBBox=function(){for(var e=[],t=[],i=[],a=[],n=this.items.length;n--;)if(!this.items[n].removed){var o=this.items[n].getBBox();e.push(o.x),t.push(o.y),i.push(o.x+o.width),a.push(o.y+o.height)}return e=F[S](0,e),t=F[S](0,t),i=B[S](0,i),a=B[S](0,a),{x:e,y:t,x2:i,y2:a,width:i-e,height:a-t}},fi.clone=function(e){e=this.paper.set();for(var t=0,i=this.items.length;i>t;t++)e.push(this.items[t].clone());return e},fi.toString=function(){return"Raphaël‘s set"},fi.glow=function(e){var t=this.paper.set();return this.forEach(function(i){var a=i.glow(e);null!=a&&a.forEach(function(e){t.push(e)})}),t},fi.isPointInside=function(e,t){var i=!1;return this.forEach(function(a){return a.isPointInside(e,t)?(console.log("runned"),i=!0,!1):void 0}),i},i.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},i=e.face["font-family"];for(var a in e.face)e.face[C](a)&&(t.face[a]=e.face[a]);if(this.fonts[i]?this.fonts[i].push(t):this.fonts[i]=[t],!e.svg){t.face["units-per-em"]=et(e.face["units-per-em"],10);for(var n in e.glyphs)if(e.glyphs[C](n)){var o=e.glyphs[n];if(t.glyphs[n]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},o.k)for(var s in o.k)o[C](s)&&(t.glyphs[n].k[s]=o.k[s])}}return e},_.getFont=function(e,t,a,n){if(n=n||"normal",a=a||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,i.fonts){var o=i.fonts[e];if(!o){var s=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var r in i.fonts)if(i.fonts[C](r)&&s.test(r)){o=i.fonts[r];break}}var l;if(o)for(var c=0,d=o.length;d>c&&(l=o[c],l.face["font-weight"]!=t||l.face["font-style"]!=a&&l.face["font-style"]||l.face["font-stretch"]!=n);c++);return l}},_.print=function(e,t,a,n,o,s,r,l){s=s||"middle",r=B(F(r||0,1),-1),l=B(F(l||1,3),1);var c,d=z(a)[O](E),u=0,h=0,f=E;if(i.is(n,"string")&&(n=this.getFont(n)),n){c=(o||16)/n.face["units-per-em"];for(var p=n.face.bbox[O](k),m=+p[0],g=p[3]-p[1],v=0,b=+p[1]+("baseline"==s?g+ +n.face.descent:g/2),w=0,y=d.length;y>w;w++){if(d[w]=="\n")u=0,x=0,h=0,v+=g*l;else{var _=h&&n.glyphs[d[w-1]]||{},x=n.glyphs[d[w]];u+=h?(_.w||n.w)+(_.k&&_.k[d[w]]||0)+n.w*r:0,h=1}x&&x.d&&(f+=i.transformPath(x.d,["t",u*c,v*c,"s",c,c,m,b,"t",(e-m)/c,(t-b)/c]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},_.add=function(e){if(i.is(e,"array"))for(var t,a=this.set(),n=0,o=e.length;o>n;n++)t=e[n]||{},x[C](t.type)&&a.push(this[t.type]().attr(t));return a},i.format=function(e,t){var a=i.is(t,G)?[0][D](t):arguments;return e&&i.is(e,X)&&a.length-1&&(e=e.replace(M,function(e,t){return a[++t]==null?E:a[t]})),e||E},i.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(e,i,a){var n=a;return i.replace(t,function(e,t,i,a,o){t=t||a,n&&(t in n&&(n=n[t]),"function"==typeof n&&o&&(n=n()))}),n=(null==n||n==a?e:n)+""};return function(t,a){return String(t).replace(e,function(e,t){return i(e,t,a)})}}(),i.ninja=function(){return T.was?j.win.Raphael=T.is:delete Raphael,i},i.st=fi,function(e,t,a){function n(){/in/.test(e.readyState)?setTimeout(n,9):i.eve("raphael.DOMload")}e.readyState==null&&e.addEventListener&&(e.addEventListener(t,a=function(){e.removeEventListener(t,a,!1),e.readyState="complete"},!1),e.readyState="loading"),n()}(document,"DOMContentLoaded"),t.on("raphael.DOMload",function(){y=!0}),// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
function(){if(i.svg){var e="hasOwnProperty",t=String,a=parseFloat,n=parseInt,o=Math,s=o.max,r=o.abs,l=o.pow,c=/[, ]+/,d=i.eve,u="",h=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};i.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var g=function(a,n){if(n){"string"==typeof a&&(a=g(a));for(var o in n)n[e](o)&&(o.substring(0,6)=="xlink:"?a.setAttributeNS(f,o.substring(6),t(n[o])):a.setAttribute(o,t(n[o])))}else a=i._g.doc.createElementNS("http://www.w3.org/2000/svg",a),a.style&&(a.style.webkitTapHighlightColor="rgba(0,0,0,0)");return a},v=function(e,n){var c="linear",d=e.id+n,h=.5,f=.5,p=e.node,m=e.paper,v=p.style,b=i._g.doc.getElementById(d);if(!b){if(n=t(n).replace(i._radial_gradient,function(e,t,i){if(c="radial",t&&i){h=a(t),f=a(i);var n=2*(f>.5)-1;l(h-.5,2)+l(f-.5,2)>.25&&(f=o.sqrt(.25-l(h-.5,2))*n+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*n)}return u}),n=n.split(/\s*\-\s*/),"linear"==c){var w=n.shift();if(w=-a(w),isNaN(w))return null;var y=[0,0,o.cos(i.rad(w)),o.sin(i.rad(w))],_=1/(s(r(y[2]),r(y[3]))||1);y[2]*=_,y[3]*=_,y[2]<0&&(y[0]=-y[2],y[2]=0),y[3]<0&&(y[1]=-y[3],y[3]=0)}var k=i._parseDots(n);if(!k)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&d!=e.gradient.id&&(m.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){b=g(c+"Gradient",{id:d}),e.gradient=b,g(b,"radial"==c?{fx:h,fy:f}:{x1:y[0],y1:y[1],x2:y[2],y2:y[3],gradientTransform:e.matrix.invert()}),m.defs.appendChild(b);for(var x=0,M=k.length;M>x;x++)b.appendChild(g("stop",{offset:k[x].offset?k[x].offset:x?"100%":"0%","stop-color":k[x].color||"#fff"}))}}return g(p,{fill:"url(#"+d+")",opacity:1,"fill-opacity":1}),v.fill=u,v.opacity=1,v.fillOpacity=1,1},b=function(e){var t=e.getBBox(1);g(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},w=function(a,n,o){if(a.type=="path"){for(var s,r,l,c,d,h=t(n).toLowerCase().split("-"),f=a.paper,v=o?"end":"start",b=a.node,w=a.attrs,y=w["stroke-width"],_=h.length,k="classic",x=3,M=3,C=5;_--;)switch(h[_]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":k=h[_];break;case"wide":M=5;break;case"narrow":M=2;break;case"long":x=5;break;case"short":x=2}if("open"==k?(x+=2,M+=2,C+=2,l=1,c=o?4:1,d={fill:"none",stroke:w.stroke}):(c=l=x/2,d={fill:w.stroke,stroke:"none"}),a._.arrows?o?(a._.arrows.endPath&&m[a._.arrows.endPath]--,a._.arrows.endMarker&&m[a._.arrows.endMarker]--):(a._.arrows.startPath&&m[a._.arrows.startPath]--,a._.arrows.startMarker&&m[a._.arrows.startMarker]--):a._.arrows={},"none"!=k){var j="raphael-marker-"+k,T="raphael-marker-"+v+k+x+M;i._g.doc.getElementById(j)?m[j]++:(f.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:p[k],id:j})),m[j]=1);var A,S=i._g.doc.getElementById(T);S?(m[T]++,A=S.getElementsByTagName("use")[0]):(S=g(g("marker"),{id:T,markerHeight:M,markerWidth:x,orient:"auto",refX:c,refY:M/2}),A=g(g("use"),{"xlink:href":"#"+j,transform:(o?"rotate(180 "+x/2+" "+M/2+") ":u)+"scale("+x/C+","+M/C+")","stroke-width":(1/((x/C+M/C)/2)).toFixed(4)}),S.appendChild(A),f.defs.appendChild(S),m[T]=1),g(A,d);var D=l*("diamond"!=k&&"oval"!=k);o?(s=a._.arrows.startdx*y||0,r=i.getTotalLength(w.path)-D*y):(s=D*y,r=i.getTotalLength(w.path)-(a._.arrows.enddx*y||0)),d={},d["marker-"+v]="url(#"+T+")",(r||s)&&(d.d=i.getSubpath(w.path,s,r)),g(b,d),a._.arrows[v+"Path"]=j,a._.arrows[v+"Marker"]=T,a._.arrows[v+"dx"]=D,a._.arrows[v+"Type"]=k,a._.arrows[v+"String"]=n}else o?(s=a._.arrows.startdx*y||0,r=i.getTotalLength(w.path)-s):(s=0,r=i.getTotalLength(w.path)-(a._.arrows.enddx*y||0)),a._.arrows[v+"Path"]&&g(b,{d:i.getSubpath(w.path,s,r)}),delete a._.arrows[v+"Path"],delete a._.arrows[v+"Marker"],delete a._.arrows[v+"dx"],delete a._.arrows[v+"Type"],delete a._.arrows[v+"String"];for(d in m)if(m[e](d)&&!m[d]){var N=i._g.doc.getElementById(d);N&&N.parentNode.removeChild(N)}}},y={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_=function(e,i,a){if(i=y[t(i).toLowerCase()]){for(var n=e.attrs["stroke-width"]||"1",o={round:n,square:n,butt:0}[e.attrs["stroke-linecap"]||a["stroke-linecap"]]||0,s=[],r=i.length;r--;)s[r]=i[r]*n+(r%2?1:-1)*o;g(e.node,{"stroke-dasharray":s.join(",")})}},k=function(a,o){var l=a.node,d=a.attrs,h=l.style.visibility;l.style.visibility="hidden";for(var p in o)if(o[e](p)){if(!i._availableAttrs[e](p))continue;var m=o[p];switch(d[p]=m,p){case"blur":a.blur(m);break;case"href":case"title":var y=g("title"),k=i._g.doc.createTextNode(m);y.appendChild(k),l.appendChild(y);break;case"target":var x=l.parentNode;if(x.tagName.toLowerCase()!="a"){var y=g("a");x.insertBefore(y,l),y.appendChild(l),x=y}"target"==p?x.setAttributeNS(f,"show","blank"==m?"new":m):x.setAttributeNS(f,p,m);break;case"cursor":l.style.cursor=m;break;case"transform":a.transform(m);break;case"arrow-start":w(a,m);break;case"arrow-end":w(a,m,1);break;case"clip-rect":var C=t(m).split(c);if(C.length==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var j=g("clipPath"),T=g("rect");j.id=i.createUUID(),g(T,{x:C[0],y:C[1],width:C[2],height:C[3]}),j.appendChild(T),a.paper.defs.appendChild(j),g(l,{"clip-path":"url(#"+j.id+")"}),a.clip=T}if(!m){var A=l.getAttribute("clip-path");if(A){var S=i._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g,u));S&&S.parentNode.removeChild(S),g(l,{"clip-path":u}),delete a.clip}}break;case"path":a.type=="path"&&(g(l,{d:m?d.path=i._pathToAbsolute(m):"M0,0"}),a._.dirty=1,a._.arrows&&("startString"in a._.arrows&&w(a,a._.arrows.startString),"endString"in a._.arrows&&w(a,a._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,m),a._.dirty=1,!d.fx)break;p="x",m=d.x;case"x":d.fx&&(m=-d.x-(d.width||0));case"rx":if("rx"==p&&a.type=="rect")break;case"cx":l.setAttribute(p,m),a.pattern&&b(a),a._.dirty=1;break;case"height":if(l.setAttribute(p,m),a._.dirty=1,!d.fy)break;p="y",m=d.y;case"y":d.fy&&(m=-d.y-(d.height||0));case"ry":if("ry"==p&&a.type=="rect")break;case"cy":l.setAttribute(p,m),a.pattern&&b(a),a._.dirty=1;break;case"r":a.type=="rect"?g(l,{rx:m,ry:m}):l.setAttribute(p,m),a._.dirty=1;break;case"src":a.type=="image"&&l.setAttributeNS(f,"href",m);break;case"stroke-width":(a._.sx!=1||a._.sy!=1)&&(m/=s(r(a._.sx),r(a._.sy))||1),a.paper._vbSize&&(m*=a.paper._vbSize),l.setAttribute(p,m),d["stroke-dasharray"]&&_(a,d["stroke-dasharray"],o),a._.arrows&&("startString"in a._.arrows&&w(a,a._.arrows.startString),"endString"in a._.arrows&&w(a,a._.arrows.endString,1));break;case"stroke-dasharray":_(a,m,o);break;case"fill":var D=t(m).match(i._ISURL);if(D){j=g("pattern");var N=g("image");j.id=i.createUUID(),g(j,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(N,{x:0,y:0,"xlink:href":D[1]}),j.appendChild(N),function(e){i._preload(D[1],function(){var t=this.offsetWidth,i=this.offsetHeight;g(e,{width:t,height:i}),g(N,{width:t,height:i}),a.paper.safari()})}(j),a.paper.defs.appendChild(j),g(l,{fill:"url(#"+j.id+")"}),a.pattern=j,a.pattern&&b(a);break}var E=i.getRGB(m);if(E.error){if((a.type=="circle"||a.type=="ellipse"||t(m).charAt()!="r")&&v(a,m)){if("opacity"in d||"fill-opacity"in d){var L=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));if(L){var z=L.getElementsByTagName("stop");g(z[z.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=m,d.fill="none";break}}else delete o.gradient,delete d.gradient,!i.is(d.opacity,"undefined")&&i.is(o.opacity,"undefined")&&g(l,{opacity:d.opacity}),!i.is(d["fill-opacity"],"undefined")&&i.is(o["fill-opacity"],"undefined")&&g(l,{"fill-opacity":d["fill-opacity"]});E[e]("opacity")&&g(l,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case"stroke":E=i.getRGB(m),l.setAttribute(p,E.hex),"stroke"==p&&E[e]("opacity")&&g(l,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity}),"stroke"==p&&a._.arrows&&("startString"in a._.arrows&&w(a,a._.arrows.startString),"endString"in a._.arrows&&w(a,a._.arrows.endString,1));break;case"gradient":(a.type=="circle"||a.type=="ellipse"||t(m).charAt()!="r")&&v(a,m);break;case"opacity":d.gradient&&!d[e]("stroke-opacity")&&g(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(d.gradient){L=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)),L&&(z=L.getElementsByTagName("stop"),g(z[z.length-1],{"stop-opacity":m}));break}default:"font-size"==p&&(m=n(m,10)+"px");var O=p.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[O]=m,a._.dirty=1,l.setAttribute(p,m)}}M(a,o),l.style.visibility=h},x=1.2,M=function(a,o){if(a.type=="text"&&(o[e]("text")||o[e]("font")||o[e]("font-size")||o[e]("x")||o[e]("y"))){var s=a.attrs,r=a.node,l=r.firstChild?n(i._g.doc.defaultView.getComputedStyle(r.firstChild,u).getPropertyValue("font-size"),10):10;if(o[e]("text")){for(s.text=o.text;r.firstChild;)r.removeChild(r.firstChild);for(var c,d=t(o.text).split("\n"),h=[],f=0,p=d.length;p>f;f++)c=g("tspan"),f&&g(c,{dy:l*x,x:s.x}),c.appendChild(i._g.doc.createTextNode(d[f])),r.appendChild(c),h[f]=c}else for(h=r.getElementsByTagName("tspan"),f=0,p=h.length;p>f;f++)f?g(h[f],{dy:l*x,x:s.x}):g(h[0],{dy:0});g(r,{x:s.x,y:s.y}),a._.dirty=1;var m=a._getBBox(),v=s.y-(m.y+m.height/2);v&&i.is(v,"finite")&&g(h[0],{dy:v})}},C=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=i._oid++,e.raphaelid=this.id,this.matrix=i.matrix(),this.realPath=null,this.paper=t,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},j=i.el;C.prototype=j,j.constructor=C,i._engine.path=function(e,t){var i=g("path");t.canvas&&t.canvas.appendChild(i);var a=new C(i,t);return a.type="path",k(a,{fill:"none",stroke:"#000",path:e}),a},j.rotate=function(e,i,n){if(this.removed)return this;if(e=t(e).split(c),e.length-1&&(i=a(e[1]),n=a(e[2])),e=a(e[0]),null==n&&(i=n),null==i||null==n){var o=this.getBBox(1);i=o.x+o.width/2,n=o.y+o.height/2}return this.transform(this._.transform.concat([["r",e,i,n]])),this},j.scale=function(e,i,n,o){if(this.removed)return this;if(e=t(e).split(c),e.length-1&&(i=a(e[1]),n=a(e[2]),o=a(e[3])),e=a(e[0]),null==i&&(i=e),null==o&&(n=o),null==n||null==o)var s=this.getBBox(1);return n=null==n?s.x+s.width/2:n,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",e,i,n,o]])),this},j.translate=function(e,i){return this.removed?this:(e=t(e).split(c),e.length-1&&(i=a(e[1])),e=a(e[0])||0,i=+i||0,this.transform(this._.transform.concat([["t",e,i]])),this)},j.transform=function(t){var a=this._;if(null==t)return a.transform;if(i._extractTransform(this,t),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&g(this.node,{transform:this.matrix}),a.sx!=1||a.sy!=1){var n=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":n})}return this},j.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},j.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},j.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),i._tear(this,e),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var t in this)this[t]=typeof this[t]=="function"?i._removedFactory(t):null;this.removed=!0}},j._getBBox=function(){if(this.node.style.display=="none"){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(i){}finally{t=t||{}}return e&&this.hide(),t},j.attr=function(t,a){if(this.removed)return this;if(null==t){var n={};for(var o in this.attrs)this.attrs[e](o)&&(n[o]=this.attrs[o]);return n.gradient&&n.fill=="none"&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==a&&i.is(t,"string")){if("fill"==t&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if("transform"==t)return this._.transform;for(var s=t.split(c),r={},l=0,u=s.length;u>l;l++)t=s[l],r[t]=t in this.attrs?this.attrs[t]:i.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:i._availableAttrs[t];return u-1?r:r[s[0]]}if(null==a&&i.is(t,"array")){for(r={},l=0,u=t.length;u>l;l++)r[t[l]]=this.attr(t[l]);return r}if(null!=a){var h={};h[t]=a}else null!=t&&i.is(t,"object")&&(h=t);for(var f in h)d("raphael.attr."+f+"."+this.id,this,h[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&h[e](f)&&i.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(h[f]));this.attrs[f]=h[f];for(var m in p)p[e](m)&&(h[m]=p[m])}return k(this,h),this},j.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&i._tofront(this,e),this},j.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;return e.tagName.toLowerCase()=="a"?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper),this.paper,this},j.insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode.appendChild(this.node),i._insertafter(this,e,this.paper),this},j.insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;return t.parentNode.insertBefore(this.node,t),i._insertbefore(this,e,this.paper),this},j.blur=function(e){var t=this;if(0!==+e){var a=g("filter"),n=g("feGaussianBlur");t.attrs.blur=e,a.id=i.createUUID(),g(n,{stdDeviation:+e||1.5}),a.appendChild(n),t.paper.defs.appendChild(a),t._blur=a,g(t.node,{filter:"url(#"+a.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},i._engine.circle=function(e,t,i,a){var n=g("circle");e.canvas&&e.canvas.appendChild(n);var o=new C(n,e);return o.attrs={cx:t,cy:i,r:a,fill:"none",stroke:"#000"},o.type="circle",g(n,o.attrs),o},i._engine.rect=function(e,t,i,a,n,o){var s=g("rect");e.canvas&&e.canvas.appendChild(s);var r=new C(s,e);return r.attrs={x:t,y:i,width:a,height:n,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},r.type="rect",g(s,r.attrs),r},i._engine.ellipse=function(e,t,i,a,n){var o=g("ellipse");e.canvas&&e.canvas.appendChild(o);var s=new C(o,e);return s.attrs={cx:t,cy:i,rx:a,ry:n,fill:"none",stroke:"#000"},s.type="ellipse",g(o,s.attrs),s},i._engine.image=function(e,t,i,a,n,o){var s=g("image");g(s,{x:i,y:a,width:n,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(f,"href",t),e.canvas&&e.canvas.appendChild(s);var r=new C(s,e);return r.attrs={x:i,y:a,width:n,height:o,src:t},r.type="image",r},i._engine.text=function(e,t,a,n){var o=g("text");e.canvas&&e.canvas.appendChild(o);var s=new C(o,e);return s.attrs={x:t,y:a,"text-anchor":"middle",text:n,font:i._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",k(s,s.attrs),s},i._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},i._engine.create=function(){var e=i._getContainer.apply(0,arguments),t=e&&e.container,a=e.x,n=e.y,o=e.width,s=e.height;if(!t)throw new Error("SVG container not found.");var r,l=g("svg"),c="overflow:hidden;";return a=a||0,n=n||0,o=o||512,s=s||342,g(l,{height:s,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==t?(l.style.cssText=c+"position:absolute;left:"+a+"px;top:"+n+"px",i._g.doc.body.appendChild(l),r=1):(l.style.cssText=c+"position:relative",t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l)),t=new i._Paper,t.width=o,t.height=s,t.canvas=l,t.clear(),t._left=t._top=0,r&&(t.renderfix=function(){}),t.renderfix(),t},i._engine.setViewBox=function(e,t,i,a,n){d("raphael.setViewBox",this,this._viewBox,[e,t,i,a,n]);var o,r,l=s(i/this.width,a/this.height),c=this.top,u=n?"meet":"xMinYMin";for(null==e?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+h+this.height):(this._vbSize=l,o=e+h+t+h+i+h+a),g(this.canvas,{viewBox:o,preserveAspectRatio:u});l&&c;)r="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":r}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[e,t,i,a,!!n],this},i.prototype.renderfix=function(){var e,t=this.canvas,i=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(a){e=t.createSVGMatrix()}var n=-e.e%1,o=-e.f%1;(n||o)&&(n&&(this._left=(this._left+n)%1,i.left=this._left+"px"),o&&(this._top=(this._top+o)%1,i.top=this._top+"px"))},i.prototype.clear=function(){i.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(i._g.doc.createTextNode("Created with Raphaël "+i.version)),e.appendChild(this.desc),e.appendChild(this.defs=g("defs"))},i.prototype.remove=function(){d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=typeof this[e]=="function"?i._removedFactory(e):null};var T=i.st;for(var A in j)j[e](A)&&!T[e](A)&&(T[A]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e].apply(i,t)})}}(A))}}(),// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
function(){if(i.vml){var e="hasOwnProperty",t=String,a=parseFloat,n=Math,o=n.round,s=n.max,r=n.min,l=n.abs,c="fill",d=/[, ]+/,u=i.eve,h=" progid:DXImageTransform.Microsoft",f=" ",p="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,b=/-?[^,\s-]+/g,w="position:absolute;left:0;top:0;width:1px;height:1px",y=21600,_={path:1,rect:1,image:1},k={circle:1,ellipse:1},x=function(e){var a=/[ahqstv]/gi,n=i._pathToAbsolute;if(t(e).match(a)&&(n=i._path2curve),a=/[clmz]/g,n==i._pathToAbsolute&&!t(e).match(a)){var s=t(e).replace(g,function(e,t,i){var a=[],n=t.toLowerCase()=="m",s=m[t];return i.replace(b,function(e){n&&a.length==2&&(s+=a+m["m"==t?"l":"L"],a=[]),a.push(o(e*y))}),s+a});return s}var r,l,c=n(e);s=[];for(var d=0,u=c.length;u>d;d++){r=c[d],l=c[d][0].toLowerCase(),"z"==l&&(l="x");for(var h=1,v=r.length;v>h;h++)l+=o(r[h]*y)+(h!=v-1?",":p);s.push(l)}return s.join(f)},M=function(e,t,a){var n=i.matrix();return n.rotate(-e,.5,.5),{dx:n.x(t,a),dy:n.y(t,a)}},C=function(e,t,i,a,n,o){var s=e._,r=e.matrix,d=s.fillpos,u=e.node,h=u.style,p=1,m="",g=y/t,v=y/i;if(h.visibility="hidden",t&&i){if(u.coordsize=l(g)+f+l(v),h.rotation=o*(0>t*i?-1:1),o){var b=M(o,a,n);a=b.dx,n=b.dy}if(0>t&&(m+="x"),0>i&&(m+=" y")&&(p=-1),h.flip=m,u.coordorigin=a*-g+f+n*-v,d||s.fillsize){var w=u.getElementsByTagName(c);w=w&&w[0],u.removeChild(w),d&&(b=M(o,r.x(d[0],d[1]),r.y(d[0],d[1])),w.position=b.dx*p+f+b.dy*p),s.fillsize&&(w.size=s.fillsize[0]*l(t)+f+s.fillsize[1]*l(i)),u.appendChild(w)}h.visibility="visible"}};i.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var j=function(e,i,a){for(var n=t(i).toLowerCase().split("-"),o=a?"end":"start",s=n.length,r="classic",l="medium",c="medium";s--;)switch(n[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":r=n[s];break;case"wide":case"narrow":c=n[s];break;case"long":case"short":l=n[s]}var d=e.node.getElementsByTagName("stroke")[0];d[o+"arrow"]=r,d[o+"arrowlength"]=l,d[o+"arrowwidth"]=c},T=function(n,l){n.attrs=n.attrs||{};var u=n.node,h=n.attrs,m=u.style,g=_[n.type]&&(l.x!=h.x||l.y!=h.y||l.width!=h.width||l.height!=h.height||l.cx!=h.cx||l.cy!=h.cy||l.rx!=h.rx||l.ry!=h.ry||l.r!=h.r),v=k[n.type]&&(h.cx!=l.cx||h.cy!=l.cy||h.r!=l.r||h.rx!=l.rx||h.ry!=l.ry),b=n;for(var w in l)l[e](w)&&(h[w]=l[w]);if(g&&(h.path=i._getPath[n.type](n),n._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&n.blur(l.blur),(l.path&&n.type=="path"||g)&&(u.path=x(~t(h.path).toLowerCase().indexOf("r")?i._pathToAbsolute(h.path):h.path),n.type=="image"&&(n._.fillpos=[h.x,h.y],n._.fillsize=[h.width,h.height],C(n,1,1,0,0,0))),"transform"in l&&n.transform(l.transform),v){var M=+h.cx,T=+h.cy,S=+h.rx||+h.r||0,D=+h.ry||+h.r||0;u.path=i.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((M-S)*y),o((T-D)*y),o((M+S)*y),o((T+D)*y),o(M*y)),n._.dirty=1}if("clip-rect"in l){var E=t(l["clip-rect"]).split(d);if(E.length==4){E[2]=+E[2]+ +E[0],E[3]=+E[3]+ +E[1];var L=u.clipRect||i._g.doc.createElement("div"),z=L.style;z.clip=i.format("rect({1}px {2}px {3}px {0}px)",E),u.clipRect||(z.position="absolute",z.top=0,z.left=0,z.width=n.paper.width+"px",z.height=n.paper.height+"px",u.parentNode.insertBefore(L,u),L.appendChild(u),u.clipRect=L)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(n.textpath){var O=n.textpath.style;l.font&&(O.font=l.font),l["font-family"]&&(O.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(O.fontSize=l["font-size"]),l["font-weight"]&&(O.fontWeight=l["font-weight"]),l["font-style"]&&(O.fontStyle=l["font-style"])}if("arrow-start"in l&&j(b,l["arrow-start"]),"arrow-end"in l&&j(b,l["arrow-end"],1),l.opacity!=null||l["stroke-width"]!=null||l.fill!=null||l.src!=null||l.stroke!=null||l["stroke-width"]!=null||l["stroke-opacity"]!=null||l["fill-opacity"]!=null||l["stroke-dasharray"]!=null||l["stroke-miterlimit"]!=null||l["stroke-linejoin"]!=null||l["stroke-linecap"]!=null){var q=u.getElementsByTagName(c),R=!1;if(q=q&&q[0],!q&&(R=q=N(c)),n.type=="image"&&l.src&&(q.src=l.src),l.fill&&(q.on=!0),(q.on==null||l.fill=="none"||l.fill===null)&&(q.on=!1),q.on&&l.fill){var P=t(l.fill).match(i._ISURL);if(P){q.parentNode==u&&u.removeChild(q),q.rotate=!0,q.src=P[1],q.type="tile";var I=n.getBBox(1);q.position=I.x+f+I.y,n._.fillpos=[I.x,I.y],i._preload(P[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else q.color=i.getRGB(l.fill).hex,q.src=p,q.type="solid",i.getRGB(l.fill).error&&(b.type in{circle:1,ellipse:1}||t(l.fill).charAt()!="r")&&A(b,l.fill,q)&&(h.fill="none",h.gradient=l.fill,q.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var B=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+i.getRGB(l.fill).o+1||2)-1);B=r(s(B,0),1),q.opacity=B,q.src&&(q.color="none")}u.appendChild(q);var F=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],$=!1;!F&&($=F=N("stroke")),(l.stroke&&l.stroke!="none"||l["stroke-width"]||l["stroke-opacity"]!=null||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(F.on=!0),(l.stroke=="none"||l.stroke===null||F.on==null||l.stroke==0||l["stroke-width"]==0)&&(F.on=!1);var W=i.getRGB(l.stroke);F.on&&l.stroke&&(F.color=W.hex),B=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+W.o+1||2)-1);var H=(a(l["stroke-width"])||1)*.75;if(B=r(s(B,0),1),l["stroke-width"]==null&&(H=h["stroke-width"]),l["stroke-width"]&&(F.weight=H),H&&1>H&&(B*=H)&&(F.weight=1),F.opacity=B,l["stroke-linejoin"]&&(F.joinstyle=l["stroke-linejoin"]||"miter"),F.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(F.endcap=l["stroke-linecap"]=="butt"?"flat":l["stroke-linecap"]=="square"?"square":"round"),l["stroke-dasharray"]){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};F.dashstyle=U[e](l["stroke-dasharray"])?U[l["stroke-dasharray"]]:p}$&&u.appendChild(F)}if(b.type=="text"){b.paper.canvas.style.display=p;var X=b.paper.span,G=100,V=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);m=X.style,h.font&&(m.font=h.font),h["font-family"]&&(m.fontFamily=h["font-family"]),h["font-weight"]&&(m.fontWeight=h["font-weight"]),h["font-style"]&&(m.fontStyle=h["font-style"]),V=a(h["font-size"]||V&&V[0])||10,m.fontSize=V*G+"px",b.textpath.string&&(X.innerHTML=t(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=X.getBoundingClientRect();b.W=h.w=(Y.right-Y.left)/G,b.H=h.h=(Y.bottom-Y.top)/G,b.X=h.x,b.Y=h.y+b.H/2,("x"in l||"y"in l)&&(b.path.v=i.format("m{0},{1}l{2},{1}",o(h.x*y),o(h.y*y),o(h.x*y)+1));for(var K=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,Z=K.length;Z>Q;Q++)if(K[Q]in l){b._.dirty=1;break}switch(h["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},A=function(e,o,s){e.attrs=e.attrs||{};var r=(e.attrs,Math.pow),l="linear",c=".5 .5";if(e.attrs.gradient=o,o=t(o).replace(i._radial_gradient,function(e,t,i){return l="radial",t&&i&&(t=a(t),i=a(i),r(t-.5,2)+r(i-.5,2)>.25&&(i=n.sqrt(.25-r(t-.5,2))*(2*(i>.5)-1)+.5),c=t+f+i),p}),o=o.split(/\s*\-\s*/),"linear"==l){var d=o.shift();if(d=-a(d),isNaN(d))return null}var u=i._parseDots(o);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(s),s.on=!0,s.method="none",s.color=u[0].color,s.color2=u[u.length-1].color;for(var h=[],m=0,g=u.length;g>m;m++)u[m].offset&&h.push(u[m].offset+f+u[m].color);s.colors=h.length?h.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=c,s.angle=0):(s.type="gradient",s.angle=(270-d)%360),e.appendChild(s)}return 1},S=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=i._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=t,this.matrix=i.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},D=i.el;S.prototype=D,D.constructor=S,D.transform=function(e){if(null==e)return this._.transform;var a,n=this.paper._viewBoxShift,o=n?"s"+[n.scale,n.scale]+"-1-1t"+[n.dx,n.dy]:p;n&&(a=e=t(e).replace(/\.{3}|\u2026/g,this._.transform||p)),i._extractTransform(this,o+e);var s,r=this.matrix.clone(),l=this.skew,c=this.node,d=~t(this.attrs.fill).indexOf("-"),u=!t(this.attrs.fill).indexOf("url(");if(r.translate(1,1),u||d||this.type=="image")if(l.matrix="1 0 0 1",l.offset="0 0",s=r.split(),d&&s.noRotation||!s.isSimple){c.style.filter=r.toFilter();var h=this.getBBox(),m=this.getBBox(1),g=h.x-m.x,v=h.y-m.y;c.coordorigin=g*-y+f+v*-y,C(this,1,1,g,v,0)}else c.style.filter=p,C(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else c.style.filter=p,l.matrix=t(r),l.offset=r.offset();return a&&(this._.transform=a),this},D.rotate=function(e,i,n){if(this.removed)return this;if(null!=e){if(e=t(e).split(d),e.length-1&&(i=a(e[1]),n=a(e[2])),e=a(e[0]),null==n&&(i=n),null==i||null==n){var o=this.getBBox(1);i=o.x+o.width/2,n=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,i,n]])),this}},D.translate=function(e,i){return this.removed?this:(e=t(e).split(d),e.length-1&&(i=a(e[1])),e=a(e[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",e,i]])),this)},D.scale=function(e,i,n,o){if(this.removed)return this;if(e=t(e).split(d),e.length-1&&(i=a(e[1]),n=a(e[2]),o=a(e[3]),isNaN(n)&&(n=null),isNaN(o)&&(o=null)),e=a(e[0]),null==i&&(i=e),null==o&&(n=o),null==n||null==o)var s=this.getBBox(1);return n=null==n?s.x+s.width/2:n,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",e,i,n,o]])),this._.dirtyT=1,this},D.hide=function(){return!this.removed&&(this.node.style.display="none"),this},D.show=function(){return!this.removed&&(this.node.style.display=p),this},D._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},D.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),i.eve.unbind("raphael.*.*."+this.id),i._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]=typeof this[e]=="function"?i._removedFactory(e):null;this.removed=!0}},D.attr=function(t,a){if(this.removed)return this;if(null==t){var n={};for(var o in this.attrs)this.attrs[e](o)&&(n[o]=this.attrs[o]);return n.gradient&&n.fill=="none"&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==a&&i.is(t,"string")){if(t==c&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var s=t.split(d),r={},l=0,h=s.length;h>l;l++)t=s[l],r[t]=t in this.attrs?this.attrs[t]:i.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:i._availableAttrs[t];return h-1?r:r[s[0]]}if(this.attrs&&null==a&&i.is(t,"array")){for(r={},l=0,h=t.length;h>l;l++)r[t[l]]=this.attr(t[l]);return r}var f;null!=a&&(f={},f[t]=a),null==a&&i.is(t,"object")&&(f=t);for(var p in f)u("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&i.is(this.paper.customAttributes[p],"function")){var m=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var g in m)m[e](g)&&(f[g]=m[g])}f.text&&this.type=="text"&&(this.textpath.string=f.text),T(this,f)}return this},D.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&i._tofront(this,this.paper),this},D.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper)),this)},D.insertAfter=function(e){return this.removed?this:(e.constructor==i.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),i._insertafter(this,e,this.paper),this)},D.insertBefore=function(e){return this.removed?this:(e.constructor==i.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),i._insertbefore(this,e,this.paper),this)},D.blur=function(e){var t=this.node.runtimeStyle,a=t.filter;return a=a.replace(v,p),0!==+e?(this.attrs.blur=e,t.filter=a+f+h+".Blur(pixelradius="+(+e||1.5)+")",t.margin=i.format("-{0}px 0 0 -{0}px",o(+e||1.5))):(t.filter=a,t.margin=0,delete this.attrs.blur),this},i._engine.path=function(e,t){var i=N("shape");i.style.cssText=w,i.coordsize=y+f+y,i.coordorigin=t.coordorigin;var a=new S(i,t),n={fill:"none",stroke:"#000"};e&&(n.path=e),a.type="path",a.path=[],a.Path=p,T(a,n),t.canvas.appendChild(i);var o=N("skew");return o.on=!0,i.appendChild(o),a.skew=o,a.transform(p),a},i._engine.rect=function(e,t,a,n,o,s){var r=i._rectPath(t,a,n,o,s),l=e.path(r),c=l.attrs;return l.X=c.x=t,l.Y=c.y=a,l.W=c.width=n,l.H=c.height=o,c.r=s,c.path=r,l.type="rect",l},i._engine.ellipse=function(e,t,i,a,n){var o=e.path();return o.attrs,o.X=t-a,o.Y=i-n,o.W=2*a,o.H=2*n,o.type="ellipse",T(o,{cx:t,cy:i,rx:a,ry:n}),o},i._engine.circle=function(e,t,i,a){var n=e.path();return n.attrs,n.X=t-a,n.Y=i-a,n.W=n.H=2*a,n.type="circle",T(n,{cx:t,cy:i,r:a}),n},i._engine.image=function(e,t,a,n,o,s){var r=i._rectPath(a,n,o,s),l=e.path(r).attr({stroke:"none"}),d=l.attrs,u=l.node,h=u.getElementsByTagName(c)[0];return d.src=t,l.X=d.x=a,l.Y=d.y=n,l.W=d.width=o,l.H=d.height=s,d.path=r,l.type="image",h.parentNode==u&&u.removeChild(h),h.rotate=!0,h.src=t,h.type="tile",l._.fillpos=[a,n],l._.fillsize=[o,s],u.appendChild(h),C(l,1,1,0,0,0),l},i._engine.text=function(e,a,n,s){var r=N("shape"),l=N("path"),c=N("textpath");a=a||0,n=n||0,s=s||"",l.v=i.format("m{0},{1}l{2},{1}",o(a*y),o(n*y),o(a*y)+1),l.textpathok=!0,c.string=t(s),c.on=!0,r.style.cssText=w,r.coordsize=y+f+y,r.coordorigin="0 0";var d=new S(r,e),u={fill:"#000",stroke:"none",font:i._availableAttrs.font,text:s};d.shape=r,d.path=l,d.textpath=c,d.type="text",d.attrs.text=t(s),d.attrs.x=a,d.attrs.y=n,d.attrs.w=1,d.attrs.h=1,T(d,u),r.appendChild(c),r.appendChild(l),e.canvas.appendChild(r);var h=N("skew");return h.on=!0,r.appendChild(h),d.skew=h,d.transform(p),d},i._engine.setSize=function(e,t){var a=this.canvas.style;return this.width=e,this.height=t,e==+e&&(e+="px"),t==+t&&(t+="px"),a.width=e,a.height=t,a.clip="rect(0 "+e+" "+t+" 0)",this._viewBox&&i._engine.setViewBox.apply(this,this._viewBox),this},i._engine.setViewBox=function(e,t,a,n,o){i.eve("raphael.setViewBox",this,this._viewBox,[e,t,a,n,o]);var r,l,c=this.width,d=this.height,u=1/s(a/c,n/d);return o&&(r=d/n,l=c/a,c>a*r&&(e-=(c-a*r)/2/r),d>n*l&&(t-=(d-n*l)/2/l)),this._viewBox=[e,t,a,n,!!o],this._viewBoxShift={dx:-e,dy:-t,scale:u},this.forEach(function(e){e.transform("...")}),this};var N;i._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),N=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(i){N=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},i._engine.initWin(i._g.win),i._engine.create=function(){var e=i._getContainer.apply(0,arguments),t=e.container,a=e.height,n=e.width,o=e.x,s=e.y;if(!t)throw new Error("VML container not found.");var r=new i._Paper,l=r.canvas=i._g.doc.createElement("div"),c=l.style;return o=o||0,s=s||0,n=n||512,a=a||342,r.width=n,r.height=a,n==+n&&(n+="px"),a==+a&&(a+="px"),r.coordsize=1e3*y+f+1e3*y,r.coordorigin="0 0",r.span=i._g.doc.createElement("span"),r.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(r.span),c.cssText=i.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,a),1==t?(i._g.doc.body.appendChild(l),c.left=o+"px",c.top=s+"px",c.position="absolute"):t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l),r.renderfix=function(){},r},i.prototype.clear=function(){i.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=i._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},i.prototype.remove=function(){i.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=typeof this[e]=="function"?i._removedFactory(e):null;return!0};var E=i.st;for(var L in D)D[e](L)&&!E[e](L)&&(E[L]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e].apply(i,t)})}}(L))}}(),T.was?j.win.Raphael=i:Raphael=i,i}),/*!
 * g.Raphael 0.51 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009-2012 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.el.popup=function(e,t,i,a){var n,o,s,r,l,c=this.paper||this[0].paper;if(c){switch(this.type){case"text":case"circle":case"ellipse":s=!0;break;default:s=!1}e=null==e?"up":e,t=t||5,n=this.getBBox(),i="number"==typeof i?i:s?n.x+n.width/2:n.x,a="number"==typeof a?a:s?n.y+n.height/2:n.y,r=Math.max(n.width/2-t,0),l=Math.max(n.height/2-t,0),this.translate(i-n.x-(s?n.width/2:0),a-n.y-(s?n.height/2:0)),n=this.getBBox();var d={up:["M",i,a,"l",-t,-t,-r,0,"a",t,t,0,0,1,-t,-t,"l",0,-n.height,"a",t,t,0,0,1,t,-t,"l",2*t+2*r,0,"a",t,t,0,0,1,t,t,"l",0,n.height,"a",t,t,0,0,1,-t,t,"l",-r,0,"z"].join(","),down:["M",i,a,"l",t,t,r,0,"a",t,t,0,0,1,t,t,"l",0,n.height,"a",t,t,0,0,1,-t,t,"l",-(2*t+2*r),0,"a",t,t,0,0,1,-t,-t,"l",0,-n.height,"a",t,t,0,0,1,t,-t,"l",r,0,"z"].join(","),left:["M",i,a,"l",-t,t,0,l,"a",t,t,0,0,1,-t,t,"l",-n.width,0,"a",t,t,0,0,1,-t,-t,"l",0,-(2*t+2*l),"a",t,t,0,0,1,t,-t,"l",n.width,0,"a",t,t,0,0,1,t,t,"l",0,l,"z"].join(","),right:["M",i,a,"l",t,-t,0,-l,"a",t,t,0,0,1,t,-t,"l",n.width,0,"a",t,t,0,0,1,t,t,"l",0,2*t+2*l,"a",t,t,0,0,1,-t,t,"l",-n.width,0,"a",t,t,0,0,1,-t,-t,"l",0,-l,"z"].join(",")};return o={up:{x:-!s*(n.width/2),y:2*-t-(s?n.height/2:n.height)},down:{x:-!s*(n.width/2),y:2*t+(s?n.height/2:n.height)},left:{x:2*-t-(s?n.width/2:n.width),y:-!s*(n.height/2)},right:{x:2*t+(s?n.width/2:n.width),y:-!s*(n.height/2)}}[e],this.translate(o.x,o.y),c.path(d[e]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])}},Raphael.el.tag=function(e,t,i,a){var n=3,o=this.paper||this[0].paper;if(o){var s,r,l,c=o.path().attr({fill:"#000",stroke:"#000"}),d=this.getBBox();switch(this.type){case"text":case"circle":case"ellipse":l=!0;break;default:l=!1}return e=e||0,i="number"==typeof i?i:l?d.x+d.width/2:d.x,a="number"==typeof a?a:l?d.y+d.height/2:d.y,t=null==t?5:t,r=.5522*t,d.height>=2*t?c.attr({path:["M",i,a+t,"a",t,t,0,1,1,0,2*-t,t,t,0,1,1,0,2*t,"m",0,2*-t-n,"a",t+n,t+n,0,1,0,0,2*(t+n),"L",i+t+n,a+d.height/2+n,"l",d.width+2*n,0,0,-d.height-2*n,-d.width-2*n,0,"L",i,a-t-n].join(",")}):(s=Math.sqrt(Math.pow(t+n,2)-Math.pow(d.height/2+n,2)),c.attr({path:["M",i,a+t,"c",-r,0,-t,r-t,-t,-t,0,-r,t-r,-t,t,-t,r,0,t,t-r,t,t,0,r,r-t,t,-t,t,"M",i+s,a-d.height/2-n,"a",t+n,t+n,0,1,0,0,d.height+2*n,"l",t+n-s+d.width+2*n,0,0,-d.height-2*n,"L",i+s,a-d.height/2-n].join(",")})),e=360-e,c.rotate(e,i,a),this.attrs?(this.attr(this.attrs.x?"x":"cx",i+t+n+(l?d.width/2:"text"==this.type?d.width:0)).attr("y",l?a:a-d.height/2),this.rotate(e,i,a),e>90&&270>e&&this.attr(this.attrs.x?"x":"cx",i-t-n-(l?d.width/2:d.width)).rotate(180,i,a)):e>90&&270>e?(this.translate(i-d.x-d.width-t-n,a-d.y-d.height/2),this.rotate(e-180,d.x+d.width+t+n,d.y+d.height/2)):(this.translate(i-d.x+t+n,a-d.y-d.height/2),this.rotate(e,d.x-t-n,d.y+d.height/2)),c.insertBefore(this.node?this:this[0])}},Raphael.el.drop=function(e,t,i){var a,n,o,s,r,l=this.getBBox(),c=this.paper||this[0].paper;if(c){switch(this.type){case"text":case"circle":case"ellipse":a=!0;break;default:a=!1}return e=e||0,t="number"==typeof t?t:a?l.x+l.width/2:l.x,i="number"==typeof i?i:a?l.y+l.height/2:l.y,n=Math.max(l.width,l.height)+Math.min(l.width,l.height),o=c.path(["M",t,i,"l",n,0,"A",.4*n,.4*n,0,1,0,t+.7*n,i-.7*n,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-e,t,i),e=(e+90)*Math.PI/180,s=t+n*Math.sin(e)-(a?0:l.width/2),r=i+n*Math.cos(e)-(a?0:l.height/2),this.attrs?this.attr(this.attrs.x?"x":"cx",s).attr(this.attrs.y?"y":"cy",r):this.translate(s-l.x,r-l.y),o.insertBefore(this.node?this:this[0])}},Raphael.el.flag=function(e,t,i){var a=3,n=this.paper||this[0].paper;if(n){var o,s=n.path().attr({fill:"#000",stroke:"#000"}),r=this.getBBox(),l=r.height/2;switch(this.type){case"text":case"circle":case"ellipse":o=!0;break;default:o=!1}return e=e||0,t="number"==typeof t?t:o?r.x+r.width/2:r.x,i="number"==typeof i?i:o?r.y+r.height/2:r.y,s.attr({path:["M",t,i,"l",l+a,-l-a,r.width+2*a,0,0,r.height+2*a,-r.width-2*a,0,"z"].join(",")}),e=360-e,s.rotate(e,t,i),this.attrs?(this.attr(this.attrs.x?"x":"cx",t+l+a+(o?r.width/2:"text"==this.type?r.width:0)).attr("y",o?i:i-r.height/2),this.rotate(e,t,i),e>90&&270>e&&this.attr(this.attrs.x?"x":"cx",t-l-a-(o?r.width/2:r.width)).rotate(180,t,i)):e>90&&270>e?(this.translate(t-r.x-r.width-l-a,i-r.y-r.height/2),this.rotate(e-180,r.x+r.width+l+a,r.y+r.height/2)):(this.translate(t-r.x+l+a,i-r.y-r.height/2),this.rotate(e,r.x-l-a,r.y+r.height/2)),s.insertBefore(this.node?this:this[0])}},Raphael.el.label=function(){var e=this.getBBox(),t=this.paper||this[0].paper,i=Math.min(20,e.width+10,e.height+10)/2;return t?t.rect(e.x-i/2,e.y-i/2,e.width+i,e.height+i,i).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0]):void 0},Raphael.el.blob=function(e,t,i){var a,n,o,s=this.getBBox(),r=Math.PI/180,l=this.paper||this[0].paper;if(l){switch(this.type){case"text":case"circle":case"ellipse":n=!0;break;default:n=!1}a=l.path().attr({fill:"#000",stroke:"none"}),e=(+e+1?e:45)+90,o=Math.min(s.height,s.width),t="number"==typeof t?t:n?s.x+s.width/2:s.x,i="number"==typeof i?i:n?s.y+s.height/2:s.y;var c=Math.max(s.width+o,25*o/12),d=Math.max(s.height+o,25*o/12),u=t+o*Math.sin((e-22.5)*r),h=i+o*Math.cos((e-22.5)*r),f=t+o*Math.sin((e+22.5)*r),p=i+o*Math.cos((e+22.5)*r),m=(f-u)/2,g=(p-h)/2,v=c/2,b=d/2,w=-Math.sqrt(Math.abs(v*v*b*b-v*v*g*g-b*b*m*m)/(v*v*g*g+b*b*m*m)),y=w*v*g/b+(f+u)/2,_=w*-b*m/v+(p+h)/2;return a.attr({x:y,y:_,path:["M",t,i,"L",f,p,"A",v,b,0,1,1,u,h,"z"].join(",")}),this.translate(y-s.x-s.width/2,_-s.y-s.height/2),a.insertBefore(this.node?this:this[0])}},Raphael.fn.label=function(e,t,i){var a=this.set();return i=this.text(e,t,i).attr(Raphael.g.txtattr),a.push(i.label(),i)},Raphael.fn.popup=function(e,t,i,a,n){var o=this.set();return i=this.text(e,t,i).attr(Raphael.g.txtattr),o.push(i.popup(a,n),i)},Raphael.fn.tag=function(e,t,i,a,n){var o=this.set();return i=this.text(e,t,i).attr(Raphael.g.txtattr),o.push(i.tag(a,n),i)},Raphael.fn.flag=function(e,t,i,a){var n=this.set();return i=this.text(e,t,i).attr(Raphael.g.txtattr),n.push(i.flag(a),i)},Raphael.fn.drop=function(e,t,i,a){var n=this.set();return i=this.text(e,t,i).attr(Raphael.g.txtattr),n.push(i.drop(a),i)},Raphael.fn.blob=function(e,t,i,a){var n=this.set();return i=this.text(e,t,i).attr(Raphael.g.txtattr),n.push(i.blob(a),i)},Raphael.el.lighter=function(e){e=e||2;var t=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[t[0],t[1]],t[0]=Raphael.rgb2hsb(Raphael.getRGB(t[0]).hex),t[1]=Raphael.rgb2hsb(Raphael.getRGB(t[1]).hex),t[0].b=Math.min(t[0].b*e,1),t[0].s=t[0].s/e,t[1].b=Math.min(t[1].b*e,1),t[1].s=t[1].s/e,this.attr({fill:"hsb("+[t[0].h,t[0].s,t[0].b]+")",stroke:"hsb("+[t[1].h,t[1].s,t[1].b]+")"}),this},Raphael.el.darker=function(e){e=e||2;var t=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[t[0],t[1]],t[0]=Raphael.rgb2hsb(Raphael.getRGB(t[0]).hex),t[1]=Raphael.rgb2hsb(Raphael.getRGB(t[1]).hex),t[0].s=Math.min(t[0].s*e,1),t[0].b=t[0].b/e,t[1].s=Math.min(t[1].s*e,1),t[1].b=t[1].b/e,this.attr({fill:"hsb("+[t[0].h,t[0].s,t[0].b]+")",stroke:"hsb("+[t[1].h,t[1].s,t[1].b]+")"}),this},Raphael.el.resetBrightness=function(){return this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs),this},function(){var e=["lighter","darker","resetBrightness"],t=["popup","tag","flag","label","drop","blob"];for(var i in t)(function(e){Raphael.st[e]=function(){return Raphael.el[e].apply(this,arguments)}})(t[i]);for(var i in e)(function(e){Raphael.st[e]=function(){for(var t=0;this.length>t;t++)this[t][e].apply(this[t],arguments);return this}})(e[i])}(),Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{font:"12px Arial, sans-serif",fill:"#fff"},colors:function(){for(var e=[.6,.2,.05,.1333,.75,0],t=[],i=0;10>i;i++)e.length>i?t.push("hsb("+e[i]+",.75, .75)"):t.push("hsb("+e[i-e.length]+", 1, .5)");return t}(),snapEnds:function(e,t,i){function a(e){return.25>Math.abs(e-.5)?~~e+.5:Math.round(e)}var n=e,o=t;if(n==o)return{from:n,to:o,power:0};var s=(o-n)/i,r=~~s,l=r,c=0;if(r){for(;l;)c--,l=~~(s*Math.pow(10,c))/Math.pow(10,c);c++}else{if(0!=s&&isFinite(s))for(;!r;)c=c||1,r=~~(s*Math.pow(10,c))/Math.pow(10,c),c++;else c=1;c&&c--}return o=a(t*Math.pow(10,c))/Math.pow(10,c),t>o&&(o=a((t+.5)*Math.pow(10,c))/Math.pow(10,c)),n=a((e-(c>0?0:.5))*Math.pow(10,c))/Math.pow(10,c),{from:n,to:o,power:c}},axis:function(e,t,i,a,n,o,s,r,l,c,d){c=null==c?2:c,l=l||"t",o=o||10,d=arguments[arguments.length-1];var u,h="|"==l||" "==l?["M",e+.5,t,"l",0,.001]:1==s||3==s?["M",e+.5,t,"l",0,-i]:["M",e,t+.5,"l",i,0],f=this.snapEnds(a,n,o),p=f.from,m=f.to,g=f.power,v=0,b={font:"11px 'Fontin Sans', Fontin-Sans, sans-serif"},w=d.set();u=(m-p)/o;var y=p,_=g>0?g:0;if(C=i/o,1==+s||3==+s){for(var k=t,x=(s-1?1:-1)*(c+3+!!(s-1));k>=t-i;)"-"!=l&&" "!=l&&(h=h.concat(["M",e-("+"==l||"|"==l?c:2*!(s-1)*c),k+.5,"l",2*c+1,0])),w.push(d.text(e+x,k,r&&r[v++]||(Math.round(y)==y?y:+y.toFixed(_))).attr(b).attr({"text-anchor":s-1?"start":"end"})),y+=u,k-=C;Math.round(k+C-(t-i))&&("-"!=l&&" "!=l&&(h=h.concat(["M",e-("+"==l||"|"==l?c:2*!(s-1)*c),t-i+.5,"l",2*c+1,0])),w.push(d.text(e+x,t-i,r&&r[v]||(Math.round(y)==y?y:+y.toFixed(_))).attr(b).attr({"text-anchor":s-1?"start":"end"})))}else{y=p,_=(g>0)*g,x=(s?-1:1)*(c+9+!s);for(var M=e,C=i/o,j=0,T=0;e+i>=M;){"-"!=l&&" "!=l&&(h=h.concat(["M",M+.5,t-("+"==l?c:2*!!s*c),"l",0,2*c+1])),w.push(j=d.text(M,t+x,r&&r[v++]||(Math.round(y)==y?y:+y.toFixed(_))).attr(b));var A=j.getBBox();T>=A.x-5?w.pop(w.length-1).remove():T=A.x+A.width,y+=u,M+=C}Math.round(M-C-e-i)&&("-"!=l&&" "!=l&&(h=h.concat(["M",e+i+.5,t-("+"==l?c:2*!!s*c),"l",0,2*c+1])),w.push(d.text(e+i,t+x,r&&r[v]||(Math.round(y)==y?y:+y.toFixed(_))).attr(b)))}var S=d.path(h);return S.text=w,S.all=d.set([S,w]),S.remove=function(){this.text.remove(),this.constructor.prototype.remove.call(this)},S},labelise:function(e,t,i){return e?(e+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(e,a,n){return a?(+t).toFixed(a.replace(/^#+\.?/g,"").length):n?(100*t/i).toFixed(n.replace(/^%+\.?/g,"").length)+"%":void 0}):(+t).toFixed(0)}},/*!
 * g.Raphael 0.5 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 * From: https://github.com/jhurt/g.raphael/blob/master/g.bar.js
 */
function(){function e(e,t,i,o,s,r,l,c){var d,u={round:"round",sharp:"sharp",soft:"soft",square:"square"};if(s&&!o||!s&&!i)return l?"":c.path();switch(r=u[r]||"square",o=Math.round(o),i=Math.round(i),e=Math.round(e),t=Math.round(t),r){case"round":if(s)h=~~(i/2),h>o?(h=o,d=["M",e-~~(i/2),t,"l",0,0,"a",~~(i/2),h,0,0,1,i,0,"l",0,0,"z"]):d=["M",e-h,t,"l",0,h-o,"a",h,h,0,1,1,i,0,"l",0,o-h,"z"];else{var h=~~(o/2);h>i?(h=i,d=["M",e+.5,t+.5-~~(o/2),"l",0,0,"a",h,~~(o/2),0,0,1,0,o,"l",0,0,"z"]):d=["M",e+.5,t+.5-h,"l",i-h,0,"a",h,h,0,1,1,0,o,"l",h-i,0,"z"]}break;case"sharp":if(s)f=~~(i/2),d=["M",e+f,t,"l",-i,0,0,-n(o-f,0),f,-a(f,o),f,a(f,o),f,"z"];else{var f=~~(o/2);d=["M",e,t+f,"l",0,-o,n(i-f,0),0,a(f,i),f,-a(f,i),f+(o>2*f),"z"]}break;case"square":d=s?["M",e+~~(i/2),t,"l",1-i,0,0,-o,i-1,0,"z"]:["M",e,t+~~(o/2),"l",0,-o,i,0,0,o,"z"];break;case"soft":s?(h=a(Math.round(i/5),o),d=["M",e-~~(i/2),t,"l",0,h-o,"a",h,h,0,0,1,h,-h,"l",i-2*h,0,"a",h,h,0,0,1,h,h,"l",0,o-h,"z"]):(h=a(i,Math.round(o/5)),d=["M",e+.5,t+.5-~~(o/2),"l",i-h,0,"a",h,h,0,0,1,h,h,"l",0,o-2*h,"a",h,h,0,0,1,-h,h,"l",h-i,0,"z"])}return l?d.join(","):c.path(d)}function t(t,i,a,n,o,s,r){r=r||{};var l=this,c=r.type||"square",d=parseFloat(r.gutter||"20%"),u=t.set(),h=t.set(),f=t.set(),p=t.set(),m=Math.max.apply(Math,s),g=[],v=0,b=r.colors||l.colors,w=s.length;if(Raphael.is(s[0],"array")){m=[],v=w,w=0;for(var y=s.length;y--;)h.push(t.set()),m.push(Math.max.apply(Math,s[y])),w=Math.max(w,s[y].length);if(r.stacked)for(var y=w;y--;){for(var _=0,k=s.length;k--;)_+=+s[k][y]||0;g.push(_)}for(var y=s.length;y--;)if(w>s[y].length)for(var k=w;k--;)s[y].push(0);m=Math.max.apply(Math,r.stacked?g:m)}m=r.to||m;var x=100*(n/(w*(100+d)+d)),M=x*d/100,C=null==r.vgutter?20:r.vgutter,j=[],T=i+M,A=(o-2*C)/m;r.stretch||(M=Math.round(M),x=Math.floor(x)),!r.stacked&&(x/=v||1);for(var y=0;w>y;y++){j=[];for(var k=0;(v||1)>k;k++){var S=Math.round((v?s[k][y]:s[y])*A),D=a+o-C-S,N=e(Math.round(T+x/2),D+S,x,S,!0,c,null,t).attr({stroke:"none",fill:b[v?k:y]});v?h[k].push(N):h.push(N),N.y=D,N.x=Math.round(T+x/2),N.w=x,N.h=S,N.value=v?s[k][y]:s[y],r.stacked?j.push(N):T+=x}if(r.stacked){var E;p.push(E=t.rect(j[0].x-j[0].w/2,a,x,o).attr(l.shim)),E.bars=t.set();for(var L=0,z=j.length;z--;)j[z].toFront();for(var z=0,O=j.length;O>z;z++){var q,N=j[z],S=(L+N.value)*A,R=e(N.x,a+o-C-.5*!!L,x,S,!0,c,1,t);E.bars.push(N),L&&N.attr({path:R}),N.h=S,N.y=a+o-C-.5*!!L-S,f.push(q=t.rect(N.x-N.w/2,N.y,x,N.value*A).attr(l.shim)),q.bar=N,q.value=N.value,L+=N.value}T+=x}T+=M}if(p.toFront(),T=i+M,!r.stacked)for(var y=0;w>y;y++){for(var k=0;(v||1)>k;k++){var q;f.push(q=t.rect(Math.round(T),a+C,x,o-C).attr(l.shim)),q.bar=v?h[k][y]:h[y],q.value=q.bar.value,T+=x}T+=M}return u.label=function(e,i){e=e||[],this.labels=t.set();var n,c=-1/0;if(r.stacked){for(var d=0;w>d;d++)for(var u=0,p=0;(v||1)>p;p++)if(u+=v?s[p][d]:s[d],p==v-1){var g=l.labelise(e[d],u,m);n=t.text(h[p][d].x,a+o-C/2,g).attr(l.txtattr).attr({fill:r.legendcolor||"#000","text-anchor":"start"}).insertBefore(f[d*(v||1)+p]);var b=n.getBBox();c>b.x-7?n.remove():(this.labels.push(n),c=b.x+b.width)}}else for(var d=0;w>d;d++)for(var p=0;(v||1)>p;p++){var g=l.labelise(v?e[p]&&e[p][d]:e[d],v?s[p][d]:s[d],m);n=t.text(h[p][d].x-x/2,i?a+o-C/2:h[p][d].y-10,g).attr(l.txtattr).attr({fill:r.legendcolor||"#000","text-anchor":"start"}).insertBefore(f[d*(v||1)+p]);var b=n.getBBox();n.translate((x-b.width)/2,1),c>b.x-7?n.remove():(this.labels.push(n),c=b.x+b.width)}return this},u.hover=function(e,t){return p.hide(),f.show(),f.mouseover(e).mouseout(t),this},u.hoverColumn=function(e,t){return f.hide(),p.show(),t=t||function(){},p.mouseover(e).mouseout(t),this},u.click=function(e){return p.hide(),f.show(),f.click(e),this},u.each=function(e){if(!Raphael.is(e,"function"))return this;for(var t=f.length;t--;)e.call(f[t]);return this},u.eachColumn=function(e){if(!Raphael.is(e,"function"))return this;for(var t=p.length;t--;)e.call(p[t]);return this},u.clickColumn=function(e){return f.hide(),p.show(),p.click(e),this},u.push(h,f,p),u.bars=h,u.covers=f,u}function i(t,i,a,n,o,s,r){r=r||{};var l=this,c=r.type||"square",d=parseFloat(r.gutter||"20%"),u=t.set(),h=t.set(),f=t.set(),p=t.set(),m=Math.max.apply(Math,s),g=[],v=0,b=r.colors||l.colors,w=s.length;if(Raphael.is(s[0],"array")){m=[],v=w,w=0;for(var y=s.length;y--;)h.push(t.set()),m.push(Math.max.apply(Math,s[y])),w=Math.max(w,s[y].length);if(r.stacked)for(var y=w;y--;){for(var _=0,k=s.length;k--;)_+=+s[k][y]||0;g.push(_)}for(var y=s.length;y--;)if(w>s[y].length)for(var k=w;k--;)s[y].push(0);m=Math.max.apply(Math,r.stacked?g:m)}m=r.to||m;var x=Math.floor(100*(o/(w*(100+d)+d))),M=Math.floor(x*d/100),C=[],j=a+M,T=(n-1)/m;!r.stacked&&(x/=v||1);for(var y=0;w>y;y++){C=[];for(var k=0;(v||1)>k;k++){var A=v?s[k][y]:s[y],S=e(i,j+x/2,Math.round(A*T),x-1,!1,c,null,t).attr({stroke:"none",fill:b[v?k:y]});v?h[k].push(S):h.push(S),S.x=i+Math.round(A*T),S.y=j+x/2,S.w=Math.round(A*T),S.h=x,S.value=+A,r.stacked?C.push(S):j+=x}if(r.stacked){var D=t.rect(i,C[0].y-C[0].h/2,n,x).attr(l.shim);p.push(D),D.bars=t.set();for(var N=0,E=C.length;E--;)C[E].toFront();for(var E=0,L=C.length;L>E;E++){var z,S=C[E],A=Math.round((N+S.value)*T),O=e(i,S.y,A,x-1,!1,c,1,t);D.bars.push(S),N&&S.attr({path:O}),S.w=A,S.x=i+A,f.push(z=t.rect(i+N*T,S.y-S.h/2,S.value*T,x).attr(l.shim)),z.bar=S,N+=S.value}j+=x}j+=M}if(p.toFront(),j=a+M,!r.stacked)for(var y=0;w>y;y++){for(var k=0;(v||1)>k;k++){var z=t.rect(i,j,n,x).attr(l.shim);f.push(z),z.bar=v?h[k][y]:h[y],z.value=z.bar.value,j+=x}j+=M}return u.label=function(e,a){e=e||[],this.labels=t.set();for(var n=0;w>n;n++)for(var o=0;v>o;o++){var c,d=l.labelise(v?e[o]&&e[o][n]:e[n],v?s[o][n]:s[n],m),u=a?h[o][n].x-x/2+3:i+5;this.labels.push(c=t.text(u,h[o][n].y,d).attr(l.txtattr).attr({fill:r.legendcolor||"#000","text-anchor":"start"}).insertBefore(f[0])),i+5>c.getBBox().x?c.attr({x:i+5,"text-anchor":"start"}):h[o][n].label=c}return this},u.hover=function(e,t){return p.hide(),f.show(),t=t||function(){},f.mouseover(e).mouseout(t),this},u.hoverColumn=function(e,t){return f.hide(),p.show(),t=t||function(){},p.mouseover(e).mouseout(t),this},u.each=function(e){if(!Raphael.is(e,"function"))return this;for(var t=f.length;t--;)e.call(f[t]);return this},u.eachColumn=function(e){if(!Raphael.is(e,"function"))return this;for(var t=p.length;t--;)e.call(p[t]);return this},u.click=function(e){return p.hide(),f.show(),f.click(e),this},u.clickColumn=function(e){return f.hide(),p.show(),p.click(e),this},u.push(h,f,p),u.bars=h,u.covers=f,u}var a=Math.min,n=Math.max,o=function(){};o.prototype=Raphael.g,i.prototype=t.prototype=new o,Raphael.fn.hbarchart=function(e,t,a,n,o,s){return new i(this,e,t,a,n,o,s)},Raphael.fn.barchart=function(e,i,a,n,o,s){return new t(this,e,i,a,n,o,s)}}(),function(){var e;e=function(){function e(e,t){this.element=e,this.options=t,this.preparedCommits={},this.mtime=0,this.mspace=0,this.parents={},this.colors=["#000"],this.offsetX=120,this.offsetY=20,this.unitTime=30,this.unitSpace=10,this.prev_start=-1,this.load()}return e.prototype.load=function(){return $.ajax({url:this.options.url,method:"get",dataType:"json",success:$.proxy(function(e){return $(".loading",this.element).hide(),this.prepareData(e.days,e.commits),this.buildGraph()},this)})},e.prototype.prepareData=function(e,t){var i,a,n,o,s,r;for(this.days=e,this.commits=t,this.collectParents(),this.graphHeight=$(this.element).height(),this.graphWidth=$(this.element).width(),a=Math.max(this.graphHeight,this.offsetY+this.unitTime*this.mtime+150),n=Math.max(this.graphWidth,this.offsetX+this.unitSpace*this.mspace+300),this.r=Raphael(this.element.get(0),n,a),this.top=this.r.set(),this.barHeight=Math.max(this.graphHeight,this.unitTime*this.days.length+320),r=this.commits,o=0,s=r.length;s>o;o++)i=r[o],i.id in this.parents&&(i.isParent=!0),this.preparedCommits[i.id]=i,this.markCommit(i);return this.collectColors()},e.prototype.collectParents=function(){var e,t,i,a,n,o;for(n=this.commits,o=[],i=0,a=n.length;a>i;i++)e=n[i],this.mtime=Math.max(this.mtime,e.time),this.mspace=Math.max(this.mspace,e.space),o.push(function(){var i,a,n,o;for(n=e.parents,o=[],i=0,a=n.length;a>i;i++)t=n[i],this.parents[t[0]]=!0,o.push(this.mspace=Math.max(this.mspace,t[1]));return o}.call(this));return o},e.prototype.collectColors=function(){var e,t;for(e=0,t=[];e<this.mspace;)this.colors.push(Raphael.getColor(.8)),Raphael.getColor(),Raphael.getColor(),t.push(e++);return t},e.prototype.buildGraph=function(){var e,t,i,a,n,o,s,r;for(n=this.r,e=0,t="",n.rect(0,0,26,this.barHeight).attr({fill:"#222"}),n.rect(26,0,20,this.barHeight).attr({fill:"#444"}),r=this.days,a=o=0,s=r.length;s>o;a=++o)i=r[a],e!==i[0]&&(n.text(36,this.offsetY+this.unitTime*a,i[0]).attr({font:"12px Monaco, monospace",fill:"#DDD"}),e=i[0]),t!==i[1]&&(n.text(13,this.offsetY+this.unitTime*a,i[1]).attr({font:"12px Monaco, monospace",fill:"#EEE"}),t=i[1]);return this.renderPartialGraph(),this.bindEvents()},e.prototype.renderPartialGraph=function(){var e,t,i,a,n,o;if(a=Math.floor((this.element.scrollTop()-this.offsetY)/this.unitTime)-10,0>a&&(a=0),t=a+40,this.commits.length<t&&(t=this.commits.length),this.prev_start===-1||Math.abs(this.prev_start-a)>10){for(i=a,this.prev_start=a;t>i;)e=this.commits[i],i+=1,e.hasDrawn!==!0&&(n=this.offsetX+this.unitSpace*(this.mspace-e.space),o=this.offsetY+this.unitTime*e.time,this.drawDot(n,o,e),this.drawLines(n,o,e),this.appendLabel(n,o,e),this.appendAnchor(n,o,e),e.hasDrawn=!0);return this.top.toFront()}},e.prototype.bindEvents=function(){var e,t,i=this;return e={},t=this.element,$(t).scroll(function(){return i.renderPartialGraph()}),$(window).on({keydown:function(e){return e.keyCode===37&&t.scrollLeft(t.scrollLeft()-50),e.keyCode===38&&t.scrollTop(t.scrollTop()-50),e.keyCode===39&&t.scrollLeft(t.scrollLeft()+50),e.keyCode===40&&t.scrollTop(t.scrollTop()+50),i.renderPartialGraph()}})},e.prototype.appendLabel=function(e,t,i){var a,n,o,s,r,l,c;if(i.refs)return n=this.r,s=i.refs,s.length>17&&(s=s.substr(0,15)+"…"),r=n.text(e+4,t,s).attr({"text-anchor":"start",font:"10px Monaco, monospace",fill:"#FFF",title:i.refs}),l=r.getBBox(),o=n.rect(e,t-7,l.width+5,l.height+5,4).attr({fill:"#000","fill-opacity":.5,stroke:"none"}),c=n.path(["M",e-5,t,"L",e-15,t-4,"L",e-15,t+4,"Z"]).attr({fill:"#000","fill-opacity":.5,stroke:"none"}),a=n.set(o,r),a.transform(["t",-o.getBBox().width-15,0]),r.toFront()},e.prototype.appendAnchor=function(e,t,i){var a,n,o,s;return o=this.r,s=this.top,n=this.options,a=o.circle(e,t,10).attr({fill:"#000",opacity:0,cursor:"pointer"}).click(function(){return window.open(n.commit_url.replace("%s",i.id),"_blank")}).hover(function(){return this.tooltip=o.commitTooltip(e+5,t,i),s.push(this.tooltip.insertBefore(this))},function(){return this.tooltip&&this.tooltip.remove()&&delete this.tooltip}),s.push(a)},e.prototype.drawDot=function(e,t,i){var a,n,o;return n=this.r,n.circle(e,t,3).attr({fill:this.colors[i.space],stroke:"none"}),o=i.author.icon,o.indexOf("no_portrait.png#")===0&&(a=o.replace(/^.*#/,""),o=LetterAvatar(a,20)),n.image(o,this.offsetX+this.unitSpace*this.mspace+10,t-10,20,20),n.text(this.offsetX+this.unitSpace*this.mspace+35,t,i.message.split("\n")[0]).attr({"text-anchor":"start",font:"14px Monaco, monospace"})},e.prototype.drawLines=function(e,t,i){var a,n,o,s,r,l,c,d,u,h,f,p,m,g,v;for(h=this.r,g=i.parents,v=[],o=p=0,m=g.length;m>p;o=++p)r=g[o],l=this.preparedCommits[r[0]],u=this.offsetY+this.unitTime*l.time,c=this.offsetX+this.unitSpace*(this.mspace-l.space),d=this.offsetX+this.unitSpace*(this.mspace-r[1]),n=l.space<=i.space?this.colors[i.space]:this.colors[l.space],r[1]===i.space?(s=[0,5],a="l-2,5,4,0,-2,-5,0,5"):r[1]<i.space?(s=[3,3],a="l5,0,-2,4,-3,-4,4,2"):(s=[-3,3],a="l-5,0,2,4,3,-4,-4,2"),f=["M",e+s[0],t+s[1]],o>0&&f.push(a),(i.space!==l.space||i.space!==r[1])&&f.push("L",d,t+10,"L",d,u-5),f.push("L",c,u),v.push(h.path(f).attr({stroke:n,"stroke-width":2}));return v},e.prototype.markCommit=function(e){var t,i,a;return e.id===this.options.commit_id?(t=this.r,i=this.offsetX+this.unitSpace*(this.mspace-e.space),a=this.offsetY+this.unitTime*e.time,t.path(["M",i+5,a,"L",i+15,a+4,"L",i+15,a-4,"Z"]).attr({fill:"#F00",stroke:"none"}),this.element.scrollTop(a-this.graphHeight/2)):void 0},e}(),Raphael.prototype.commitTooltip=function(e,t,i){var a,n,o,s,r,l,c,d,u;return n=300,a=200,o=this.image(i.author.icon,e,t,20,20),l=this.text(e+25,t+10,i.author.name),s=this.text(e,t+35,i.id),r=this.text(e,t+50,i.message),d=this.set(o,l,s,r).attr({"text-anchor":"start",font:"12px Monaco, monospace"}),l.attr({font:"14px Arial","font-weight":"bold"}),s.attr({fill:"#AAA"}),this.textWrap(r,n-50),c=this.rect(e-10,t-10,n,100,4).attr({fill:"#FFF",stroke:"#000","stroke-linecap":"round","stroke-width":2}),u=this.set(c,d),c.attr({height:u.getBBox().height+10,width:u.getBBox().width+10}),u.transform(["t",20,20]),u},Raphael.prototype.textWrap=function(e,t){var i,a,n,o,s,r,l,c,d,u,h;for(n=e.attr("text"),i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e.attr({text:i}),s=e.getBBox().width/i.length,e.attr({text:n}),c=n.split(" "),d=0,r=[],u=0,h=c.length;h>u;u++)l=c[u],d+l.length*s>t&&(r.push("\n"),d=0),d+=l.length*s,r.push(l+" ");return e.attr({text:r.join("")}),a=e.getBBox(),o=Math.abs(a.y2)-Math.abs(a.y)+1,e.attr({y:a.y+o})},this.BranchGraph=e}.call(this),/*!
 * # Semantic UI 1.12.3 - Sticky
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2014 Contributorss
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,i,a){"use strict";e.fn.sticky=function(i){var n,o=e(this),s=o.selector||"",r=(new Date).getTime(),l=[],c=arguments[0],d="string"==typeof c,u=[].slice.call(arguments,1);return o.each(function(){var o,h,f,p=e.isPlainObject(i)?e.extend(!0,{},e.fn.sticky.settings,i):e.extend({},e.fn.sticky.settings),m=p.className,g=p.namespace,v=p.error,b="."+g,w="module-"+g,y=e(this),_=e(t),k=y.offsetParent(),x=e(p.scrollContext),M=(y.selector||"",y.data(w)),C=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},j=this;f={initialize:function(){f.determineContext(),f.verbose("Initializing sticky",p,k),f.save.positions(),f.checkErrors(),f.bind.events(),p.observeChanges&&f.observeChanges(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),M=f,y.data(w,f)},destroy:function(){f.verbose("Destroying previous instance"),f.reset(),h&&h.disconnect(),_.off("load"+b,f.event.load).off("resize"+b,f.event.resize),x.off("scrollchange"+b,f.event.scrollchange),y.removeData(w)},observeChanges:function(){var e=o[0];"MutationObserver"in t&&(h=new MutationObserver(function(){clearTimeout(f.timer),f.timer=setTimeout(function(){f.verbose("DOM tree modified, updating sticky menu"),f.refresh()},100)}),h.observe(j,{childList:!0,subtree:!0}),h.observe(e,{childList:!0,subtree:!0}),f.debug("Setting up mutation observer",h))},determineContext:function(){return o=p.context?e(p.context):k,0===o.length?void f.error(v.invalidContext,p.context,y):void 0},checkErrors:function(){return f.is.hidden()&&f.error(v.visible,y),f.cache.element.height>f.cache.context.height?(f.reset(),void f.error(v.elementSize,y)):void 0},bind:{events:function(){_.on("load"+b,f.event.load).on("resize"+b,f.event.resize),x.off("scroll"+b).on("scroll"+b,f.event.scroll).on("scrollchange"+b,f.event.scrollchange)}},event:{load:function(){f.verbose("Page contents finished loading"),C(f.refresh)},resize:function(){f.verbose("Window resized"),C(f.refresh)},scroll:function(){C(function(){x.trigger("scrollchange"+b,x.scrollTop())})},scrollchange:function(e,t){f.stick(t),p.onScroll.call(j)}},refresh:function(e){f.reset(),e&&(k=y.offsetParent()),f.save.positions(),f.stick(),p.onReposition.call(j)},supports:{sticky:function(){var t=e("<div/>");return t.get(),t.addClass(m.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){f.lastScroll=e},positions:function(){var e={height:_.height()},t={margin:{top:parseInt(y.css("margin-top"),10),bottom:parseInt(y.css("margin-bottom"),10)},offset:y.offset(),width:y.outerWidth(),height:y.outerHeight()},i={offset:o.offset(),height:o.outerHeight(),bottomPadding:parseInt(o.css("padding-bottom"),10)};f.cache={fits:t.height<e.height,window:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:i.offset.top,height:i.height,bottomPadding:i.bottomPadding,bottom:i.offset.top+i.height-i.bottomPadding}},f.set.containerSize(),f.set.size(),f.stick(),f.debug("Caching element positions",f.cache)}},get:{direction:function(e){var t="down";return e=e||x.scrollTop(),f.lastScroll!==a&&(f.lastScroll<e?t="down":f.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||x.scrollTop(),f.lastScroll?e-f.lastScroll:0},currentElementScroll:function(){return f.is.top()?Math.abs(parseInt(y.css("top"),10))||0:Math.abs(parseInt(y.css("bottom"),10))||0},elementScroll:function(e){e=e||x.scrollTop();var t,i=f.cache.element,a=f.cache.window,n=f.get.scrollChange(e),o=i.height-a.height+p.offset,t=f.get.currentElementScroll(),s=t+n;return t=f.cache.fits||0>s?0:s>o?o:s}},remove:{offset:function(){y.css("margin-top","")}},set:{offset:function(){f.verbose("Setting offset on element",p.offset),y.css("margin-top",p.offset)},containerSize:function(){var e=k.get(0).tagName;"HTML"===e||"body"==e?k=y.offsetParent():Math.abs(k.height()-f.cache.context.height)>5&&(f.debug("Context has padding, specifying exact height for container",f.cache.context.height),k.css({height:f.cache.context.height}))},scroll:function(e){f.debug("Setting scroll on element",e),f.is.top()&&y.css("bottom","").css("top",-e),f.is.bottom()&&y.css("top","").css("bottom",e)},size:function(){0!==f.cache.element.height&&0!==f.cache.element.width&&y.css({width:f.cache.element.width,height:f.cache.element.height})}},is:{top:function(){return y.hasClass(m.top)},bottom:function(){return y.hasClass(m.bottom)},initialPosition:function(){return!f.is.fixed()&&!f.is.bound()},hidden:function(){return!y.is(":visible")},bound:function(){return y.hasClass(m.bound)},fixed:function(){return y.hasClass(m.fixed)}},stick:function(e){var t=e||x.scrollTop(),i=f.cache,a=i.fits,n=i.element,o=i.window,s=i.context,r=f.is.bottom()&&p.pushing?p.bottomOffset:p.offset,e={top:t+r,bottom:t+r+o.height},l=(f.get.direction(e.top),a?0:f.get.elementScroll(e.top)),c=!a,d=0!==n.height;f.save.lastScroll(e.top),d&&(f.is.initialPosition()?e.top>=s.bottom?(f.debug("Element bottom of container"),f.bindBottom()):e.top>=n.top&&(f.debug("Element passed, fixing element to page"),f.fixTop()):f.is.fixed()?f.is.top()?e.top<n.top?(f.debug("Fixed element reached top of container"),f.setInitialPosition()):n.height+e.top-l>s.bottom?(f.debug("Fixed element reached bottom of container"),f.bindBottom()):c&&f.set.scroll(l):f.is.bottom()&&(e.bottom-n.height<n.top?(f.debug("Bottom fixed rail has reached top of container"),f.setInitialPosition()):e.bottom>s.bottom?(f.debug("Bottom fixed rail has reached bottom of container"),f.bindBottom()):c&&f.set.scroll(l)):f.is.bottom()&&(p.pushing?f.is.bound()&&e.bottom<s.bottom&&(f.debug("Fixing bottom attached element to bottom of browser."),f.fixBottom()):f.is.bound()&&e.top<s.bottom-n.height&&(f.debug("Fixing bottom attached element to top of browser."),f.fixTop())))},bindTop:function(){f.debug("Binding element to top of parent container"),f.remove.offset(),y.css("left","").css("top","").css("margin-bottom","").removeClass(m.fixed).removeClass(m.bottom).addClass(m.bound).addClass(m.top),p.onTop.call(j),p.onUnstick.call(j)},bindBottom:function(){f.debug("Binding element to bottom of parent container"),f.remove.offset(),y.css("left","").css("top","").css("margin-bottom",f.cache.context.bottomPadding).removeClass(m.fixed).removeClass(m.top).addClass(m.bound).addClass(m.bottom),p.onBottom.call(j),p.onUnstick.call(j)},setInitialPosition:function(){f.unfix(),f.unbind()},fixTop:function(){f.debug("Fixing element to top of page"),f.set.offset(),y.css("left",f.cache.element.left).css("bottom","").removeClass(m.bound).removeClass(m.bottom).addClass(m.fixed).addClass(m.top),p.onStick.call(j)},fixBottom:function(){f.debug("Sticking element to bottom of page"),f.set.offset(),y.css("left",f.cache.element.left).css("bottom","").removeClass(m.bound).removeClass(m.top).addClass(m.fixed).addClass(m.bottom),p.onStick.call(j)},unbind:function(){f.debug("Removing absolute position on element"),f.remove.offset(),y.removeClass(m.bound).removeClass(m.top).removeClass(m.bottom)},unfix:function(){f.debug("Removing fixed position on element"),f.remove.offset(),y.removeClass(m.fixed).removeClass(m.top).removeClass(m.bottom),p.onUnstick.call(j)},reset:function(){f.debug("Reseting elements position"),f.unbind(),f.unfix(),f.resetCSS(),f.remove.offset()},resetCSS:function(){y.css({width:"",height:""}),k.css({height:""})},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(i===a)return p[t];p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(i===a)return f[t];f[t]=i}},debug:function(){p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments)},performance:{log:function(e){var t,i,a;p.performance&&(t=(new Date).getTime(),a=r||t,i=t-a,r=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":i})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,0)},display:function(){var t=p.name+":",i=0;r=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",s&&(t+=" '"+s+"'"),(console.group!==a||console.table!==a)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,o){var s,r,l,c=M;return i=i||u,o=j||o,"string"==typeof t&&c!==a&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(i,n){var o=i!=s?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[o])&&i!=s)c=c[o];else{if(c[o]!==a)return r=c[o],!1;if(!e.isPlainObject(c[n])||i==s)return c[n]!==a?(r=c[n],!1):!1;c=c[n]}})),e.isFunction(r)?l=r.apply(o,i):r!==a&&(l=r),e.isArray(n)?n.push(l):n!==a?n=[n,l]:l!==a&&(n=l),r}},d?(M===a&&f.initialize(),f.invoke(c)):(M!==a&&M.invoke("destroy"),f.initialize())}),n!==a?n:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",debug:!1,verbose:!1,performance:!1,pushing:!1,context:!1,scrollContext:t,offset:0,bottomOffset:0,observeChanges:!0,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(jQuery,window,document),function(){$(function(){var e,t,i,a,n,o,s,r,l,c,d,u,h,f,p;s=1,r=50,f=5,this.title_fork_url="",this.title_project_path="",this.title_post_url="",this.title_p_name="",this.title_p_id="",this.title_description="",this.title_form_authenticity_token="",e=$("#btn-fetch-code").popup({position:"right center"}),t=$("#btn-sync-from-github").popup({position:"right center"}),i=$("#modal-sync-from-github"),a=$("#modal-sync-from-origin"),o=$(".git-project-title"),$("#project-language").popup({position:"right center"}),o.find(".license.label").popup({position:"right center"}),o.children(".iconfont").popup({position:"right center"}),o.find(".project-title .iconfont").popup({position:"right center"}),n=o.find(".git-project-recommend-badge"),n.length>0&&n.popup({position:"right center",content:n.attr("title")});try{$(".author").length===1?(d=$.trim($(".author").attr("href"))+"/"+title_project_path+"/check_fetch",p=$.trim($(".author").attr("href"))+"/projects"):$(".author").length>1&&(d=$.trim($(".author").eq(0).attr("href"))+"/"+title_project_path+"/check_fetch",p=$.trim($(".author").eq(0).attr("href"))+"/projects")}catch(m){return h=m,void 0}return u=function(i,a,n){var o,s,r;return null==a&&(a=!0),null==n&&(n=""),a?(gon.wait_fetch=!0,r=!0,o=t.find("i"),i===this.title_import_url||i===p?(r=!1,o=t.find("i")):o=e,o.removeClass("refresh").addClass("loading spinner"),e.attr("title","项目正在后台同步中，同步完成将自动刷新界面，请稍等..."),e.popup({position:"right center"}),l(r),void 0):(s=void 0,s=i===this.title_import_url||i===p?$(".remote-message .popup > .content"):$(".fork-message .popup > .content"),void 0!==n&&""!==n?s.text(n):s.text("由于队列已满,或者其他错误,暂无法拉取代码"),void 0)},l=function(e){e?setTimeout(function(){return $.ajax({type:"GET",url:d,dataType:"json",success:function(t){return t.status===1?($("#fetch-ok").fadeIn(),location.reload(!0)):c(e)}})},5e3):setTimeout(function(){return $.ajax({type:"GET",url:d,dataType:"json",success:function(t){return t.status===1?($("#fetch-ok").fadeIn(),location.reload(!0)):c(e)}})},5e3)},c=function(e){e?setTimeout(function(){return r>s?(s+=1,$.ajax({type:"GET",url:d,dataType:"json",success:function(t){return t.status===1?($("#fetch-ok").fadeIn(),location.reload(!0)):c(e)},error:function(){return c(e)}})):void 0},5e3):setTimeout(function(){return r>s?(s+=1,$.ajax({type:"GET",url:d,dataType:"json",success:function(t){return t.status===1?($("#fetch-ok").fadeIn(),location.reload(!0)):c(e)},error:function(){return c(e)}})):void 0},5e3)},$("#write-cloneurl-message button").click(function(){var e,t;return e=$("#write-cloneurl-message #import_url").val(),t=$("#write-cloneurl-message span.message"),e.indexOf("http")===-1?(t.html(" * 必须是http/https的clone地址"),void 0):e.indexOf(title_project_path)===-1?(t.html(" * 这似乎并不是该仓库的clone地址"),void 0):($("#write-cloneurl-message i.refresh").show(),$.post(post_url,{import_url:e},function(){var a;return t.html("操作成功."),a=e,$("#write-cloneurl-message").hide(),i.modal("show")}))}),t.on("click",function(){return gon.wait_fetch===void 0||gon.wait_fetch!==!0?"false"===import_url?($("#write-cloneurl-message").show(),void 0):(a.modal("hide"),i.modal("show")):void 0}),i.find(".button.ok").on("click",function(){var e;return e=t.find("i"),$.ajax({type:"POST",url:p,timeout:12e4,dataType:"json",data:{"project[id]":title_p_id,"project[name]":title_p_name,"project[description]":title_description,"private":0,"project[import_url]":title_import_url,authenticity_token:title_form_authenticity_token,ignore:"no",license:"no",imported:1},beforeSend:function(){return e.css("color",""),e.addClass("loading spinner").removeClass("refresh")},success:function(t){return t.status===0?(t.message!==void 0&&t.message!==""&&($("#import-result-message .status-message").text(t.message),$("#import-result-message").fadeIn(),setTimeout(function(){return $("#import-result-message").fadeOut()},2e3)),u(title_import_url,!1,t.message),e.removeClass("loading spinner").addClass("refresh")):(u(title_import_url),$("#new_file_bread").on("click",function(e){return e.preventDefault(),alert("项目正在后台处理中,请稍后执行此功能"),!1}))}})}),e.click(function(){(gon.wait_fetch===void 0||gon.wait_fetch!==!0)&&(i.modal("hide"),a.modal("show"))}),a.find(".button.ok").on("click",function(){$.ajax({type:"POST",url:title_fork_url,dataType:"json",data:{fetch_code:1},beforeSend:function(){return e.css("color",""),a.modal("hide"),e.addClass("loading spinner").removeClass("refresh")},success:function(t){return t.status===0?(t.message!==void 0&&t.message!==""&&($("#import-result-message .status-title").text("提示"),$("#import-result-message .status-message").text(t.message),$("#import-result-message").fadeIn(),setTimeout(function(){return $("#import-result-message").fadeOut()},2e3)),u(title_fork_url,!1,t.message),e.removeClass("loading spinner").addClass("refresh")):u(title_fork_url)}})}),gon.fetch_url!==void 0?u(gon.fetch_url):void 0})}.call(this),function(){$(function(){var e,t,i,a,n,o,s,r,l,c,d,u,h;return i=24,a=void 0,r=void 0,l=void 0,c=0,d=!1,e=$("#git-project-content"),t=$("#git-project-search-panel"),o=function(e,t,i){var a,n,o,s,r,l,c;return o=i+e.parent_path+e.name+"?oid="+e.oid,$.trim(t).length>=1?(n=e.parent_path+e.name,l=n.toLowerCase(),c=t.toLowerCase(),r=l.indexOf(c),-1===r?t=n:(a=n.substring(r,r+t.length),t=n.replace(a,"<span style='color:#01609d'>"+a+"</span>")),s="<div class='color-item'><div class='row tree-item'><div class='six wide column tree-item-file-name'><i class='icon text outline file' style='color:#4183c4'></i><span style='margin-left:12px;font-weight:normal;'><a href='"+o+"'>"+t+"</a></span></div></div></div>"):s="<div class='color-item'><div class='row tree-item'><div class='six wide column tree-item-file-name'><i class='icon text outline file' style='color:#4183c4'></i><span style='margin-left:12px;'><a href='"+o+"'>"+e.parent_path+e.name+"</a></span></div></div></div>",s},n=function(e,t,i){var a,n,s,c,d,u;if(c="<div class='row column tree-holder' id='temp-list'><div class='tree-content-holder' style='margin-top:6px;'><div class='tree-content' style='padding-top:6px;background-color:#fff '>",s="</div></div></div>",e.length===0)return c+"<div style='font-size:10px;'>找不到相关文件</div>"+s;if(e.length===1&&e[0].parent_path==="#"&&e[0].oid==="")return c+"<div style='font-size:12px;padding-left:12px;padding-top:6px;padding-bottom:6px;'>"+e[0].name+"</div>"+s;for(i=l+"/blob/"+r+"/",a="",d=0,u=e.length;u>d;d++)n=e[d],a+=o(n,t,i);return c+a+s},$("#search-name").on("keyup",function(e){var o,s,r,l,d,u,h,f,p,m;if(e.which!==13){if(e.keyCode===27)return $("#back-to-list").trigger("click");for(c=0,h=$.trim($("#search-name").val()),r=[],p=0,m=a.length;m>p;p++)o=a[p],o.type!=="tree"&&(s=o.parent_path+o.name,d=s.toLowerCase(),u=h.toLowerCase(),(d.indexOf(u)!==-1||h.length===0)&&r.length<i&&r.push(o));return $("#temp-list").remove(),t.append(n(r,h)),$(".color-item").on("click",function(){return window.location.href=$(this).find("a").attr("href")})}return f=$("#temp-list").find(".tree-item"),f.length>0?(l=$(f[c]).find("a").attr("href"),window.location.href=l):void 0}),$("#search-files").on("click",function(){return s()}),$("#back-to-list").on("click",function(){return e.show(),t.hide()}),u=function(){return h(),e.hide(),t.show(),$("#search-name").val("").focus().trigger("keyup")},h=function(){return $("#search-files-loading").toggleClass("octicon octicon-list-unordered spinner loading icon")},s=function(){var e,t;return h(),void 0!==a?(u(),void 0):(d||(d=!0,r=$(".chzn-single").children("span").text(),e=gon.http_clone,l=e.replace(".git","").replace("https://","//"),t=l+"/file_list",(void 0===r||$.trim(r)==="")&&(r="master"),$.ajax({url:t,data:{ref:r},type:"GET",success:function(e){d=!1,a=e,u()},error:function(){d=!1,h(),alert("因为网络或其他原因,文件列表获取失败,请稍后重试!")}})),void 0)}})}.call(this),/* ========================================================================
 * Bootstrap: transition.js v3.3.2
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(e.style[i]!==void 0)return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,a=this;e(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||e(a).trigger(e.support.transition.end)};return setTimeout(n,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.3.2
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var a=e(this),n=a.data("bs.carousel"),o=e.extend({},i.DEFAULTS,a.data(),"object"==typeof t&&t),s="string"==typeof t?t:o.slide;n||a.data("bs.carousel",n=new i(this,o)),"number"==typeof t?n.to(t):s?n[s]():o.interval&&n.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.2",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t),a="prev"==e&&0===i||"next"==e&&i==this.$items.length-1;if(a&&!this.options.wrap)return t;var n="prev"==e?-1:1,o=(i+n)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,a){var n=this.$element.find(".item.active"),o=a||this.getItemForDirection(t,n),s=this.interval,r="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],d=e.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(o)]);u&&u.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,n.addClass(r),o.addClass(r),n.one("bsTransitionEnd",function(){o.removeClass([t,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),s&&this.cycle(),this}};var a=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=a,this};var n=function(i){var a,n=e(this),o=e(n.attr("data-target")||(a=n.attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=e.extend({},o.data(),n.data()),r=n.attr("data-slide-to");r&&(s.interval=!1),t.call(o,s),r&&o.data("bs.carousel").to(r),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),$(function(){function e(e){e.keyCode==9&&(this.value=this.value+"	",e.returnValue=!1)}$("select.chosen").chosen(),$(".project-refs-form .group-result").each(function(e){if(0==e){var t=0;$(this).nextAll().each(function(){return $(this).hasClass("group-option")?(t+=1,void 0):!1});var i="/"+gon.user_project+"/branches/recent",a=$(this).text();$(this).text(a+"("+t+")"),$(this).append("<a href='#' style='float:right;' onclick='javascript:window.location.href=\""+i+"\"'>"+gon.manage_branch+"</a>")}else if(1==e){var n=$(this).next(),t=0;if(n.text()=="占位符看起来挺不错的"){n.css("display","none");var t=-1}$(this).nextAll().each(function(){return $(this).hasClass("group-option")?(t+=1,void 0):!1});var o="/"+gon.user_project+"/tags",a=$(this).text();$(this).text(a+"("+t+")"),$(this).append("<a href='#' style='float:right;' onclick='javascript:window.location.href=\""+o+"\"'>"+gon.manage_tag+"</a>")}}),$(".project-refs-select").trigger("chosen:updated"),$(".js-comment-form").length>0&&(Notes.initCommentForm($(".js-comment-form")),$(".js-comment-text").blur(function(){$(this).html(this.value)}).keydown(e))});